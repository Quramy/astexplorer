/*! For license information please see 49-bcbe3de6ef3eba236ab9-27.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[49,75],{"10sj":function(i,s,S){!function(){"use strict";var i=S("MipH");function isNode(i){return null!=i&&("object"==typeof i&&"string"==typeof i.type)}function Visitor(s,S){S=S||{},this.__visitor=s||this,this.__childVisitorKeys=S.childVisitorKeys?Object.assign({},i.VisitorKeys,S.childVisitorKeys):i.VisitorKeys,"iteration"===S.fallback?this.__fallback=Object.keys:"function"==typeof S.fallback&&(this.__fallback=S.fallback)}Visitor.prototype.visitChildren=function(s){var S,_,T,A,P,N,M;if(null!=s){if(S=s.type||i.Syntax.Property,!(_=this.__childVisitorKeys[S])){if(!this.__fallback)throw new Error("Unknown node type "+S+".");_=this.__fallback(s)}for(T=0,A=_.length;T<A;++T)if(M=s[_[T]])if(Array.isArray(M))for(P=0,N=M.length;P<N;++P)M[P]&&(!isNode(M[P])&&(k=S,R=_[T],k!==i.Syntax.ObjectExpression&&k!==i.Syntax.ObjectPattern||"properties"!==R)||this.visit(M[P]));else isNode(M)&&this.visit(M);var k,R}},Visitor.prototype.visit=function(s){var S;null!=s&&(S=s.type||i.Syntax.Property,this.__visitor[S]?this.__visitor[S].call(this,s):this.visitChildren(s))},s.version=S("5OMM").version,s.Visitor=Visitor,s.visit=function(i,s,S){new Visitor(s,S).visit(i)}}()},"1LFW":function(i,s,S){"use strict";class Variable{constructor(i,s){this.name=i,this.identifiers=[],this.references=[],this.defs=[],this.tainted=!1,this.stack=!0,this.scope=s}}Variable.CatchClause="CatchClause",Variable.Parameter="Parameter",Variable.FunctionName="FunctionName",Variable.ClassName="ClassName",Variable.Variable="Variable",Variable.ImportBinding="ImportBinding",Variable.ImplicitGlobalVariable="ImplicitGlobalVariable",i.exports=Variable},"1gqn":function(i,s){i.exports=function isBuffer(i){return i&&"object"==typeof i&&"function"==typeof i.copy&&"function"==typeof i.fill&&"function"==typeof i.readUInt8}},"1uSB":function(i,s,S){"use strict";S.r(s),function(i){var _;function splitNsName(i){if(":"!=i[0])return[null,i];const s=i.indexOf(":",1);if(-1==s)throw new Error(`Unsupported format "${i}" expecting ":namespace:name"`);return[i.slice(1,s),i.slice(s+1)]}function isNgContainer(i){return"ng-container"===splitNsName(i)[1]}function isNgContent(i){return"ng-content"===splitNsName(i)[1]}function isNgTemplate(i){return"ng-template"===splitNsName(i)[1]}function getNsPrefix(i){return null===i?null:splitNsName(i)[0]}function mergeNsAndName(i,s){return i?`:${i}:${s}`:s}S.d(s,"AST",(function(){return AST})),S.d(s,"ASTWithName",(function(){return ASTWithName})),S.d(s,"ASTWithSource",(function(){return ASTWithSource})),S.d(s,"AbsoluteSourceSpan",(function(){return AbsoluteSourceSpan})),S.d(s,"AotCompiler",(function(){return AotCompiler})),S.d(s,"AotSummaryResolver",(function(){return AotSummaryResolver})),S.d(s,"ArrayType",(function(){return ArrayType})),S.d(s,"AssertNotNull",(function(){return AssertNotNull})),S.d(s,"AstMemoryEfficientTransformer",(function(){return AstMemoryEfficientTransformer})),S.d(s,"AstPath",(function(){return AstPath})),S.d(s,"AstTransformer",(function(){return AstTransformer$1})),S.d(s,"AttrAst",(function(){return AttrAst})),S.d(s,"Attribute",(function(){return Attribute})),S.d(s,"Binary",(function(){return Binary})),S.d(s,"BinaryOperator",(function(){return Me})),S.d(s,"BinaryOperatorExpr",(function(){return BinaryOperatorExpr})),S.d(s,"BindingPipe",(function(){return BindingPipe})),S.d(s,"BoundDirectivePropertyAst",(function(){return BoundDirectivePropertyAst})),S.d(s,"BoundElementProperty",(function(){return BoundElementProperty})),S.d(s,"BoundElementPropertyAst",(function(){return BoundElementPropertyAst})),S.d(s,"BoundEventAst",(function(){return BoundEventAst})),S.d(s,"BoundTextAst",(function(){return BoundTextAst})),S.d(s,"BuiltinMethod",(function(){return Oe})),S.d(s,"BuiltinType",(function(){return BuiltinType})),S.d(s,"BuiltinTypeName",(function(){return ce})),S.d(s,"BuiltinVar",(function(){return Re})),S.d(s,"CONTENT_ATTR",(function(){return Bt})),S.d(s,"CUSTOM_ELEMENTS_SCHEMA",(function(){return Z})),S.d(s,"CastExpr",(function(){return CastExpr})),S.d(s,"Chain",(function(){return Chain})),S.d(s,"ClassField",(function(){return ClassField})),S.d(s,"ClassMethod",(function(){return ClassMethod})),S.d(s,"ClassStmt",(function(){return ClassStmt})),S.d(s,"CommaExpr",(function(){return CommaExpr})),S.d(s,"Comment",(function(){return Comment})),S.d(s,"CompileDirectiveMetadata",(function(){return CompileDirectiveMetadata})),S.d(s,"CompileMetadataResolver",(function(){return CompileMetadataResolver})),S.d(s,"CompileNgModuleMetadata",(function(){return CompileNgModuleMetadata})),S.d(s,"CompilePipeMetadata",(function(){return CompilePipeMetadata})),S.d(s,"CompileReflector",(function(){return CompileReflector})),S.d(s,"CompileShallowModuleMetadata",(function(){return CompileShallowModuleMetadata})),S.d(s,"CompileStylesheetMetadata",(function(){return CompileStylesheetMetadata})),S.d(s,"CompileSummaryKind",(function(){return Ye})),S.d(s,"CompileTemplateMetadata",(function(){return CompileTemplateMetadata})),S.d(s,"CompiledStylesheet",(function(){return CompiledStylesheet})),S.d(s,"CompilerConfig",(function(){return CompilerConfig})),S.d(s,"Conditional",(function(){return Conditional})),S.d(s,"ConditionalExpr",(function(){return ConditionalExpr})),S.d(s,"ConstantPool",(function(){return ConstantPool})),S.d(s,"CssSelector",(function(){return CssSelector})),S.d(s,"DEFAULT_INTERPOLATION_CONFIG",(function(){return ut})),S.d(s,"DYNAMIC_TYPE",(function(){return pe})),S.d(s,"DeclareFunctionStmt",(function(){return DeclareFunctionStmt})),S.d(s,"DeclareVarStmt",(function(){return DeclareVarStmt})),S.d(s,"DirectiveAst",(function(){return DirectiveAst})),S.d(s,"DirectiveNormalizer",(function(){return DirectiveNormalizer})),S.d(s,"DirectiveResolver",(function(){return DirectiveResolver})),S.d(s,"DomElementSchemaRegistry",(function(){return DomElementSchemaRegistry})),S.d(s,"EOF",(function(){return sr})),S.d(s,"ERROR_COMPONENT_TYPE",(function(){return zr})),S.d(s,"Element",(function(){return Element$1})),S.d(s,"ElementAst",(function(){return ElementAst})),S.d(s,"ElementSchemaRegistry",(function(){return ElementSchemaRegistry})),S.d(s,"EmbeddedTemplateAst",(function(){return EmbeddedTemplateAst})),S.d(s,"EmitterVisitorContext",(function(){return EmitterVisitorContext})),S.d(s,"EmptyExpr",(function(){return EmptyExpr})),S.d(s,"Expansion",(function(){return Expansion})),S.d(s,"ExpansionCase",(function(){return ExpansionCase})),S.d(s,"Expression",(function(){return Expression})),S.d(s,"ExpressionBinding",(function(){return ExpressionBinding})),S.d(s,"ExpressionStatement",(function(){return ExpressionStatement})),S.d(s,"ExpressionType",(function(){return ExpressionType})),S.d(s,"ExternalExpr",(function(){return ExternalExpr})),S.d(s,"ExternalReference",(function(){return ExternalReference})),S.d(s,"Extractor",(function(){return Extractor})),S.d(s,"FunctionCall",(function(){return FunctionCall})),S.d(s,"FunctionExpr",(function(){return FunctionExpr})),S.d(s,"GeneratedFile",(function(){return GeneratedFile})),S.d(s,"HOST_ATTR",(function(){return $t})),S.d(s,"HtmlParser",(function(){return HtmlParser})),S.d(s,"HtmlTagDefinition",(function(){return HtmlTagDefinition})),S.d(s,"I18NHtmlParser",(function(){return I18NHtmlParser})),S.d(s,"Identifiers",(function(){return Identifiers})),S.d(s,"IfStmt",(function(){return IfStmt})),S.d(s,"ImplicitReceiver",(function(){return ImplicitReceiver})),S.d(s,"InstantiateExpr",(function(){return InstantiateExpr})),S.d(s,"Interpolation",(function(){return Interpolation})),S.d(s,"InterpolationConfig",(function(){return InterpolationConfig})),S.d(s,"InvokeFunctionExpr",(function(){return InvokeFunctionExpr})),S.d(s,"InvokeMethodExpr",(function(){return InvokeMethodExpr})),S.d(s,"IvyParser",(function(){return IvyParser})),S.d(s,"JSDocComment",(function(){return JSDocComment})),S.d(s,"JitCompiler",(function(){return JitCompiler})),S.d(s,"JitEvaluator",(function(){return JitEvaluator})),S.d(s,"JitSummaryResolver",(function(){return JitSummaryResolver})),S.d(s,"KeyedRead",(function(){return KeyedRead})),S.d(s,"KeyedWrite",(function(){return KeyedWrite})),S.d(s,"LeadingComment",(function(){return LeadingComment})),S.d(s,"Lexer",(function(){return Lexer})),S.d(s,"LiteralArray",(function(){return LiteralArray})),S.d(s,"LiteralArrayExpr",(function(){return LiteralArrayExpr})),S.d(s,"LiteralExpr",(function(){return LiteralExpr})),S.d(s,"LiteralMap",(function(){return LiteralMap})),S.d(s,"LiteralMapExpr",(function(){return LiteralMapExpr})),S.d(s,"LiteralPrimitive",(function(){return LiteralPrimitive})),S.d(s,"LocalizedString",(function(){return LocalizedString})),S.d(s,"MapType",(function(){return MapType})),S.d(s,"MessageBundle",(function(){return MessageBundle})),S.d(s,"MethodCall",(function(){return MethodCall})),S.d(s,"NAMED_ENTITIES",(function(){return T})),S.d(s,"NGSP_UNICODE",(function(){return A})),S.d(s,"NONE_TYPE",(function(){return Te})),S.d(s,"NO_ERRORS_SCHEMA",(function(){return ee})),S.d(s,"NgContentAst",(function(){return NgContentAst})),S.d(s,"NgModuleCompiler",(function(){return NgModuleCompiler})),S.d(s,"NgModuleResolver",(function(){return NgModuleResolver})),S.d(s,"NodeWithI18n",(function(){return NodeWithI18n})),S.d(s,"NonNullAssert",(function(){return NonNullAssert})),S.d(s,"NotExpr",(function(){return NotExpr})),S.d(s,"NullTemplateVisitor",(function(){return NullTemplateVisitor})),S.d(s,"ParseError",(function(){return ParseError})),S.d(s,"ParseErrorLevel",(function(){return et})),S.d(s,"ParseLocation",(function(){return ParseLocation})),S.d(s,"ParseSourceFile",(function(){return ParseSourceFile})),S.d(s,"ParseSourceSpan",(function(){return ParseSourceSpan})),S.d(s,"ParseSpan",(function(){return ParseSpan})),S.d(s,"ParseTreeResult",(function(){return ParseTreeResult})),S.d(s,"ParsedEvent",(function(){return ParsedEvent})),S.d(s,"ParsedProperty",(function(){return ParsedProperty})),S.d(s,"ParsedPropertyType",(function(){return ft})),S.d(s,"ParsedVariable",(function(){return ParsedVariable})),S.d(s,"Parser",(function(){return Parser$1})),S.d(s,"ParserError",(function(){return ParserError})),S.d(s,"PipeResolver",(function(){return PipeResolver})),S.d(s,"PrefixNot",(function(){return PrefixNot})),S.d(s,"PropertyRead",(function(){return PropertyRead})),S.d(s,"PropertyWrite",(function(){return PropertyWrite})),S.d(s,"ProviderAst",(function(){return ProviderAst})),S.d(s,"ProviderAstType",(function(){return Gt})),S.d(s,"ProviderMeta",(function(){return ProviderMeta})),S.d(s,"Quote",(function(){return Quote})),S.d(s,"R3BoundTarget",(function(){return R3BoundTarget})),S.d(s,"R3FactoryTarget",(function(){return ot})),S.d(s,"R3Identifiers",(function(){return Identifiers$1})),S.d(s,"R3ResolvedDependencyType",(function(){return lt})),S.d(s,"R3TargetBinder",(function(){return R3TargetBinder})),S.d(s,"ReadKeyExpr",(function(){return ReadKeyExpr})),S.d(s,"ReadPropExpr",(function(){return ReadPropExpr})),S.d(s,"ReadVarExpr",(function(){return ReadVarExpr})),S.d(s,"RecursiveAstVisitor",(function(){return RecursiveAstVisitor$1})),S.d(s,"RecursiveTemplateAstVisitor",(function(){return RecursiveTemplateAstVisitor})),S.d(s,"RecursiveVisitor",(function(){return RecursiveVisitor$1})),S.d(s,"ReferenceAst",(function(){return ReferenceAst})),S.d(s,"ResolvedStaticSymbol",(function(){return ResolvedStaticSymbol})),S.d(s,"ResourceLoader",(function(){return ResourceLoader})),S.d(s,"ReturnStatement",(function(){return ReturnStatement})),S.d(s,"STRING_TYPE",(function(){return ye})),S.d(s,"SafeMethodCall",(function(){return SafeMethodCall})),S.d(s,"SafePropertyRead",(function(){return SafePropertyRead})),S.d(s,"SelectorContext",(function(){return SelectorContext})),S.d(s,"SelectorListContext",(function(){return SelectorListContext})),S.d(s,"SelectorMatcher",(function(){return SelectorMatcher})),S.d(s,"Serializer",(function(){return Serializer})),S.d(s,"SplitInterpolation",(function(){return SplitInterpolation})),S.d(s,"Statement",(function(){return Statement})),S.d(s,"StaticReflector",(function(){return StaticReflector})),S.d(s,"StaticSymbol",(function(){return StaticSymbol})),S.d(s,"StaticSymbolCache",(function(){return StaticSymbolCache})),S.d(s,"StaticSymbolResolver",(function(){return StaticSymbolResolver})),S.d(s,"StmtModifier",(function(){return $e})),S.d(s,"StyleCompiler",(function(){return StyleCompiler})),S.d(s,"StylesCompileDependency",(function(){return StylesCompileDependency})),S.d(s,"SummaryResolver",(function(){return SummaryResolver})),S.d(s,"TagContentType",(function(){return _})),S.d(s,"TemplateBindingParseResult",(function(){return TemplateBindingParseResult})),S.d(s,"TemplateParseError",(function(){return TemplateParseError})),S.d(s,"TemplateParseResult",(function(){return TemplateParseResult})),S.d(s,"TemplateParser",(function(){return TemplateParser})),S.d(s,"Text",(function(){return Text$3})),S.d(s,"TextAst",(function(){return TextAst})),S.d(s,"ThrowStmt",(function(){return ThrowStmt})),S.d(s,"TmplAstBoundAttribute",(function(){return BoundAttribute})),S.d(s,"TmplAstBoundEvent",(function(){return BoundEvent})),S.d(s,"TmplAstBoundText",(function(){return BoundText})),S.d(s,"TmplAstContent",(function(){return Content})),S.d(s,"TmplAstElement",(function(){return Element})),S.d(s,"TmplAstRecursiveVisitor",(function(){return RecursiveVisitor})),S.d(s,"TmplAstReference",(function(){return Reference})),S.d(s,"TmplAstTemplate",(function(){return Template})),S.d(s,"TmplAstText",(function(){return Text})),S.d(s,"TmplAstTextAttribute",(function(){return TextAttribute})),S.d(s,"TmplAstVariable",(function(){return Variable})),S.d(s,"Token",(function(){return Token$1})),S.d(s,"TokenType",(function(){return nr})),S.d(s,"TransitiveCompileNgModuleMetadata",(function(){return TransitiveCompileNgModuleMetadata})),S.d(s,"TreeError",(function(){return TreeError})),S.d(s,"TryCatchStmt",(function(){return TryCatchStmt})),S.d(s,"Type",(function(){return Type$1})),S.d(s,"TypeScriptEmitter",(function(){return TypeScriptEmitter})),S.d(s,"TypeofExpr",(function(){return TypeofExpr})),S.d(s,"Unary",(function(){return Unary})),S.d(s,"UnaryOperator",(function(){return Ne})),S.d(s,"UnaryOperatorExpr",(function(){return UnaryOperatorExpr})),S.d(s,"UrlResolver",(function(){return ln})),S.d(s,"VERSION",(function(){return Mr})),S.d(s,"VariableAst",(function(){return VariableAst})),S.d(s,"VariableBinding",(function(){return VariableBinding})),S.d(s,"Version",(function(){return Version})),S.d(s,"ViewCompiler",(function(){return ViewCompiler})),S.d(s,"WrappedNodeExpr",(function(){return WrappedNodeExpr})),S.d(s,"WriteKeyExpr",(function(){return WriteKeyExpr})),S.d(s,"WritePropExpr",(function(){return WritePropExpr})),S.d(s,"WriteVarExpr",(function(){return WriteVarExpr})),S.d(s,"Xliff",(function(){return Xliff})),S.d(s,"Xliff2",(function(){return Xliff2})),S.d(s,"Xmb",(function(){return Xmb})),S.d(s,"XmlParser",(function(){return XmlParser})),S.d(s,"Xtb",(function(){return Xtb})),S.d(s,"_ParseAST",(function(){return _ParseAST})),S.d(s,"analyzeAndValidateNgModules",(function(){return analyzeAndValidateNgModules})),S.d(s,"analyzeFile",(function(){return analyzeFile})),S.d(s,"analyzeFileForInjectables",(function(){return analyzeFileForInjectables})),S.d(s,"analyzeNgModules",(function(){return analyzeNgModules})),S.d(s,"collectExternalReferences",(function(){return collectExternalReferences})),S.d(s,"compileComponentFromMetadata",(function(){return compileComponentFromMetadata})),S.d(s,"compileDirectiveFromMetadata",(function(){return compileDirectiveFromMetadata})),S.d(s,"compileFactoryFunction",(function(){return compileFactoryFunction})),S.d(s,"compileInjectable",(function(){return compileInjectable})),S.d(s,"compileInjector",(function(){return compileInjector})),S.d(s,"compileNgModule",(function(){return compileNgModule})),S.d(s,"compilePipeFromMetadata",(function(){return compilePipeFromMetadata})),S.d(s,"componentFactoryName",(function(){return componentFactoryName})),S.d(s,"computeMsgId",(function(){return computeMsgId})),S.d(s,"core",(function(){return ue})),S.d(s,"createAotCompiler",(function(){return createAotCompiler})),S.d(s,"createAotUrlResolver",(function(){return createAotUrlResolver})),S.d(s,"createElementCssSelector",(function(){return createElementCssSelector})),S.d(s,"createLoweredSymbol",(function(){return createLoweredSymbol})),S.d(s,"createOfflineCompileUrlResolver",(function(){return createOfflineCompileUrlResolver})),S.d(s,"createUrlResolverWithoutPackagePrefix",(function(){return createUrlResolverWithoutPackagePrefix})),S.d(s,"debugOutputAstAsTypeScript",(function(){return debugOutputAstAsTypeScript})),S.d(s,"findNode",(function(){return findNode})),S.d(s,"flatten",(function(){return flatten})),S.d(s,"formattedError",(function(){return formattedError})),S.d(s,"getHtmlTagDefinition",(function(){return getHtmlTagDefinition})),S.d(s,"getNsPrefix",(function(){return getNsPrefix})),S.d(s,"getParseErrors",(function(){return getParseErrors})),S.d(s,"getUrlScheme",(function(){return getUrlScheme})),S.d(s,"hostViewClassName",(function(){return hostViewClassName})),S.d(s,"identifierModuleUrl",(function(){return identifierModuleUrl})),S.d(s,"identifierName",(function(){return identifierName})),S.d(s,"isEmptyExpression",(function(){return isEmptyExpression})),S.d(s,"isFormattedError",(function(){return isFormattedError})),S.d(s,"isIdentifier",(function(){return isIdentifier})),S.d(s,"isLoweredSymbol",(function(){return isLoweredSymbol})),S.d(s,"isNgContainer",(function(){return isNgContainer})),S.d(s,"isNgContent",(function(){return isNgContent})),S.d(s,"isNgTemplate",(function(){return isNgTemplate})),S.d(s,"isQuote",(function(){return isQuote})),S.d(s,"isSyntaxError",(function(){return isSyntaxError})),S.d(s,"jsDocComment",(function(){return jsDocComment})),S.d(s,"leadingComment",(function(){return leadingComment})),S.d(s,"literalMap",(function(){return literalMap})),S.d(s,"makeBindingParser",(function(){return makeBindingParser})),S.d(s,"mergeAnalyzedFiles",(function(){return mergeAnalyzedFiles})),S.d(s,"mergeNsAndName",(function(){return mergeNsAndName})),S.d(s,"ngModuleJitUrl",(function(){return ngModuleJitUrl})),S.d(s,"parseHostBindings",(function(){return parseHostBindings})),S.d(s,"parseTemplate",(function(){return parseTemplate})),S.d(s,"preserveWhitespacesDefault",(function(){return preserveWhitespacesDefault})),S.d(s,"publishFacade",(function(){return publishFacade})),S.d(s,"r3JitTypeSourceSpan",(function(){return r3JitTypeSourceSpan})),S.d(s,"removeSummaryDuplicates",(function(){return removeSummaryDuplicates})),S.d(s,"rendererTypeName",(function(){return rendererTypeName})),S.d(s,"sanitizeIdentifier",(function(){return sanitizeIdentifier})),S.d(s,"sharedStylesheetJitUrl",(function(){return sharedStylesheetJitUrl})),S.d(s,"splitClasses",(function(){return splitClasses})),S.d(s,"splitNsName",(function(){return splitNsName})),S.d(s,"syntaxError",(function(){return syntaxError})),S.d(s,"templateJitUrl",(function(){return templateJitUrl})),S.d(s,"templateSourceUrl",(function(){return templateSourceUrl})),S.d(s,"templateVisitAll",(function(){return templateVisitAll})),S.d(s,"toTypeScript",(function(){return toTypeScript})),S.d(s,"tokenName",(function(){return tokenName})),S.d(s,"tokenReference",(function(){return tokenReference})),S.d(s,"typeSourceSpan",(function(){return typeSourceSpan})),S.d(s,"unescapeIdentifier",(function(){return unescapeIdentifier})),S.d(s,"unwrapResolvedMetadata",(function(){return unwrapResolvedMetadata})),S.d(s,"verifyHostBindings",(function(){return verifyHostBindings})),S.d(s,"viewClassName",(function(){return viewClassName})),S.d(s,"visitAll",(function(){return visitAll$1})),function(i){i[i.RAW_TEXT=0]="RAW_TEXT",i[i.ESCAPABLE_RAW_TEXT=1]="ESCAPABLE_RAW_TEXT",i[i.PARSABLE_DATA=2]="PARSABLE_DATA"}(_||(_={}));const T={Aacute:"Á",aacute:"á",Acirc:"Â",acirc:"â",acute:"´",AElig:"Æ",aelig:"æ",Agrave:"À",agrave:"à",alefsym:"ℵ",Alpha:"Α",alpha:"α",amp:"&",and:"∧",ang:"∠",apos:"'",Aring:"Å",aring:"å",asymp:"≈",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",bdquo:"„",Beta:"Β",beta:"β",brvbar:"¦",bull:"•",cap:"∩",Ccedil:"Ç",ccedil:"ç",cedil:"¸",cent:"¢",Chi:"Χ",chi:"χ",circ:"ˆ",clubs:"♣",cong:"≅",copy:"©",crarr:"↵",cup:"∪",curren:"¤",dagger:"†",Dagger:"‡",darr:"↓",dArr:"⇓",deg:"°",Delta:"Δ",delta:"δ",diams:"♦",divide:"÷",Eacute:"É",eacute:"é",Ecirc:"Ê",ecirc:"ê",Egrave:"È",egrave:"è",empty:"∅",emsp:" ",ensp:" ",Epsilon:"Ε",epsilon:"ε",equiv:"≡",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",exist:"∃",fnof:"ƒ",forall:"∀",frac12:"½",frac14:"¼",frac34:"¾",frasl:"⁄",Gamma:"Γ",gamma:"γ",ge:"≥",gt:">",harr:"↔",hArr:"⇔",hearts:"♥",hellip:"…",Iacute:"Í",iacute:"í",Icirc:"Î",icirc:"î",iexcl:"¡",Igrave:"Ì",igrave:"ì",image:"ℑ",infin:"∞",int:"∫",Iota:"Ι",iota:"ι",iquest:"¿",isin:"∈",Iuml:"Ï",iuml:"ï",Kappa:"Κ",kappa:"κ",Lambda:"Λ",lambda:"λ",lang:"⟨",laquo:"«",larr:"←",lArr:"⇐",lceil:"⌈",ldquo:"“",le:"≤",lfloor:"⌊",lowast:"∗",loz:"◊",lrm:"‎",lsaquo:"‹",lsquo:"‘",lt:"<",macr:"¯",mdash:"—",micro:"µ",middot:"·",minus:"−",Mu:"Μ",mu:"μ",nabla:"∇",nbsp:" ",ndash:"–",ne:"≠",ni:"∋",not:"¬",notin:"∉",nsub:"⊄",Ntilde:"Ñ",ntilde:"ñ",Nu:"Ν",nu:"ν",Oacute:"Ó",oacute:"ó",Ocirc:"Ô",ocirc:"ô",OElig:"Œ",oelig:"œ",Ograve:"Ò",ograve:"ò",oline:"‾",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",oplus:"⊕",or:"∨",ordf:"ª",ordm:"º",Oslash:"Ø",oslash:"ø",Otilde:"Õ",otilde:"õ",otimes:"⊗",Ouml:"Ö",ouml:"ö",para:"¶",permil:"‰",perp:"⊥",Phi:"Φ",phi:"φ",Pi:"Π",pi:"π",piv:"ϖ",plusmn:"±",pound:"£",prime:"′",Prime:"″",prod:"∏",prop:"∝",Psi:"Ψ",psi:"ψ",quot:'"',radic:"√",rang:"⟩",raquo:"»",rarr:"→",rArr:"⇒",rceil:"⌉",rdquo:"”",real:"ℜ",reg:"®",rfloor:"⌋",Rho:"Ρ",rho:"ρ",rlm:"‏",rsaquo:"›",rsquo:"’",sbquo:"‚",Scaron:"Š",scaron:"š",sdot:"⋅",sect:"§",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sim:"∼",spades:"♠",sub:"⊂",sube:"⊆",sum:"∑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supe:"⊇",szlig:"ß",Tau:"Τ",tau:"τ",there4:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thinsp:" ",THORN:"Þ",thorn:"þ",tilde:"˜",times:"×",trade:"™",Uacute:"Ú",uacute:"ú",uarr:"↑",uArr:"⇑",Ucirc:"Û",ucirc:"û",Ugrave:"Ù",ugrave:"ù",uml:"¨",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",Uuml:"Ü",uuml:"ü",weierp:"℘",Xi:"Ξ",xi:"ξ",Yacute:"Ý",yacute:"ý",yen:"¥",yuml:"ÿ",Yuml:"Ÿ",Zeta:"Ζ",zeta:"ζ",zwj:"‍",zwnj:"‌"},A="";T.ngsp=A;class HtmlTagDefinition{constructor({closedByChildren:i,implicitNamespacePrefix:s,contentType:S=_.PARSABLE_DATA,closedByParent:T=!1,isVoid:A=!1,ignoreFirstLf:P=!1,preventNamespaceInheritance:N=!1}={}){this.closedByChildren={},this.closedByParent=!1,this.canSelfClose=!1,i&&i.length>0&&i.forEach(i=>this.closedByChildren[i]=!0),this.isVoid=A,this.closedByParent=T||A,this.implicitNamespacePrefix=s||null,this.contentType=S,this.ignoreFirstLf=P,this.preventNamespaceInheritance=N}isClosedByChild(i){return this.isVoid||i.toLowerCase()in this.closedByChildren}}let P,N;function getHtmlTagDefinition(i){var s,S;return N||(P=new HtmlTagDefinition,N={base:new HtmlTagDefinition({isVoid:!0}),meta:new HtmlTagDefinition({isVoid:!0}),area:new HtmlTagDefinition({isVoid:!0}),embed:new HtmlTagDefinition({isVoid:!0}),link:new HtmlTagDefinition({isVoid:!0}),img:new HtmlTagDefinition({isVoid:!0}),input:new HtmlTagDefinition({isVoid:!0}),param:new HtmlTagDefinition({isVoid:!0}),hr:new HtmlTagDefinition({isVoid:!0}),br:new HtmlTagDefinition({isVoid:!0}),source:new HtmlTagDefinition({isVoid:!0}),track:new HtmlTagDefinition({isVoid:!0}),wbr:new HtmlTagDefinition({isVoid:!0}),p:new HtmlTagDefinition({closedByChildren:["address","article","aside","blockquote","div","dl","fieldset","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","main","nav","ol","p","pre","section","table","ul"],closedByParent:!0}),thead:new HtmlTagDefinition({closedByChildren:["tbody","tfoot"]}),tbody:new HtmlTagDefinition({closedByChildren:["tbody","tfoot"],closedByParent:!0}),tfoot:new HtmlTagDefinition({closedByChildren:["tbody"],closedByParent:!0}),tr:new HtmlTagDefinition({closedByChildren:["tr"],closedByParent:!0}),td:new HtmlTagDefinition({closedByChildren:["td","th"],closedByParent:!0}),th:new HtmlTagDefinition({closedByChildren:["td","th"],closedByParent:!0}),col:new HtmlTagDefinition({isVoid:!0}),svg:new HtmlTagDefinition({implicitNamespacePrefix:"svg"}),foreignObject:new HtmlTagDefinition({implicitNamespacePrefix:"svg",preventNamespaceInheritance:!0}),math:new HtmlTagDefinition({implicitNamespacePrefix:"math"}),li:new HtmlTagDefinition({closedByChildren:["li"],closedByParent:!0}),dt:new HtmlTagDefinition({closedByChildren:["dt","dd"]}),dd:new HtmlTagDefinition({closedByChildren:["dt","dd"],closedByParent:!0}),rb:new HtmlTagDefinition({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),rt:new HtmlTagDefinition({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),rtc:new HtmlTagDefinition({closedByChildren:["rb","rtc","rp"],closedByParent:!0}),rp:new HtmlTagDefinition({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),optgroup:new HtmlTagDefinition({closedByChildren:["optgroup"],closedByParent:!0}),option:new HtmlTagDefinition({closedByChildren:["option","optgroup"],closedByParent:!0}),pre:new HtmlTagDefinition({ignoreFirstLf:!0}),listing:new HtmlTagDefinition({ignoreFirstLf:!0}),style:new HtmlTagDefinition({contentType:_.RAW_TEXT}),script:new HtmlTagDefinition({contentType:_.RAW_TEXT}),title:new HtmlTagDefinition({contentType:_.ESCAPABLE_RAW_TEXT}),textarea:new HtmlTagDefinition({contentType:_.ESCAPABLE_RAW_TEXT,ignoreFirstLf:!0})}),null!==(S=null!==(s=N[i])&&void 0!==s?s:N[i.toLowerCase()])&&void 0!==S?S:P}const M=new RegExp("(\\:not\\()|(([\\.\\#]?)[-\\w]+)|(?:\\[([-.\\w*]+)(?:=([\"']?)([^\\]\"']*)\\5)?\\])|(\\))|(\\s*,\\s*)","g");class CssSelector{constructor(){this.element=null,this.classNames=[],this.attrs=[],this.notSelectors=[]}static parse(i){const s=[],_addResult=(i,s)=>{s.notSelectors.length>0&&!s.element&&0==s.classNames.length&&0==s.attrs.length&&(s.element="*"),i.push(s)};let S,_=new CssSelector,T=_,A=!1;for(M.lastIndex=0;S=M.exec(i);){if(S[1]){if(A)throw new Error("Nesting :not in a selector is not allowed");A=!0,T=new CssSelector,_.notSelectors.push(T)}const i=S[2];if(i){const s=S[3];"#"===s?T.addAttribute("id",i.substr(1)):"."===s?T.addClassName(i.substr(1)):T.setElement(i)}const P=S[4];if(P&&T.addAttribute(P,S[6]),S[7]&&(A=!1,T=_),S[8]){if(A)throw new Error("Multiple selectors in :not are not supported");_addResult(s,_),_=T=new CssSelector}}return _addResult(s,_),s}isElementSelector(){return this.hasElementSelector()&&0==this.classNames.length&&0==this.attrs.length&&0===this.notSelectors.length}hasElementSelector(){return!!this.element}setElement(i=null){this.element=i}getMatchingElementTemplate(){const i=this.element||"div",s=this.classNames.length>0?` class="${this.classNames.join(" ")}"`:"";let S="";for(let i=0;i<this.attrs.length;i+=2){S+=` ${this.attrs[i]}${""!==this.attrs[i+1]?`="${this.attrs[i+1]}"`:""}`}return getHtmlTagDefinition(i).isVoid?`<${i}${s}${S}/>`:`<${i}${s}${S}></${i}>`}getAttrs(){const i=[];return this.classNames.length>0&&i.push("class",this.classNames.join(" ")),i.concat(this.attrs)}addAttribute(i,s=""){this.attrs.push(i,s&&s.toLowerCase()||"")}addClassName(i){this.classNames.push(i.toLowerCase())}toString(){let i=this.element||"";if(this.classNames&&this.classNames.forEach(s=>i+="."+s),this.attrs)for(let s=0;s<this.attrs.length;s+=2){const S=this.attrs[s],_=this.attrs[s+1];i+=`[${S}${_?"="+_:""}]`}return this.notSelectors.forEach(s=>i+=`:not(${s})`),i}}class SelectorMatcher{constructor(){this._elementMap=new Map,this._elementPartialMap=new Map,this._classMap=new Map,this._classPartialMap=new Map,this._attrValueMap=new Map,this._attrValuePartialMap=new Map,this._listContexts=[]}static createNotMatcher(i){const s=new SelectorMatcher;return s.addSelectables(i,null),s}addSelectables(i,s){let S=null;i.length>1&&(S=new SelectorListContext(i),this._listContexts.push(S));for(let _=0;_<i.length;_++)this._addSelectable(i[_],s,S)}_addSelectable(i,s,S){let _=this;const T=i.element,A=i.classNames,P=i.attrs,N=new SelectorContext(i,s,S);if(T){0===P.length&&0===A.length?this._addTerminal(_._elementMap,T,N):_=this._addPartial(_._elementPartialMap,T)}if(A)for(let i=0;i<A.length;i++){const s=0===P.length&&i===A.length-1,S=A[i];s?this._addTerminal(_._classMap,S,N):_=this._addPartial(_._classPartialMap,S)}if(P)for(let i=0;i<P.length;i+=2){const s=i===P.length-2,S=P[i],T=P[i+1];if(s){const i=_._attrValueMap;let s=i.get(S);s||(s=new Map,i.set(S,s)),this._addTerminal(s,T,N)}else{const i=_._attrValuePartialMap;let s=i.get(S);s||(s=new Map,i.set(S,s)),_=this._addPartial(s,T)}}}_addTerminal(i,s,S){let _=i.get(s);_||(_=[],i.set(s,_)),_.push(S)}_addPartial(i,s){let S=i.get(s);return S||(S=new SelectorMatcher,i.set(s,S)),S}match(i,s){let S=!1;const _=i.element,T=i.classNames,A=i.attrs;for(let i=0;i<this._listContexts.length;i++)this._listContexts[i].alreadyMatched=!1;if(S=this._matchTerminal(this._elementMap,_,i,s)||S,S=this._matchPartial(this._elementPartialMap,_,i,s)||S,T)for(let _=0;_<T.length;_++){const A=T[_];S=this._matchTerminal(this._classMap,A,i,s)||S,S=this._matchPartial(this._classPartialMap,A,i,s)||S}if(A)for(let _=0;_<A.length;_+=2){const T=A[_],P=A[_+1],N=this._attrValueMap.get(T);P&&(S=this._matchTerminal(N,"",i,s)||S),S=this._matchTerminal(N,P,i,s)||S;const M=this._attrValuePartialMap.get(T);P&&(S=this._matchPartial(M,"",i,s)||S),S=this._matchPartial(M,P,i,s)||S}return S}_matchTerminal(i,s,S,_){if(!i||"string"!=typeof s)return!1;let T=i.get(s)||[];const A=i.get("*");if(A&&(T=T.concat(A)),0===T.length)return!1;let P,N=!1;for(let i=0;i<T.length;i++)P=T[i],N=P.finalize(S,_)||N;return N}_matchPartial(i,s,S,_){if(!i||"string"!=typeof s)return!1;const T=i.get(s);return!!T&&T.match(S,_)}}class SelectorListContext{constructor(i){this.selectors=i,this.alreadyMatched=!1}}class SelectorContext{constructor(i,s,S){this.selector=i,this.cbContext=s,this.listContext=S,this.notSelectors=i.notSelectors}finalize(i,s){let S=!0;if(this.notSelectors.length>0&&(!this.listContext||!this.listContext.alreadyMatched)){S=!SelectorMatcher.createNotMatcher(this.notSelectors).match(i,null)}return!S||!s||this.listContext&&this.listContext.alreadyMatched||(this.listContext&&(this.listContext.alreadyMatched=!0),s(this.selector,this.cbContext)),S}}const k=makeMetadataFactory("Inject",i=>({token:i})),R=makeMetadataFactory("InjectionToken",i=>({_desc:i,"ɵprov":void 0})),F=makeMetadataFactory("Attribute",i=>({attributeName:i})),D=makeMetadataFactory("ContentChildren",(i,s={})=>Object.assign({selector:i,first:!1,isViewQuery:!1,descendants:!1},s)),L=makeMetadataFactory("ContentChild",(i,s={})=>Object.assign({selector:i,first:!0,isViewQuery:!1,descendants:!0},s)),$=makeMetadataFactory("ViewChildren",(i,s={})=>Object.assign({selector:i,first:!1,isViewQuery:!0,descendants:!0},s)),V=makeMetadataFactory("ViewChild",(i,s)=>Object.assign({selector:i,first:!0,isViewQuery:!0,descendants:!0},s)),U=makeMetadataFactory("Directive",(i={})=>i);var W,z;!function(i){i[i.Emulated=0]="Emulated",i[i.Native=1]="Native",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom"}(W||(W={})),function(i){i[i.OnPush=0]="OnPush",i[i.Default=1]="Default"}(z||(z={}));const H=makeMetadataFactory("Component",(i={})=>Object.assign({changeDetection:z.Default},i)),q=makeMetadataFactory("Pipe",i=>Object.assign({pure:!0},i)),K=makeMetadataFactory("Input",i=>({bindingPropertyName:i})),G=makeMetadataFactory("Output",i=>({bindingPropertyName:i})),X=makeMetadataFactory("HostBinding",i=>({hostPropertyName:i})),Q=makeMetadataFactory("HostListener",(i,s)=>({eventName:i,args:s})),J=makeMetadataFactory("NgModule",i=>i),Y=makeMetadataFactory("Injectable",(i={})=>i),Z={name:"custom-elements"},ee={name:"no-errors-schema"},te=makeMetadataFactory("Optional"),re=makeMetadataFactory("Self"),ne=makeMetadataFactory("SkipSelf"),ie=makeMetadataFactory("Host"),se=Function;var ae,oe;function makeMetadataFactory(i,s){function factory(...S){const _=s?s(...S):{};return Object.assign({ngMetadataName:i},_)}return factory.isTypeOf=s=>s&&s.ngMetadataName===i,factory.ngMetadataName=i,factory}function parserSelectorToR3Selector(i){const s=function parserSelectorToSimpleSelector(i){const s=i.classNames&&i.classNames.length?[8,...i.classNames]:[];return[i.element&&"*"!==i.element?i.element:"",...i.attrs,...s]}(i),S=i.notSelectors&&i.notSelectors.length?i.notSelectors.map(i=>function parserSelectorToNegativeSelector(i){const s=i.classNames&&i.classNames.length?[8,...i.classNames]:[];return i.element?[5,i.element,...i.attrs,...s]:i.attrs.length?[3,...i.attrs,...s]:i.classNames&&i.classNames.length?[9,...i.classNames]:[]}(i)):[];return s.concat(...S)}function parseSelectorToR3Selector(i){return i?CssSelector.parse(i).map(parserSelectorToR3Selector):[]}!function(i){i[i.NONE=0]="NONE",i[i.HTML=1]="HTML",i[i.STYLE=2]="STYLE",i[i.SCRIPT=3]="SCRIPT",i[i.URL=4]="URL",i[i.RESOURCE_URL=5]="RESOURCE_URL"}(ae||(ae={})),function(i){i[i.Error=0]="Error",i[i.Warning=1]="Warning",i[i.Ignore=2]="Ignore"}(oe||(oe={}));var le,ce,ue=Object.freeze({__proto__:null,createInject:k,createInjectionToken:R,createAttribute:F,createContentChildren:D,createContentChild:L,createViewChildren:$,createViewChild:V,createDirective:U,get ViewEncapsulation(){return W},get ChangeDetectionStrategy(){return z},createComponent:H,createPipe:q,createInput:K,createOutput:G,createHostBinding:X,createHostListener:Q,createNgModule:J,createInjectable:Y,CUSTOM_ELEMENTS_SCHEMA:Z,NO_ERRORS_SCHEMA:ee,createOptional:te,createSelf:re,createSkipSelf:ne,createHost:ie,Type:se,get SecurityContext(){return ae},get MissingTranslationStrategy(){return oe},parseSelectorToR3Selector:parseSelectorToR3Selector});!function(i){i[i.Const=0]="Const"}(le||(le={}));class Type$1{constructor(i=[]){this.modifiers=i}hasModifier(i){return-1!==this.modifiers.indexOf(i)}}!function(i){i[i.Dynamic=0]="Dynamic",i[i.Bool=1]="Bool",i[i.String=2]="String",i[i.Int=3]="Int",i[i.Number=4]="Number",i[i.Function=5]="Function",i[i.Inferred=6]="Inferred",i[i.None=7]="None"}(ce||(ce={}));class BuiltinType extends Type$1{constructor(i,s){super(s),this.name=i}visitType(i,s){return i.visitBuiltinType(this,s)}}class ExpressionType extends Type$1{constructor(i,s,S=null){super(s),this.value=i,this.typeParams=S}visitType(i,s){return i.visitExpressionType(this,s)}}class ArrayType extends Type$1{constructor(i,s){super(s),this.of=i}visitType(i,s){return i.visitArrayType(this,s)}}class MapType extends Type$1{constructor(i,s){super(s),this.valueType=i||null}visitType(i,s){return i.visitMapType(this,s)}}const pe=new BuiltinType(ce.Dynamic),he=new BuiltinType(ce.Inferred),de=new BuiltinType(ce.Bool),fe=(new BuiltinType(ce.Int),new BuiltinType(ce.Number)),ye=new BuiltinType(ce.String),Te=(new BuiltinType(ce.Function),new BuiltinType(ce.None));var Ne,Me,Re,Oe;function nullSafeIsEquivalent(i,s){return null==i||null==s?i==s:i.isEquivalent(s)}function areAllEquivalent(i,s){const S=i.length;if(S!==s.length)return!1;for(let _=0;_<S;_++)if(!i[_].isEquivalent(s[_]))return!1;return!0}!function(i){i[i.Minus=0]="Minus",i[i.Plus=1]="Plus"}(Ne||(Ne={})),function(i){i[i.Equals=0]="Equals",i[i.NotEquals=1]="NotEquals",i[i.Identical=2]="Identical",i[i.NotIdentical=3]="NotIdentical",i[i.Minus=4]="Minus",i[i.Plus=5]="Plus",i[i.Divide=6]="Divide",i[i.Multiply=7]="Multiply",i[i.Modulo=8]="Modulo",i[i.And=9]="And",i[i.Or=10]="Or",i[i.BitwiseAnd=11]="BitwiseAnd",i[i.Lower=12]="Lower",i[i.LowerEquals=13]="LowerEquals",i[i.Bigger=14]="Bigger",i[i.BiggerEquals=15]="BiggerEquals"}(Me||(Me={}));class Expression{constructor(i,s){this.type=i||null,this.sourceSpan=s||null}prop(i,s){return new ReadPropExpr(this,i,null,s)}key(i,s,S){return new ReadKeyExpr(this,i,s,S)}callMethod(i,s,S){return new InvokeMethodExpr(this,i,s,null,S)}callFn(i,s,S){return new InvokeFunctionExpr(this,i,null,s,S)}instantiate(i,s,S){return new InstantiateExpr(this,i,s,S)}conditional(i,s=null,S){return new ConditionalExpr(this,i,s,null,S)}equals(i,s){return new BinaryOperatorExpr(Me.Equals,this,i,null,s)}notEquals(i,s){return new BinaryOperatorExpr(Me.NotEquals,this,i,null,s)}identical(i,s){return new BinaryOperatorExpr(Me.Identical,this,i,null,s)}notIdentical(i,s){return new BinaryOperatorExpr(Me.NotIdentical,this,i,null,s)}minus(i,s){return new BinaryOperatorExpr(Me.Minus,this,i,null,s)}plus(i,s){return new BinaryOperatorExpr(Me.Plus,this,i,null,s)}divide(i,s){return new BinaryOperatorExpr(Me.Divide,this,i,null,s)}multiply(i,s){return new BinaryOperatorExpr(Me.Multiply,this,i,null,s)}modulo(i,s){return new BinaryOperatorExpr(Me.Modulo,this,i,null,s)}and(i,s){return new BinaryOperatorExpr(Me.And,this,i,null,s)}bitwiseAnd(i,s,S=!0){return new BinaryOperatorExpr(Me.BitwiseAnd,this,i,null,s,S)}or(i,s){return new BinaryOperatorExpr(Me.Or,this,i,null,s)}lower(i,s){return new BinaryOperatorExpr(Me.Lower,this,i,null,s)}lowerEquals(i,s){return new BinaryOperatorExpr(Me.LowerEquals,this,i,null,s)}bigger(i,s){return new BinaryOperatorExpr(Me.Bigger,this,i,null,s)}biggerEquals(i,s){return new BinaryOperatorExpr(Me.BiggerEquals,this,i,null,s)}isBlank(i){return this.equals(Le,i)}cast(i,s){return new CastExpr(this,i,s)}toStmt(){return new ExpressionStatement(this,null)}}!function(i){i[i.This=0]="This",i[i.Super=1]="Super",i[i.CatchError=2]="CatchError",i[i.CatchStack=3]="CatchStack"}(Re||(Re={}));class ReadVarExpr extends Expression{constructor(i,s,S){super(s,S),"string"==typeof i?(this.name=i,this.builtin=null):(this.name=null,this.builtin=i)}isEquivalent(i){return i instanceof ReadVarExpr&&this.name===i.name&&this.builtin===i.builtin}isConstant(){return!1}visitExpression(i,s){return i.visitReadVarExpr(this,s)}set(i){if(!this.name)throw new Error(`Built in variable ${this.builtin} can not be assigned to.`);return new WriteVarExpr(this.name,i,null,this.sourceSpan)}}class TypeofExpr extends Expression{constructor(i,s,S){super(s,S),this.expr=i}visitExpression(i,s){return i.visitTypeofExpr(this,s)}isEquivalent(i){return i instanceof TypeofExpr&&i.expr.isEquivalent(this.expr)}isConstant(){return this.expr.isConstant()}}class WrappedNodeExpr extends Expression{constructor(i,s,S){super(s,S),this.node=i}isEquivalent(i){return i instanceof WrappedNodeExpr&&this.node===i.node}isConstant(){return!1}visitExpression(i,s){return i.visitWrappedNodeExpr(this,s)}}class WriteVarExpr extends Expression{constructor(i,s,S,_){super(S||s.type,_),this.name=i,this.value=s}isEquivalent(i){return i instanceof WriteVarExpr&&this.name===i.name&&this.value.isEquivalent(i.value)}isConstant(){return!1}visitExpression(i,s){return i.visitWriteVarExpr(this,s)}toDeclStmt(i,s){return new DeclareVarStmt(this.name,this.value,i,s,this.sourceSpan)}toConstDecl(){return this.toDeclStmt(he,[$e.Final])}}class WriteKeyExpr extends Expression{constructor(i,s,S,_,T){super(_||S.type,T),this.receiver=i,this.index=s,this.value=S}isEquivalent(i){return i instanceof WriteKeyExpr&&this.receiver.isEquivalent(i.receiver)&&this.index.isEquivalent(i.index)&&this.value.isEquivalent(i.value)}isConstant(){return!1}visitExpression(i,s){return i.visitWriteKeyExpr(this,s)}}class WritePropExpr extends Expression{constructor(i,s,S,_,T){super(_||S.type,T),this.receiver=i,this.name=s,this.value=S}isEquivalent(i){return i instanceof WritePropExpr&&this.receiver.isEquivalent(i.receiver)&&this.name===i.name&&this.value.isEquivalent(i.value)}isConstant(){return!1}visitExpression(i,s){return i.visitWritePropExpr(this,s)}}!function(i){i[i.ConcatArray=0]="ConcatArray",i[i.SubscribeObservable=1]="SubscribeObservable",i[i.Bind=2]="Bind"}(Oe||(Oe={}));class InvokeMethodExpr extends Expression{constructor(i,s,S,_,T){super(_,T),this.receiver=i,this.args=S,"string"==typeof s?(this.name=s,this.builtin=null):(this.name=null,this.builtin=s)}isEquivalent(i){return i instanceof InvokeMethodExpr&&this.receiver.isEquivalent(i.receiver)&&this.name===i.name&&this.builtin===i.builtin&&areAllEquivalent(this.args,i.args)}isConstant(){return!1}visitExpression(i,s){return i.visitInvokeMethodExpr(this,s)}}class InvokeFunctionExpr extends Expression{constructor(i,s,S,_,T=!1){super(S,_),this.fn=i,this.args=s,this.pure=T}isEquivalent(i){return i instanceof InvokeFunctionExpr&&this.fn.isEquivalent(i.fn)&&areAllEquivalent(this.args,i.args)&&this.pure===i.pure}isConstant(){return!1}visitExpression(i,s){return i.visitInvokeFunctionExpr(this,s)}}class InstantiateExpr extends Expression{constructor(i,s,S,_){super(S,_),this.classExpr=i,this.args=s}isEquivalent(i){return i instanceof InstantiateExpr&&this.classExpr.isEquivalent(i.classExpr)&&areAllEquivalent(this.args,i.args)}isConstant(){return!1}visitExpression(i,s){return i.visitInstantiateExpr(this,s)}}class LiteralExpr extends Expression{constructor(i,s,S){super(s,S),this.value=i}isEquivalent(i){return i instanceof LiteralExpr&&this.value===i.value}isConstant(){return!0}visitExpression(i,s){return i.visitLiteralExpr(this,s)}}class MessagePiece{constructor(i,s){this.text=i,this.sourceSpan=s}}class LiteralPiece extends MessagePiece{}class PlaceholderPiece extends MessagePiece{}class LocalizedString extends Expression{constructor(i,s,S,_,T){super(ye,T),this.metaBlock=i,this.messageParts=s,this.placeHolderNames=S,this.expressions=_}isEquivalent(i){return!1}isConstant(){return!1}visitExpression(i,s){return i.visitLocalizedString(this,s)}serializeI18nHead(){let i=this.metaBlock.description||"";return this.metaBlock.meaning&&(i=`${this.metaBlock.meaning}|${i}`),this.metaBlock.customId&&(i=`${i}@@${this.metaBlock.customId}`),this.metaBlock.legacyIds&&this.metaBlock.legacyIds.forEach(s=>{i=`${i}␟${s}`}),createCookedRawString(i,this.messageParts[0].text)}getMessagePartSourceSpan(i){var s,S;return null!==(S=null===(s=this.messageParts[i])||void 0===s?void 0:s.sourceSpan)&&void 0!==S?S:this.sourceSpan}getPlaceholderSourceSpan(i){var s,S,_,T;return null!==(T=null!==(S=null===(s=this.placeHolderNames[i])||void 0===s?void 0:s.sourceSpan)&&void 0!==S?S:null===(_=this.expressions[i])||void 0===_?void 0:_.sourceSpan)&&void 0!==T?T:this.sourceSpan}serializeI18nTemplatePart(i){return createCookedRawString(this.placeHolderNames[i-1].text,this.messageParts[i].text)}}const escapeSlashes=i=>i.replace(/\\/g,"\\\\"),escapeColons=i=>i.replace(/:/g,"\\:"),escapeForMessagePart=i=>i.replace(/`/g,"\\`").replace(/\${/g,"$\\{");function createCookedRawString(i,s){return""===i?{cooked:s,raw:escapeForMessagePart((S=escapeSlashes(s),S.replace(/^:/,"\\:")))}:{cooked:`:${i}:${s}`,raw:escapeForMessagePart(`:${escapeColons(escapeSlashes(i))}:${escapeSlashes(s)}`)};var S}class ExternalExpr extends Expression{constructor(i,s,S=null,_){super(s,_),this.value=i,this.typeParams=S}isEquivalent(i){return i instanceof ExternalExpr&&this.value.name===i.value.name&&this.value.moduleName===i.value.moduleName&&this.value.runtime===i.value.runtime}isConstant(){return!1}visitExpression(i,s){return i.visitExternalExpr(this,s)}}class ExternalReference{constructor(i,s,S){this.moduleName=i,this.name=s,this.runtime=S}}class ConditionalExpr extends Expression{constructor(i,s,S=null,_,T){super(_||s.type,T),this.condition=i,this.falseCase=S,this.trueCase=s}isEquivalent(i){return i instanceof ConditionalExpr&&this.condition.isEquivalent(i.condition)&&this.trueCase.isEquivalent(i.trueCase)&&nullSafeIsEquivalent(this.falseCase,i.falseCase)}isConstant(){return!1}visitExpression(i,s){return i.visitConditionalExpr(this,s)}}class NotExpr extends Expression{constructor(i,s){super(de,s),this.condition=i}isEquivalent(i){return i instanceof NotExpr&&this.condition.isEquivalent(i.condition)}isConstant(){return!1}visitExpression(i,s){return i.visitNotExpr(this,s)}}class AssertNotNull extends Expression{constructor(i,s){super(i.type,s),this.condition=i}isEquivalent(i){return i instanceof AssertNotNull&&this.condition.isEquivalent(i.condition)}isConstant(){return!1}visitExpression(i,s){return i.visitAssertNotNullExpr(this,s)}}class CastExpr extends Expression{constructor(i,s,S){super(s,S),this.value=i}isEquivalent(i){return i instanceof CastExpr&&this.value.isEquivalent(i.value)}isConstant(){return!1}visitExpression(i,s){return i.visitCastExpr(this,s)}}class FnParam{constructor(i,s=null){this.name=i,this.type=s}isEquivalent(i){return this.name===i.name}}class FunctionExpr extends Expression{constructor(i,s,S,_,T){super(S,_),this.params=i,this.statements=s,this.name=T}isEquivalent(i){return i instanceof FunctionExpr&&areAllEquivalent(this.params,i.params)&&areAllEquivalent(this.statements,i.statements)}isConstant(){return!1}visitExpression(i,s){return i.visitFunctionExpr(this,s)}toDeclStmt(i,s){return new DeclareFunctionStmt(i,this.params,this.statements,this.type,s,this.sourceSpan)}}class UnaryOperatorExpr extends Expression{constructor(i,s,S,_,T=!0){super(S||fe,_),this.operator=i,this.expr=s,this.parens=T}isEquivalent(i){return i instanceof UnaryOperatorExpr&&this.operator===i.operator&&this.expr.isEquivalent(i.expr)}isConstant(){return!1}visitExpression(i,s){return i.visitUnaryOperatorExpr(this,s)}}class BinaryOperatorExpr extends Expression{constructor(i,s,S,_,T,A=!0){super(_||s.type,T),this.operator=i,this.rhs=S,this.parens=A,this.lhs=s}isEquivalent(i){return i instanceof BinaryOperatorExpr&&this.operator===i.operator&&this.lhs.isEquivalent(i.lhs)&&this.rhs.isEquivalent(i.rhs)}isConstant(){return!1}visitExpression(i,s){return i.visitBinaryOperatorExpr(this,s)}}class ReadPropExpr extends Expression{constructor(i,s,S,_){super(S,_),this.receiver=i,this.name=s}isEquivalent(i){return i instanceof ReadPropExpr&&this.receiver.isEquivalent(i.receiver)&&this.name===i.name}isConstant(){return!1}visitExpression(i,s){return i.visitReadPropExpr(this,s)}set(i){return new WritePropExpr(this.receiver,this.name,i,null,this.sourceSpan)}}class ReadKeyExpr extends Expression{constructor(i,s,S,_){super(S,_),this.receiver=i,this.index=s}isEquivalent(i){return i instanceof ReadKeyExpr&&this.receiver.isEquivalent(i.receiver)&&this.index.isEquivalent(i.index)}isConstant(){return!1}visitExpression(i,s){return i.visitReadKeyExpr(this,s)}set(i){return new WriteKeyExpr(this.receiver,this.index,i,null,this.sourceSpan)}}class LiteralArrayExpr extends Expression{constructor(i,s,S){super(s,S),this.entries=i}isConstant(){return this.entries.every(i=>i.isConstant())}isEquivalent(i){return i instanceof LiteralArrayExpr&&areAllEquivalent(this.entries,i.entries)}visitExpression(i,s){return i.visitLiteralArrayExpr(this,s)}}class LiteralMapEntry{constructor(i,s,S){this.key=i,this.value=s,this.quoted=S}isEquivalent(i){return this.key===i.key&&this.value.isEquivalent(i.value)}}class LiteralMapExpr extends Expression{constructor(i,s,S){super(s,S),this.entries=i,this.valueType=null,s&&(this.valueType=s.valueType)}isEquivalent(i){return i instanceof LiteralMapExpr&&areAllEquivalent(this.entries,i.entries)}isConstant(){return this.entries.every(i=>i.value.isConstant())}visitExpression(i,s){return i.visitLiteralMapExpr(this,s)}}class CommaExpr extends Expression{constructor(i,s){super(i[i.length-1].type,s),this.parts=i}isEquivalent(i){return i instanceof CommaExpr&&areAllEquivalent(this.parts,i.parts)}isConstant(){return!1}visitExpression(i,s){return i.visitCommaExpr(this,s)}}new ReadVarExpr(Re.This,null,null),new ReadVarExpr(Re.Super,null,null),new ReadVarExpr(Re.CatchError,null,null),new ReadVarExpr(Re.CatchStack,null,null);const Fe=new LiteralExpr(null,null,null),Le=new LiteralExpr(null,he,null);var $e;!function(i){i[i.Final=0]="Final",i[i.Private=1]="Private",i[i.Exported=2]="Exported",i[i.Static=3]="Static"}($e||($e={}));class LeadingComment{constructor(i,s,S){this.text=i,this.multiline=s,this.trailingNewline=S}toString(){return this.multiline?` ${this.text} `:this.text}}class JSDocComment extends LeadingComment{constructor(i){super("",!0,!0),this.tags=i}toString(){return function serializeTags(i){if(0===i.length)return"";if(1===i.length&&i[0].tagName&&!i[0].text)return`*${tagToString(i[0])} `;let s="*\n";for(const S of i)s+=" *",s+=tagToString(S).replace(/\n/g,"\n * "),s+="\n";return s+=" ",s}(this.tags)}}class Statement{constructor(i=[],s=null,S){this.modifiers=i,this.sourceSpan=s,this.leadingComments=S}hasModifier(i){return-1!==this.modifiers.indexOf(i)}addLeadingComment(i){var s;this.leadingComments=null!==(s=this.leadingComments)&&void 0!==s?s:[],this.leadingComments.push(i)}}class DeclareVarStmt extends Statement{constructor(i,s,S,_,T,A){super(_,T,A),this.name=i,this.value=s,this.type=S||s&&s.type||null}isEquivalent(i){return i instanceof DeclareVarStmt&&this.name===i.name&&(this.value?!!i.value&&this.value.isEquivalent(i.value):!i.value)}visitStatement(i,s){return i.visitDeclareVarStmt(this,s)}}class DeclareFunctionStmt extends Statement{constructor(i,s,S,_,T,A,P){super(T,A,P),this.name=i,this.params=s,this.statements=S,this.type=_||null}isEquivalent(i){return i instanceof DeclareFunctionStmt&&areAllEquivalent(this.params,i.params)&&areAllEquivalent(this.statements,i.statements)}visitStatement(i,s){return i.visitDeclareFunctionStmt(this,s)}}class ExpressionStatement extends Statement{constructor(i,s,S){super([],s,S),this.expr=i}isEquivalent(i){return i instanceof ExpressionStatement&&this.expr.isEquivalent(i.expr)}visitStatement(i,s){return i.visitExpressionStmt(this,s)}}class ReturnStatement extends Statement{constructor(i,s=null,S){super([],s,S),this.value=i}isEquivalent(i){return i instanceof ReturnStatement&&this.value.isEquivalent(i.value)}visitStatement(i,s){return i.visitReturnStmt(this,s)}}class AbstractClassPart{constructor(i=null,s=[]){this.type=i,this.modifiers=s}hasModifier(i){return-1!==this.modifiers.indexOf(i)}}class ClassField extends AbstractClassPart{constructor(i,s,S,_){super(s,S),this.name=i,this.initializer=_}isEquivalent(i){return this.name===i.name}}class ClassMethod extends AbstractClassPart{constructor(i,s,S,_,T){super(_,T),this.name=i,this.params=s,this.body=S}isEquivalent(i){return this.name===i.name&&areAllEquivalent(this.body,i.body)}}class ClassGetter extends AbstractClassPart{constructor(i,s,S,_){super(S,_),this.name=i,this.body=s}isEquivalent(i){return this.name===i.name&&areAllEquivalent(this.body,i.body)}}class ClassStmt extends Statement{constructor(i,s,S,_,T,A,P,N,M){super(P,N,M),this.name=i,this.parent=s,this.fields=S,this.getters=_,this.constructorMethod=T,this.methods=A}isEquivalent(i){return i instanceof ClassStmt&&this.name===i.name&&nullSafeIsEquivalent(this.parent,i.parent)&&areAllEquivalent(this.fields,i.fields)&&areAllEquivalent(this.getters,i.getters)&&this.constructorMethod.isEquivalent(i.constructorMethod)&&areAllEquivalent(this.methods,i.methods)}visitStatement(i,s){return i.visitDeclareClassStmt(this,s)}}class IfStmt extends Statement{constructor(i,s,S=[],_,T){super([],_,T),this.condition=i,this.trueCase=s,this.falseCase=S}isEquivalent(i){return i instanceof IfStmt&&this.condition.isEquivalent(i.condition)&&areAllEquivalent(this.trueCase,i.trueCase)&&areAllEquivalent(this.falseCase,i.falseCase)}visitStatement(i,s){return i.visitIfStmt(this,s)}}class TryCatchStmt extends Statement{constructor(i,s,S=null,_){super([],S,_),this.bodyStmts=i,this.catchStmts=s}isEquivalent(i){return i instanceof TryCatchStmt&&areAllEquivalent(this.bodyStmts,i.bodyStmts)&&areAllEquivalent(this.catchStmts,i.catchStmts)}visitStatement(i,s){return i.visitTryCatchStmt(this,s)}}class ThrowStmt extends Statement{constructor(i,s=null,S){super([],s,S),this.error=i}isEquivalent(i){return i instanceof TryCatchStmt&&this.error.isEquivalent(i.error)}visitStatement(i,s){return i.visitThrowStmt(this,s)}}class RecursiveAstVisitor{visitType(i,s){return i}visitExpression(i,s){return i.type&&i.type.visitType(this,s),i}visitBuiltinType(i,s){return this.visitType(i,s)}visitExpressionType(i,s){return i.value.visitExpression(this,s),null!==i.typeParams&&i.typeParams.forEach(i=>this.visitType(i,s)),this.visitType(i,s)}visitArrayType(i,s){return this.visitType(i,s)}visitMapType(i,s){return this.visitType(i,s)}visitWrappedNodeExpr(i,s){return i}visitTypeofExpr(i,s){return this.visitExpression(i,s)}visitReadVarExpr(i,s){return this.visitExpression(i,s)}visitWriteVarExpr(i,s){return i.value.visitExpression(this,s),this.visitExpression(i,s)}visitWriteKeyExpr(i,s){return i.receiver.visitExpression(this,s),i.index.visitExpression(this,s),i.value.visitExpression(this,s),this.visitExpression(i,s)}visitWritePropExpr(i,s){return i.receiver.visitExpression(this,s),i.value.visitExpression(this,s),this.visitExpression(i,s)}visitInvokeMethodExpr(i,s){return i.receiver.visitExpression(this,s),this.visitAllExpressions(i.args,s),this.visitExpression(i,s)}visitInvokeFunctionExpr(i,s){return i.fn.visitExpression(this,s),this.visitAllExpressions(i.args,s),this.visitExpression(i,s)}visitInstantiateExpr(i,s){return i.classExpr.visitExpression(this,s),this.visitAllExpressions(i.args,s),this.visitExpression(i,s)}visitLiteralExpr(i,s){return this.visitExpression(i,s)}visitLocalizedString(i,s){return this.visitExpression(i,s)}visitExternalExpr(i,s){return i.typeParams&&i.typeParams.forEach(i=>i.visitType(this,s)),this.visitExpression(i,s)}visitConditionalExpr(i,s){return i.condition.visitExpression(this,s),i.trueCase.visitExpression(this,s),i.falseCase.visitExpression(this,s),this.visitExpression(i,s)}visitNotExpr(i,s){return i.condition.visitExpression(this,s),this.visitExpression(i,s)}visitAssertNotNullExpr(i,s){return i.condition.visitExpression(this,s),this.visitExpression(i,s)}visitCastExpr(i,s){return i.value.visitExpression(this,s),this.visitExpression(i,s)}visitFunctionExpr(i,s){return this.visitAllStatements(i.statements,s),this.visitExpression(i,s)}visitUnaryOperatorExpr(i,s){return i.expr.visitExpression(this,s),this.visitExpression(i,s)}visitBinaryOperatorExpr(i,s){return i.lhs.visitExpression(this,s),i.rhs.visitExpression(this,s),this.visitExpression(i,s)}visitReadPropExpr(i,s){return i.receiver.visitExpression(this,s),this.visitExpression(i,s)}visitReadKeyExpr(i,s){return i.receiver.visitExpression(this,s),i.index.visitExpression(this,s),this.visitExpression(i,s)}visitLiteralArrayExpr(i,s){return this.visitAllExpressions(i.entries,s),this.visitExpression(i,s)}visitLiteralMapExpr(i,s){return i.entries.forEach(i=>i.value.visitExpression(this,s)),this.visitExpression(i,s)}visitCommaExpr(i,s){return this.visitAllExpressions(i.parts,s),this.visitExpression(i,s)}visitAllExpressions(i,s){i.forEach(i=>i.visitExpression(this,s))}visitDeclareVarStmt(i,s){return i.value&&i.value.visitExpression(this,s),i.type&&i.type.visitType(this,s),i}visitDeclareFunctionStmt(i,s){return this.visitAllStatements(i.statements,s),i.type&&i.type.visitType(this,s),i}visitExpressionStmt(i,s){return i.expr.visitExpression(this,s),i}visitReturnStmt(i,s){return i.value.visitExpression(this,s),i}visitDeclareClassStmt(i,s){return i.parent.visitExpression(this,s),i.getters.forEach(i=>this.visitAllStatements(i.body,s)),i.constructorMethod&&this.visitAllStatements(i.constructorMethod.body,s),i.methods.forEach(i=>this.visitAllStatements(i.body,s)),i}visitIfStmt(i,s){return i.condition.visitExpression(this,s),this.visitAllStatements(i.trueCase,s),this.visitAllStatements(i.falseCase,s),i}visitTryCatchStmt(i,s){return this.visitAllStatements(i.bodyStmts,s),this.visitAllStatements(i.catchStmts,s),i}visitThrowStmt(i,s){return i.error.visitExpression(this,s),i}visitAllStatements(i,s){i.forEach(i=>i.visitStatement(this,s))}}function findReadVarNames(i){const s=new _ReadVarVisitor;return s.visitAllStatements(i,null),s.varNames}class _ReadVarVisitor extends RecursiveAstVisitor{constructor(){super(...arguments),this.varNames=new Set}visitDeclareFunctionStmt(i,s){return i}visitDeclareClassStmt(i,s){return i}visitReadVarExpr(i,s){return i.name&&this.varNames.add(i.name),null}}function collectExternalReferences(i){const s=new _FindExternalReferencesVisitor;return s.visitAllStatements(i,null),s.externalReferences}class _FindExternalReferencesVisitor extends RecursiveAstVisitor{constructor(){super(...arguments),this.externalReferences=[]}visitExternalExpr(i,s){return this.externalReferences.push(i.value),super.visitExternalExpr(i,s)}}function applySourceSpanToStatementIfNeeded(i,s){if(!s)return i;const S=new _ApplySourceSpanTransformer(s);return i.visitStatement(S,null)}function applySourceSpanToExpressionIfNeeded(i,s){if(!s)return i;const S=new _ApplySourceSpanTransformer(s);return i.visitExpression(S,null)}class _ApplySourceSpanTransformer extends class AstTransformer{transformExpr(i,s){return i}transformStmt(i,s){return i}visitReadVarExpr(i,s){return this.transformExpr(i,s)}visitWrappedNodeExpr(i,s){return this.transformExpr(i,s)}visitTypeofExpr(i,s){return this.transformExpr(new TypeofExpr(i.expr.visitExpression(this,s),i.type,i.sourceSpan),s)}visitWriteVarExpr(i,s){return this.transformExpr(new WriteVarExpr(i.name,i.value.visitExpression(this,s),i.type,i.sourceSpan),s)}visitWriteKeyExpr(i,s){return this.transformExpr(new WriteKeyExpr(i.receiver.visitExpression(this,s),i.index.visitExpression(this,s),i.value.visitExpression(this,s),i.type,i.sourceSpan),s)}visitWritePropExpr(i,s){return this.transformExpr(new WritePropExpr(i.receiver.visitExpression(this,s),i.name,i.value.visitExpression(this,s),i.type,i.sourceSpan),s)}visitInvokeMethodExpr(i,s){const S=i.builtin||i.name;return this.transformExpr(new InvokeMethodExpr(i.receiver.visitExpression(this,s),S,this.visitAllExpressions(i.args,s),i.type,i.sourceSpan),s)}visitInvokeFunctionExpr(i,s){return this.transformExpr(new InvokeFunctionExpr(i.fn.visitExpression(this,s),this.visitAllExpressions(i.args,s),i.type,i.sourceSpan),s)}visitInstantiateExpr(i,s){return this.transformExpr(new InstantiateExpr(i.classExpr.visitExpression(this,s),this.visitAllExpressions(i.args,s),i.type,i.sourceSpan),s)}visitLiteralExpr(i,s){return this.transformExpr(i,s)}visitLocalizedString(i,s){return this.transformExpr(new LocalizedString(i.metaBlock,i.messageParts,i.placeHolderNames,this.visitAllExpressions(i.expressions,s),i.sourceSpan),s)}visitExternalExpr(i,s){return this.transformExpr(i,s)}visitConditionalExpr(i,s){return this.transformExpr(new ConditionalExpr(i.condition.visitExpression(this,s),i.trueCase.visitExpression(this,s),i.falseCase.visitExpression(this,s),i.type,i.sourceSpan),s)}visitNotExpr(i,s){return this.transformExpr(new NotExpr(i.condition.visitExpression(this,s),i.sourceSpan),s)}visitAssertNotNullExpr(i,s){return this.transformExpr(new AssertNotNull(i.condition.visitExpression(this,s),i.sourceSpan),s)}visitCastExpr(i,s){return this.transformExpr(new CastExpr(i.value.visitExpression(this,s),i.type,i.sourceSpan),s)}visitFunctionExpr(i,s){return this.transformExpr(new FunctionExpr(i.params,this.visitAllStatements(i.statements,s),i.type,i.sourceSpan),s)}visitUnaryOperatorExpr(i,s){return this.transformExpr(new UnaryOperatorExpr(i.operator,i.expr.visitExpression(this,s),i.type,i.sourceSpan),s)}visitBinaryOperatorExpr(i,s){return this.transformExpr(new BinaryOperatorExpr(i.operator,i.lhs.visitExpression(this,s),i.rhs.visitExpression(this,s),i.type,i.sourceSpan),s)}visitReadPropExpr(i,s){return this.transformExpr(new ReadPropExpr(i.receiver.visitExpression(this,s),i.name,i.type,i.sourceSpan),s)}visitReadKeyExpr(i,s){return this.transformExpr(new ReadKeyExpr(i.receiver.visitExpression(this,s),i.index.visitExpression(this,s),i.type,i.sourceSpan),s)}visitLiteralArrayExpr(i,s){return this.transformExpr(new LiteralArrayExpr(this.visitAllExpressions(i.entries,s),i.type,i.sourceSpan),s)}visitLiteralMapExpr(i,s){const S=i.entries.map(i=>new LiteralMapEntry(i.key,i.value.visitExpression(this,s),i.quoted)),_=new MapType(i.valueType);return this.transformExpr(new LiteralMapExpr(S,_,i.sourceSpan),s)}visitCommaExpr(i,s){return this.transformExpr(new CommaExpr(this.visitAllExpressions(i.parts,s),i.sourceSpan),s)}visitAllExpressions(i,s){return i.map(i=>i.visitExpression(this,s))}visitDeclareVarStmt(i,s){const S=i.value&&i.value.visitExpression(this,s);return this.transformStmt(new DeclareVarStmt(i.name,S,i.type,i.modifiers,i.sourceSpan,i.leadingComments),s)}visitDeclareFunctionStmt(i,s){return this.transformStmt(new DeclareFunctionStmt(i.name,i.params,this.visitAllStatements(i.statements,s),i.type,i.modifiers,i.sourceSpan,i.leadingComments),s)}visitExpressionStmt(i,s){return this.transformStmt(new ExpressionStatement(i.expr.visitExpression(this,s),i.sourceSpan,i.leadingComments),s)}visitReturnStmt(i,s){return this.transformStmt(new ReturnStatement(i.value.visitExpression(this,s),i.sourceSpan,i.leadingComments),s)}visitDeclareClassStmt(i,s){const S=i.parent.visitExpression(this,s),_=i.getters.map(i=>new ClassGetter(i.name,this.visitAllStatements(i.body,s),i.type,i.modifiers)),T=i.constructorMethod&&new ClassMethod(i.constructorMethod.name,i.constructorMethod.params,this.visitAllStatements(i.constructorMethod.body,s),i.constructorMethod.type,i.constructorMethod.modifiers),A=i.methods.map(i=>new ClassMethod(i.name,i.params,this.visitAllStatements(i.body,s),i.type,i.modifiers));return this.transformStmt(new ClassStmt(i.name,S,i.fields,_,T,A,i.modifiers,i.sourceSpan),s)}visitIfStmt(i,s){return this.transformStmt(new IfStmt(i.condition.visitExpression(this,s),this.visitAllStatements(i.trueCase,s),this.visitAllStatements(i.falseCase,s),i.sourceSpan,i.leadingComments),s)}visitTryCatchStmt(i,s){return this.transformStmt(new TryCatchStmt(this.visitAllStatements(i.bodyStmts,s),this.visitAllStatements(i.catchStmts,s),i.sourceSpan,i.leadingComments),s)}visitThrowStmt(i,s){return this.transformStmt(new ThrowStmt(i.error.visitExpression(this,s),i.sourceSpan,i.leadingComments),s)}visitAllStatements(i,s){return i.map(i=>i.visitStatement(this,s))}}{constructor(i){super(),this.sourceSpan=i}_clone(i){const s=Object.create(i.constructor.prototype);for(let S of Object.keys(i))s[S]=i[S];return s}transformExpr(i,s){return i.sourceSpan||((i=this._clone(i)).sourceSpan=this.sourceSpan),i}transformStmt(i,s){return i.sourceSpan||((i=this._clone(i)).sourceSpan=this.sourceSpan),i}}function leadingComment(i,s=!1,S=!0){return new LeadingComment(i,s,S)}function jsDocComment(i=[]){return new JSDocComment(i)}function variable(i,s,S){return new ReadVarExpr(i,s,S)}function importExpr(i,s=null,S){return new ExternalExpr(i,null,s,S)}function importType(i,s,S){return null!=i?expressionType(importExpr(i,s,null),S):null}function expressionType(i,s,S){return new ExpressionType(i,s,S)}function typeofExpr(i){return new TypeofExpr(i)}function literalArr(i,s,S){return new LiteralArrayExpr(i,s,S)}function literalMap(i,s=null){return new LiteralMapExpr(i.map(i=>new LiteralMapEntry(i.key,i.value,i.quoted)),s,null)}function fn(i,s,S,_,T){return new FunctionExpr(i,s,S,_,T)}function ifStmt(i,s,S,_,T){return new IfStmt(i,s,S,_,T)}function literal(i,s,S){return new LiteralExpr(i,s,S)}function isNull(i){return i instanceof LiteralExpr&&null===i.value}function tagToString(i){let s="";if(i.tagName&&(s+=" @"+i.tagName),i.text){if(i.text.match(/\/\*|\*\//))throw new Error('JSDoc text cannot contain "/*" and "*/"');s+=" "+i.text.replace(/@/g,"\\@")}return s}const Be=/-+([a-z0-9])/g;function splitAtColon(i,s){return _splitAt(i,":",s)}function _splitAt(i,s,S){const _=i.indexOf(s);return-1==_?S:[i.slice(0,_).trim(),i.slice(_+1).trim()]}function visitValue(i,s,S){return Array.isArray(i)?s.visitArray(i,S):function isStrictStringMap(i){return"object"==typeof i&&null!==i&&Object.getPrototypeOf(i)===We}(i)?s.visitStringMap(i,S):null==i||"string"==typeof i||"number"==typeof i||"boolean"==typeof i?s.visitPrimitive(i,S):s.visitOther(i,S)}function isDefined(i){return null!=i}function noUndefined(i){return void 0===i?null:i}class ValueTransformer{visitArray(i,s){return i.map(i=>visitValue(i,this,s))}visitStringMap(i,s){const S={};return Object.keys(i).forEach(_=>{S[_]=visitValue(i[_],this,s)}),S}visitPrimitive(i,s){return i}visitOther(i,s){return i}}const SyncAsync_assertSync=i=>{if(isPromise(i))throw new Error("Illegal state: value cannot be a promise");return i},SyncAsync_then=(i,s)=>isPromise(i)?i.then(s):s(i),SyncAsync_all=i=>i.some(isPromise)?Promise.all(i):i;function error(i){throw new Error("Internal Error: "+i)}function syntaxError(i,s){const S=Error(i);return S[Ve]=!0,s&&(S[Ue]=s),S}const Ve="ngSyntaxError",Ue="ngParseErrors";function isSyntaxError(i){return i[Ve]}function getParseErrors(i){return i[Ue]||[]}function escapeRegExp(i){return i.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}const We=Object.getPrototypeOf({});function utf8Encode(i){let s="";for(let S=0;S<i.length;S++){let _=i.charCodeAt(S);if(_>=55296&&_<=56319&&i.length>S+1){const s=i.charCodeAt(S+1);s>=56320&&s<=57343&&(S++,_=(_-55296<<10)+s-56320+65536)}_<=127?s+=String.fromCharCode(_):_<=2047?s+=String.fromCharCode(_>>6&31|192,63&_|128):_<=65535?s+=String.fromCharCode(_>>12|224,_>>6&63|128,63&_|128):_<=2097151&&(s+=String.fromCharCode(_>>18&7|240,_>>12&63|128,_>>6&63|128,63&_|128))}return s}function stringify(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(stringify).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return""+i.overriddenName;if(i.name)return""+i.name;if(!i.toString)return"object";const s=i.toString();if(null==s)return""+s;const S=s.indexOf("\n");return-1===S?s:s.substring(0,S)}function resolveForwardRef(i){return"function"==typeof i&&i.hasOwnProperty("__forward_ref__")?i():i}function isPromise(i){return!!i&&"function"==typeof i.then}class Version{constructor(i){this.full=i;const s=i.split(".");this.major=s[0],this.minor=s[1],this.patch=s.slice(2).join(".")}}const ze="undefined"!=typeof window&&window,He="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,qe=void 0!==i&&i||ze||He;function newArray(i,s){const S=[];for(let _=0;_<i;_++)S.push(s);return S}function partitionArray(i,s){const S=[],_=[];return i.forEach(i=>{(s(i)?S:_).push(i)}),[S,_]}const Ke=variable("<unknown>"),Ge={};class FixupExpression extends Expression{constructor(i){super(i.type),this.resolved=i,this.original=i}visitExpression(i,s){return s===Ge?this.original.visitExpression(i,s):this.resolved.visitExpression(i,s)}isEquivalent(i){return i instanceof FixupExpression&&this.resolved.isEquivalent(i.resolved)}isConstant(){return!0}fixup(i){this.resolved=i,this.shared=!0}}class ConstantPool{constructor(i=!1){this.isClosureCompilerEnabled=i,this.statements=[],this.literals=new Map,this.literalFactories=new Map,this.injectorDefinitions=new Map,this.directiveDefinitions=new Map,this.componentDefinitions=new Map,this.pipeDefinitions=new Map,this.nextNameIndex=0}getConstLiteral(i,s){if(i instanceof LiteralExpr&&!isLongStringLiteral(i)||i instanceof FixupExpression)return i;const S=this.keyOf(i);let _=this.literals.get(S),T=!1;if(_||(_=new FixupExpression(i),this.literals.set(S,_),T=!0),!T&&!_.shared||T&&s){const s=this.freshName();let S,T;this.isClosureCompilerEnabled&&isLongStringLiteral(i)?(S=variable(s).set(new FunctionExpr([],[new ReturnStatement(i)])),T=variable(s).callFn([])):(S=variable(s).set(i),T=variable(s)),this.statements.push(S.toDeclStmt(he,[$e.Final])),_.fixup(T)}return _}getDefinition(i,s,S,_=!1){const T=this.definitionsOf(s);let A=T.get(i),P=!1;if(!A){const _=this.propertyNameOf(s);A=new FixupExpression(S.importExpr(i).prop(_)),T.set(i,A),P=!0}if(!P&&!A.shared||P&&_){const i=this.freshName();this.statements.push(variable(i).set(A.resolved).toDeclStmt(he,[$e.Final])),A.fixup(variable(i))}return A}getLiteralFactory(i){if(i instanceof LiteralArrayExpr){const s=i.entries.map(i=>i.isConstant()?i:Ke),S=this.keyOf(literalArr(s));return this._getLiteralFactory(S,i.entries,i=>literalArr(i))}{const s=literalMap(i.entries.map(i=>({key:i.key,value:i.value.isConstant()?i.value:Ke,quoted:i.quoted}))),S=this.keyOf(s);return this._getLiteralFactory(S,i.entries.map(i=>i.value),s=>literalMap(s.map((s,S)=>({key:i.entries[S].key,value:s,quoted:i.entries[S].quoted}))))}}_getLiteralFactory(i,s,S){let _=this.literalFactories.get(i);const T=s.filter(i=>!i.isConstant());if(!_){const T=s.map((i,s)=>i.isConstant()?this.getConstLiteral(i,!0):variable("a"+s)),A=fn(T.filter(isVariable).map(i=>new FnParam(i.name,pe)),[new ReturnStatement(S(T))],he),P=this.freshName();this.statements.push(variable(P).set(A).toDeclStmt(he,[$e.Final])),_=variable(P),this.literalFactories.set(i,_)}return{literalFactory:_,literalFactoryArguments:T}}uniqueName(i){return`${i}${this.nextNameIndex++}`}definitionsOf(i){switch(i){case 2:return this.componentDefinitions;case 1:return this.directiveDefinitions;case 0:return this.injectorDefinitions;case 3:return this.pipeDefinitions}return error("Unknown definition kind "+i),this.componentDefinitions}propertyNameOf(i){switch(i){case 2:return"ɵcmp";case 1:return"ɵdir";case 0:return"ɵinj";case 3:return"ɵpipe"}return error("Unknown definition kind "+i),"<unknown>"}freshName(){return this.uniqueName("_c")}keyOf(i){return i.visitExpression(new KeyVisitor,Ge)}}class KeyVisitor{constructor(){this.visitWrappedNodeExpr=invalid,this.visitWriteVarExpr=invalid,this.visitWriteKeyExpr=invalid,this.visitWritePropExpr=invalid,this.visitInvokeMethodExpr=invalid,this.visitInvokeFunctionExpr=invalid,this.visitInstantiateExpr=invalid,this.visitConditionalExpr=invalid,this.visitNotExpr=invalid,this.visitAssertNotNullExpr=invalid,this.visitCastExpr=invalid,this.visitFunctionExpr=invalid,this.visitUnaryOperatorExpr=invalid,this.visitBinaryOperatorExpr=invalid,this.visitReadPropExpr=invalid,this.visitReadKeyExpr=invalid,this.visitCommaExpr=invalid,this.visitLocalizedString=invalid}visitLiteralExpr(i){return""+("string"==typeof i.value?'"'+i.value+'"':i.value)}visitLiteralArrayExpr(i,s){return`[${i.entries.map(i=>i.visitExpression(this,s)).join(",")}]`}visitLiteralMapExpr(i,s){return"{"+i.entries.map(i=>`${(i=>{const s=i.quoted?'"':"";return`${s}${i.key}${s}`})(i)}:${i.value.visitExpression(this,s)}`).join(",")}visitExternalExpr(i){return i.value.moduleName?`EX:${i.value.moduleName}:${i.value.name}`:"EX:"+i.value.runtime.name}visitReadVarExpr(i){return"VAR:"+i.name}visitTypeofExpr(i,s){return"TYPEOF:"+i.expr.visitExpression(this,s)}}function invalid(i){throw new Error(`Invalid state: Visitor ${this.constructor.name} doesn't handle ${i.constructor.name}`)}function isVariable(i){return i instanceof ReadVarExpr}function isLongStringLiteral(i){return i instanceof LiteralExpr&&"string"==typeof i.value&&i.value.length>=50}const Xe="@angular/core";class Identifiers{}function createTokenForReference(i){return{identifier:{reference:i}}}function createTokenForExternalReference(i,s){return createTokenForReference(i.resolveExternalReference(s))}Identifiers.ANALYZE_FOR_ENTRY_COMPONENTS={name:"ANALYZE_FOR_ENTRY_COMPONENTS",moduleName:Xe},Identifiers.ElementRef={name:"ElementRef",moduleName:Xe},Identifiers.NgModuleRef={name:"NgModuleRef",moduleName:Xe},Identifiers.ViewContainerRef={name:"ViewContainerRef",moduleName:Xe},Identifiers.ChangeDetectorRef={name:"ChangeDetectorRef",moduleName:Xe},Identifiers.QueryList={name:"QueryList",moduleName:Xe},Identifiers.TemplateRef={name:"TemplateRef",moduleName:Xe},Identifiers.Renderer2={name:"Renderer2",moduleName:Xe},Identifiers.CodegenComponentFactoryResolver={name:"ɵCodegenComponentFactoryResolver",moduleName:Xe},Identifiers.ComponentFactoryResolver={name:"ComponentFactoryResolver",moduleName:Xe},Identifiers.ComponentFactory={name:"ComponentFactory",moduleName:Xe},Identifiers.ComponentRef={name:"ComponentRef",moduleName:Xe},Identifiers.NgModuleFactory={name:"NgModuleFactory",moduleName:Xe},Identifiers.createModuleFactory={name:"ɵcmf",moduleName:Xe},Identifiers.moduleDef={name:"ɵmod",moduleName:Xe},Identifiers.moduleProviderDef={name:"ɵmpd",moduleName:Xe},Identifiers.RegisterModuleFactoryFn={name:"ɵregisterModuleFactory",moduleName:Xe},Identifiers.inject={name:"ɵɵinject",moduleName:Xe},Identifiers.directiveInject={name:"ɵɵdirectiveInject",moduleName:Xe},Identifiers.INJECTOR={name:"INJECTOR",moduleName:Xe},Identifiers.Injector={name:"Injector",moduleName:Xe},Identifiers.ɵɵdefineInjectable={name:"ɵɵdefineInjectable",moduleName:Xe},Identifiers.InjectableDef={name:"ɵɵInjectableDef",moduleName:Xe},Identifiers.ViewEncapsulation={name:"ViewEncapsulation",moduleName:Xe},Identifiers.ChangeDetectionStrategy={name:"ChangeDetectionStrategy",moduleName:Xe},Identifiers.SecurityContext={name:"SecurityContext",moduleName:Xe},Identifiers.LOCALE_ID={name:"LOCALE_ID",moduleName:Xe},Identifiers.TRANSLATIONS_FORMAT={name:"TRANSLATIONS_FORMAT",moduleName:Xe},Identifiers.inlineInterpolate={name:"ɵinlineInterpolate",moduleName:Xe},Identifiers.interpolate={name:"ɵinterpolate",moduleName:Xe},Identifiers.EMPTY_ARRAY={name:"ɵEMPTY_ARRAY",moduleName:Xe},Identifiers.EMPTY_MAP={name:"ɵEMPTY_MAP",moduleName:Xe},Identifiers.Renderer={name:"Renderer",moduleName:Xe},Identifiers.viewDef={name:"ɵvid",moduleName:Xe},Identifiers.elementDef={name:"ɵeld",moduleName:Xe},Identifiers.anchorDef={name:"ɵand",moduleName:Xe},Identifiers.textDef={name:"ɵted",moduleName:Xe},Identifiers.directiveDef={name:"ɵdid",moduleName:Xe},Identifiers.providerDef={name:"ɵprd",moduleName:Xe},Identifiers.queryDef={name:"ɵqud",moduleName:Xe},Identifiers.pureArrayDef={name:"ɵpad",moduleName:Xe},Identifiers.pureObjectDef={name:"ɵpod",moduleName:Xe},Identifiers.purePipeDef={name:"ɵppd",moduleName:Xe},Identifiers.pipeDef={name:"ɵpid",moduleName:Xe},Identifiers.nodeValue={name:"ɵnov",moduleName:Xe},Identifiers.ngContentDef={name:"ɵncd",moduleName:Xe},Identifiers.unwrapValue={name:"ɵunv",moduleName:Xe},Identifiers.createRendererType2={name:"ɵcrt",moduleName:Xe},Identifiers.RendererType2={name:"RendererType2",moduleName:Xe},Identifiers.ViewDefinition={name:"ɵViewDefinition",moduleName:Xe},Identifiers.createComponentFactory={name:"ɵccf",moduleName:Xe},Identifiers.setClassMetadata={name:"ɵsetClassMetadata",moduleName:Xe};class StaticSymbol{constructor(i,s,S){this.filePath=i,this.name=s,this.members=S}assertNoMembers(){if(this.members.length)throw new Error(`Illegal state: symbol without members expected, but got ${JSON.stringify(this)}.`)}}class StaticSymbolCache{constructor(){this.cache=new Map}get(i,s,S){const _=`"${i}".${s}${(S=S||[]).length?"."+S.join("."):""}`;let T=this.cache.get(_);return T||(T=new StaticSymbol(i,s,S),this.cache.set(_,T)),T}}const Qe=/^(?:(?:\[([^\]]+)\])|(?:\(([^\)]+)\)))|(\@[-\w]+)$/;function sanitizeIdentifier(i){return i.replace(/\W/g,"_")}let Je=0;function identifierName(i){if(!i||!i.reference)return null;const s=i.reference;if(s instanceof StaticSymbol)return s.name;if(s.__anonymousType)return s.__anonymousType;let S=stringify(s);return S.indexOf("(")>=0?(S="anonymous_"+Je++,s.__anonymousType=S):S=sanitizeIdentifier(S),S}function identifierModuleUrl(i){const s=i.reference;return s instanceof StaticSymbol?s.filePath:"./"+stringify(s)}function viewClassName(i,s){return`View_${identifierName({reference:i})}_${s}`}function rendererTypeName(i){return"RenderType_"+identifierName({reference:i})}function hostViewClassName(i){return"HostView_"+identifierName({reference:i})}function componentFactoryName(i){return identifierName({reference:i})+"NgFactory"}var Ye;function tokenName(i){return null!=i.value?sanitizeIdentifier(i.value):identifierName(i.identifier)}function tokenReference(i){return null!=i.identifier?i.identifier.reference:i.value}!function(i){i[i.Pipe=0]="Pipe",i[i.Directive=1]="Directive",i[i.NgModule=2]="NgModule",i[i.Injectable=3]="Injectable"}(Ye||(Ye={}));class CompileStylesheetMetadata{constructor({moduleUrl:i,styles:s,styleUrls:S}={}){this.moduleUrl=i||null,this.styles=_normalizeArray(s),this.styleUrls=_normalizeArray(S)}}class CompileTemplateMetadata{constructor({encapsulation:i,template:s,templateUrl:S,htmlAst:_,styles:T,styleUrls:A,externalStylesheets:P,animations:N,ngContentSelectors:M,interpolation:k,isInline:R,preserveWhitespaces:F}){if(this.encapsulation=i,this.template=s,this.templateUrl=S,this.htmlAst=_,this.styles=_normalizeArray(T),this.styleUrls=_normalizeArray(A),this.externalStylesheets=_normalizeArray(P),this.animations=N?flatten(N):[],this.ngContentSelectors=M||[],k&&2!=k.length)throw new Error("'interpolation' should have a start and an end symbol.");this.interpolation=k,this.isInline=R,this.preserveWhitespaces=F}toSummary(){return{ngContentSelectors:this.ngContentSelectors,encapsulation:this.encapsulation,styles:this.styles,animations:this.animations}}}class CompileDirectiveMetadata{constructor({isHost:i,type:s,isComponent:S,selector:_,exportAs:T,changeDetection:A,inputs:P,outputs:N,hostListeners:M,hostProperties:k,hostAttributes:R,providers:F,viewProviders:D,queries:L,guards:$,viewQueries:V,entryComponents:U,template:W,componentViewType:z,rendererType:H,componentFactory:q}){this.isHost=!!i,this.type=s,this.isComponent=S,this.selector=_,this.exportAs=T,this.changeDetection=A,this.inputs=P,this.outputs=N,this.hostListeners=M,this.hostProperties=k,this.hostAttributes=R,this.providers=_normalizeArray(F),this.viewProviders=_normalizeArray(D),this.queries=_normalizeArray(L),this.guards=$,this.viewQueries=_normalizeArray(V),this.entryComponents=_normalizeArray(U),this.template=W,this.componentViewType=z,this.rendererType=H,this.componentFactory=q}static create({isHost:i,type:s,isComponent:S,selector:_,exportAs:T,changeDetection:A,inputs:P,outputs:N,host:M,providers:k,viewProviders:R,queries:F,guards:D,viewQueries:L,entryComponents:$,template:V,componentViewType:U,rendererType:W,componentFactory:z}){const H={},q={},K={};null!=M&&Object.keys(M).forEach(i=>{const s=M[i],S=i.match(Qe);null===S?K[i]=s:null!=S[1]?q[S[1]]=s:null!=S[2]&&(H[S[2]]=s)});const G={};null!=P&&P.forEach(i=>{const s=splitAtColon(i,[i,i]);G[s[0]]=s[1]});const X={};return null!=N&&N.forEach(i=>{const s=splitAtColon(i,[i,i]);X[s[0]]=s[1]}),new CompileDirectiveMetadata({isHost:i,type:s,isComponent:!!S,selector:_,exportAs:T,changeDetection:A,inputs:G,outputs:X,hostListeners:H,hostProperties:q,hostAttributes:K,providers:k,viewProviders:R,queries:F,guards:D,viewQueries:L,entryComponents:$,template:V,componentViewType:U,rendererType:W,componentFactory:z})}toSummary(){return{summaryKind:Ye.Directive,type:this.type,isComponent:this.isComponent,selector:this.selector,exportAs:this.exportAs,inputs:this.inputs,outputs:this.outputs,hostListeners:this.hostListeners,hostProperties:this.hostProperties,hostAttributes:this.hostAttributes,providers:this.providers,viewProviders:this.viewProviders,queries:this.queries,guards:this.guards,viewQueries:this.viewQueries,entryComponents:this.entryComponents,changeDetection:this.changeDetection,template:this.template&&this.template.toSummary(),componentViewType:this.componentViewType,rendererType:this.rendererType,componentFactory:this.componentFactory}}}class CompilePipeMetadata{constructor({type:i,name:s,pure:S}){this.type=i,this.name=s,this.pure=!!S}toSummary(){return{summaryKind:Ye.Pipe,type:this.type,name:this.name,pure:this.pure}}}class CompileShallowModuleMetadata{}class CompileNgModuleMetadata{constructor({type:i,providers:s,declaredDirectives:S,exportedDirectives:_,declaredPipes:T,exportedPipes:A,entryComponents:P,bootstrapComponents:N,importedModules:M,exportedModules:k,schemas:R,transitiveModule:F,id:D}){this.type=i||null,this.declaredDirectives=_normalizeArray(S),this.exportedDirectives=_normalizeArray(_),this.declaredPipes=_normalizeArray(T),this.exportedPipes=_normalizeArray(A),this.providers=_normalizeArray(s),this.entryComponents=_normalizeArray(P),this.bootstrapComponents=_normalizeArray(N),this.importedModules=_normalizeArray(M),this.exportedModules=_normalizeArray(k),this.schemas=_normalizeArray(R),this.id=D||null,this.transitiveModule=F||null}toSummary(){const i=this.transitiveModule;return{summaryKind:Ye.NgModule,type:this.type,entryComponents:i.entryComponents,providers:i.providers,modules:i.modules,exportedDirectives:i.exportedDirectives,exportedPipes:i.exportedPipes}}}class TransitiveCompileNgModuleMetadata{constructor(){this.directivesSet=new Set,this.directives=[],this.exportedDirectivesSet=new Set,this.exportedDirectives=[],this.pipesSet=new Set,this.pipes=[],this.exportedPipesSet=new Set,this.exportedPipes=[],this.modulesSet=new Set,this.modules=[],this.entryComponentsSet=new Set,this.entryComponents=[],this.providers=[]}addProvider(i,s){this.providers.push({provider:i,module:s})}addDirective(i){this.directivesSet.has(i.reference)||(this.directivesSet.add(i.reference),this.directives.push(i))}addExportedDirective(i){this.exportedDirectivesSet.has(i.reference)||(this.exportedDirectivesSet.add(i.reference),this.exportedDirectives.push(i))}addPipe(i){this.pipesSet.has(i.reference)||(this.pipesSet.add(i.reference),this.pipes.push(i))}addExportedPipe(i){this.exportedPipesSet.has(i.reference)||(this.exportedPipesSet.add(i.reference),this.exportedPipes.push(i))}addModule(i){this.modulesSet.has(i.reference)||(this.modulesSet.add(i.reference),this.modules.push(i))}addEntryComponent(i){this.entryComponentsSet.has(i.componentType)||(this.entryComponentsSet.add(i.componentType),this.entryComponents.push(i))}}function _normalizeArray(i){return i||[]}class ProviderMeta{constructor(i,{useClass:s,useValue:S,useExisting:_,useFactory:T,deps:A,multi:P}){this.token=i,this.useClass=s||null,this.useValue=S,this.useExisting=_,this.useFactory=T||null,this.dependencies=A||null,this.multi=!!P}}function flatten(i){return i.reduce((i,s)=>{const S=Array.isArray(s)?flatten(s):s;return i.concat(S)},[])}function jitSourceUrl(i){return i.replace(/(\w+:\/\/[\w:-]+)?(\/+)?/,"ng:///")}function templateSourceUrl(i,s,S){let _;return _=S.isInline?s.type.reference instanceof StaticSymbol?`${s.type.reference.filePath}.${s.type.reference.name}.html`:`${identifierName(i)}/${identifierName(s.type)}.html`:S.templateUrl,s.type.reference instanceof StaticSymbol?_:jitSourceUrl(_)}function sharedStylesheetJitUrl(i,s){const S=i.moduleUrl.split(/\/\\/g);return jitSourceUrl(`css/${s}${S[S.length-1]}.ngstyle.js`)}function ngModuleJitUrl(i){return jitSourceUrl(identifierName(i.type)+"/module.ngfactory.js")}function templateJitUrl(i,s){return jitSourceUrl(`${identifierName(i)}/${identifierName(s.type)}.ngfactory.js`)}const Ze="@angular/core";class Identifiers$1{}function mapToMapExpression(i){return literalMap(Object.keys(i).map(s=>({key:s,value:i[s],quoted:!1})))}function convertMetaToOutput(i,s){if(Array.isArray(i))return literalArr(i.map(i=>convertMetaToOutput(i,s)));if(i instanceof StaticSymbol)return s.importExpr(i);if(null==i)return literal(i);throw new Error("Internal error: Unsupported or unknown metadata: "+i)}function typeWithParameters(i,s){if(0===s)return expressionType(i);const S=[];for(let i=0;i<s;i++)S.push(pe);return expressionType(i,void 0,S)}Identifiers$1.NEW_METHOD="factory",Identifiers$1.TRANSFORM_METHOD="transform",Identifiers$1.PATCH_DEPS="patchedDeps",Identifiers$1.namespaceHTML={name:"ɵɵnamespaceHTML",moduleName:Ze},Identifiers$1.namespaceMathML={name:"ɵɵnamespaceMathML",moduleName:Ze},Identifiers$1.namespaceSVG={name:"ɵɵnamespaceSVG",moduleName:Ze},Identifiers$1.element={name:"ɵɵelement",moduleName:Ze},Identifiers$1.elementStart={name:"ɵɵelementStart",moduleName:Ze},Identifiers$1.elementEnd={name:"ɵɵelementEnd",moduleName:Ze},Identifiers$1.advance={name:"ɵɵadvance",moduleName:Ze},Identifiers$1.syntheticHostProperty={name:"ɵɵsyntheticHostProperty",moduleName:Ze},Identifiers$1.syntheticHostListener={name:"ɵɵsyntheticHostListener",moduleName:Ze},Identifiers$1.attribute={name:"ɵɵattribute",moduleName:Ze},Identifiers$1.attributeInterpolate1={name:"ɵɵattributeInterpolate1",moduleName:Ze},Identifiers$1.attributeInterpolate2={name:"ɵɵattributeInterpolate2",moduleName:Ze},Identifiers$1.attributeInterpolate3={name:"ɵɵattributeInterpolate3",moduleName:Ze},Identifiers$1.attributeInterpolate4={name:"ɵɵattributeInterpolate4",moduleName:Ze},Identifiers$1.attributeInterpolate5={name:"ɵɵattributeInterpolate5",moduleName:Ze},Identifiers$1.attributeInterpolate6={name:"ɵɵattributeInterpolate6",moduleName:Ze},Identifiers$1.attributeInterpolate7={name:"ɵɵattributeInterpolate7",moduleName:Ze},Identifiers$1.attributeInterpolate8={name:"ɵɵattributeInterpolate8",moduleName:Ze},Identifiers$1.attributeInterpolateV={name:"ɵɵattributeInterpolateV",moduleName:Ze},Identifiers$1.classProp={name:"ɵɵclassProp",moduleName:Ze},Identifiers$1.elementContainerStart={name:"ɵɵelementContainerStart",moduleName:Ze},Identifiers$1.elementContainerEnd={name:"ɵɵelementContainerEnd",moduleName:Ze},Identifiers$1.elementContainer={name:"ɵɵelementContainer",moduleName:Ze},Identifiers$1.styleMap={name:"ɵɵstyleMap",moduleName:Ze},Identifiers$1.styleMapInterpolate1={name:"ɵɵstyleMapInterpolate1",moduleName:Ze},Identifiers$1.styleMapInterpolate2={name:"ɵɵstyleMapInterpolate2",moduleName:Ze},Identifiers$1.styleMapInterpolate3={name:"ɵɵstyleMapInterpolate3",moduleName:Ze},Identifiers$1.styleMapInterpolate4={name:"ɵɵstyleMapInterpolate4",moduleName:Ze},Identifiers$1.styleMapInterpolate5={name:"ɵɵstyleMapInterpolate5",moduleName:Ze},Identifiers$1.styleMapInterpolate6={name:"ɵɵstyleMapInterpolate6",moduleName:Ze},Identifiers$1.styleMapInterpolate7={name:"ɵɵstyleMapInterpolate7",moduleName:Ze},Identifiers$1.styleMapInterpolate8={name:"ɵɵstyleMapInterpolate8",moduleName:Ze},Identifiers$1.styleMapInterpolateV={name:"ɵɵstyleMapInterpolateV",moduleName:Ze},Identifiers$1.classMap={name:"ɵɵclassMap",moduleName:Ze},Identifiers$1.classMapInterpolate1={name:"ɵɵclassMapInterpolate1",moduleName:Ze},Identifiers$1.classMapInterpolate2={name:"ɵɵclassMapInterpolate2",moduleName:Ze},Identifiers$1.classMapInterpolate3={name:"ɵɵclassMapInterpolate3",moduleName:Ze},Identifiers$1.classMapInterpolate4={name:"ɵɵclassMapInterpolate4",moduleName:Ze},Identifiers$1.classMapInterpolate5={name:"ɵɵclassMapInterpolate5",moduleName:Ze},Identifiers$1.classMapInterpolate6={name:"ɵɵclassMapInterpolate6",moduleName:Ze},Identifiers$1.classMapInterpolate7={name:"ɵɵclassMapInterpolate7",moduleName:Ze},Identifiers$1.classMapInterpolate8={name:"ɵɵclassMapInterpolate8",moduleName:Ze},Identifiers$1.classMapInterpolateV={name:"ɵɵclassMapInterpolateV",moduleName:Ze},Identifiers$1.styleProp={name:"ɵɵstyleProp",moduleName:Ze},Identifiers$1.stylePropInterpolate1={name:"ɵɵstylePropInterpolate1",moduleName:Ze},Identifiers$1.stylePropInterpolate2={name:"ɵɵstylePropInterpolate2",moduleName:Ze},Identifiers$1.stylePropInterpolate3={name:"ɵɵstylePropInterpolate3",moduleName:Ze},Identifiers$1.stylePropInterpolate4={name:"ɵɵstylePropInterpolate4",moduleName:Ze},Identifiers$1.stylePropInterpolate5={name:"ɵɵstylePropInterpolate5",moduleName:Ze},Identifiers$1.stylePropInterpolate6={name:"ɵɵstylePropInterpolate6",moduleName:Ze},Identifiers$1.stylePropInterpolate7={name:"ɵɵstylePropInterpolate7",moduleName:Ze},Identifiers$1.stylePropInterpolate8={name:"ɵɵstylePropInterpolate8",moduleName:Ze},Identifiers$1.stylePropInterpolateV={name:"ɵɵstylePropInterpolateV",moduleName:Ze},Identifiers$1.nextContext={name:"ɵɵnextContext",moduleName:Ze},Identifiers$1.templateCreate={name:"ɵɵtemplate",moduleName:Ze},Identifiers$1.text={name:"ɵɵtext",moduleName:Ze},Identifiers$1.enableBindings={name:"ɵɵenableBindings",moduleName:Ze},Identifiers$1.disableBindings={name:"ɵɵdisableBindings",moduleName:Ze},Identifiers$1.getCurrentView={name:"ɵɵgetCurrentView",moduleName:Ze},Identifiers$1.textInterpolate={name:"ɵɵtextInterpolate",moduleName:Ze},Identifiers$1.textInterpolate1={name:"ɵɵtextInterpolate1",moduleName:Ze},Identifiers$1.textInterpolate2={name:"ɵɵtextInterpolate2",moduleName:Ze},Identifiers$1.textInterpolate3={name:"ɵɵtextInterpolate3",moduleName:Ze},Identifiers$1.textInterpolate4={name:"ɵɵtextInterpolate4",moduleName:Ze},Identifiers$1.textInterpolate5={name:"ɵɵtextInterpolate5",moduleName:Ze},Identifiers$1.textInterpolate6={name:"ɵɵtextInterpolate6",moduleName:Ze},Identifiers$1.textInterpolate7={name:"ɵɵtextInterpolate7",moduleName:Ze},Identifiers$1.textInterpolate8={name:"ɵɵtextInterpolate8",moduleName:Ze},Identifiers$1.textInterpolateV={name:"ɵɵtextInterpolateV",moduleName:Ze},Identifiers$1.restoreView={name:"ɵɵrestoreView",moduleName:Ze},Identifiers$1.pureFunction0={name:"ɵɵpureFunction0",moduleName:Ze},Identifiers$1.pureFunction1={name:"ɵɵpureFunction1",moduleName:Ze},Identifiers$1.pureFunction2={name:"ɵɵpureFunction2",moduleName:Ze},Identifiers$1.pureFunction3={name:"ɵɵpureFunction3",moduleName:Ze},Identifiers$1.pureFunction4={name:"ɵɵpureFunction4",moduleName:Ze},Identifiers$1.pureFunction5={name:"ɵɵpureFunction5",moduleName:Ze},Identifiers$1.pureFunction6={name:"ɵɵpureFunction6",moduleName:Ze},Identifiers$1.pureFunction7={name:"ɵɵpureFunction7",moduleName:Ze},Identifiers$1.pureFunction8={name:"ɵɵpureFunction8",moduleName:Ze},Identifiers$1.pureFunctionV={name:"ɵɵpureFunctionV",moduleName:Ze},Identifiers$1.pipeBind1={name:"ɵɵpipeBind1",moduleName:Ze},Identifiers$1.pipeBind2={name:"ɵɵpipeBind2",moduleName:Ze},Identifiers$1.pipeBind3={name:"ɵɵpipeBind3",moduleName:Ze},Identifiers$1.pipeBind4={name:"ɵɵpipeBind4",moduleName:Ze},Identifiers$1.pipeBindV={name:"ɵɵpipeBindV",moduleName:Ze},Identifiers$1.hostProperty={name:"ɵɵhostProperty",moduleName:Ze},Identifiers$1.property={name:"ɵɵproperty",moduleName:Ze},Identifiers$1.propertyInterpolate={name:"ɵɵpropertyInterpolate",moduleName:Ze},Identifiers$1.propertyInterpolate1={name:"ɵɵpropertyInterpolate1",moduleName:Ze},Identifiers$1.propertyInterpolate2={name:"ɵɵpropertyInterpolate2",moduleName:Ze},Identifiers$1.propertyInterpolate3={name:"ɵɵpropertyInterpolate3",moduleName:Ze},Identifiers$1.propertyInterpolate4={name:"ɵɵpropertyInterpolate4",moduleName:Ze},Identifiers$1.propertyInterpolate5={name:"ɵɵpropertyInterpolate5",moduleName:Ze},Identifiers$1.propertyInterpolate6={name:"ɵɵpropertyInterpolate6",moduleName:Ze},Identifiers$1.propertyInterpolate7={name:"ɵɵpropertyInterpolate7",moduleName:Ze},Identifiers$1.propertyInterpolate8={name:"ɵɵpropertyInterpolate8",moduleName:Ze},Identifiers$1.propertyInterpolateV={name:"ɵɵpropertyInterpolateV",moduleName:Ze},Identifiers$1.i18n={name:"ɵɵi18n",moduleName:Ze},Identifiers$1.i18nAttributes={name:"ɵɵi18nAttributes",moduleName:Ze},Identifiers$1.i18nExp={name:"ɵɵi18nExp",moduleName:Ze},Identifiers$1.i18nStart={name:"ɵɵi18nStart",moduleName:Ze},Identifiers$1.i18nEnd={name:"ɵɵi18nEnd",moduleName:Ze},Identifiers$1.i18nApply={name:"ɵɵi18nApply",moduleName:Ze},Identifiers$1.i18nPostprocess={name:"ɵɵi18nPostprocess",moduleName:Ze},Identifiers$1.pipe={name:"ɵɵpipe",moduleName:Ze},Identifiers$1.projection={name:"ɵɵprojection",moduleName:Ze},Identifiers$1.projectionDef={name:"ɵɵprojectionDef",moduleName:Ze},Identifiers$1.reference={name:"ɵɵreference",moduleName:Ze},Identifiers$1.inject={name:"ɵɵinject",moduleName:Ze},Identifiers$1.injectAttribute={name:"ɵɵinjectAttribute",moduleName:Ze},Identifiers$1.injectPipeChangeDetectorRef={name:"ɵɵinjectPipeChangeDetectorRef",moduleName:Ze},Identifiers$1.directiveInject={name:"ɵɵdirectiveInject",moduleName:Ze},Identifiers$1.invalidFactory={name:"ɵɵinvalidFactory",moduleName:Ze},Identifiers$1.invalidFactoryDep={name:"ɵɵinvalidFactoryDep",moduleName:Ze},Identifiers$1.templateRefExtractor={name:"ɵɵtemplateRefExtractor",moduleName:Ze},Identifiers$1.resolveWindow={name:"ɵɵresolveWindow",moduleName:Ze},Identifiers$1.resolveDocument={name:"ɵɵresolveDocument",moduleName:Ze},Identifiers$1.resolveBody={name:"ɵɵresolveBody",moduleName:Ze},Identifiers$1.defineComponent={name:"ɵɵdefineComponent",moduleName:Ze},Identifiers$1.setComponentScope={name:"ɵɵsetComponentScope",moduleName:Ze},Identifiers$1.ComponentDefWithMeta={name:"ɵɵComponentDefWithMeta",moduleName:Ze},Identifiers$1.FactoryDef={name:"ɵɵFactoryDef",moduleName:Ze},Identifiers$1.defineDirective={name:"ɵɵdefineDirective",moduleName:Ze},Identifiers$1.DirectiveDefWithMeta={name:"ɵɵDirectiveDefWithMeta",moduleName:Ze},Identifiers$1.InjectorDef={name:"ɵɵInjectorDef",moduleName:Ze},Identifiers$1.defineInjector={name:"ɵɵdefineInjector",moduleName:Ze},Identifiers$1.NgModuleDefWithMeta={name:"ɵɵNgModuleDefWithMeta",moduleName:Ze},Identifiers$1.ModuleWithProviders={name:"ModuleWithProviders",moduleName:Ze},Identifiers$1.defineNgModule={name:"ɵɵdefineNgModule",moduleName:Ze},Identifiers$1.setNgModuleScope={name:"ɵɵsetNgModuleScope",moduleName:Ze},Identifiers$1.PipeDefWithMeta={name:"ɵɵPipeDefWithMeta",moduleName:Ze},Identifiers$1.definePipe={name:"ɵɵdefinePipe",moduleName:Ze},Identifiers$1.queryRefresh={name:"ɵɵqueryRefresh",moduleName:Ze},Identifiers$1.viewQuery={name:"ɵɵviewQuery",moduleName:Ze},Identifiers$1.staticViewQuery={name:"ɵɵstaticViewQuery",moduleName:Ze},Identifiers$1.staticContentQuery={name:"ɵɵstaticContentQuery",moduleName:Ze},Identifiers$1.loadQuery={name:"ɵɵloadQuery",moduleName:Ze},Identifiers$1.contentQuery={name:"ɵɵcontentQuery",moduleName:Ze},Identifiers$1.NgOnChangesFeature={name:"ɵɵNgOnChangesFeature",moduleName:Ze},Identifiers$1.InheritDefinitionFeature={name:"ɵɵInheritDefinitionFeature",moduleName:Ze},Identifiers$1.CopyDefinitionFeature={name:"ɵɵCopyDefinitionFeature",moduleName:Ze},Identifiers$1.ProvidersFeature={name:"ɵɵProvidersFeature",moduleName:Ze},Identifiers$1.listener={name:"ɵɵlistener",moduleName:Ze},Identifiers$1.getFactoryOf={name:"ɵɵgetFactoryOf",moduleName:Ze},Identifiers$1.getInheritedFactory={name:"ɵɵgetInheritedFactory",moduleName:Ze},Identifiers$1.sanitizeHtml={name:"ɵɵsanitizeHtml",moduleName:Ze},Identifiers$1.sanitizeStyle={name:"ɵɵsanitizeStyle",moduleName:Ze},Identifiers$1.sanitizeResourceUrl={name:"ɵɵsanitizeResourceUrl",moduleName:Ze},Identifiers$1.sanitizeScript={name:"ɵɵsanitizeScript",moduleName:Ze},Identifiers$1.sanitizeUrl={name:"ɵɵsanitizeUrl",moduleName:Ze},Identifiers$1.sanitizeUrlOrResourceUrl={name:"ɵɵsanitizeUrlOrResourceUrl",moduleName:Ze};function prepareSyntheticPropertyName(i){return"@"+i}function prepareSyntheticListenerFunctionName(i,s){return`animation_${i}_${s}`}function wrapReference(i){const s=new WrappedNodeExpr(i);return{value:s,type:s}}function isWhitespace(i){return i>=9&&i<=32||160==i}function isDigit(i){return 48<=i&&i<=57}function isAsciiLetter(i){return i>=97&&i<=122||i>=65&&i<=90}function isNewLine(i){return 10===i||13===i}function isOctalDigit(i){return 48<=i&&i<=55}class ParseLocation{constructor(i,s,S,_){this.file=i,this.offset=s,this.line=S,this.col=_}toString(){return null!=this.offset?`${this.file.url}@${this.line}:${this.col}`:this.file.url}moveBy(i){const s=this.file.content,S=s.length;let _=this.offset,T=this.line,A=this.col;for(;_>0&&i<0;){if(_--,i++,10==s.charCodeAt(_)){T--;const i=s.substr(0,_-1).lastIndexOf(String.fromCharCode(10));A=i>0?_-i:_}else A--}for(;_<S&&i>0;){const S=s.charCodeAt(_);_++,i--,10==S?(T++,A=0):A++}return new ParseLocation(this.file,_,T,A)}getContext(i,s){const S=this.file.content;let _=this.offset;if(null!=_){_>S.length-1&&(_=S.length-1);let T=_,A=0,P=0;for(;A<i&&_>0&&(_--,A++,"\n"!=S[_]||++P!=s););for(A=0,P=0;A<i&&T<S.length-1&&(T++,A++,"\n"!=S[T]||++P!=s););return{before:S.substring(_,this.offset),after:S.substring(this.offset,T+1)}}return null}}class ParseSourceFile{constructor(i,s){this.content=i,this.url=s}}class ParseSourceSpan{constructor(i,s,S=null){this.start=i,this.end=s,this.details=S}toString(){return this.start.file.content.substring(this.start.offset,this.end.offset)}}var et;!function(i){i[i.WARNING=0]="WARNING",i[i.ERROR=1]="ERROR"}(et||(et={}));class ParseError{constructor(i,s,S=et.ERROR){this.span=i,this.msg=s,this.level=S}contextualMessage(){const i=this.span.start.getContext(100,3);return i?`${this.msg} ("${i.before}[${et[this.level]} ->]${i.after}")`:this.msg}toString(){const i=this.span.details?", "+this.span.details:"";return`${this.contextualMessage()}: ${this.span.start}${i}`}}function typeSourceSpan(i,s){const S=identifierModuleUrl(s),_=null!=S?`in ${i} ${identifierName(s)} in ${S}`:`in ${i} ${identifierName(s)}`,T=new ParseSourceFile("",_);return new ParseSourceSpan(new ParseLocation(T,-1,-1,-1),new ParseLocation(T,-1,-1,-1))}function r3JitTypeSourceSpan(i,s,S){const _=new ParseSourceFile("",`in ${i} ${s} in ${S}`);return new ParseSourceSpan(new ParseLocation(_,-1,-1,-1),new ParseLocation(_,-1,-1,-1))}class Text{constructor(i,s){this.value=i,this.sourceSpan=s}visit(i){return i.visitText(this)}}class BoundText{constructor(i,s,S){this.value=i,this.sourceSpan=s,this.i18n=S}visit(i){return i.visitBoundText(this)}}class TextAttribute{constructor(i,s,S,_,T){this.name=i,this.value=s,this.sourceSpan=S,this.valueSpan=_,this.i18n=T}visit(i){return i.visitTextAttribute(this)}}class BoundAttribute{constructor(i,s,S,_,T,A,P,N){this.name=i,this.type=s,this.securityContext=S,this.value=_,this.unit=T,this.sourceSpan=A,this.valueSpan=P,this.i18n=N}static fromBoundElementProperty(i,s){return new BoundAttribute(i.name,i.type,i.securityContext,i.value,i.unit,i.sourceSpan,i.valueSpan,s)}visit(i){return i.visitBoundAttribute(this)}}class BoundEvent{constructor(i,s,S,_,T,A,P){this.name=i,this.type=s,this.handler=S,this.target=_,this.phase=T,this.sourceSpan=A,this.handlerSpan=P}static fromParsedEvent(i){const s=0===i.type?i.targetOrPhase:null,S=1===i.type?i.targetOrPhase:null;return new BoundEvent(i.name,i.type,i.handler,s,S,i.sourceSpan,i.handlerSpan)}visit(i){return i.visitBoundEvent(this)}}class Element{constructor(i,s,S,_,T,A,P,N,M,k){this.name=i,this.attributes=s,this.inputs=S,this.outputs=_,this.children=T,this.references=A,this.sourceSpan=P,this.startSourceSpan=N,this.endSourceSpan=M,this.i18n=k,0===T.length&&N&&M&&(this.sourceSpan=new ParseSourceSpan(P.start,M.end))}visit(i){return i.visitElement(this)}}class Template{constructor(i,s,S,_,T,A,P,N,M,k,R,F){this.tagName=i,this.attributes=s,this.inputs=S,this.outputs=_,this.templateAttrs=T,this.children=A,this.references=P,this.variables=N,this.sourceSpan=M,this.startSourceSpan=k,this.endSourceSpan=R,this.i18n=F}visit(i){return i.visitTemplate(this)}}class Content{constructor(i,s,S,_){this.selector=i,this.attributes=s,this.sourceSpan=S,this.i18n=_,this.name="ng-content"}visit(i){return i.visitContent(this)}}class Variable{constructor(i,s,S,_){this.name=i,this.value=s,this.sourceSpan=S,this.valueSpan=_}visit(i){return i.visitVariable(this)}}class Reference{constructor(i,s,S,_){this.name=i,this.value=s,this.sourceSpan=S,this.valueSpan=_}visit(i){return i.visitReference(this)}}class Icu{constructor(i,s,S,_){this.vars=i,this.placeholders=s,this.sourceSpan=S,this.i18n=_}visit(i){return i.visitIcu(this)}}class RecursiveVisitor{visitElement(i){visitAll(this,i.attributes),visitAll(this,i.children),visitAll(this,i.references)}visitTemplate(i){visitAll(this,i.attributes),visitAll(this,i.children),visitAll(this,i.references),visitAll(this,i.variables)}visitContent(i){}visitVariable(i){}visitReference(i){}visitTextAttribute(i){}visitBoundAttribute(i){}visitBoundEvent(i){}visitText(i){}visitBoundText(i){}visitIcu(i){}}function visitAll(i,s){const S=[];if(i.visit)for(const S of s){i.visit(S)||S.visit(i)}else for(const _ of s){const s=_.visit(i);s&&S.push(s)}return S}class Message{constructor(i,s,S,_,T,A){this.nodes=i,this.placeholders=s,this.placeholderToMessage=S,this.meaning=_,this.description=T,this.customId=A,this.id=this.customId,this.legacyIds=[],i.length?this.sources=[{filePath:i[0].sourceSpan.start.file.url,startLine:i[0].sourceSpan.start.line+1,startCol:i[0].sourceSpan.start.col+1,endLine:i[i.length-1].sourceSpan.end.line+1,endCol:i[0].sourceSpan.start.col+1}]:this.sources=[]}}class Text$1{constructor(i,s){this.value=i,this.sourceSpan=s}visit(i,s){return i.visitText(this,s)}}class Container{constructor(i,s){this.children=i,this.sourceSpan=s}visit(i,s){return i.visitContainer(this,s)}}class Icu$1{constructor(i,s,S,_){this.expression=i,this.type=s,this.cases=S,this.sourceSpan=_}visit(i,s){return i.visitIcu(this,s)}}class TagPlaceholder{constructor(i,s,S,_,T,A,P,N,M){this.tag=i,this.attrs=s,this.startName=S,this.closeName=_,this.children=T,this.isVoid=A,this.sourceSpan=P,this.startSourceSpan=N,this.endSourceSpan=M}visit(i,s){return i.visitTagPlaceholder(this,s)}}class Placeholder{constructor(i,s,S){this.value=i,this.name=s,this.sourceSpan=S}visit(i,s){return i.visitPlaceholder(this,s)}}class IcuPlaceholder{constructor(i,s,S){this.value=i,this.name=s,this.sourceSpan=S}visit(i,s){return i.visitIcuPlaceholder(this,s)}}function digest(i){return i.id||computeDigest(i)}function computeDigest(i){return function sha1(i){const s=utf8Encode(i),S=function stringToWords32(i,s){const S=i.length+3>>>2,_=[];for(let T=0;T<S;T++)_[T]=wordAt(i,4*T,s);return _}(s,rt.Big),_=8*s.length,T=newArray(80);let A=1732584193,P=4023233417,N=2562383102,M=271733878,k=3285377520;S[_>>5]|=128<<24-_%32,S[15+(_+64>>9<<4)]=_;for(let i=0;i<S.length;i+=16){const s=A,_=P,R=N,F=M,D=k;for(let s=0;s<80;s++){T[s]=s<16?S[i+s]:rol32(T[s-3]^T[s-8]^T[s-14]^T[s-16],1);const _=fk(s,P,N,M),R=_[0],F=_[1],D=[rol32(A,5),R,k,F,T[s]].reduce(add32);k=M,M=N,N=rol32(P,30),P=A,A=D}A=add32(A,s),P=add32(P,_),N=add32(N,R),M=add32(M,F),k=add32(k,D)}return function byteStringToHexString(i){let s="";for(let S=0;S<i.length;S++){const _=byteAt(i,S);s+=(_>>>4).toString(16)+(15&_).toString(16)}return s.toLowerCase()}(words32ToByteString([A,P,N,M,k]))}(function serializeNodes(i){return i.map(i=>i.visit(tt,null))}(i.nodes).join("")+`[${i.meaning}]`)}function decimalDigest(i){return i.id||computeDecimalDigest(i)}function computeDecimalDigest(i){const s=new _SerializerIgnoreIcuExpVisitor;return computeMsgId(i.nodes.map(i=>i.visit(s,null)).join(""),i.meaning)}class _SerializerVisitor{visitText(i,s){return i.value}visitContainer(i,s){return`[${i.children.map(i=>i.visit(this)).join(", ")}]`}visitIcu(i,s){const S=Object.keys(i.cases).map(s=>`${s} {${i.cases[s].visit(this)}}`);return`{${i.expression}, ${i.type}, ${S.join(", ")}}`}visitTagPlaceholder(i,s){return i.isVoid?`<ph tag name="${i.startName}"/>`:`<ph tag name="${i.startName}">${i.children.map(i=>i.visit(this)).join(", ")}</ph name="${i.closeName}">`}visitPlaceholder(i,s){return i.value?`<ph name="${i.name}">${i.value}</ph>`:`<ph name="${i.name}"/>`}visitIcuPlaceholder(i,s){return`<ph icu name="${i.name}">${i.value.visit(this)}</ph>`}}const tt=new _SerializerVisitor;class _SerializerIgnoreIcuExpVisitor extends _SerializerVisitor{visitIcu(i,s){let S=Object.keys(i.cases).map(s=>`${s} {${i.cases[s].visit(this)}}`);return`{${i.type}, ${S.join(", ")}}`}}function fk(i,s,S,_){return i<20?[s&S|~s&_,1518500249]:i<40?[s^S^_,1859775393]:i<60?[s&S|s&_|S&_,2400959708]:[s^S^_,3395469782]}function fingerprint(i){const s=utf8Encode(i);let S=hash32(s,0),_=hash32(s,102072);return 0!=S||0!=_&&1!=_||(S^=319790063,_^=-1801410264),[S,_]}function computeMsgId(i,s=""){let S=fingerprint(i);if(s){const i=fingerprint(s);S=function add64(i,s){const S=i[0],_=i[1],T=s[0],A=s[1],P=add32to64(_,A),N=P[0],M=P[1];return[add32(add32(S,T),N),M]}(function rol64(i,s){const S=i[0],_=i[1];return[S<<s|_>>>32-s,_<<s|S>>>32-s]}(S,1),i)}return function byteStringToDecString(i){let s="",S="1";for(let _=i.length-1;_>=0;_--)s=addBigInt(s,numberTimesBigInt(byteAt(i,_),S)),S=numberTimesBigInt(256,S);return s.split("").reverse().join("")}(words32ToByteString([2147483647&S[0],S[1]]))}function hash32(i,s){let S,_=2654435769,T=2654435769;const A=i.length;for(S=0;S+12<=A;S+=12){_=add32(_,wordAt(i,S,rt.Little)),T=add32(T,wordAt(i,S+4,rt.Little));const A=mix(_,T,s=add32(s,wordAt(i,S+8,rt.Little)));_=A[0],T=A[1],s=A[2]}return _=add32(_,wordAt(i,S,rt.Little)),T=add32(T,wordAt(i,S+4,rt.Little)),s=add32(s,A),mix(_,T,s=add32(s,wordAt(i,S+8,rt.Little)<<8))[2]}function mix(i,s,S){return i=sub32(i,s),i=sub32(i,S),i^=S>>>13,s=sub32(s,S),s=sub32(s,i),s^=i<<8,S=sub32(S,i),S=sub32(S,s),S^=s>>>13,i=sub32(i,s),i=sub32(i,S),i^=S>>>12,s=sub32(s,S),s=sub32(s,i),s^=i<<16,S=sub32(S,i),S=sub32(S,s),S^=s>>>5,i=sub32(i,s),i=sub32(i,S),i^=S>>>3,s=sub32(s,S),s=sub32(s,i),s^=i<<10,S=sub32(S,i),S=sub32(S,s),[i,s,S^=s>>>15]}var rt;function add32(i,s){return add32to64(i,s)[1]}function add32to64(i,s){const S=(65535&i)+(65535&s),_=(i>>>16)+(s>>>16)+(S>>>16);return[_>>>16,_<<16|65535&S]}function sub32(i,s){const S=(65535&i)-(65535&s);return(i>>16)-(s>>16)+(S>>16)<<16|65535&S}function rol32(i,s){return i<<s|i>>>32-s}function byteAt(i,s){return s>=i.length?0:255&i.charCodeAt(s)}function wordAt(i,s,S){let _=0;if(S===rt.Big)for(let S=0;S<4;S++)_+=byteAt(i,s+S)<<24-8*S;else for(let S=0;S<4;S++)_+=byteAt(i,s+S)<<8*S;return _}function words32ToByteString(i){return i.reduce((i,s)=>i+function word32ToByteString(i){let s="";for(let S=0;S<4;S++)s+=String.fromCharCode(i>>>8*(3-S)&255);return s}(s),"")}function addBigInt(i,s){let S="";const _=Math.max(i.length,s.length);for(let T=0,A=0;T<_||A;T++){const _=A+ +(i[T]||0)+ +(s[T]||0);_>=10?(A=1,S+=_-10):(A=0,S+=_)}return S}function numberTimesBigInt(i,s){let S="",_=s;for(;0!==i;i>>>=1)1&i&&(S=addBigInt(S,_)),_=addBigInt(_,_);return S}!function(i){i[i.Little=0]="Little",i[i.Big=1]="Big"}(rt||(rt={}));class Serializer{createNameMapper(i){return null}}class SimplePlaceholderMapper extends class RecurseVisitor{visitText(i,s){}visitContainer(i,s){i.children.forEach(i=>i.visit(this))}visitIcu(i,s){Object.keys(i.cases).forEach(s=>{i.cases[s].visit(this)})}visitTagPlaceholder(i,s){i.children.forEach(i=>i.visit(this))}visitPlaceholder(i,s){}visitIcuPlaceholder(i,s){}}{constructor(i,s){super(),this.mapName=s,this.internalToPublic={},this.publicToNextId={},this.publicToInternal={},i.nodes.forEach(i=>i.visit(this))}toPublicName(i){return this.internalToPublic.hasOwnProperty(i)?this.internalToPublic[i]:null}toInternalName(i){return this.publicToInternal.hasOwnProperty(i)?this.publicToInternal[i]:null}visitText(i,s){return null}visitTagPlaceholder(i,s){this.visitPlaceholderName(i.startName),super.visitTagPlaceholder(i,s),this.visitPlaceholderName(i.closeName)}visitPlaceholder(i,s){this.visitPlaceholderName(i.name)}visitIcuPlaceholder(i,s){this.visitPlaceholderName(i.name)}visitPlaceholderName(i){if(!i||this.internalToPublic.hasOwnProperty(i))return;let s=this.mapName(i);if(this.publicToInternal.hasOwnProperty(s)){const i=this.publicToNextId[s];this.publicToNextId[s]=i+1,s=`${s}_${i}`}else this.publicToNextId[s]=1;this.internalToPublic[i]=s,this.publicToInternal[s]=i}}const nt=new class _Visitor{visitTag(i){const s=this._serializeAttributes(i.attrs);if(0==i.children.length)return`<${i.name}${s}/>`;const S=i.children.map(i=>i.visit(this));return`<${i.name}${s}>${S.join("")}</${i.name}>`}visitText(i){return i.value}visitDeclaration(i){return`<?xml${this._serializeAttributes(i.attrs)} ?>`}_serializeAttributes(i){const s=Object.keys(i).map(s=>`${s}="${i[s]}"`).join(" ");return s.length>0?" "+s:""}visitDoctype(i){return`<!DOCTYPE ${i.rootTag} [\n${i.dtd}\n]>`}};function serialize(i){return i.map(i=>i.visit(nt)).join("")}class Declaration{constructor(i){this.attrs={},Object.keys(i).forEach(s=>{this.attrs[s]=escapeXml(i[s])})}visit(i){return i.visitDeclaration(this)}}class Doctype{constructor(i,s){this.rootTag=i,this.dtd=s}visit(i){return i.visitDoctype(this)}}class Tag{constructor(i,s={},S=[]){this.name=i,this.children=S,this.attrs={},Object.keys(s).forEach(i=>{this.attrs[i]=escapeXml(s[i])})}visit(i){return i.visitTag(this)}}class Text$2{constructor(i){this.value=escapeXml(i)}visit(i){return i.visitText(this)}}class CR extends Text$2{constructor(i=0){super("\n"+new Array(i+1).join(" "))}}const it=[[/&/g,"&amp;"],[/"/g,"&quot;"],[/'/g,"&apos;"],[/</g,"&lt;"],[/>/g,"&gt;"]];function escapeXml(i){return it.reduce((i,s)=>i.replace(s[0],s[1]),i)}class Xmb extends Serializer{write(i,s){const S=new ExampleVisitor,_=new _Visitor$1;let T=new Tag("messagebundle");return i.forEach(i=>{const s={id:i.id};i.description&&(s.desc=i.description),i.meaning&&(s.meaning=i.meaning);let S=[];i.sources.forEach(i=>{S.push(new Tag("source",{},[new Text$2(`${i.filePath}:${i.startLine}${i.endLine!==i.startLine?","+i.endLine:""}`)]))}),T.children.push(new CR(2),new Tag("msg",s,[...S,..._.serialize(i.nodes)]))}),T.children.push(new CR),serialize([new Declaration({version:"1.0",encoding:"UTF-8"}),new CR,new Doctype("messagebundle",'<!ELEMENT messagebundle (msg)*>\n<!ATTLIST messagebundle class CDATA #IMPLIED>\n\n<!ELEMENT msg (#PCDATA|ph|source)*>\n<!ATTLIST msg id CDATA #IMPLIED>\n<!ATTLIST msg seq CDATA #IMPLIED>\n<!ATTLIST msg name CDATA #IMPLIED>\n<!ATTLIST msg desc CDATA #IMPLIED>\n<!ATTLIST msg meaning CDATA #IMPLIED>\n<!ATTLIST msg obsolete (obsolete) #IMPLIED>\n<!ATTLIST msg xml:space (default|preserve) "default">\n<!ATTLIST msg is_hidden CDATA #IMPLIED>\n\n<!ELEMENT source (#PCDATA)>\n\n<!ELEMENT ph (#PCDATA|ex)*>\n<!ATTLIST ph name CDATA #REQUIRED>\n\n<!ELEMENT ex (#PCDATA)>'),new CR,S.addDefaultExamples(T),new CR])}load(i,s){throw new Error("Unsupported")}digest(i){return digest$1(i)}createNameMapper(i){return new SimplePlaceholderMapper(i,toPublicName)}}class _Visitor$1{visitText(i,s){return[new Text$2(i.value)]}visitContainer(i,s){const S=[];return i.children.forEach(i=>S.push(...i.visit(this))),S}visitIcu(i,s){const S=[new Text$2(`{${i.expressionPlaceholder}, ${i.type}, `)];return Object.keys(i.cases).forEach(s=>{S.push(new Text$2(s+" {"),...i.cases[s].visit(this),new Text$2("} "))}),S.push(new Text$2("}")),S}visitTagPlaceholder(i,s){const S=new Text$2(`<${i.tag}>`),_=new Tag("ex",{},[S]),T=new Tag("ph",{name:i.startName},[_,S]);if(i.isVoid)return[T];const A=new Text$2(`</${i.tag}>`),P=new Tag("ex",{},[A]),N=new Tag("ph",{name:i.closeName},[P,A]);return[T,...this.serialize(i.children),N]}visitPlaceholder(i,s){const S=new Text$2(`{{${i.value}}}`),_=new Tag("ex",{},[S]);return[new Tag("ph",{name:i.name},[_,S])]}visitIcuPlaceholder(i,s){const S=i.value.expression,_=i.value.type,T=Object.keys(i.value.cases).map(i=>i+" {...}").join(" "),A=new Text$2(`{${S}, ${_}, ${T}}`),P=new Tag("ex",{},[A]);return[new Tag("ph",{name:i.name},[P,A])]}serialize(i){return[].concat(...i.map(i=>i.visit(this)))}}function digest$1(i){return decimalDigest(i)}class ExampleVisitor{addDefaultExamples(i){return i.visit(this),i}visitTag(i){if("ph"===i.name){if(!i.children||0==i.children.length){const s=new Text$2(i.attrs.name||"...");i.children=[new Tag("ex",{},[s])]}}else i.children&&i.children.forEach(i=>i.visit(this))}visitText(i){}visitDeclaration(i){}visitDoctype(i){}}function toPublicName(i){return i.toUpperCase().replace(/[^A-Z0-9_]/g,"_")}function isI18nAttribute(i){return"i18n"===i||i.startsWith("i18n-")}function isI18nRootNode(i){return i instanceof Message}function isSingleI18nIcu(i){return isI18nRootNode(i)&&1===i.nodes.length&&i.nodes[0]instanceof Icu$1}function hasI18nMeta(i){return!!i.i18n}function icuFromI18nMessage(i){return i.nodes[0]}function wrapI18nPlaceholder(i,s=0){return`�${i}${s>0?":"+s:""}�`}function getSeqNumberGenerator(i=0){let s=i;return()=>s++}function placeholdersToParams(i){const s={};return i.forEach((i,S)=>{s[S]=literal(i.length>1?`[${i.join("|")}]`:i[0])}),s}function updatePlaceholderMap(i,s,...S){const _=i.get(s)||[];_.push(...S),i.set(s,_)}function assembleBoundTextPlaceholders(i,s=0,S=0){const _=s,T=new Map,A=i instanceof Message?i.nodes.find(i=>i instanceof Container):i;return A&&A.children.filter(i=>i instanceof Placeholder).forEach((i,s)=>{const A=wrapI18nPlaceholder(_+s,S);updatePlaceholderMap(T,i.name,A)}),T}function i18nFormatPlaceholderNames(i={},s){const S={};return i&&Object.keys(i).length&&Object.keys(i).forEach(_=>S[formatI18nPlaceholderName(_,s)]=i[_]),S}function formatI18nPlaceholderName(i,s=!0){const S=toPublicName(i);if(!s)return S;const _=S.split("_");if(1===_.length)return i.toLowerCase();let T;/^\d+$/.test(_[_.length-1])&&(T=_.pop());let A=_.shift().toLowerCase();return _.length&&(A+=_.map(i=>i.charAt(0).toUpperCase()+i.slice(1).toLowerCase()).join("")),T?`${A}_${T}`:A}function getTranslationConstPrefix(i){return("MSG_"+i).toUpperCase()}function declareI18nVariable(i){return new DeclareVarStmt(i.name,void 0,he,void 0,i.sourceSpan)}const st=/[-.]/;function temporaryAllocator(i,s){let S=null;return()=>(S||(i.push(new DeclareVarStmt("_t",void 0,pe)),S=variable(s)),S)}function unsupported(i){if(this)throw new Error(`Builder ${this.constructor.name} doesn't support ${i} yet`);throw new Error(`Feature ${i} is not supported yet`)}function invalid$1(i){throw new Error(`Invalid state: Visitor ${this.constructor.name} doesn't handle ${i.constructor.name}`)}function asLiteral(i){return Array.isArray(i)?literalArr(i.map(asLiteral)):literal(i,he)}function conditionallyCreateMapObjectLiteral(i,s){return Object.getOwnPropertyNames(i).length>0?function mapToExpression(i,s){return literalMap(Object.getOwnPropertyNames(i).map(S=>{const _=i[S];let T,A,P;return Array.isArray(_)?[A,T]=_:[T,A]=splitAtColon(S,[S,_]),P=T,{key:P,quoted:st.test(P),value:s&&A!==T?literalArr([asLiteral(A),asLiteral(T)]):asLiteral(A)}}))}(i,s):null}function trimTrailingNulls(i){for(;isNull(i[i.length-1]);)i.pop();return i}function getQueryPredicate(i,s){if(Array.isArray(i.predicate)){let S=[];return i.predicate.forEach(i=>{const s=i.split(",").map(i=>literal(i.trim()));S.push(...s)}),s.getConstLiteral(literalArr(S),!0)}return i.predicate}class DefinitionMap{constructor(){this.values=[]}set(i,s){s&&this.values.push({key:i,value:s,quoted:!1})}toLiteralMap(){return literalMap(this.values)}}function getAttrsForDirectiveMatching(i){const s={};return i instanceof Template&&"ng-template"!==i.tagName?i.templateAttrs.forEach(i=>s[i.name]=""):(i.attributes.forEach(i=>{isI18nAttribute(i.name)||(s[i.name]=i.value)}),i.inputs.forEach(i=>{s[i.name]=""}),i.outputs.forEach(i=>{s[i.name]=""})),s}function chainedInstruction(i,s,S){let _=importExpr(i,null,S);if(s.length>0)for(let i=0;i<s.length;i++)_=_.callFn(s[i],S);else _=_.callFn([],S);return _}function getInterpolationArgsLength(i){const{expressions:s,strings:S}=i;return 1===s.length&&2===S.length&&""===S[0]&&""===S[1]?1:s.length+S.length}var at,ot,lt;function compileFactoryFunction(i){const s=variable("t"),S=[];let _=Te;const T=isDelegatedMetadata(i)?s:new BinaryOperatorExpr(Me.Or,s,i.internalType);let A=null;if(null!==i.deps)"invalid"!==i.deps&&(A=new InstantiateExpr(T,injectDependencies(i.deps,i.injectFn,i.target===ot.Pipe)),_=function createCtorDepsType(i){let s=!1;const S=i.map(i=>{const S=function createCtorDepType(i){const s=[];i.resolved===lt.Attribute&&null!==i.attribute&&s.push({key:"attribute",value:i.attribute,quoted:!1});i.optional&&s.push({key:"optional",value:literal(!0),quoted:!1});i.host&&s.push({key:"host",value:literal(!0),quoted:!1});i.self&&s.push({key:"self",value:literal(!0),quoted:!1});i.skipSelf&&s.push({key:"skipSelf",value:literal(!0),quoted:!1});return s.length>0?literalMap(s):null}(i);return null!==S?(s=!0,S):literal(null)});return s?expressionType(literalArr(S)):Te}(i.deps));else{const s=variable(`ɵ${i.name}_BaseFactory`),_=importExpr(Identifiers$1.getInheritedFactory),P=s.set(_.callFn([i.internalType],void 0,!0)).toDeclStmt(he,[$e.Exported,$e.Final]);S.push(P),A=s.callFn([T])}const P=A,N=[];let M=null;function makeConditionalFactory(i){const S=variable("r");N.push(S.set(Fe).toDeclStmt());let _=null;return _=null!==P?S.set(P).toStmt():importExpr(Identifiers$1.invalidFactory).callFn([]).toStmt(),N.push(ifStmt(s,[_],[S.set(i).toStmt()])),S}if(isDelegatedMetadata(i)&&i.delegateType===at.Factory){const s=variable(`ɵ${i.name}_BaseFactory`),_=importExpr(Identifiers$1.getFactoryOf);if(i.delegate.isEquivalent(i.internalType))throw new Error("Illegal state: compiling factory that delegates to itself");const T=s.set(_.callFn([i.delegate])).toDeclStmt(he,[$e.Exported,$e.Final]);S.push(T),M=makeConditionalFactory(s.callFn([]))}else if(isDelegatedMetadata(i)){const s=injectDependencies(i.delegateDeps,i.injectFn,i.target===ot.Pipe);M=makeConditionalFactory(new(i.delegateType===at.Class?InstantiateExpr:InvokeFunctionExpr)(i.delegate,s))}else M=function isExpressionFactoryMetadata(i){return void 0!==i.expression}(i)?makeConditionalFactory(i.expression):A;return null!==M?N.push(new ReturnStatement(M)):N.push(importExpr(Identifiers$1.invalidFactory).callFn([]).toStmt()),{factory:fn([new FnParam("t",pe)],N,he,void 0,i.name+"_Factory"),statements:S,type:expressionType(importExpr(Identifiers$1.FactoryDef,[typeWithParameters(i.type.type,i.typeArgumentCount),_]))}}function injectDependencies(i,s,S){return i.map((i,_)=>function compileInjectDependency(i,s,S,_){switch(i.resolved){case lt.Token:case lt.ChangeDetectorRef:const T=0|(i.self?2:0)|(i.skipSelf?4:0)|(i.host?1:0)|(i.optional?8:0);let A=0!==T||i.optional?literal(T):null;if(S&&i.resolved===lt.ChangeDetectorRef)return importExpr(Identifiers$1.injectPipeChangeDetectorRef).callFn(A?[A]:[]);const P=[i.token];return A&&P.push(A),importExpr(s).callFn(P);case lt.Attribute:return importExpr(Identifiers$1.injectAttribute).callFn([i.token]);case lt.Invalid:return importExpr(Identifiers$1.invalidFactoryDep).callFn([literal(_)]);default:return unsupported("Unknown R3ResolvedDependencyType: "+lt[i.resolved])}}(i,s,S,_))}function dependenciesFromGlobalMetadata(i,s,S){S.resolveExternalReference(Identifiers.Injector);const _=[];for(let S of i.diDeps)if(S.token){const i=tokenReference(S.token);let T=S.isAttribute?lt.Attribute:lt.Token;const A=i instanceof StaticSymbol?s.importExpr(i):literal(i);_.push({token:A,attribute:null,resolved:T,host:!!S.isHost,optional:!!S.isOptional,self:!!S.isSelf,skipSelf:!!S.isSkipSelf})}else unsupported("dependency without a token");return _}function isDelegatedMetadata(i){return void 0!==i.delegateType}function compileInjectable(i){let s=null;const S={name:i.name,type:i.type,internalType:i.internalType,typeArgumentCount:i.typeArgumentCount,deps:[],injectFn:Identifiers.inject,target:ot.Injectable};if(void 0!==i.useClass){const _=i.useClass.isEquivalent(i.internalType);let T=void 0;void 0!==i.userDeps&&(T=i.userDeps),s=void 0!==T?compileFactoryFunction(Object.assign(Object.assign({},S),{delegate:i.useClass,delegateDeps:T,delegateType:at.Class})):_?compileFactoryFunction(S):delegateToFactory(i.type.value,i.useClass)}else s=void 0!==i.useFactory?void 0!==i.userDeps?compileFactoryFunction(Object.assign(Object.assign({},S),{delegate:i.useFactory,delegateDeps:i.userDeps||[],delegateType:at.Function})):{statements:[],factory:fn([],[new ReturnStatement(i.useFactory.callFn([]))])}:void 0!==i.useValue?compileFactoryFunction(Object.assign(Object.assign({},S),{expression:i.useValue})):void 0!==i.useExisting?compileFactoryFunction(Object.assign(Object.assign({},S),{expression:importExpr(Identifiers.inject).callFn([i.useExisting])})):delegateToFactory(i.type.value,i.internalType);const _={token:i.internalType,factory:s.factory};return null!==i.providedIn.value&&(_.providedIn=i.providedIn),{expression:importExpr(Identifiers.ɵɵdefineInjectable).callFn([mapToMapExpression(_)]),type:new ExpressionType(importExpr(Identifiers.InjectableDef,[typeWithParameters(i.type.type,i.typeArgumentCount)])),statements:s.statements}}function delegateToFactory(i,s){return{statements:[],factory:i.node===s.node?s.prop("ɵfac"):fn([new FnParam("t",pe)],[new ReturnStatement(s.callMethod("ɵfac",[variable("t")]))])}}function assertArrayOfStrings(i,s){if(null!=s){if(!Array.isArray(s))throw new Error(`Expected '${i}' to be an array of strings.`);for(let S=0;S<s.length;S+=1)if("string"!=typeof s[S])throw new Error(`Expected '${i}' to be an array of strings.`)}}!function(i){i[i.Class=0]="Class",i[i.Function=1]="Function",i[i.Factory=2]="Factory"}(at||(at={})),function(i){i[i.Directive=0]="Directive",i[i.Component=1]="Component",i[i.Injectable=2]="Injectable",i[i.Pipe=3]="Pipe",i[i.NgModule=4]="NgModule"}(ot||(ot={})),function(i){i[i.Token=0]="Token",i[i.Attribute=1]="Attribute",i[i.ChangeDetectorRef=2]="ChangeDetectorRef",i[i.Invalid=3]="Invalid"}(lt||(lt={}));const ct=[/^\s*$/,/[<>]/,/^[{}]$/,/&(#|[a-z])/i,/^\/\//];function assertInterpolationSymbols(i,s){if(!(null==s||Array.isArray(s)&&2==s.length))throw new Error(`Expected '${i}' to be an array, [start, end].`);if(null!=s){const i=s[0],S=s[1];ct.forEach(s=>{if(s.test(i)||s.test(S))throw new Error(`['${i}', '${S}'] contains unusable interpolation symbol.`)})}}class InterpolationConfig{constructor(i,s){this.start=i,this.end=s}static fromArray(i){return i?(assertInterpolationSymbols("interpolation",i),new InterpolationConfig(i[0],i[1])):ut}}const ut=new InterpolationConfig("{{","}}");class SourceMapGenerator{constructor(i=null){this.file=i,this.sourcesContent=new Map,this.lines=[],this.lastCol0=0,this.hasMappings=!1}addSource(i,s=null){return this.sourcesContent.has(i)||this.sourcesContent.set(i,s),this}addLine(){return this.lines.push([]),this.lastCol0=0,this}addMapping(i,s,S,_){if(!this.currentLine)throw new Error("A line must be added before mappings can be added");if(null!=s&&!this.sourcesContent.has(s))throw new Error(`Unknown source file "${s}"`);if(null==i)throw new Error("The column in the generated code must be provided");if(i<this.lastCol0)throw new Error("Mapping should be added in output order");if(s&&(null==S||null==_))throw new Error("The source location must be provided when a source url is provided");return this.hasMappings=!0,this.lastCol0=i,this.currentLine.push({col0:i,sourceUrl:s,sourceLine0:S,sourceCol0:_}),this}get currentLine(){return this.lines.slice(-1)[0]}toJSON(){if(!this.hasMappings)return null;const i=new Map,s=[],S=[];Array.from(this.sourcesContent.keys()).forEach((_,T)=>{i.set(_,T),s.push(_),S.push(this.sourcesContent.get(_)||null)});let _="",T=0,A=0,P=0,N=0;return this.lines.forEach(s=>{T=0,_+=s.map(s=>{let S=toBase64VLQ(s.col0-T);return T=s.col0,null!=s.sourceUrl&&(S+=toBase64VLQ(i.get(s.sourceUrl)-A),A=i.get(s.sourceUrl),S+=toBase64VLQ(s.sourceLine0-P),P=s.sourceLine0,S+=toBase64VLQ(s.sourceCol0-N),N=s.sourceCol0),S}).join(","),_+=";"}),_=_.slice(0,-1),{file:this.file||"",version:3,sourceRoot:"",sources:s,sourcesContent:S,mappings:_}}toJsComment(){return this.hasMappings?"//# sourceMappingURL=data:application/json;base64,"+function toBase64String(i){let s="";i=utf8Encode(i);for(let S=0;S<i.length;){const _=i.charCodeAt(S++),T=i.charCodeAt(S++),A=i.charCodeAt(S++);s+=toBase64Digit(_>>2),s+=toBase64Digit((3&_)<<4|(isNaN(T)?0:T>>4)),s+=isNaN(T)?"=":toBase64Digit((15&T)<<2|A>>6),s+=isNaN(T)||isNaN(A)?"=":toBase64Digit(63&A)}return s}(JSON.stringify(this,null,0)):""}}function toBase64VLQ(i){i=i<0?1+(-i<<1):i<<1;let s="";do{let S=31&i;(i>>=5)>0&&(S|=32),s+=toBase64Digit(S)}while(i>0);return s}function toBase64Digit(i){if(i<0||i>=64)throw new Error("Can only encode value in the range [0, 63]");return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[i]}const pt=/'|\\|\n|\r|\$/g,ht=/^[$A-Z_][0-9A-Z_$]*$/i,dt=variable("error",null,null),mt=variable("stack",null,null);class _EmittedLine{constructor(i){this.indent=i,this.partsLength=0,this.parts=[],this.srcSpans=[]}}class EmitterVisitorContext{constructor(i){this._indent=i,this._classes=[],this._preambleLineCount=0,this._lines=[new _EmittedLine(i)]}static createRoot(){return new EmitterVisitorContext(0)}get _currentLine(){return this._lines[this._lines.length-1]}println(i,s=""){this.print(i||null,s,!0)}lineIsEmpty(){return 0===this._currentLine.parts.length}lineLength(){return this._currentLine.indent*"  ".length+this._currentLine.partsLength}print(i,s,S=!1){s.length>0&&(this._currentLine.parts.push(s),this._currentLine.partsLength+=s.length,this._currentLine.srcSpans.push(i&&i.sourceSpan||null)),S&&this._lines.push(new _EmittedLine(this._indent))}removeEmptyLastLine(){this.lineIsEmpty()&&this._lines.pop()}incIndent(){this._indent++,this.lineIsEmpty()&&(this._currentLine.indent=this._indent)}decIndent(){this._indent--,this.lineIsEmpty()&&(this._currentLine.indent=this._indent)}pushClass(i){this._classes.push(i)}popClass(){return this._classes.pop()}get currentClass(){return this._classes.length>0?this._classes[this._classes.length-1]:null}toSource(){return this.sourceLines.map(i=>i.parts.length>0?_createIndent(i.indent)+i.parts.join(""):"").join("\n")}toSourceMapGenerator(i,s=0){const S=new SourceMapGenerator(i);let _=!1;const mapFirstOffsetIfNeeded=()=>{_||(S.addSource(i," ").addMapping(0,i,0,0),_=!0)};for(let i=0;i<s;i++)S.addLine(),mapFirstOffsetIfNeeded();return this.sourceLines.forEach((i,s)=>{S.addLine();const T=i.srcSpans,A=i.parts;let P=i.indent*"  ".length,N=0;for(;N<T.length&&!T[N];)P+=A[N].length,N++;for(N<T.length&&0===s&&0===P?_=!0:mapFirstOffsetIfNeeded();N<T.length;){const i=T[N],s=i.start.file,_=i.start.line,M=i.start.col;for(S.addSource(s.url,s.content).addMapping(P,s.url,_,M),P+=A[N].length,N++;N<T.length&&(i===T[N]||!T[N]);)P+=A[N].length,N++}}),S}setPreambleLineCount(i){return this._preambleLineCount=i}spanOf(i,s){const S=this._lines[i-this._preambleLineCount];if(S){let i=s-_createIndent(S.indent).length;for(let s=0;s<S.parts.length;s++){const _=S.parts[s];if(_.length>i)return S.srcSpans[s];i-=_.length}}return null}get sourceLines(){return this._lines.length&&0===this._lines[this._lines.length-1].parts.length?this._lines.slice(0,-1):this._lines}}class AbstractEmitterVisitor{constructor(i){this._escapeDollarInStrings=i}printLeadingComments(i,s){if(void 0!==i.leadingComments)for(const S of i.leadingComments)S instanceof JSDocComment?s.print(i,`/*${S.toString()}*/`,S.trailingNewline):S.multiline?s.print(i,`/* ${S.text} */`,S.trailingNewline):S.text.split("\n").forEach(S=>{s.println(i,"// "+S)})}visitExpressionStmt(i,s){return this.printLeadingComments(i,s),i.expr.visitExpression(this,s),s.println(i,";"),null}visitReturnStmt(i,s){return this.printLeadingComments(i,s),s.print(i,"return "),i.value.visitExpression(this,s),s.println(i,";"),null}visitIfStmt(i,s){this.printLeadingComments(i,s),s.print(i,"if ("),i.condition.visitExpression(this,s),s.print(i,") {");const S=null!=i.falseCase&&i.falseCase.length>0;return i.trueCase.length<=1&&!S?(s.print(i," "),this.visitAllStatements(i.trueCase,s),s.removeEmptyLastLine(),s.print(i," ")):(s.println(),s.incIndent(),this.visitAllStatements(i.trueCase,s),s.decIndent(),S&&(s.println(i,"} else {"),s.incIndent(),this.visitAllStatements(i.falseCase,s),s.decIndent())),s.println(i,"}"),null}visitThrowStmt(i,s){return this.printLeadingComments(i,s),s.print(i,"throw "),i.error.visitExpression(this,s),s.println(i,";"),null}visitWriteVarExpr(i,s){const S=s.lineIsEmpty();return S||s.print(i,"("),s.print(i,i.name+" = "),i.value.visitExpression(this,s),S||s.print(i,")"),null}visitWriteKeyExpr(i,s){const S=s.lineIsEmpty();return S||s.print(i,"("),i.receiver.visitExpression(this,s),s.print(i,"["),i.index.visitExpression(this,s),s.print(i,"] = "),i.value.visitExpression(this,s),S||s.print(i,")"),null}visitWritePropExpr(i,s){const S=s.lineIsEmpty();return S||s.print(i,"("),i.receiver.visitExpression(this,s),s.print(i,`.${i.name} = `),i.value.visitExpression(this,s),S||s.print(i,")"),null}visitInvokeMethodExpr(i,s){i.receiver.visitExpression(this,s);let S=i.name;return null!=i.builtin&&(S=this.getBuiltinMethodName(i.builtin),null==S)||(s.print(i,`.${S}(`),this.visitAllExpressions(i.args,s,","),s.print(i,")")),null}visitInvokeFunctionExpr(i,s){return i.fn.visitExpression(this,s),s.print(i,"("),this.visitAllExpressions(i.args,s,","),s.print(i,")"),null}visitWrappedNodeExpr(i,s){throw new Error("Abstract emitter cannot visit WrappedNodeExpr.")}visitTypeofExpr(i,s){s.print(i,"typeof "),i.expr.visitExpression(this,s)}visitReadVarExpr(i,s){let S=i.name;if(null!=i.builtin)switch(i.builtin){case Re.Super:S="super";break;case Re.This:S="this";break;case Re.CatchError:S=dt.name;break;case Re.CatchStack:S=mt.name;break;default:throw new Error("Unknown builtin variable "+i.builtin)}return s.print(i,S),null}visitInstantiateExpr(i,s){return s.print(i,"new "),i.classExpr.visitExpression(this,s),s.print(i,"("),this.visitAllExpressions(i.args,s,","),s.print(i,")"),null}visitLiteralExpr(i,s){const S=i.value;return"string"==typeof S?s.print(i,escapeIdentifier(S,this._escapeDollarInStrings)):s.print(i,""+S),null}visitLocalizedString(i,s){const S=i.serializeI18nHead();s.print(i,"$localize `"+S.raw);for(let S=1;S<i.messageParts.length;S++)s.print(i,"${"),i.expressions[S-1].visitExpression(this,s),s.print(i,"}"+i.serializeI18nTemplatePart(S).raw);return s.print(i,"`"),null}visitConditionalExpr(i,s){return s.print(i,"("),i.condition.visitExpression(this,s),s.print(i,"? "),i.trueCase.visitExpression(this,s),s.print(i,": "),i.falseCase.visitExpression(this,s),s.print(i,")"),null}visitNotExpr(i,s){return s.print(i,"!"),i.condition.visitExpression(this,s),null}visitAssertNotNullExpr(i,s){return i.condition.visitExpression(this,s),null}visitUnaryOperatorExpr(i,s){let S;switch(i.operator){case Ne.Plus:S="+";break;case Ne.Minus:S="-";break;default:throw new Error("Unknown operator "+i.operator)}return i.parens&&s.print(i,"("),s.print(i,S),i.expr.visitExpression(this,s),i.parens&&s.print(i,")"),null}visitBinaryOperatorExpr(i,s){let S;switch(i.operator){case Me.Equals:S="==";break;case Me.Identical:S="===";break;case Me.NotEquals:S="!=";break;case Me.NotIdentical:S="!==";break;case Me.And:S="&&";break;case Me.BitwiseAnd:S="&";break;case Me.Or:S="||";break;case Me.Plus:S="+";break;case Me.Minus:S="-";break;case Me.Divide:S="/";break;case Me.Multiply:S="*";break;case Me.Modulo:S="%";break;case Me.Lower:S="<";break;case Me.LowerEquals:S="<=";break;case Me.Bigger:S=">";break;case Me.BiggerEquals:S=">=";break;default:throw new Error("Unknown operator "+i.operator)}return i.parens&&s.print(i,"("),i.lhs.visitExpression(this,s),s.print(i,` ${S} `),i.rhs.visitExpression(this,s),i.parens&&s.print(i,")"),null}visitReadPropExpr(i,s){return i.receiver.visitExpression(this,s),s.print(i,"."),s.print(i,i.name),null}visitReadKeyExpr(i,s){return i.receiver.visitExpression(this,s),s.print(i,"["),i.index.visitExpression(this,s),s.print(i,"]"),null}visitLiteralArrayExpr(i,s){return s.print(i,"["),this.visitAllExpressions(i.entries,s,","),s.print(i,"]"),null}visitLiteralMapExpr(i,s){return s.print(i,"{"),this.visitAllObjects(S=>{s.print(i,escapeIdentifier(S.key,this._escapeDollarInStrings,S.quoted)+":"),S.value.visitExpression(this,s)},i.entries,s,","),s.print(i,"}"),null}visitCommaExpr(i,s){return s.print(i,"("),this.visitAllExpressions(i.parts,s,","),s.print(i,")"),null}visitAllExpressions(i,s,S){this.visitAllObjects(i=>i.visitExpression(this,s),i,s,S)}visitAllObjects(i,s,S,_){let T=!1;for(let A=0;A<s.length;A++)A>0&&(S.lineLength()>80?(S.print(null,_,!0),T||(S.incIndent(),S.incIndent(),T=!0)):S.print(null,_,!1)),i(s[A]);T&&(S.decIndent(),S.decIndent())}visitAllStatements(i,s){i.forEach(i=>i.visitStatement(this,s))}}function escapeIdentifier(i,s,S=!0){if(null==i)return null;const _=i.replace(pt,(...i)=>"$"==i[0]?s?"\\$":"$":"\n"==i[0]?"\\n":"\r"==i[0]?"\\r":"\\"+i[0]);return S||!ht.test(_)?`'${_}'`:_}function _createIndent(i){let s="";for(let S=0;S<i;S++)s+="  ";return s}class AbstractJsEmitterVisitor extends AbstractEmitterVisitor{constructor(){super(!1)}visitDeclareClassStmt(i,s){return s.pushClass(i),this._visitClassConstructor(i,s),null!=i.parent&&(s.print(i,i.name+".prototype = Object.create("),i.parent.visitExpression(this,s),s.println(i,".prototype);")),i.getters.forEach(S=>this._visitClassGetter(i,S,s)),i.methods.forEach(S=>this._visitClassMethod(i,S,s)),s.popClass(),null}_visitClassConstructor(i,s){s.print(i,`function ${i.name}(`),null!=i.constructorMethod&&this._visitParams(i.constructorMethod.params,s),s.println(i,") {"),s.incIndent(),null!=i.constructorMethod&&i.constructorMethod.body.length>0&&(s.println(i,"var self = this;"),this.visitAllStatements(i.constructorMethod.body,s)),s.decIndent(),s.println(i,"}")}_visitClassGetter(i,s,S){S.println(i,`Object.defineProperty(${i.name}.prototype, '${s.name}', { get: function() {`),S.incIndent(),s.body.length>0&&(S.println(i,"var self = this;"),this.visitAllStatements(s.body,S)),S.decIndent(),S.println(i,"}});")}_visitClassMethod(i,s,S){S.print(i,`${i.name}.prototype.${s.name} = function(`),this._visitParams(s.params,S),S.println(i,") {"),S.incIndent(),s.body.length>0&&(S.println(i,"var self = this;"),this.visitAllStatements(s.body,S)),S.decIndent(),S.println(i,"};")}visitWrappedNodeExpr(i,s){throw new Error("Cannot emit a WrappedNodeExpr in Javascript.")}visitReadVarExpr(i,s){if(i.builtin===Re.This)s.print(i,"self");else{if(i.builtin===Re.Super)throw new Error("'super' needs to be handled at a parent ast node, not at the variable level!");super.visitReadVarExpr(i,s)}return null}visitDeclareVarStmt(i,s){return s.print(i,"var "+i.name),i.value&&(s.print(i," = "),i.value.visitExpression(this,s)),s.println(i,";"),null}visitCastExpr(i,s){return i.value.visitExpression(this,s),null}visitInvokeFunctionExpr(i,s){const S=i.fn;return S instanceof ReadVarExpr&&S.builtin===Re.Super?(s.currentClass.parent.visitExpression(this,s),s.print(i,".call(this"),i.args.length>0&&(s.print(i,", "),this.visitAllExpressions(i.args,s,",")),s.print(i,")")):super.visitInvokeFunctionExpr(i,s),null}visitFunctionExpr(i,s){return s.print(i,`function${i.name?" "+i.name:""}(`),this._visitParams(i.params,s),s.println(i,") {"),s.incIndent(),this.visitAllStatements(i.statements,s),s.decIndent(),s.print(i,"}"),null}visitDeclareFunctionStmt(i,s){return s.print(i,`function ${i.name}(`),this._visitParams(i.params,s),s.println(i,") {"),s.incIndent(),this.visitAllStatements(i.statements,s),s.decIndent(),s.println(i,"}"),null}visitTryCatchStmt(i,s){s.println(i,"try {"),s.incIndent(),this.visitAllStatements(i.bodyStmts,s),s.decIndent(),s.println(i,`} catch (${dt.name}) {`),s.incIndent();const S=[mt.set(dt.prop("stack")).toDeclStmt(null,[$e.Final])].concat(i.catchStmts);return this.visitAllStatements(S,s),s.decIndent(),s.println(i,"}"),null}visitLocalizedString(i,s){s.print(i,'$localize((this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e})(');const S=[i.serializeI18nHead()];for(let s=1;s<i.messageParts.length;s++)S.push(i.serializeI18nTemplatePart(s));return s.print(i,`[${S.map(i=>escapeIdentifier(i.cooked,!1)).join(", ")}], `),s.print(i,`[${S.map(i=>escapeIdentifier(i.raw,!1)).join(", ")}])`),i.expressions.forEach(S=>{s.print(i,", "),S.visitExpression(this,s)}),s.print(i,")"),null}_visitParams(i,s){this.visitAllObjects(i=>s.print(null,i.name),i,s,",")}getBuiltinMethodName(i){let s;switch(i){case Oe.ConcatArray:s="concat";break;case Oe.SubscribeObservable:s="subscribe";break;case Oe.Bind:s="bind";break;default:throw new Error("Unknown builtin method: "+i)}return s}}class JitEvaluator{evaluateStatements(i,s,S,_){const T=new JitEmitterVisitor(S),A=EmitterVisitorContext.createRoot();return s.length>0&&!function isUseStrictStatement(i){return i.isEquivalent(literal("use strict").toStmt())}(s[0])&&(s=[literal("use strict").toStmt(),...s]),T.visitAllStatements(s,A),T.createReturnStmt(A),this.evaluateCode(i,A,T.getArgs(),_)}evaluateCode(i,s,S,_){let T=`"use strict";${s.toSource()}\n//# sourceURL=${i}`;const A=[],P=[];for(const i in S)P.push(S[i]),A.push(i);if(_){const S=new Function(...A.concat("return null;")).toString(),_=S.slice(0,S.indexOf("return null;")).split("\n").length-1;T+="\n"+s.toSourceMapGenerator(i,_).toJsComment()}const N=new Function(...A.concat(T));return this.executeFunction(N,P)}executeFunction(i,s){return i(...s)}}class JitEmitterVisitor extends AbstractJsEmitterVisitor{constructor(i){super(),this.reflector=i,this._evalArgNames=[],this._evalArgValues=[],this._evalExportedVars=[]}createReturnStmt(i){new ReturnStatement(new LiteralMapExpr(this._evalExportedVars.map(i=>new LiteralMapEntry(i,variable(i),!1)))).visitStatement(this,i)}getArgs(){const i={};for(let s=0;s<this._evalArgNames.length;s++)i[this._evalArgNames[s]]=this._evalArgValues[s];return i}visitExternalExpr(i,s){return this._emitReferenceToExternal(i,this.reflector.resolveExternalReference(i.value),s),null}visitWrappedNodeExpr(i,s){return this._emitReferenceToExternal(i,i.node,s),null}visitDeclareVarStmt(i,s){return i.hasModifier($e.Exported)&&this._evalExportedVars.push(i.name),super.visitDeclareVarStmt(i,s)}visitDeclareFunctionStmt(i,s){return i.hasModifier($e.Exported)&&this._evalExportedVars.push(i.name),super.visitDeclareFunctionStmt(i,s)}visitDeclareClassStmt(i,s){return i.hasModifier($e.Exported)&&this._evalExportedVars.push(i.name),super.visitDeclareClassStmt(i,s)}_emitReferenceToExternal(i,s,S){let _=this._evalArgValues.indexOf(s);if(-1===_){_=this._evalArgValues.length,this._evalArgValues.push(s);const i=identifierName({reference:s})||"val";this._evalArgNames.push(`jit_${i}_${_}`)}S.print(i,this._evalArgNames[_])}}class R3JitReflector{constructor(i){this.context=i}resolveExternalReference(i){if("@angular/core"!==i.moduleName)throw new Error(`Cannot resolve external reference to ${i.moduleName}, only references to @angular/core are supported.`);if(!this.context.hasOwnProperty(i.name))throw new Error(`No value provided for @angular/core symbol '${i.name}'.`);return this.context[i.name]}parameters(i){throw new Error("Not implemented.")}annotations(i){throw new Error("Not implemented.")}shallowAnnotations(i){throw new Error("Not implemented.")}tryAnnotations(i){throw new Error("Not implemented.")}propMetadata(i){throw new Error("Not implemented.")}hasLifecycleHook(i,s){throw new Error("Not implemented.")}guards(i){throw new Error("Not implemented.")}componentModuleUrl(i,s){throw new Error("Not implemented.")}}function mapLiteral(i,s=!1){return literalMap(Object.keys(i).map(S=>({key:S,quoted:s,value:i[S]})))}function compileNgModule(i){const{internalType:s,type:S,bootstrap:_,declarations:T,imports:A,exports:P,schemas:N,containsForwardDecls:M,emitInline:k,id:R}=i,F=[],D={type:s};if(_.length&&(D.bootstrap=refsToArray(_,M)),k)T.length&&(D.declarations=refsToArray(T,M)),A.length&&(D.imports=refsToArray(A,M)),P.length&&(D.exports=refsToArray(P,M));else{const s=function generateSetNgModuleScopeCall(i){const{adjacentType:s,declarations:S,imports:_,exports:T,containsForwardDecls:A}=i,P={};S.length&&(P.declarations=refsToArray(S,A));_.length&&(P.imports=refsToArray(_,A));T.length&&(P.exports=refsToArray(T,A));if(0===Object.keys(P).length)return null;const N=function jitOnlyGuardedExpression(i){const s=new ExternalExpr({name:"ngJitMode",moduleName:null}),S=new BinaryOperatorExpr(Me.Identical,new TypeofExpr(s),literal("undefined")),_=new BinaryOperatorExpr(Me.Or,S,s,void 0,void 0,!0);return new BinaryOperatorExpr(Me.And,_,i)}(new InvokeFunctionExpr(importExpr(Identifiers$1.setNgModuleScope),[s,mapToMapExpression(P)])),M=new FunctionExpr([],[N.toStmt()]);return new InvokeFunctionExpr(M,[]).toStmt()}(i);null!==s&&F.push(s)}return N&&N.length&&(D.schemas=literalArr(N.map(i=>i.value))),R&&(D.id=R),{expression:importExpr(Identifiers$1.defineNgModule).callFn([mapToMapExpression(D)]),type:new ExpressionType(importExpr(Identifiers$1.NgModuleDefWithMeta,[new ExpressionType(S.type),tupleTypeOf(T),tupleTypeOf(A),tupleTypeOf(P)])),additionalStatements:F}}function compileInjector(i){const s=compileFactoryFunction({name:i.name,type:i.type,internalType:i.internalType,typeArgumentCount:0,deps:i.deps,injectFn:Identifiers$1.inject,target:ot.NgModule}),S={factory:s.factory};return null!==i.providers&&(S.providers=i.providers),i.imports.length>0&&(S.imports=literalArr(i.imports)),{expression:importExpr(Identifiers$1.defineInjector).callFn([mapToMapExpression(S)]),type:new ExpressionType(importExpr(Identifiers$1.InjectorDef,[new ExpressionType(i.type.type)])),statements:s.statements}}function tupleTypeOf(i){const s=i.map(i=>typeofExpr(i.type));return i.length>0?expressionType(literalArr(s)):Te}function refsToArray(i,s){const S=literalArr(i.map(i=>i.value));return s?fn([],[new ReturnStatement(S)]):S}function compilePipeFromMetadata(i){const s=[];return s.push({key:"name",value:literal(i.pipeName),quoted:!1}),s.push({key:"type",value:i.type.value,quoted:!1}),s.push({key:"pure",value:literal(i.pure),quoted:!1}),{expression:importExpr(Identifiers$1.definePipe).callFn([literalMap(s)]),type:new ExpressionType(importExpr(Identifiers$1.PipeDefWithMeta,[typeWithParameters(i.type.type,i.typeArgumentCount),new ExpressionType(new LiteralExpr(i.pipeName))]))}}class ParserError{constructor(i,s,S,_){this.input=s,this.errLocation=S,this.ctxLocation=_,this.message=`Parser Error: ${i} ${S} [${s}] in ${_}`}}class ParseSpan{constructor(i,s){this.start=i,this.end=s}toAbsolute(i){return new AbsoluteSourceSpan(i+this.start,i+this.end)}}class AST{constructor(i,s){this.span=i,this.sourceSpan=s}visit(i,s=null){return null}toString(){return"AST"}}class ASTWithName extends AST{constructor(i,s,S){super(i,s),this.nameSpan=S}}class Quote extends AST{constructor(i,s,S,_,T){super(i,s),this.prefix=S,this.uninterpretedExpression=_,this.location=T}visit(i,s=null){return i.visitQuote(this,s)}toString(){return"Quote"}}class EmptyExpr extends AST{visit(i,s=null){}}class ImplicitReceiver extends AST{visit(i,s=null){return i.visitImplicitReceiver(this,s)}}class Chain extends AST{constructor(i,s,S){super(i,s),this.expressions=S}visit(i,s=null){return i.visitChain(this,s)}}class Conditional extends AST{constructor(i,s,S,_,T){super(i,s),this.condition=S,this.trueExp=_,this.falseExp=T}visit(i,s=null){return i.visitConditional(this,s)}}class PropertyRead extends ASTWithName{constructor(i,s,S,_,T){super(i,s,S),this.receiver=_,this.name=T}visit(i,s=null){return i.visitPropertyRead(this,s)}}class PropertyWrite extends ASTWithName{constructor(i,s,S,_,T,A){super(i,s,S),this.receiver=_,this.name=T,this.value=A}visit(i,s=null){return i.visitPropertyWrite(this,s)}}class SafePropertyRead extends ASTWithName{constructor(i,s,S,_,T){super(i,s,S),this.receiver=_,this.name=T}visit(i,s=null){return i.visitSafePropertyRead(this,s)}}class KeyedRead extends AST{constructor(i,s,S,_){super(i,s),this.obj=S,this.key=_}visit(i,s=null){return i.visitKeyedRead(this,s)}}class KeyedWrite extends AST{constructor(i,s,S,_,T){super(i,s),this.obj=S,this.key=_,this.value=T}visit(i,s=null){return i.visitKeyedWrite(this,s)}}class BindingPipe extends ASTWithName{constructor(i,s,S,_,T,A){super(i,s,A),this.exp=S,this.name=_,this.args=T}visit(i,s=null){return i.visitPipe(this,s)}}class LiteralPrimitive extends AST{constructor(i,s,S){super(i,s),this.value=S}visit(i,s=null){return i.visitLiteralPrimitive(this,s)}}class LiteralArray extends AST{constructor(i,s,S){super(i,s),this.expressions=S}visit(i,s=null){return i.visitLiteralArray(this,s)}}class LiteralMap extends AST{constructor(i,s,S,_){super(i,s),this.keys=S,this.values=_}visit(i,s=null){return i.visitLiteralMap(this,s)}}class Interpolation extends AST{constructor(i,s,S,_){super(i,s),this.strings=S,this.expressions=_}visit(i,s=null){return i.visitInterpolation(this,s)}}class Binary extends AST{constructor(i,s,S,_,T){super(i,s),this.operation=S,this.left=_,this.right=T}visit(i,s=null){return i.visitBinary(this,s)}}class Unary extends Binary{constructor(i,s,S,_,T,A,P){super(i,s,T,A,P),this.operator=S,this.expr=_}static createMinus(i,s,S){return new Unary(i,s,"-",S,"-",new LiteralPrimitive(i,s,0),S)}static createPlus(i,s,S){return new Unary(i,s,"+",S,"-",S,new LiteralPrimitive(i,s,0))}visit(i,s=null){return void 0!==i.visitUnary?i.visitUnary(this,s):i.visitBinary(this,s)}}class PrefixNot extends AST{constructor(i,s,S){super(i,s),this.expression=S}visit(i,s=null){return i.visitPrefixNot(this,s)}}class NonNullAssert extends AST{constructor(i,s,S){super(i,s),this.expression=S}visit(i,s=null){return i.visitNonNullAssert(this,s)}}class MethodCall extends ASTWithName{constructor(i,s,S,_,T,A){super(i,s,S),this.receiver=_,this.name=T,this.args=A}visit(i,s=null){return i.visitMethodCall(this,s)}}class SafeMethodCall extends ASTWithName{constructor(i,s,S,_,T,A){super(i,s,S),this.receiver=_,this.name=T,this.args=A}visit(i,s=null){return i.visitSafeMethodCall(this,s)}}class FunctionCall extends AST{constructor(i,s,S,_){super(i,s),this.target=S,this.args=_}visit(i,s=null){return i.visitFunctionCall(this,s)}}class AbsoluteSourceSpan{constructor(i,s){this.start=i,this.end=s}}class ASTWithSource extends AST{constructor(i,s,S,_,T){super(new ParseSpan(0,null===s?0:s.length),new AbsoluteSourceSpan(_,null===s?_:_+s.length)),this.ast=i,this.source=s,this.location=S,this.errors=T}visit(i,s=null){return i.visitASTWithSource?i.visitASTWithSource(this,s):this.ast.visit(i,s)}toString(){return`${this.source} in ${this.location}`}}class VariableBinding{constructor(i,s,S){this.sourceSpan=i,this.key=s,this.value=S}}class ExpressionBinding{constructor(i,s,S){this.sourceSpan=i,this.key=s,this.value=S}}class RecursiveAstVisitor$1{visit(i,s){i.visit(this,s)}visitUnary(i,s){this.visit(i.expr,s)}visitBinary(i,s){this.visit(i.left,s),this.visit(i.right,s)}visitChain(i,s){this.visitAll(i.expressions,s)}visitConditional(i,s){this.visit(i.condition,s),this.visit(i.trueExp,s),this.visit(i.falseExp,s)}visitPipe(i,s){this.visit(i.exp,s),this.visitAll(i.args,s)}visitFunctionCall(i,s){i.target&&this.visit(i.target,s),this.visitAll(i.args,s)}visitImplicitReceiver(i,s){}visitInterpolation(i,s){this.visitAll(i.expressions,s)}visitKeyedRead(i,s){this.visit(i.obj,s),this.visit(i.key,s)}visitKeyedWrite(i,s){this.visit(i.obj,s),this.visit(i.key,s),this.visit(i.value,s)}visitLiteralArray(i,s){this.visitAll(i.expressions,s)}visitLiteralMap(i,s){this.visitAll(i.values,s)}visitLiteralPrimitive(i,s){}visitMethodCall(i,s){this.visit(i.receiver,s),this.visitAll(i.args,s)}visitPrefixNot(i,s){this.visit(i.expression,s)}visitNonNullAssert(i,s){this.visit(i.expression,s)}visitPropertyRead(i,s){this.visit(i.receiver,s)}visitPropertyWrite(i,s){this.visit(i.receiver,s),this.visit(i.value,s)}visitSafePropertyRead(i,s){this.visit(i.receiver,s)}visitSafeMethodCall(i,s){this.visit(i.receiver,s),this.visitAll(i.args,s)}visitQuote(i,s){}visitAll(i,s){for(const S of i)this.visit(S,s)}}class AstTransformer$1{visitImplicitReceiver(i,s){return i}visitInterpolation(i,s){return new Interpolation(i.span,i.sourceSpan,i.strings,this.visitAll(i.expressions))}visitLiteralPrimitive(i,s){return new LiteralPrimitive(i.span,i.sourceSpan,i.value)}visitPropertyRead(i,s){return new PropertyRead(i.span,i.sourceSpan,i.nameSpan,i.receiver.visit(this),i.name)}visitPropertyWrite(i,s){return new PropertyWrite(i.span,i.sourceSpan,i.nameSpan,i.receiver.visit(this),i.name,i.value.visit(this))}visitSafePropertyRead(i,s){return new SafePropertyRead(i.span,i.sourceSpan,i.nameSpan,i.receiver.visit(this),i.name)}visitMethodCall(i,s){return new MethodCall(i.span,i.sourceSpan,i.nameSpan,i.receiver.visit(this),i.name,this.visitAll(i.args))}visitSafeMethodCall(i,s){return new SafeMethodCall(i.span,i.sourceSpan,i.nameSpan,i.receiver.visit(this),i.name,this.visitAll(i.args))}visitFunctionCall(i,s){return new FunctionCall(i.span,i.sourceSpan,i.target.visit(this),this.visitAll(i.args))}visitLiteralArray(i,s){return new LiteralArray(i.span,i.sourceSpan,this.visitAll(i.expressions))}visitLiteralMap(i,s){return new LiteralMap(i.span,i.sourceSpan,i.keys,this.visitAll(i.values))}visitUnary(i,s){switch(i.operator){case"+":return Unary.createPlus(i.span,i.sourceSpan,i.expr.visit(this));case"-":return Unary.createMinus(i.span,i.sourceSpan,i.expr.visit(this));default:throw new Error("Unknown unary operator "+i.operator)}}visitBinary(i,s){return new Binary(i.span,i.sourceSpan,i.operation,i.left.visit(this),i.right.visit(this))}visitPrefixNot(i,s){return new PrefixNot(i.span,i.sourceSpan,i.expression.visit(this))}visitNonNullAssert(i,s){return new NonNullAssert(i.span,i.sourceSpan,i.expression.visit(this))}visitConditional(i,s){return new Conditional(i.span,i.sourceSpan,i.condition.visit(this),i.trueExp.visit(this),i.falseExp.visit(this))}visitPipe(i,s){return new BindingPipe(i.span,i.sourceSpan,i.exp.visit(this),i.name,this.visitAll(i.args),i.nameSpan)}visitKeyedRead(i,s){return new KeyedRead(i.span,i.sourceSpan,i.obj.visit(this),i.key.visit(this))}visitKeyedWrite(i,s){return new KeyedWrite(i.span,i.sourceSpan,i.obj.visit(this),i.key.visit(this),i.value.visit(this))}visitAll(i){const s=[];for(let S=0;S<i.length;++S)s[S]=i[S].visit(this);return s}visitChain(i,s){return new Chain(i.span,i.sourceSpan,this.visitAll(i.expressions))}visitQuote(i,s){return new Quote(i.span,i.sourceSpan,i.prefix,i.uninterpretedExpression,i.location)}}class AstMemoryEfficientTransformer{visitImplicitReceiver(i,s){return i}visitInterpolation(i,s){const S=this.visitAll(i.expressions);return S!==i.expressions?new Interpolation(i.span,i.sourceSpan,i.strings,S):i}visitLiteralPrimitive(i,s){return i}visitPropertyRead(i,s){const S=i.receiver.visit(this);return S!==i.receiver?new PropertyRead(i.span,i.sourceSpan,i.nameSpan,S,i.name):i}visitPropertyWrite(i,s){const S=i.receiver.visit(this),_=i.value.visit(this);return S!==i.receiver||_!==i.value?new PropertyWrite(i.span,i.sourceSpan,i.nameSpan,S,i.name,_):i}visitSafePropertyRead(i,s){const S=i.receiver.visit(this);return S!==i.receiver?new SafePropertyRead(i.span,i.sourceSpan,i.nameSpan,S,i.name):i}visitMethodCall(i,s){const S=i.receiver.visit(this),_=this.visitAll(i.args);return S!==i.receiver||_!==i.args?new MethodCall(i.span,i.sourceSpan,i.nameSpan,S,i.name,_):i}visitSafeMethodCall(i,s){const S=i.receiver.visit(this),_=this.visitAll(i.args);return S!==i.receiver||_!==i.args?new SafeMethodCall(i.span,i.sourceSpan,i.nameSpan,S,i.name,_):i}visitFunctionCall(i,s){const S=i.target&&i.target.visit(this),_=this.visitAll(i.args);return S!==i.target||_!==i.args?new FunctionCall(i.span,i.sourceSpan,S,_):i}visitLiteralArray(i,s){const S=this.visitAll(i.expressions);return S!==i.expressions?new LiteralArray(i.span,i.sourceSpan,S):i}visitLiteralMap(i,s){const S=this.visitAll(i.values);return S!==i.values?new LiteralMap(i.span,i.sourceSpan,i.keys,S):i}visitUnary(i,s){const S=i.expr.visit(this);if(S!==i.expr)switch(i.operator){case"+":return Unary.createPlus(i.span,i.sourceSpan,S);case"-":return Unary.createMinus(i.span,i.sourceSpan,S);default:throw new Error("Unknown unary operator "+i.operator)}return i}visitBinary(i,s){const S=i.left.visit(this),_=i.right.visit(this);return S!==i.left||_!==i.right?new Binary(i.span,i.sourceSpan,i.operation,S,_):i}visitPrefixNot(i,s){const S=i.expression.visit(this);return S!==i.expression?new PrefixNot(i.span,i.sourceSpan,S):i}visitNonNullAssert(i,s){const S=i.expression.visit(this);return S!==i.expression?new NonNullAssert(i.span,i.sourceSpan,S):i}visitConditional(i,s){const S=i.condition.visit(this),_=i.trueExp.visit(this),T=i.falseExp.visit(this);return S!==i.condition||_!==i.trueExp||T!==i.falseExp?new Conditional(i.span,i.sourceSpan,S,_,T):i}visitPipe(i,s){const S=i.exp.visit(this),_=this.visitAll(i.args);return S!==i.exp||_!==i.args?new BindingPipe(i.span,i.sourceSpan,S,i.name,_,i.nameSpan):i}visitKeyedRead(i,s){const S=i.obj.visit(this),_=i.key.visit(this);return S!==i.obj||_!==i.key?new KeyedRead(i.span,i.sourceSpan,S,_):i}visitKeyedWrite(i,s){const S=i.obj.visit(this),_=i.key.visit(this),T=i.value.visit(this);return S!==i.obj||_!==i.key||T!==i.value?new KeyedWrite(i.span,i.sourceSpan,S,_,T):i}visitAll(i){const s=[];let S=!1;for(let _=0;_<i.length;++_){const T=i[_],A=T.visit(this);s[_]=A,S=S||A!==T}return S?s:i}visitChain(i,s){const S=this.visitAll(i.expressions);return S!==i.expressions?new Chain(i.span,i.sourceSpan,S):i}visitQuote(i,s){return i}}class ParsedProperty{constructor(i,s,S,_,T){this.name=i,this.expression=s,this.type=S,this.sourceSpan=_,this.valueSpan=T,this.isLiteral=this.type===ft.LITERAL_ATTR,this.isAnimation=this.type===ft.ANIMATION}}var ft,vt,gt;!function(i){i[i.DEFAULT=0]="DEFAULT",i[i.LITERAL_ATTR=1]="LITERAL_ATTR",i[i.ANIMATION=2]="ANIMATION"}(ft||(ft={}));class ParsedEvent{constructor(i,s,S,_,T,A){this.name=i,this.targetOrPhase=s,this.type=S,this.handler=_,this.sourceSpan=T,this.handlerSpan=A}}class ParsedVariable{constructor(i,s,S,_,T){this.name=i,this.value=s,this.sourceSpan=S,this.keySpan=_,this.valueSpan=T}}class BoundElementProperty{constructor(i,s,S,_,T,A,P){this.name=i,this.type=s,this.securityContext=S,this.value=_,this.unit=T,this.sourceSpan=A,this.valueSpan=P}}class EventHandlerVars{}EventHandlerVars.event=variable("$event");class ConvertActionBindingResult{constructor(i,s){this.stmts=i,this.allowDefault=s,this.render3Stmts=i.map(i=>{if(i instanceof DeclareVarStmt&&i.name==s.name&&i.value instanceof BinaryOperatorExpr){const s=i.value.lhs;return new ReturnStatement(s.value)}return i})}}function convertActionBinding(i,s,S,_,T,A,P){i||(i=new DefaultLocalResolver);const N=convertPropertyBindingBuiltins({createLiteralArrayConverter:i=>i=>literalArr(i),createLiteralMapConverter:i=>s=>literalMap(i.map((i,S)=>({key:i.key,value:s[S],quoted:i.quoted}))),createPipeConverter:i=>{throw new Error("Illegal State: Actions are not allowed to contain pipes. Pipe: "+i)}},S),M=new _AstToIrVisitor(i,s,_,T,A,P),k=[];!function flattenStatements(i,s){Array.isArray(i)?i.forEach(i=>flattenStatements(i,s)):s.push(i)}(N.visit(M,gt.Statement),k),function prependTemporaryDecls(i,s,S){for(let _=i-1;_>=0;_--)S.unshift(temporaryDeclaration(s,_))}(M.temporaryCount,_,k),M.usesImplicitReceiver&&i.notifyImplicitReceiverUse();const R=k.length-1;let F=null;if(R>=0){const i=function convertStmtIntoExpression(i){if(i instanceof ExpressionStatement)return i.expr;if(i instanceof ReturnStatement)return i.value;return null}(k[R]);i&&(F=function createPreventDefaultVar(i){return variable("pd_"+i)}(_),k[R]=F.set(i.cast(pe).notIdentical(literal(!1))).toDeclStmt(null,[$e.Final]))}return new ConvertActionBindingResult(k,F)}function convertPropertyBindingBuiltins(i,s){return function convertBuiltins(i,s){const S=new _BuiltinAstConverter(i);return s.visit(S)}(i,s)}class ConvertPropertyBindingResult{constructor(i,s){this.stmts=i,this.currValExpr=s}}function convertPropertyBinding(i,s,S,_,T,A){i||(i=new DefaultLocalResolver);const P=new _AstToIrVisitor(i,s,_,A),N=S.visit(P,gt.Expression),M=getStatementsFromVisitor(P,_);if(P.usesImplicitReceiver&&i.notifyImplicitReceiverUse(),0===P.temporaryCount&&T==vt.TrySimple)return new ConvertPropertyBindingResult([],N);if(T===vt.Expression)return new ConvertPropertyBindingResult(M,N);const k=function createCurrValueExpr(i){return variable("currVal_"+i)}(_);return M.push(k.set(N).toDeclStmt(pe,[$e.Final])),new ConvertPropertyBindingResult(M,k)}function getStatementsFromVisitor(i,s){const S=[];for(let _=0;_<i.temporaryCount;_++)S.push(temporaryDeclaration(s,_));return S}function temporaryName(i,s){return`tmp_${i}_${s}`}function temporaryDeclaration(i,s){return new DeclareVarStmt(temporaryName(i,s),Fe)}function ensureExpressionMode(i,s){if(i!==gt.Expression)throw new Error("Expected an expression, but saw "+s)}function convertToStatementIfNeeded(i,s){return i===gt.Statement?s.toStmt():s}!function(i){i[i.General=0]="General",i[i.TrySimple=1]="TrySimple",i[i.Expression=2]="Expression"}(vt||(vt={})),function(i){i[i.Statement=0]="Statement",i[i.Expression=1]="Expression"}(gt||(gt={}));class _BuiltinAstConverter extends AstTransformer$1{constructor(i){super(),this._converterFactory=i}visitPipe(i,s){const S=[i.exp,...i.args].map(i=>i.visit(this,s));return new BuiltinFunctionCall(i.span,i.sourceSpan,S,this._converterFactory.createPipeConverter(i.name,S.length))}visitLiteralArray(i,s){const S=i.expressions.map(i=>i.visit(this,s));return new BuiltinFunctionCall(i.span,i.sourceSpan,S,this._converterFactory.createLiteralArrayConverter(i.expressions.length))}visitLiteralMap(i,s){const S=i.values.map(i=>i.visit(this,s));return new BuiltinFunctionCall(i.span,i.sourceSpan,S,this._converterFactory.createLiteralMapConverter(i.keys))}}class _AstToIrVisitor{constructor(i,s,S,_,T,A){this._localResolver=i,this._implicitReceiver=s,this.bindingId=S,this.interpolationFunction=_,this.baseSourceSpan=T,this.implicitReceiverAccesses=A,this._nodeMap=new Map,this._resultMap=new Map,this._currentTemporary=0,this.temporaryCount=0,this.usesImplicitReceiver=!1}visitUnary(i,s){let S;switch(i.operator){case"+":S=Ne.Plus;break;case"-":S=Ne.Minus;break;default:throw new Error("Unsupported operator "+i.operator)}return convertToStatementIfNeeded(s,new UnaryOperatorExpr(S,this._visit(i.expr,gt.Expression),void 0,this.convertSourceSpan(i.span)))}visitBinary(i,s){let S;switch(i.operation){case"+":S=Me.Plus;break;case"-":S=Me.Minus;break;case"*":S=Me.Multiply;break;case"/":S=Me.Divide;break;case"%":S=Me.Modulo;break;case"&&":S=Me.And;break;case"||":S=Me.Or;break;case"==":S=Me.Equals;break;case"!=":S=Me.NotEquals;break;case"===":S=Me.Identical;break;case"!==":S=Me.NotIdentical;break;case"<":S=Me.Lower;break;case">":S=Me.Bigger;break;case"<=":S=Me.LowerEquals;break;case">=":S=Me.BiggerEquals;break;default:throw new Error("Unsupported operation "+i.operation)}return convertToStatementIfNeeded(s,new BinaryOperatorExpr(S,this._visit(i.left,gt.Expression),this._visit(i.right,gt.Expression),void 0,this.convertSourceSpan(i.span)))}visitChain(i,s){return function ensureStatementMode(i,s){if(i!==gt.Statement)throw new Error("Expected a statement, but saw "+s)}(s,i),this.visitAll(i.expressions,s)}visitConditional(i,s){return convertToStatementIfNeeded(s,this._visit(i.condition,gt.Expression).conditional(this._visit(i.trueExp,gt.Expression),this._visit(i.falseExp,gt.Expression),this.convertSourceSpan(i.span)))}visitPipe(i,s){throw new Error("Illegal state: Pipes should have been converted into functions. Pipe: "+i.name)}visitFunctionCall(i,s){const S=this.visitAll(i.args,gt.Expression);let _;return _=i instanceof BuiltinFunctionCall?i.converter(S):this._visit(i.target,gt.Expression).callFn(S,this.convertSourceSpan(i.span)),convertToStatementIfNeeded(s,_)}visitImplicitReceiver(i,s){return ensureExpressionMode(s,i),this.usesImplicitReceiver=!0,this._implicitReceiver}visitInterpolation(i,s){ensureExpressionMode(s,i);const S=[literal(i.expressions.length)];for(let s=0;s<i.strings.length-1;s++)S.push(literal(i.strings[s])),S.push(this._visit(i.expressions[s],gt.Expression));return S.push(literal(i.strings[i.strings.length-1])),this.interpolationFunction?this.interpolationFunction(S):i.expressions.length<=9?importExpr(Identifiers.inlineInterpolate).callFn(S):importExpr(Identifiers.interpolate).callFn([S[0],literalArr(S.slice(1),void 0,this.convertSourceSpan(i.span))])}visitKeyedRead(i,s){const S=this.leftMostSafeNode(i);return S?this.convertSafeAccess(i,S,s):convertToStatementIfNeeded(s,this._visit(i.obj,gt.Expression).key(this._visit(i.key,gt.Expression)))}visitKeyedWrite(i,s){const S=this._visit(i.obj,gt.Expression),_=this._visit(i.key,gt.Expression),T=this._visit(i.value,gt.Expression);return convertToStatementIfNeeded(s,S.key(_).set(T))}visitLiteralArray(i,s){throw new Error("Illegal State: literal arrays should have been converted into functions")}visitLiteralMap(i,s){throw new Error("Illegal State: literal maps should have been converted into functions")}visitLiteralPrimitive(i,s){const S=null===i.value||void 0===i.value||!0===i.value||!0===i.value?he:void 0;return convertToStatementIfNeeded(s,literal(i.value,S,this.convertSourceSpan(i.span)))}_getLocal(i){return this._localResolver.getLocal(i)}visitMethodCall(i,s){if(i.receiver instanceof ImplicitReceiver&&"$any"==i.name){const s=this.visitAll(i.args,gt.Expression);if(1!=s.length)throw new Error("Invalid call to $any, expected 1 argument but received "+(s.length||"none"));return s[0].cast(pe,this.convertSourceSpan(i.span))}const S=this.leftMostSafeNode(i);if(S)return this.convertSafeAccess(i,S,s);{const S=this.visitAll(i.args,gt.Expression),_=this.usesImplicitReceiver;let T=null;const A=this._visit(i.receiver,gt.Expression);if(A===this._implicitReceiver){const s=this._getLocal(i.name);s&&(this.usesImplicitReceiver=_,T=s.callFn(S)),this.addImplicitReceiverAccess(i.name)}return null==T&&(T=A.callMethod(i.name,S,this.convertSourceSpan(i.span))),convertToStatementIfNeeded(s,T)}}visitPrefixNot(i,s){return convertToStatementIfNeeded(s,function not(i,s){return new NotExpr(i,s)}(this._visit(i.expression,gt.Expression)))}visitNonNullAssert(i,s){return convertToStatementIfNeeded(s,function assertNotNull(i,s){return new AssertNotNull(i,s)}(this._visit(i.expression,gt.Expression)))}visitPropertyRead(i,s){const S=this.leftMostSafeNode(i);if(S)return this.convertSafeAccess(i,S,s);{let S=null;const _=this.usesImplicitReceiver,T=this._visit(i.receiver,gt.Expression);return T===this._implicitReceiver&&(S=this._getLocal(i.name),S&&(this.usesImplicitReceiver=_),this.addImplicitReceiverAccess(i.name)),null==S&&(S=T.prop(i.name)),convertToStatementIfNeeded(s,S)}}visitPropertyWrite(i,s){const S=this._visit(i.receiver,gt.Expression),_=this.usesImplicitReceiver;let T=null;if(S===this._implicitReceiver){const s=this._getLocal(i.name);if(s){if(!(s instanceof ReadPropExpr)){const s=i.name,S=i.value instanceof PropertyRead?i.value.name:void 0;throw new Error(`Cannot assign value "${S}" to template variable "${s}". Template variables are read-only.`)}T=s,this.usesImplicitReceiver=_,this.addImplicitReceiverAccess(i.name)}}return null===T&&(T=S.prop(i.name)),convertToStatementIfNeeded(s,T.set(this._visit(i.value,gt.Expression)))}visitSafePropertyRead(i,s){return this.convertSafeAccess(i,this.leftMostSafeNode(i),s)}visitSafeMethodCall(i,s){return this.convertSafeAccess(i,this.leftMostSafeNode(i),s)}visitAll(i,s){return i.map(i=>this._visit(i,s))}visitQuote(i,s){throw new Error(`Quotes are not supported for evaluation!\n        Statement: ${i.uninterpretedExpression} located at ${i.location}`)}_visit(i,s){const S=this._resultMap.get(i);return S||(this._nodeMap.get(i)||i).visit(this,s)}convertSafeAccess(i,s,S){let _=this._visit(s.receiver,gt.Expression),T=void 0;this.needsTemporary(s.receiver)&&(T=this.allocateTemporary(),_=T.set(_),this._resultMap.set(s.receiver,T));const A=_.isBlank();s instanceof SafeMethodCall?this._nodeMap.set(s,new MethodCall(s.span,s.sourceSpan,s.nameSpan,s.receiver,s.name,s.args)):this._nodeMap.set(s,new PropertyRead(s.span,s.sourceSpan,s.nameSpan,s.receiver,s.name));const P=this._visit(i,gt.Expression);return this._nodeMap.delete(s),T&&this.releaseTemporary(T),convertToStatementIfNeeded(S,A.conditional(literal(null),P))}leftMostSafeNode(i){const visit=(i,s)=>(this._nodeMap.get(s)||s).visit(i);return i.visit({visitUnary:i=>null,visitBinary:i=>null,visitChain:i=>null,visitConditional:i=>null,visitFunctionCall:i=>null,visitImplicitReceiver:i=>null,visitInterpolation:i=>null,visitKeyedRead(i){return visit(this,i.obj)},visitKeyedWrite:i=>null,visitLiteralArray:i=>null,visitLiteralMap:i=>null,visitLiteralPrimitive:i=>null,visitMethodCall(i){return visit(this,i.receiver)},visitPipe:i=>null,visitPrefixNot:i=>null,visitNonNullAssert:i=>null,visitPropertyRead(i){return visit(this,i.receiver)},visitPropertyWrite:i=>null,visitQuote:i=>null,visitSafeMethodCall(i){return visit(this,i.receiver)||i},visitSafePropertyRead(i){return visit(this,i.receiver)||i}})}needsTemporary(i){const visit=(i,s)=>s&&(this._nodeMap.get(s)||s).visit(i);return i.visit({visitUnary(i){return visit(this,i.expr)},visitBinary(i){return visit(this,i.left)||visit(this,i.right)},visitChain:i=>!1,visitConditional(i){return visit(this,i.condition)||visit(this,i.trueExp)||visit(this,i.falseExp)},visitFunctionCall:i=>!0,visitImplicitReceiver:i=>!1,visitInterpolation(i){return((i,s)=>s.some(s=>visit(i,s)))(this,i.expressions)},visitKeyedRead:i=>!1,visitKeyedWrite:i=>!1,visitLiteralArray:i=>!0,visitLiteralMap:i=>!0,visitLiteralPrimitive:i=>!1,visitMethodCall:i=>!0,visitPipe:i=>!0,visitPrefixNot(i){return visit(this,i.expression)},visitNonNullAssert(i){return visit(this,i.expression)},visitPropertyRead:i=>!1,visitPropertyWrite:i=>!1,visitQuote:i=>!1,visitSafeMethodCall:i=>!0,visitSafePropertyRead:i=>!1})}allocateTemporary(){const i=this._currentTemporary++;return this.temporaryCount=Math.max(this._currentTemporary,this.temporaryCount),new ReadVarExpr(temporaryName(this.bindingId,i))}releaseTemporary(i){if(this._currentTemporary--,i.name!=temporaryName(this.bindingId,this._currentTemporary))throw new Error(`Temporary ${i.name} released out of order`)}convertSourceSpan(i){if(this.baseSourceSpan){const s=this.baseSourceSpan.start.moveBy(i.start),S=this.baseSourceSpan.start.moveBy(i.end);return new ParseSourceSpan(s,S)}return null}addImplicitReceiverAccess(i){this.implicitReceiverAccesses&&this.implicitReceiverAccesses.add(i)}}class DefaultLocalResolver{notifyImplicitReceiverUse(){}getLocal(i){return i===EventHandlerVars.event.name?EventHandlerVars.event:null}}class BuiltinFunctionCall extends FunctionCall{constructor(i,s,S,_){super(i,s,null,S),this.args=S,this.converter=_}}class ShadowCss{constructor(){this.strictStyling=!0}shimCssText(i,s,S=""){const _=function extractCommentsWithHash(i){return i.match(Ft)||[]}(i);return i=function stripComments(i){return i.replace(Ot,"")}(i),i=this._insertDirectives(i),[this._scopeCssText(i,s,S),..._].join("\n")}_insertDirectives(i){return i=this._insertPolyfillDirectivesInCssText(i),this._insertPolyfillRulesInCssText(i)}_insertPolyfillDirectivesInCssText(i){return i.replace(yt,(function(...i){return i[2]+"{"}))}_insertPolyfillRulesInCssText(i){return i.replace(Et,(...i)=>{const s=i[0].replace(i[1],"").replace(i[2],"");return i[4]+s})}_scopeCssText(i,s,S){const _=this._extractUnscopedRulesFromCssText(i);return i=this._insertPolyfillHostInCssText(i),i=this._convertColonHost(i),i=this._convertColonHostContext(i),i=this._convertShadowDOMSelectors(i),s&&(i=this._scopeSelectors(i,s,S)),(i=i+"\n"+_).trim()}_extractUnscopedRulesFromCssText(i){let s,S="";for(St.lastIndex=0;null!==(s=St.exec(i));){S+=s[0].replace(s[2],"").replace(s[1],s[4])+"\n\n"}return S}_convertColonHost(i){return this._convertColonRule(i,Ct,this._colonHostPartReplacer)}_convertColonHostContext(i){return this._convertColonRule(i,wt,this._colonHostContextPartReplacer)}_convertColonRule(i,s,S){return i.replace(s,(function(...i){if(i[2]){const s=i[2].split(","),_=[];for(let T=0;T<s.length;T++){const A=s[T].trim();if(!A)break;_.push(S(It,A,i[3]))}return _.join(",")}return It+i[3]}))}_colonHostContextPartReplacer(i,s,S){return s.indexOf(_t)>-1?this._colonHostPartReplacer(i,s,S):i+s+S+", "+s+" "+i+S}_colonHostPartReplacer(i,s,S){return i+s.replace(_t,"")+S}_convertShadowDOMSelectors(i){return At.reduce((i,s)=>i.replace(s," "),i)}_scopeSelectors(i,s,S){return function processRules(i,s){const S=function escapeBlocks(i){const s=i.split(Lt),S=[],_=[];let T=0,A=[];for(let i=0;i<s.length;i++){const P=s[i];"}"==P&&T--,T>0?A.push(P):(A.length>0&&(_.push(A.join("")),S.push("%BLOCK%"),A=[]),S.push(P)),"{"==P&&T++}A.length>0&&(_.push(A.join("")),S.push("%BLOCK%"));return new StringWithEscapedBlocks(S.join(""),_)}(i);let _=0;return S.escapedString.replace(Dt,(function(...i){const T=i[2];let A="",P=i[4],N="";P&&P.startsWith("{%BLOCK%")&&(A=S.blocks[_++],P=P.substring("%BLOCK%".length+1),N="{");const M=s(new CssRule(T,A));return`${i[1]}${M.selector}${i[3]}${N}${M.content}${P}`}))}(i,i=>{let _=i.selector,T=i.content;return"@"!=i.selector[0]?_=this._scopeSelector(i.selector,s,S,this.strictStyling):(i.selector.startsWith("@media")||i.selector.startsWith("@supports")||i.selector.startsWith("@page")||i.selector.startsWith("@document"))&&(T=this._scopeSelectors(i.content,s,S)),new CssRule(_,T)})}_scopeSelector(i,s,S,_){return i.split(",").map(i=>i.trim().split(Pt)).map(i=>{const[T,...A]=i;return[(i=>this._selectorNeedsScoping(i,s)?_?this._applyStrictSelectorScope(i,s,S):this._applySelectorScope(i,s,S):i)(T),...A].join(" ")}).join(", ")}_selectorNeedsScoping(i,s){return!this._makeScopeMatcher(s).test(i)}_makeScopeMatcher(i){return i=i.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),new RegExp("^("+i+")"+Nt,"m")}_applySelectorScope(i,s,S){return this._applySimpleSelectorScope(i,s,S)}_applySimpleSelectorScope(i,s,S){if(Mt.lastIndex=0,Mt.test(i)){const _=this.strictStyling?`[${S}]`:s;return i.replace(Tt,(i,s)=>s.replace(/([^:]*)(:*)(.*)/,(i,s,S,T)=>s+_+S+T)).replace(Mt,_+" ")}return s+" "+i}_applyStrictSelectorScope(i,s,S){const _="["+(s=s.replace(/\[is=([^\]]*)\]/g,(i,...s)=>s[0]))+"]",_scopeSelectorPart=i=>{let T=i.trim();if(!T)return"";if(i.indexOf(It)>-1)T=this._applySimpleSelectorScope(i,s,S);else{const s=i.replace(Mt,"");if(s.length>0){const i=s.match(/([^:]*)(:*)(.*)/);i&&(T=i[1]+_+i[2]+i[3])}}return T},T=new SafeSelector(i);let A,P="",N=0;const M=/( |>|\+|~(?!=))\s*/g;let k=!((i=T.content()).indexOf(It)>-1);for(;null!==(A=M.exec(i));){const s=A[1],S=i.slice(N,A.index).trim();k=k||S.indexOf(It)>-1,P+=`${k?_scopeSelectorPart(S):S} ${s} `,N=M.lastIndex}const R=i.substring(N);return k=k||R.indexOf(It)>-1,P+=k?_scopeSelectorPart(R):R,T.restore(P)}_insertPolyfillHostInCssText(i){return i.replace(Rt,xt).replace(kt,_t)}}class SafeSelector{constructor(i){this.placeholders=[],this.index=0,i=i.replace(/(\[[^\]]*\])/g,(i,s)=>{const S=`__ph-${this.index}__`;return this.placeholders.push(s),this.index++,S}),this._content=i.replace(/(:nth-[-\w]+)(\([^)]+\))/g,(i,s,S)=>{const _=`__ph-${this.index}__`;return this.placeholders.push(S),this.index++,s+_})}restore(i){return i.replace(/__ph-(\d+)__/g,(i,s)=>this.placeholders[+s])}content(){return this._content}}const yt=/polyfill-next-selector[^}]*content:[\s]*?(['"])(.*?)\1[;\s]*}([^{]*?){/gim,Et=/(polyfill-rule)[^}]*(content:[\s]*(['"])(.*?)\3)[;\s]*[^}]*}/gim,St=/(polyfill-unscoped-rule)[^}]*(content:[\s]*(['"])(.*?)\3)[;\s]*[^}]*}/gim,_t="-shadowcsshost",xt="-shadowcsscontext",bt=")(?:\\(((?:\\([^)(]*\\)|[^)(]*)+?)\\))?([^,{]*)",Ct=new RegExp("("+_t+bt,"gim"),wt=new RegExp("("+xt+bt,"gim"),It=_t+"-no-combinator",Tt=/-shadowcsshost-no-combinator([^\s]*)/,At=[/::shadow/g,/::content/g,/\/shadow-deep\//g,/\/shadow\//g],Pt=/(?:>>>)|(?:\/deep\/)|(?:::ng-deep)/g,Nt="([>\\s~+[.,{:][\\s\\S]*)?$",Mt=/-shadowcsshost/gim,kt=/:host/gim,Rt=/:host-context/gim,Ot=/\/\*\s*[\s\S]*?\*\//g;const Ft=/\/\*\s*#\s*source(Mapping)?URL=[\s\S]+?\*\//g;const Dt=/(\s*)([^;\{\}]+?)(\s*)((?:{%BLOCK%}?\s*;?)|(?:\s*;))/g,Lt=/([{}])/g;class CssRule{constructor(i,s){this.selector=i,this.content=s}}class StringWithEscapedBlocks{constructor(i,s){this.escapedString=i,this.blocks=s}}const $t="_nghost-%COMP%",Bt="_ngcontent-%COMP%";class StylesCompileDependency{constructor(i,s,S){this.name=i,this.moduleUrl=s,this.setValue=S}}class CompiledStylesheet{constructor(i,s,S,_,T){this.outputCtx=i,this.stylesVar=s,this.dependencies=S,this.isShimmed=_,this.meta=T}}class StyleCompiler{constructor(i){this._urlResolver=i,this._shadowCss=new ShadowCss}compileComponent(i,s){const S=s.template;return this._compileStyles(i,s,new CompileStylesheetMetadata({styles:S.styles,styleUrls:S.styleUrls,moduleUrl:identifierModuleUrl(s.type)}),this.needsStyleShim(s),!0)}compileStyles(i,s,S,_=this.needsStyleShim(s)){return this._compileStyles(i,s,S,_,!1)}needsStyleShim(i){return i.template.encapsulation===W.Emulated}_compileStyles(i,s,S,_,T){const A=S.styles.map(i=>literal(this._shimIfNeeded(i,_))),P=[];S.styleUrls.forEach(s=>{const S=A.length;A.push(null),P.push(new StylesCompileDependency(getStylesVarName(null),s,s=>A[S]=i.importExpr(s)))});const N=getStylesVarName(T?s:null),M=variable(N).set(literalArr(A,new ArrayType(pe,[le.Const]))).toDeclStmt(null,T?[$e.Final]:[$e.Final,$e.Exported]);return i.statements.push(M),new CompiledStylesheet(i,N,P,_,S)}_shimIfNeeded(i,s){return s?this._shadowCss.shimCssText(i,Bt,$t):i}}function getStylesVarName(i){let s="styles";return i&&(s+="_"+identifierName(i.type)),s}class AstPath{constructor(i,s=-1){this.path=i,this.position=s}get empty(){return!this.path||!this.path.length}get head(){return this.path[0]}get tail(){return this.path[this.path.length-1]}parentOf(i){return i&&this.path[this.path.indexOf(i)-1]}childOf(i){return this.path[this.path.indexOf(i)+1]}first(i){for(let s=this.path.length-1;s>=0;s--){let S=this.path[s];if(S instanceof i)return S}}push(i){this.path.push(i)}pop(){return this.path.pop()}}class NodeWithI18n{constructor(i,s){this.sourceSpan=i,this.i18n=s}}class Text$3 extends NodeWithI18n{constructor(i,s,S){super(s,S),this.value=i}visit(i,s){return i.visitText(this,s)}}class Expansion extends NodeWithI18n{constructor(i,s,S,_,T,A){super(_,A),this.switchValue=i,this.type=s,this.cases=S,this.switchValueSourceSpan=T}visit(i,s){return i.visitExpansion(this,s)}}class ExpansionCase{constructor(i,s,S,_,T){this.value=i,this.expression=s,this.sourceSpan=S,this.valueSourceSpan=_,this.expSourceSpan=T}visit(i,s){return i.visitExpansionCase(this,s)}}class Attribute extends NodeWithI18n{constructor(i,s,S,_,T){super(S,T),this.name=i,this.value=s,this.valueSpan=_}visit(i,s){return i.visitAttribute(this,s)}}class Element$1 extends NodeWithI18n{constructor(i,s,S,_,T=null,A=null,P){super(_,P),this.name=i,this.attrs=s,this.children=S,this.startSourceSpan=T,this.endSourceSpan=A}visit(i,s){return i.visitElement(this,s)}}class Comment{constructor(i,s){this.value=i,this.sourceSpan=s}visit(i,s){return i.visitComment(this,s)}}function visitAll$1(i,s,S=null){const _=[],T=i.visit?s=>i.visit(s,S)||s.visit(i,S):s=>s.visit(i,S);return s.forEach(i=>{const s=T(i);s&&_.push(s)}),_}class RecursiveVisitor$1{constructor(){}visitElement(i,s){this.visitChildren(s,s=>{s(i.attrs),s(i.children)})}visitAttribute(i,s){}visitText(i,s){}visitComment(i,s){}visitExpansion(i,s){return this.visitChildren(s,s=>{s(i.cases)})}visitExpansionCase(i,s){}visitChildren(i,s){let S=[],_=this;return s((function visit(s){s&&S.push(visitAll$1(_,s,i))})),Array.prototype.concat.apply([],S)}}function findNode(i,s){const S=[];return visitAll$1(new class extends RecursiveVisitor$1{visit(i,_){const T=function spanOf(i){const s=i.sourceSpan.start.offset;let S=i.sourceSpan.end.offset;return i instanceof Element$1&&(i.endSourceSpan?S=i.endSourceSpan.end.offset:i.children&&i.children.length&&(S=spanOf(i.children[i.children.length-1]).end)),{start:s,end:S}}(i);if(!(T.start<=s&&s<T.end))return!0;S.push(i)}},i),new AstPath(S,s)}var Vt;!function(i){i[i.TAG_OPEN_START=0]="TAG_OPEN_START",i[i.TAG_OPEN_END=1]="TAG_OPEN_END",i[i.TAG_OPEN_END_VOID=2]="TAG_OPEN_END_VOID",i[i.TAG_CLOSE=3]="TAG_CLOSE",i[i.TEXT=4]="TEXT",i[i.ESCAPABLE_RAW_TEXT=5]="ESCAPABLE_RAW_TEXT",i[i.RAW_TEXT=6]="RAW_TEXT",i[i.COMMENT_START=7]="COMMENT_START",i[i.COMMENT_END=8]="COMMENT_END",i[i.CDATA_START=9]="CDATA_START",i[i.CDATA_END=10]="CDATA_END",i[i.ATTR_NAME=11]="ATTR_NAME",i[i.ATTR_QUOTE=12]="ATTR_QUOTE",i[i.ATTR_VALUE=13]="ATTR_VALUE",i[i.DOC_TYPE=14]="DOC_TYPE",i[i.EXPANSION_FORM_START=15]="EXPANSION_FORM_START",i[i.EXPANSION_CASE_VALUE=16]="EXPANSION_CASE_VALUE",i[i.EXPANSION_CASE_EXP_START=17]="EXPANSION_CASE_EXP_START",i[i.EXPANSION_CASE_EXP_END=18]="EXPANSION_CASE_EXP_END",i[i.EXPANSION_FORM_END=19]="EXPANSION_FORM_END",i[i.EOF=20]="EOF"}(Vt||(Vt={}));class Token{constructor(i,s,S){this.type=i,this.parts=s,this.sourceSpan=S}}class TokenError extends ParseError{constructor(i,s,S){super(S,i),this.tokenType=s}}class TokenizeResult{constructor(i,s,S){this.tokens=i,this.errors=s,this.nonNormalizedIcuExpressions=S}}function tokenize(i,s,S,_={}){const T=new _Tokenizer(new ParseSourceFile(i,s),S,_);return T.tokenize(),new TokenizeResult(function mergeTextTokens(i){const s=[];let S=void 0;for(let _=0;_<i.length;_++){const T=i[_];S&&S.type==Vt.TEXT&&T.type==Vt.TEXT?(S.parts[0]+=T.parts[0],S.sourceSpan.end=T.sourceSpan.end):(S=T,s.push(S))}return s}(T.tokens),T.errors,T.nonNormalizedIcuExpressions)}const jt=/\r\n?/g;function _unexpectedCharacterErrorMsg(i){return`Unexpected character "${0===i?"EOF":String.fromCharCode(i)}"`}function _unknownEntityErrorMsg(i){return`Unknown entity "${i}" - use the "&#<decimal>;" or  "&#x<hex>;" syntax`}var Ut;!function(i){i.HEX="hexadecimal",i.DEC="decimal"}(Ut||(Ut={}));class _ControlFlowError{constructor(i){this.error=i}}class _Tokenizer{constructor(i,s,S){this._getTagDefinition=s,this._currentTokenStart=null,this._currentTokenType=null,this._expansionCaseStack=[],this._inInterpolation=!1,this.tokens=[],this.errors=[],this.nonNormalizedIcuExpressions=[],this._tokenizeIcu=S.tokenizeExpansionForms||!1,this._interpolationConfig=S.interpolationConfig||ut,this._leadingTriviaCodePoints=S.leadingTriviaChars&&S.leadingTriviaChars.map(i=>i.codePointAt(0)||0);const _=S.range||{endPos:i.content.length,startPos:0,startLine:0,startCol:0};this._cursor=S.escapedString?new EscapedCharacterCursor(i,_):new PlainCharacterCursor(i,_),this._preserveLineEndings=S.preserveLineEndings||!1,this._escapedString=S.escapedString||!1,this._i18nNormalizeLineEndingsInICUs=S.i18nNormalizeLineEndingsInICUs||!1;try{this._cursor.init()}catch(i){this.handleError(i)}}_processCarriageReturns(i){return this._preserveLineEndings?i:i.replace(jt,"\n")}tokenize(){for(;0!==this._cursor.peek();){const i=this._cursor.clone();try{this._attemptCharCode(60)?this._attemptCharCode(33)?this._attemptCharCode(91)?this._consumeCdata(i):this._attemptCharCode(45)?this._consumeComment(i):this._consumeDocType(i):this._attemptCharCode(47)?this._consumeTagClose(i):this._consumeTagOpen(i):this._tokenizeIcu&&this._tokenizeExpansionForm()||this._consumeText()}catch(i){this.handleError(i)}}this._beginToken(Vt.EOF),this._endToken([])}_tokenizeExpansionForm(){if(this.isExpansionFormStart())return this._consumeExpansionFormStart(),!0;if(function isExpansionCaseStart(i){return 125!==i}(this._cursor.peek())&&this._isInExpansionForm())return this._consumeExpansionCaseStart(),!0;if(125===this._cursor.peek()){if(this._isInExpansionCase())return this._consumeExpansionCaseEnd(),!0;if(this._isInExpansionForm())return this._consumeExpansionFormEnd(),!0}return!1}_beginToken(i,s=this._cursor.clone()){this._currentTokenStart=s,this._currentTokenType=i}_endToken(i,s){if(null===this._currentTokenStart)throw new TokenError("Programming error - attempted to end a token when there was no start to the token",this._currentTokenType,this._cursor.getSpan(s));if(null===this._currentTokenType)throw new TokenError("Programming error - attempted to end a token which has no token type",null,this._cursor.getSpan(this._currentTokenStart));const S=new Token(this._currentTokenType,i,this._cursor.getSpan(this._currentTokenStart,this._leadingTriviaCodePoints));return this.tokens.push(S),this._currentTokenStart=null,this._currentTokenType=null,S}_createError(i,s){this._isInExpansionForm()&&(i+=' (Do you have an unescaped "{" in your template? Use "{{ \'{\' }}") to escape it.)');const S=new TokenError(i,this._currentTokenType,s);return this._currentTokenStart=null,this._currentTokenType=null,new _ControlFlowError(S)}handleError(i){if(i instanceof CursorError&&(i=this._createError(i.msg,this._cursor.getSpan(i.cursor))),!(i instanceof _ControlFlowError))throw i;this.errors.push(i.error)}_attemptCharCode(i){return this._cursor.peek()===i&&(this._cursor.advance(),!0)}_attemptCharCodeCaseInsensitive(i){return!!function compareCharCodeCaseInsensitive(i,s){return toUpperCaseCharCode(i)==toUpperCaseCharCode(s)}(this._cursor.peek(),i)&&(this._cursor.advance(),!0)}_requireCharCode(i){const s=this._cursor.clone();if(!this._attemptCharCode(i))throw this._createError(_unexpectedCharacterErrorMsg(this._cursor.peek()),this._cursor.getSpan(s))}_attemptStr(i){const s=i.length;if(this._cursor.charsLeft()<s)return!1;const S=this._cursor.clone();for(let _=0;_<s;_++)if(!this._attemptCharCode(i.charCodeAt(_)))return this._cursor=S,!1;return!0}_attemptStrCaseInsensitive(i){for(let s=0;s<i.length;s++)if(!this._attemptCharCodeCaseInsensitive(i.charCodeAt(s)))return!1;return!0}_requireStr(i){const s=this._cursor.clone();if(!this._attemptStr(i))throw this._createError(_unexpectedCharacterErrorMsg(this._cursor.peek()),this._cursor.getSpan(s))}_attemptCharCodeUntilFn(i){for(;!i(this._cursor.peek());)this._cursor.advance()}_requireCharCodeUntilFn(i,s){const S=this._cursor.clone();if(this._attemptCharCodeUntilFn(i),this._cursor.diff(S)<s)throw this._createError(_unexpectedCharacterErrorMsg(this._cursor.peek()),this._cursor.getSpan(S))}_attemptUntilChar(i){for(;this._cursor.peek()!==i;)this._cursor.advance()}_readChar(i){if(i&&38===this._cursor.peek())return this._decodeEntity();{const i=String.fromCodePoint(this._cursor.peek());return this._cursor.advance(),i}}_decodeEntity(){const i=this._cursor.clone();if(this._cursor.advance(),!this._attemptCharCode(35)){const s=this._cursor.clone();if(this._attemptCharCodeUntilFn(isNamedEntityEnd),59!=this._cursor.peek())return this._cursor=s,"&";const S=this._cursor.getChars(s);this._cursor.advance();const _=T[S];if(!_)throw this._createError(_unknownEntityErrorMsg(S),this._cursor.getSpan(i));return _}{const s=this._attemptCharCode(120)||this._attemptCharCode(88),S=this._cursor.clone();if(this._attemptCharCodeUntilFn(isDigitEntityEnd),59!=this._cursor.peek()){this._cursor.advance();const S=s?Ut.HEX:Ut.DEC;throw this._createError(function _unparsableEntityErrorMsg(i,s){return`Unable to parse entity "${s}" - ${i} character reference entities must end with ";"`}(S,this._cursor.getChars(i)),this._cursor.getSpan())}const _=this._cursor.getChars(S);this._cursor.advance();try{const i=parseInt(_,s?16:10);return String.fromCharCode(i)}catch(s){throw this._createError(_unknownEntityErrorMsg(this._cursor.getChars(i)),this._cursor.getSpan())}}}_consumeRawText(i,s){this._beginToken(i?Vt.ESCAPABLE_RAW_TEXT:Vt.RAW_TEXT);const S=[];for(;;){const _=this._cursor.clone(),T=s();if(this._cursor=_,T)break;S.push(this._readChar(i))}return this._endToken([this._processCarriageReturns(S.join(""))])}_consumeComment(i){this._beginToken(Vt.COMMENT_START,i),this._requireCharCode(45),this._endToken([]),this._consumeRawText(!1,()=>this._attemptStr("--\x3e")),this._beginToken(Vt.COMMENT_END),this._requireStr("--\x3e"),this._endToken([])}_consumeCdata(i){this._beginToken(Vt.CDATA_START,i),this._requireStr("CDATA["),this._endToken([]),this._consumeRawText(!1,()=>this._attemptStr("]]>")),this._beginToken(Vt.CDATA_END),this._requireStr("]]>"),this._endToken([])}_consumeDocType(i){this._beginToken(Vt.DOC_TYPE,i);const s=this._cursor.clone();this._attemptUntilChar(62);const S=this._cursor.getChars(s);this._cursor.advance(),this._endToken([S])}_consumePrefixAndName(){const i=this._cursor.clone();let s="";for(;58!==this._cursor.peek()&&!(((S=this._cursor.peek())<97||122<S)&&(S<65||90<S)&&(S<48||S>57));)this._cursor.advance();var S;let _;return 58===this._cursor.peek()?(s=this._cursor.getChars(i),this._cursor.advance(),_=this._cursor.clone()):_=i,this._requireCharCodeUntilFn(isNameEnd,""===s?0:1),[s,this._cursor.getChars(_)]}_consumeTagOpen(i){let s,S,T,A=this.tokens.length;const P=this._cursor.clone();try{if(!isAsciiLetter(this._cursor.peek()))throw this._createError(_unexpectedCharacterErrorMsg(this._cursor.peek()),this._cursor.getSpan(i));for(T=this._consumeTagOpenStart(i),S=T.parts[0],s=T.parts[1],this._attemptCharCodeUntilFn(isNotWhitespace);47!==this._cursor.peek()&&62!==this._cursor.peek();)this._consumeAttributeName(),this._attemptCharCodeUntilFn(isNotWhitespace),this._attemptCharCode(61)&&(this._attemptCharCodeUntilFn(isNotWhitespace),this._consumeAttributeValue()),this._attemptCharCodeUntilFn(isNotWhitespace);this._consumeTagOpenEnd()}catch(s){if(s instanceof _ControlFlowError)return this._cursor=P,T&&(this.tokens.length=A),this._beginToken(Vt.TEXT,i),void this._endToken(["<"]);throw s}const N=this._getTagDefinition(s).contentType;N===_.RAW_TEXT?this._consumeRawTextWithTagClose(S,s,!1):N===_.ESCAPABLE_RAW_TEXT&&this._consumeRawTextWithTagClose(S,s,!0)}_consumeRawTextWithTagClose(i,s,S){this._consumeRawText(S,()=>!!this._attemptCharCode(60)&&(!!this._attemptCharCode(47)&&(this._attemptCharCodeUntilFn(isNotWhitespace),!!this._attemptStrCaseInsensitive(s)&&(this._attemptCharCodeUntilFn(isNotWhitespace),this._attemptCharCode(62)))));this._beginToken(Vt.TAG_CLOSE),this._requireCharCodeUntilFn(i=>62===i,3),this._cursor.advance(),this._endToken([i,s])}_consumeTagOpenStart(i){this._beginToken(Vt.TAG_OPEN_START,i);const s=this._consumePrefixAndName();return this._endToken(s)}_consumeAttributeName(){const i=this._cursor.peek();if(39===i||34===i)throw this._createError(_unexpectedCharacterErrorMsg(i),this._cursor.getSpan());this._beginToken(Vt.ATTR_NAME);const s=this._consumePrefixAndName();this._endToken(s)}_consumeAttributeValue(){let i;if(39===this._cursor.peek()||34===this._cursor.peek()){this._beginToken(Vt.ATTR_QUOTE);const s=this._cursor.peek();this._cursor.advance(),this._endToken([String.fromCodePoint(s)]),this._beginToken(Vt.ATTR_VALUE);const S=[];for(;this._cursor.peek()!==s;)S.push(this._readChar(!0));i=S.join(""),this._endToken([this._processCarriageReturns(i)]),this._beginToken(Vt.ATTR_QUOTE),this._cursor.advance(),this._endToken([String.fromCodePoint(s)])}else{this._beginToken(Vt.ATTR_VALUE);const s=this._cursor.clone();this._requireCharCodeUntilFn(isNameEnd,1),i=this._cursor.getChars(s),this._endToken([this._processCarriageReturns(i)])}}_consumeTagOpenEnd(){const i=this._attemptCharCode(47)?Vt.TAG_OPEN_END_VOID:Vt.TAG_OPEN_END;this._beginToken(i),this._requireCharCode(62),this._endToken([])}_consumeTagClose(i){this._beginToken(Vt.TAG_CLOSE,i),this._attemptCharCodeUntilFn(isNotWhitespace);const s=this._consumePrefixAndName();this._attemptCharCodeUntilFn(isNotWhitespace),this._requireCharCode(62),this._endToken(s)}_consumeExpansionFormStart(){this._beginToken(Vt.EXPANSION_FORM_START),this._requireCharCode(123),this._endToken([]),this._expansionCaseStack.push(Vt.EXPANSION_FORM_START),this._beginToken(Vt.RAW_TEXT);const i=this._readUntil(44),s=this._processCarriageReturns(i);if(this._escapedString||this._i18nNormalizeLineEndingsInICUs)this._endToken([s]);else{const S=this._endToken([i]);s!==i&&this.nonNormalizedIcuExpressions.push(S)}this._requireCharCode(44),this._attemptCharCodeUntilFn(isNotWhitespace),this._beginToken(Vt.RAW_TEXT);const S=this._readUntil(44);this._endToken([S]),this._requireCharCode(44),this._attemptCharCodeUntilFn(isNotWhitespace)}_consumeExpansionCaseStart(){this._beginToken(Vt.EXPANSION_CASE_VALUE);const i=this._readUntil(123).trim();this._endToken([i]),this._attemptCharCodeUntilFn(isNotWhitespace),this._beginToken(Vt.EXPANSION_CASE_EXP_START),this._requireCharCode(123),this._endToken([]),this._attemptCharCodeUntilFn(isNotWhitespace),this._expansionCaseStack.push(Vt.EXPANSION_CASE_EXP_START)}_consumeExpansionCaseEnd(){this._beginToken(Vt.EXPANSION_CASE_EXP_END),this._requireCharCode(125),this._endToken([]),this._attemptCharCodeUntilFn(isNotWhitespace),this._expansionCaseStack.pop()}_consumeExpansionFormEnd(){this._beginToken(Vt.EXPANSION_FORM_END),this._requireCharCode(125),this._endToken([]),this._expansionCaseStack.pop()}_consumeText(){const i=this._cursor.clone();this._beginToken(Vt.TEXT,i);const s=[];do{this._interpolationConfig&&this._attemptStr(this._interpolationConfig.start)?(s.push(this._interpolationConfig.start),this._inInterpolation=!0):this._interpolationConfig&&this._inInterpolation&&this._attemptStr(this._interpolationConfig.end)?(s.push(this._interpolationConfig.end),this._inInterpolation=!1):s.push(this._readChar(!0))}while(!this._isTextEnd());this._endToken([this._processCarriageReturns(s.join(""))])}_isTextEnd(){if(60===this._cursor.peek()||0===this._cursor.peek())return!0;if(this._tokenizeIcu&&!this._inInterpolation){if(this.isExpansionFormStart())return!0;if(125===this._cursor.peek()&&this._isInExpansionCase())return!0}return!1}_readUntil(i){const s=this._cursor.clone();return this._attemptUntilChar(i),this._cursor.getChars(s)}_isInExpansionCase(){return this._expansionCaseStack.length>0&&this._expansionCaseStack[this._expansionCaseStack.length-1]===Vt.EXPANSION_CASE_EXP_START}_isInExpansionForm(){return this._expansionCaseStack.length>0&&this._expansionCaseStack[this._expansionCaseStack.length-1]===Vt.EXPANSION_FORM_START}isExpansionFormStart(){if(123!==this._cursor.peek())return!1;if(this._interpolationConfig){const i=this._cursor.clone(),s=this._attemptStr(this._interpolationConfig.start);return this._cursor=i,!s}return!0}}function isNotWhitespace(i){return!isWhitespace(i)||0===i}function isNameEnd(i){return isWhitespace(i)||62===i||47===i||39===i||34===i||61===i}function isDigitEntityEnd(i){return 59==i||0==i||!function isAsciiHexDigit(i){return i>=97&&i<=102||i>=65&&i<=70||isDigit(i)}(i)}function isNamedEntityEnd(i){return 59==i||0==i||!isAsciiLetter(i)}function toUpperCaseCharCode(i){return i>=97&&i<=122?i-97+65:i}class PlainCharacterCursor{constructor(i,s){if(i instanceof PlainCharacterCursor){this.file=i.file,this.input=i.input,this.end=i.end;const s=i.state;this.state={peek:s.peek,offset:s.offset,line:s.line,column:s.column}}else{if(!s)throw new Error("Programming error: the range argument must be provided with a file argument.");this.file=i,this.input=i.content,this.end=s.endPos,this.state={peek:-1,offset:s.startPos,line:s.startLine,column:s.startCol}}}clone(){return new PlainCharacterCursor(this)}peek(){return this.state.peek}charsLeft(){return this.end-this.state.offset}diff(i){return this.state.offset-i.state.offset}advance(){this.advanceState(this.state)}init(){this.updatePeek(this.state)}getSpan(i,s){i=i||this;let S=!1;if(s)for(;this.diff(i)>0&&-1!==s.indexOf(i.peek());)S||(i=i.clone(),S=!0),i.advance();return new ParseSourceSpan(new ParseLocation(i.file,i.state.offset,i.state.line,i.state.column),new ParseLocation(this.file,this.state.offset,this.state.line,this.state.column))}getChars(i){return this.input.substring(i.state.offset,this.state.offset)}charAt(i){return this.input.charCodeAt(i)}advanceState(i){if(i.offset>=this.end)throw this.state=i,new CursorError('Unexpected character "EOF"',this);const s=this.charAt(i.offset);10===s?(i.line++,i.column=0):isNewLine(s)||i.column++,i.offset++,this.updatePeek(i)}updatePeek(i){i.peek=i.offset>=this.end?0:this.charAt(i.offset)}}class EscapedCharacterCursor extends PlainCharacterCursor{constructor(i,s){i instanceof EscapedCharacterCursor?(super(i),this.internalState=Object.assign({},i.internalState)):(super(i,s),this.internalState=this.state)}advance(){this.state=this.internalState,super.advance(),this.processEscapeSequence()}init(){super.init(),this.processEscapeSequence()}clone(){return new EscapedCharacterCursor(this)}getChars(i){const s=i.clone();let S="";for(;s.internalState.offset<this.internalState.offset;)S+=String.fromCodePoint(s.peek()),s.advance();return S}processEscapeSequence(){const peek=()=>this.internalState.peek;if(92===peek())if(this.internalState=Object.assign({},this.state),this.advanceState(this.internalState),110===peek())this.state.peek=10;else if(114===peek())this.state.peek=13;else if(118===peek())this.state.peek=11;else if(116===peek())this.state.peek=9;else if(98===peek())this.state.peek=8;else if(102===peek())this.state.peek=12;else if(117===peek())if(this.advanceState(this.internalState),123===peek()){this.advanceState(this.internalState);const i=this.clone();let s=0;for(;125!==peek();)this.advanceState(this.internalState),s++;this.state.peek=this.decodeHexDigits(i,s)}else{const i=this.clone();this.advanceState(this.internalState),this.advanceState(this.internalState),this.advanceState(this.internalState),this.state.peek=this.decodeHexDigits(i,4)}else if(120===peek()){this.advanceState(this.internalState);const i=this.clone();this.advanceState(this.internalState),this.state.peek=this.decodeHexDigits(i,2)}else if(isOctalDigit(peek())){let i="",s=0,S=this.clone();for(;isOctalDigit(peek())&&s<3;)S=this.clone(),i+=String.fromCodePoint(peek()),this.advanceState(this.internalState),s++;this.state.peek=parseInt(i,8),this.internalState=S.internalState}else isNewLine(this.internalState.peek)?(this.advanceState(this.internalState),this.state=this.internalState):this.state.peek=this.internalState.peek}decodeHexDigits(i,s){const S=this.input.substr(i.internalState.offset,s),_=parseInt(S,16);if(isNaN(_))throw i.state=i.internalState,new CursorError("Invalid hexadecimal escape sequence",i);return _}}class CursorError{constructor(i,s){this.msg=i,this.cursor=s}}class TreeError extends ParseError{constructor(i,s,S){super(s,S),this.elementName=i}static create(i,s,S){return new TreeError(i,s,S)}}class ParseTreeResult{constructor(i,s){this.rootNodes=i,this.errors=s}}class Parser{constructor(i){this.getTagDefinition=i}parse(i,s,S){const _=tokenize(i,s,this.getTagDefinition,S),T=new _TreeBuilder(_.tokens,this.getTagDefinition);return T.build(),new ParseTreeResult(T.rootNodes,_.errors.concat(T.errors))}}class _TreeBuilder{constructor(i,s){this.tokens=i,this.getTagDefinition=s,this._index=-1,this._elementStack=[],this.rootNodes=[],this.errors=[],this._advance()}build(){for(;this._peek.type!==Vt.EOF;)this._peek.type===Vt.TAG_OPEN_START?this._consumeStartTag(this._advance()):this._peek.type===Vt.TAG_CLOSE?this._consumeEndTag(this._advance()):this._peek.type===Vt.CDATA_START?(this._closeVoidElement(),this._consumeCdata(this._advance())):this._peek.type===Vt.COMMENT_START?(this._closeVoidElement(),this._consumeComment(this._advance())):this._peek.type===Vt.TEXT||this._peek.type===Vt.RAW_TEXT||this._peek.type===Vt.ESCAPABLE_RAW_TEXT?(this._closeVoidElement(),this._consumeText(this._advance())):this._peek.type===Vt.EXPANSION_FORM_START?this._consumeExpansion(this._advance()):this._advance()}_advance(){const i=this._peek;return this._index<this.tokens.length-1&&this._index++,this._peek=this.tokens[this._index],i}_advanceIf(i){return this._peek.type===i?this._advance():null}_consumeCdata(i){this._consumeText(this._advance()),this._advanceIf(Vt.CDATA_END)}_consumeComment(i){const s=this._advanceIf(Vt.RAW_TEXT);this._advanceIf(Vt.COMMENT_END);const S=null!=s?s.parts[0].trim():null;this._addToParent(new Comment(S,i.sourceSpan))}_consumeExpansion(i){const s=this._advance(),S=this._advance(),_=[];for(;this._peek.type===Vt.EXPANSION_CASE_VALUE;){const i=this._parseExpansionCase();if(!i)return;_.push(i)}if(this._peek.type!==Vt.EXPANSION_FORM_END)return void this.errors.push(TreeError.create(null,this._peek.sourceSpan,"Invalid ICU message. Missing '}'."));const T=new ParseSourceSpan(i.sourceSpan.start,this._peek.sourceSpan.end);this._addToParent(new Expansion(s.parts[0],S.parts[0],_,T,s.sourceSpan)),this._advance()}_parseExpansionCase(){const i=this._advance();if(this._peek.type!==Vt.EXPANSION_CASE_EXP_START)return this.errors.push(TreeError.create(null,this._peek.sourceSpan,"Invalid ICU message. Missing '{'.")),null;const s=this._advance(),S=this._collectExpansionExpTokens(s);if(!S)return null;const _=this._advance();S.push(new Token(Vt.EOF,[],_.sourceSpan));const T=new _TreeBuilder(S,this.getTagDefinition);if(T.build(),T.errors.length>0)return this.errors=this.errors.concat(T.errors),null;const A=new ParseSourceSpan(i.sourceSpan.start,_.sourceSpan.end),P=new ParseSourceSpan(s.sourceSpan.start,_.sourceSpan.end);return new ExpansionCase(i.parts[0],T.rootNodes,A,i.sourceSpan,P)}_collectExpansionExpTokens(i){const s=[],S=[Vt.EXPANSION_CASE_EXP_START];for(;;){if(this._peek.type!==Vt.EXPANSION_FORM_START&&this._peek.type!==Vt.EXPANSION_CASE_EXP_START||S.push(this._peek.type),this._peek.type===Vt.EXPANSION_CASE_EXP_END){if(!lastOnStack(S,Vt.EXPANSION_CASE_EXP_START))return this.errors.push(TreeError.create(null,i.sourceSpan,"Invalid ICU message. Missing '}'.")),null;if(S.pop(),0==S.length)return s}if(this._peek.type===Vt.EXPANSION_FORM_END){if(!lastOnStack(S,Vt.EXPANSION_FORM_START))return this.errors.push(TreeError.create(null,i.sourceSpan,"Invalid ICU message. Missing '}'.")),null;S.pop()}if(this._peek.type===Vt.EOF)return this.errors.push(TreeError.create(null,i.sourceSpan,"Invalid ICU message. Missing '}'.")),null;s.push(this._advance())}}_consumeText(i){let s=i.parts[0];if(s.length>0&&"\n"==s[0]){const i=this._getParentElement();null!=i&&0==i.children.length&&this.getTagDefinition(i.name).ignoreFirstLf&&(s=s.substring(1))}s.length>0&&this._addToParent(new Text$3(s,i.sourceSpan))}_closeVoidElement(){const i=this._getParentElement();i&&this.getTagDefinition(i.name).isVoid&&this._elementStack.pop()}_consumeStartTag(i){const s=i.parts[0],S=i.parts[1],_=[];for(;this._peek.type===Vt.ATTR_NAME;)_.push(this._consumeAttr(this._advance()));const T=this._getElementFullName(s,S,this._getParentElement());let A=!1;if(this._peek.type===Vt.TAG_OPEN_END_VOID){this._advance(),A=!0;const s=this.getTagDefinition(T);s.canSelfClose||null!==getNsPrefix(T)||s.isVoid||this.errors.push(TreeError.create(T,i.sourceSpan,`Only void and foreign elements can be self closed "${i.parts[1]}"`))}else this._peek.type===Vt.TAG_OPEN_END&&(this._advance(),A=!1);const P=this._peek.sourceSpan.start,N=new ParseSourceSpan(i.sourceSpan.start,P),M=new Element$1(T,_,[],N,N,void 0);this._pushElement(M),A&&this._popElement(T,N)}_pushElement(i){const s=this._getParentElement();s&&this.getTagDefinition(s.name).isClosedByChild(i.name)&&this._elementStack.pop(),this._addToParent(i),this._elementStack.push(i)}_consumeEndTag(i){const s=this._getElementFullName(i.parts[0],i.parts[1],this._getParentElement());if(this.getTagDefinition(s).isVoid)this.errors.push(TreeError.create(s,i.sourceSpan,`Void elements do not have end tags "${i.parts[1]}"`));else if(!this._popElement(s,i.sourceSpan)){const S=`Unexpected closing tag "${s}". It may happen when the tag has already been closed by another tag. For more info see https://www.w3.org/TR/html5/syntax.html#closing-elements-that-have-implied-end-tags`;this.errors.push(TreeError.create(s,i.sourceSpan,S))}}_popElement(i,s){for(let S=this._elementStack.length-1;S>=0;S--){const _=this._elementStack[S];if(_.name==i)return _.endSourceSpan=s,this._elementStack.splice(S,this._elementStack.length-S),!0;if(!this.getTagDefinition(_.name).closedByParent)return!1}return!1}_consumeAttr(i){const s=mergeNsAndName(i.parts[0],i.parts[1]);let S=i.sourceSpan.end,_="",T=void 0;if(this._peek.type===Vt.ATTR_QUOTE&&this._advance(),this._peek.type===Vt.ATTR_VALUE){const i=this._advance();_=i.parts[0],S=i.sourceSpan.end,T=i.sourceSpan}if(this._peek.type===Vt.ATTR_QUOTE){S=this._advance().sourceSpan.end}return new Attribute(s,_,new ParseSourceSpan(i.sourceSpan.start,S),T)}_getParentElement(){return this._elementStack.length>0?this._elementStack[this._elementStack.length-1]:null}_addToParent(i){const s=this._getParentElement();null!=s?s.children.push(i):this.rootNodes.push(i)}_getElementFullName(i,s,S){if(""===i&&""===(i=this.getTagDefinition(s).implicitNamespacePrefix||"")&&null!=S){const s=splitNsName(S.name)[1];this.getTagDefinition(s).preventNamespaceInheritance||(i=getNsPrefix(S.name))}return mergeNsAndName(i,s)}}function lastOnStack(i,s){return i.length>0&&i[i.length-1]===s}class HtmlParser extends Parser{constructor(){super(getHtmlTagDefinition)}parse(i,s,S){return super.parse(i,s,S)}}const Wt=new Set(["pre","template","textarea","script","style"]),zt=new RegExp("[^ \f\n\r\t\v ᠎ - \u2028\u2029  　\ufeff]"),Ht=new RegExp("[ \f\n\r\t\v ᠎ - \u2028\u2029  　\ufeff]{2,}","g");function replaceNgsp(i){return i.replace(new RegExp(A,"g")," ")}class WhitespaceVisitor{visitElement(i,s){return Wt.has(i.name)||function hasPreserveWhitespacesAttr(i){return i.some(i=>"ngPreserveWhitespaces"===i.name)}(i.attrs)?new Element$1(i.name,visitAll$1(this,i.attrs),i.children,i.sourceSpan,i.startSourceSpan,i.endSourceSpan,i.i18n):new Element$1(i.name,i.attrs,function visitAllWithSiblings(i,s){const S=[];return s.forEach((_,T)=>{const A={prev:s[T-1],next:s[T+1]},P=_.visit(i,A);P&&S.push(P)}),S}(this,i.children),i.sourceSpan,i.startSourceSpan,i.endSourceSpan,i.i18n)}visitAttribute(i,s){return"ngPreserveWhitespaces"!==i.name?i:null}visitText(i,s){const S=i.value.match(zt),_=s&&(s.prev instanceof Expansion||s.next instanceof Expansion);return S||_?new Text$3(replaceNgsp(i.value).replace(Ht," "),i.sourceSpan,i.i18n):null}visitComment(i,s){return i}visitExpansion(i,s){return i}visitExpansionCase(i,s){return i}}function removeWhitespaces(i){return new ParseTreeResult(visitAll$1(new WhitespaceVisitor,i.rootNodes),i.errors)}const qt=["zero","one","two","few","many","other"];function expandNodes(i){const s=new _Expander;return new ExpansionResult(visitAll$1(s,i),s.isExpanded,s.errors)}class ExpansionResult{constructor(i,s,S){this.nodes=i,this.expanded=s,this.errors=S}}class ExpansionError extends ParseError{constructor(i,s){super(i,s)}}class _Expander{constructor(){this.isExpanded=!1,this.errors=[]}visitElement(i,s){return new Element$1(i.name,i.attrs,visitAll$1(this,i.children),i.sourceSpan,i.startSourceSpan,i.endSourceSpan)}visitAttribute(i,s){return i}visitText(i,s){return i}visitComment(i,s){return i}visitExpansion(i,s){return this.isExpanded=!0,"plural"==i.type?function _expandPluralForm(i,s){const S=i.cases.map(i=>{-1!=qt.indexOf(i.value)||i.value.match(/^=\d+$/)||s.push(new ExpansionError(i.valueSourceSpan,'Plural cases should be "=<number>" or one of '+qt.join(", ")));const S=expandNodes(i.expression);return s.push(...S.errors),new Element$1("ng-template",[new Attribute("ngPluralCase",""+i.value,i.valueSourceSpan)],S.nodes,i.sourceSpan,i.sourceSpan,i.sourceSpan)}),_=new Attribute("[ngPlural]",i.switchValue,i.switchValueSourceSpan);return new Element$1("ng-container",[_],S,i.sourceSpan,i.sourceSpan,i.sourceSpan)}(i,this.errors):function _expandDefaultForm(i,s){const S=i.cases.map(i=>{const S=expandNodes(i.expression);return s.push(...S.errors),"other"===i.value?new Element$1("ng-template",[new Attribute("ngSwitchDefault","",i.valueSourceSpan)],S.nodes,i.sourceSpan,i.sourceSpan,i.sourceSpan):new Element$1("ng-template",[new Attribute("ngSwitchCase",""+i.value,i.valueSourceSpan)],S.nodes,i.sourceSpan,i.sourceSpan,i.sourceSpan)}),_=new Attribute("[ngSwitch]",i.switchValue,i.switchValueSourceSpan);return new Element$1("ng-container",[_],S,i.sourceSpan,i.sourceSpan,i.sourceSpan)}(i,this.errors)}visitExpansionCase(i,s){throw new Error("Should not be reached")}}class TextAst{constructor(i,s,S){this.value=i,this.ngContentIndex=s,this.sourceSpan=S}visit(i,s){return i.visitText(this,s)}}class BoundTextAst{constructor(i,s,S){this.value=i,this.ngContentIndex=s,this.sourceSpan=S}visit(i,s){return i.visitBoundText(this,s)}}class AttrAst{constructor(i,s,S){this.name=i,this.value=s,this.sourceSpan=S}visit(i,s){return i.visitAttr(this,s)}}const Kt={4:4,1:1,2:2,0:0,3:3};class BoundElementPropertyAst{constructor(i,s,S,_,T,A){this.name=i,this.type=s,this.securityContext=S,this.value=_,this.unit=T,this.sourceSpan=A,this.isAnimation=4===this.type}static fromBoundProperty(i){const s=Kt[i.type];return new BoundElementPropertyAst(i.name,s,i.securityContext,i.value,i.unit,i.sourceSpan)}visit(i,s){return i.visitElementProperty(this,s)}}class BoundEventAst{constructor(i,s,S,_,T,A){this.name=i,this.target=s,this.phase=S,this.handler=_,this.sourceSpan=T,this.handlerSpan=A,this.fullName=BoundEventAst.calcFullName(this.name,this.target,this.phase),this.isAnimation=!!this.phase}static calcFullName(i,s,S){return s?`${s}:${i}`:S?`@${i}.${S}`:i}static fromParsedEvent(i){const s=0===i.type?i.targetOrPhase:null,S=1===i.type?i.targetOrPhase:null;return new BoundEventAst(i.name,s,S,i.handler,i.sourceSpan,i.handlerSpan)}visit(i,s){return i.visitEvent(this,s)}}class ReferenceAst{constructor(i,s,S,_){this.name=i,this.value=s,this.originalValue=S,this.sourceSpan=_}visit(i,s){return i.visitReference(this,s)}}class VariableAst{constructor(i,s,S,_){this.name=i,this.value=s,this.sourceSpan=S,this.valueSpan=_}static fromParsedVariable(i){return new VariableAst(i.name,i.value,i.sourceSpan,i.valueSpan)}visit(i,s){return i.visitVariable(this,s)}}class ElementAst{constructor(i,s,S,_,T,A,P,N,M,k,R,F,D){this.name=i,this.attrs=s,this.inputs=S,this.outputs=_,this.references=T,this.directives=A,this.providers=P,this.hasViewContainer=N,this.queryMatches=M,this.children=k,this.ngContentIndex=R,this.sourceSpan=F,this.endSourceSpan=D}visit(i,s){return i.visitElement(this,s)}}class EmbeddedTemplateAst{constructor(i,s,S,_,T,A,P,N,M,k,R){this.attrs=i,this.outputs=s,this.references=S,this.variables=_,this.directives=T,this.providers=A,this.hasViewContainer=P,this.queryMatches=N,this.children=M,this.ngContentIndex=k,this.sourceSpan=R}visit(i,s){return i.visitEmbeddedTemplate(this,s)}}class BoundDirectivePropertyAst{constructor(i,s,S,_){this.directiveName=i,this.templateName=s,this.value=S,this.sourceSpan=_}visit(i,s){return i.visitDirectiveProperty(this,s)}}class DirectiveAst{constructor(i,s,S,_,T,A){this.directive=i,this.inputs=s,this.hostProperties=S,this.hostEvents=_,this.contentQueryStartId=T,this.sourceSpan=A}visit(i,s){return i.visitDirective(this,s)}}class ProviderAst{constructor(i,s,S,_,T,A,P,N){this.token=i,this.multiProvider=s,this.eager=S,this.providers=_,this.providerType=T,this.lifecycleHooks=A,this.sourceSpan=P,this.isModule=N}visit(i,s){return null}}var Gt;!function(i){i[i.PublicService=0]="PublicService",i[i.PrivateService=1]="PrivateService",i[i.Component=2]="Component",i[i.Directive=3]="Directive",i[i.Builtin=4]="Builtin"}(Gt||(Gt={}));class NgContentAst{constructor(i,s,S){this.index=i,this.ngContentIndex=s,this.sourceSpan=S}visit(i,s){return i.visitNgContent(this,s)}}class NullTemplateVisitor{visitNgContent(i,s){}visitEmbeddedTemplate(i,s){}visitElement(i,s){}visitReference(i,s){}visitVariable(i,s){}visitEvent(i,s){}visitElementProperty(i,s){}visitAttr(i,s){}visitBoundText(i,s){}visitText(i,s){}visitDirective(i,s){}visitDirectiveProperty(i,s){}}class RecursiveTemplateAstVisitor extends NullTemplateVisitor{constructor(){super()}visitEmbeddedTemplate(i,s){return this.visitChildren(s,s=>{s(i.attrs),s(i.references),s(i.variables),s(i.directives),s(i.providers),s(i.children)})}visitElement(i,s){return this.visitChildren(s,s=>{s(i.attrs),s(i.inputs),s(i.outputs),s(i.references),s(i.directives),s(i.providers),s(i.children)})}visitDirective(i,s){return this.visitChildren(s,s=>{s(i.inputs),s(i.hostProperties),s(i.hostEvents)})}visitChildren(i,s){let S=[],_=this;return s((function visit(s){s&&s.length&&S.push(templateVisitAll(_,s,i))})),Array.prototype.concat.apply([],S)}}function templateVisitAll(i,s,S=null){const _=[],T=i.visit?s=>i.visit(s,S)||s.visit(i,S):s=>s.visit(i,S);return s.forEach(i=>{const s=T(i);s&&_.push(s)}),_}class ProviderError extends ParseError{constructor(i,s){super(s,i)}}class ProviderViewContext{constructor(i,s){this.reflector=i,this.component=s,this.errors=[],this.viewQueries=function _getViewQueries(i){let s=1;const S=new Map;i.viewQueries&&i.viewQueries.forEach(i=>_addQueryToTokenMap(S,{meta:i,queryId:s++}));return S}(s),this.viewProviders=new Map,s.viewProviders.forEach(i=>{null==this.viewProviders.get(tokenReference(i.token))&&this.viewProviders.set(tokenReference(i.token),!0)})}}class ProviderElementContext{constructor(i,s,S,_,T,A,P,N,M){this.viewContext=i,this._parent=s,this._isViewRoot=S,this._directiveAsts=_,this._sourceSpan=M,this._transformedProviders=new Map,this._seenProviders=new Map,this._queriedTokens=new Map,this.transformedHasViewContainer=!1,this._attrs={},T.forEach(i=>this._attrs[i.name]=i.value);const k=_.map(i=>i.directive);if(this._allProviders=function _resolveProvidersFromDirectives(i,s,S){const _=new Map;return i.forEach(i=>{_resolveProviders([{token:{identifier:i.type},useClass:i.type}],i.isComponent?Gt.Component:Gt.Directive,!0,s,S,_,!1)}),i.filter(i=>i.isComponent).concat(i.filter(i=>!i.isComponent)).forEach(i=>{_resolveProviders(i.providers,Gt.PublicService,!1,s,S,_,!1),_resolveProviders(i.viewProviders,Gt.PrivateService,!1,s,S,_,!1)}),_}(k,M,i.errors),this._contentQueries=function _getContentQueries(i,s){let S=i;const _=new Map;return s.forEach((i,s)=>{i.queries&&i.queries.forEach(i=>_addQueryToTokenMap(_,{meta:i,queryId:S++}))}),_}(N,k),Array.from(this._allProviders.values()).forEach(i=>{this._addQueryReadsTo(i.token,i.token,this._queriedTokens)}),P){const i=createTokenForExternalReference(this.viewContext.reflector,Identifiers.TemplateRef);this._addQueryReadsTo(i,i,this._queriedTokens)}A.forEach(i=>{let s=i.value||createTokenForExternalReference(this.viewContext.reflector,Identifiers.ElementRef);this._addQueryReadsTo({value:i.name},s,this._queriedTokens)}),this._queriedTokens.get(this.viewContext.reflector.resolveExternalReference(Identifiers.ViewContainerRef))&&(this.transformedHasViewContainer=!0),Array.from(this._allProviders.values()).forEach(i=>{(i.eager||this._queriedTokens.get(tokenReference(i.token)))&&this._getOrCreateLocalProvider(i.providerType,i.token,!0)})}afterElement(){Array.from(this._allProviders.values()).forEach(i=>{this._getOrCreateLocalProvider(i.providerType,i.token,!1)})}get transformProviders(){const i=[],s=[];return this._transformedProviders.forEach(S=>{S.eager?s.push(S):i.push(S)}),i.concat(s)}get transformedDirectiveAsts(){const i=this.transformProviders.map(i=>i.token.identifier),s=this._directiveAsts.slice();return s.sort((s,S)=>i.indexOf(s.directive.type)-i.indexOf(S.directive.type)),s}get queryMatches(){const i=[];return this._queriedTokens.forEach(s=>{i.push(...s)}),i}_addQueryReadsTo(i,s,S){this._getQueriesFor(i).forEach(i=>{const _=i.meta.read||s,T=tokenReference(_);let A=S.get(T);A||(A=[],S.set(T,A)),A.push({queryId:i.queryId,value:_})})}_getQueriesFor(i){const s=[];let S,_=this,T=0;for(;null!==_;)S=_._contentQueries.get(tokenReference(i)),S&&s.push(...S.filter(i=>i.meta.descendants||T<=1)),_._directiveAsts.length>0&&T++,_=_._parent;return S=this.viewContext.viewQueries.get(tokenReference(i)),S&&s.push(...S),s}_getOrCreateLocalProvider(i,s,S){const _=this._allProviders.get(tokenReference(s));if(!_||(i===Gt.Directive||i===Gt.PublicService)&&_.providerType===Gt.PrivateService||(i===Gt.PrivateService||i===Gt.PublicService)&&_.providerType===Gt.Builtin)return null;let T=this._transformedProviders.get(tokenReference(s));if(T)return T;if(null!=this._seenProviders.get(tokenReference(s)))return this.viewContext.errors.push(new ProviderError("Cannot instantiate cyclic dependency! "+tokenName(s),this._sourceSpan)),null;this._seenProviders.set(tokenReference(s),!0);const A=_.providers.map(i=>{let s=i.useValue,T=i.useExisting,A=void 0;if(null!=i.useExisting){const A=this._getDependency(_.providerType,{token:i.useExisting},S);null!=A.token?T=A.token:(T=null,s=A.value)}else if(i.useFactory){A=(i.deps||i.useFactory.diDeps).map(i=>this._getDependency(_.providerType,i,S))}else if(i.useClass){A=(i.deps||i.useClass.diDeps).map(i=>this._getDependency(_.providerType,i,S))}return _transformProvider(i,{useExisting:T,useValue:s,deps:A})});return T=_transformProviderAst(_,{eager:S,providers:A}),this._transformedProviders.set(tokenReference(s),T),T}_getLocalDependency(i,s,S=!1){if(s.isAttribute){const i=this._attrs[s.token.value];return{isValue:!0,value:null==i?null:i}}if(null!=s.token){if(i===Gt.Directive||i===Gt.Component){if(tokenReference(s.token)===this.viewContext.reflector.resolveExternalReference(Identifiers.Renderer)||tokenReference(s.token)===this.viewContext.reflector.resolveExternalReference(Identifiers.ElementRef)||tokenReference(s.token)===this.viewContext.reflector.resolveExternalReference(Identifiers.ChangeDetectorRef)||tokenReference(s.token)===this.viewContext.reflector.resolveExternalReference(Identifiers.TemplateRef))return s;tokenReference(s.token)===this.viewContext.reflector.resolveExternalReference(Identifiers.ViewContainerRef)&&(this.transformedHasViewContainer=!0)}if(tokenReference(s.token)===this.viewContext.reflector.resolveExternalReference(Identifiers.Injector))return s;if(null!=this._getOrCreateLocalProvider(i,s.token,S))return s}return null}_getDependency(i,s,S=!1){let _=this,T=S,A=null;if(s.isSkipSelf||(A=this._getLocalDependency(i,s,S)),s.isSelf)!A&&s.isOptional&&(A={isValue:!0,value:null});else{for(;!A&&_._parent;){const i=_;_=_._parent,i._isViewRoot&&(T=!1),A=_._getLocalDependency(Gt.PublicService,s,T)}A||(A=!s.isHost||this.viewContext.component.isHost||this.viewContext.component.type.reference===tokenReference(s.token)||null!=this.viewContext.viewProviders.get(tokenReference(s.token))?s:s.isOptional?{isValue:!0,value:null}:null)}return A||this.viewContext.errors.push(new ProviderError("No provider for "+tokenName(s.token),this._sourceSpan)),A}}class NgModuleProviderAnalyzer{constructor(i,s,S,_){this.reflector=i,this._transformedProviders=new Map,this._seenProviders=new Map,this._errors=[],this._allProviders=new Map,s.transitiveModule.modules.forEach(i=>{_resolveProviders([{token:{identifier:i},useClass:i}],Gt.PublicService,!0,_,this._errors,this._allProviders,!0)}),_resolveProviders(s.transitiveModule.providers.map(i=>i.provider).concat(S),Gt.PublicService,!1,_,this._errors,this._allProviders,!1)}parse(){if(Array.from(this._allProviders.values()).forEach(i=>{this._getOrCreateLocalProvider(i.token,i.eager)}),this._errors.length>0){const i=this._errors.join("\n");throw new Error("Provider parse errors:\n"+i)}const i=[],s=[];return this._transformedProviders.forEach(S=>{S.eager?s.push(S):i.push(S)}),i.concat(s)}_getOrCreateLocalProvider(i,s){const S=this._allProviders.get(tokenReference(i));if(!S)return null;let _=this._transformedProviders.get(tokenReference(i));if(_)return _;if(null!=this._seenProviders.get(tokenReference(i)))return this._errors.push(new ProviderError("Cannot instantiate cyclic dependency! "+tokenName(i),S.sourceSpan)),null;this._seenProviders.set(tokenReference(i),!0);const T=S.providers.map(i=>{let _=i.useValue,T=i.useExisting,A=void 0;if(null!=i.useExisting){const A=this._getDependency({token:i.useExisting},s,S.sourceSpan);null!=A.token?T=A.token:(T=null,_=A.value)}else if(i.useFactory){A=(i.deps||i.useFactory.diDeps).map(i=>this._getDependency(i,s,S.sourceSpan))}else if(i.useClass){A=(i.deps||i.useClass.diDeps).map(i=>this._getDependency(i,s,S.sourceSpan))}return _transformProvider(i,{useExisting:T,useValue:_,deps:A})});return _=_transformProviderAst(S,{eager:s,providers:T}),this._transformedProviders.set(tokenReference(i),_),_}_getDependency(i,s=!1,S){let _=!1;return i.isSkipSelf||null==i.token||(tokenReference(i.token)===this.reflector.resolveExternalReference(Identifiers.Injector)||tokenReference(i.token)===this.reflector.resolveExternalReference(Identifiers.ComponentFactoryResolver)||null!=this._getOrCreateLocalProvider(i.token,s))&&(_=!0),i}}function _transformProvider(i,{useExisting:s,useValue:S,deps:_}){return{token:i.token,useClass:i.useClass,useExisting:s,useFactory:i.useFactory,useValue:S,deps:_,multi:i.multi}}function _transformProviderAst(i,{eager:s,providers:S}){return new ProviderAst(i.token,i.multiProvider,i.eager||s,S,i.providerType,i.lifecycleHooks,i.sourceSpan,i.isModule)}function _resolveProviders(i,s,S,_,T,A,P){i.forEach(i=>{let N=A.get(tokenReference(i.token));if(null!=N&&!!N.multiProvider!=!!i.multi&&T.push(new ProviderError("Mixing multi and non multi provider is not possible for token "+tokenName(N.token),_)),N)i.multi||(N.providers.length=0),N.providers.push(i);else{const T=i.token.identifier&&i.token.identifier.lifecycleHooks?i.token.identifier.lifecycleHooks:[],M=!(i.useClass||i.useExisting||i.useFactory);N=new ProviderAst(i.token,!!i.multi,S||M,[i],s,T,_,P),A.set(tokenReference(i.token),N)}})}function _addQueryToTokenMap(i,s){s.meta.selectors.forEach(S=>{let _=i.get(tokenReference(S));_||(_=[],i.set(tokenReference(S),_)),_.push(s)})}class StyleWithImports{constructor(i,s){this.style=i,this.styleUrls=s}}function isStyleUrlResolvable(i){if(null==i||0===i.length||"/"==i[0])return!1;const s=i.match(Jt);return null===s||"package"==s[1]||"asset"==s[1]}const Xt=/@import\s+(?:url\()?\s*(?:(?:['"]([^'"]*))|([^;\)\s]*))[^;]*;?/g,Qt=/\/\*(?!#\s*(?:sourceURL|sourceMappingURL)=)[\s\S]+?\*\//g,Jt=/^([^:/?#]+):/;class BindingParser{constructor(i,s,S,_,T){if(this._exprParser=i,this._interpolationConfig=s,this._schemaRegistry=S,this.errors=T,this.pipesByName=null,this._usedPipes=new Map,_){const i=new Map;_.forEach(s=>i.set(s.name,s)),this.pipesByName=i}}get interpolationConfig(){return this._interpolationConfig}getUsedPipes(){return Array.from(this._usedPipes.values())}createBoundHostProperties(i,s){if(i.hostProperties){const S=[];return Object.keys(i.hostProperties).forEach(_=>{const T=i.hostProperties[_];"string"==typeof T?this.parsePropertyBinding(_,T,!0,s,s.start.offset,void 0,[],S):this._reportError(`Value of the host property binding "${_}" needs to be a string representing an expression but got "${T}" (${typeof T})`,s)}),S}return null}createDirectiveHostPropertyAsts(i,s,S){const _=this.createBoundHostProperties(i,S);return _&&_.map(i=>this.createBoundElementProperty(s,i))}createDirectiveHostEventAsts(i,s){if(i.hostListeners){const S=[];return Object.keys(i.hostListeners).forEach(_=>{const T=i.hostListeners[_];"string"==typeof T?this.parseEvent(_,T,s,s,[],S):this._reportError(`Value of the host listener "${_}" needs to be a string representing an expression but got "${T}" (${typeof T})`,s)}),S}return null}parseInterpolation(i,s){const S=s.start.toString();try{const _=this._exprParser.parseInterpolation(i,S,s.start.offset,this._interpolationConfig);return _&&this._reportExpressionParserErrors(_.errors,s),this._checkPipes(_,s),_}catch(i){return this._reportError(""+i,s),this._exprParser.wrapLiteralPrimitive("ERROR",S,s.start.offset)}}parseInlineTemplateBinding(i,s,S,_,T,A,P){const N=S.start.offset+"*".length,M=this._parseTemplateBindings(i,s,S,N,_);for(const i of M){const s=moveParseSourceSpan(S,i.sourceSpan),N=i.key.source,M=moveParseSourceSpan(S,i.key.span);if(i instanceof VariableBinding){const _=i.value?i.value.source:"$implicit",T=i.value?moveParseSourceSpan(S,i.value.span):void 0;P.push(new ParsedVariable(N,_,s,M,T))}else if(i.value){const s=moveParseSourceSpan(S,i.value.ast.sourceSpan);this._parsePropertyAst(N,i.value,S,s,T,A)}else T.push([N,""]),this.parseLiteralAttr(N,null,S,_,void 0,T,A)}}_parseTemplateBindings(i,s,S,_,T){const A=S.start.toString();try{const P=this._exprParser.parseTemplateBindings(i,s,A,_,T);return this._reportExpressionParserErrors(P.errors,S),P.templateBindings.forEach(i=>{i.value instanceof ASTWithSource&&this._checkPipes(i.value,S)}),P.warnings.forEach(i=>{this._reportError(i,S,et.WARNING)}),P.templateBindings}catch(i){return this._reportError(""+i,S),[]}}parseLiteralAttr(i,s,S,_,T,A,P){isAnimationLabel(i)?(i=i.substring(1),s&&this._reportError('Assigning animation triggers via @prop="exp" attributes with an expression is invalid. Use property bindings (e.g. [@prop]="exp") or use an attribute without a value (e.g. @prop) instead.',S,et.ERROR),this._parseAnimation(i,s,S,_,T,A,P)):P.push(new ParsedProperty(i,this._exprParser.wrapLiteralPrimitive(s,"",_),ft.LITERAL_ATTR,S,T))}parsePropertyBinding(i,s,S,_,T,A,P,N){0===i.length&&this._reportError("Property name is missing in binding",_);let M=!1;i.startsWith("animate-")?(M=!0,i=i.substring("animate-".length)):isAnimationLabel(i)&&(M=!0,i=i.substring(1)),M?this._parseAnimation(i,s,_,T,A,P,N):this._parsePropertyAst(i,this._parseBinding(s,S,A||_,T),_,A,P,N)}parsePropertyInterpolation(i,s,S,_,T,A){const P=this.parseInterpolation(s,_||S);return!!P&&(this._parsePropertyAst(i,P,S,_,T,A),!0)}_parsePropertyAst(i,s,S,_,T,A){T.push([i,s.source]),A.push(new ParsedProperty(i,s,ft.DEFAULT,S,_))}_parseAnimation(i,s,S,_,T,A,P){0===i.length&&this._reportError("Animation trigger is missing",S);const N=this._parseBinding(s||"undefined",!1,T||S,_);A.push([i,N.source]),P.push(new ParsedProperty(i,N,ft.ANIMATION,S,T))}_parseBinding(i,s,S,_){const T=(S&&S.start||"(unknown)").toString();try{const A=s?this._exprParser.parseSimpleBinding(i,T,_,this._interpolationConfig):this._exprParser.parseBinding(i,T,_,this._interpolationConfig);return A&&this._reportExpressionParserErrors(A.errors,S),this._checkPipes(A,S),A}catch(i){return this._reportError(""+i,S),this._exprParser.wrapLiteralPrimitive("ERROR",T,_)}}createBoundElementProperty(i,s,S=!1,_=!0){if(s.isAnimation)return new BoundElementProperty(s.name,4,ae.NONE,s.expression,null,s.sourceSpan,s.valueSpan);let T=null,A=void 0,P=null;const N=s.name.split(".");let M=void 0;if(N.length>1)if("attr"==N[0]){P=N.slice(1).join("."),S||this._validatePropertyOrAttributeName(P,s.sourceSpan,!0),M=calcPossibleSecurityContexts(this._schemaRegistry,i,P,!0);const _=P.indexOf(":");if(_>-1){const i=P.substring(0,_),s=P.substring(_+1);P=mergeNsAndName(i,s)}A=1}else"class"==N[0]?(P=N[1],A=2,M=[ae.NONE]):"style"==N[0]&&(T=N.length>2?N[2]:null,P=N[1],A=3,M=[ae.STYLE]);if(null===P){const T=this._schemaRegistry.getMappedPropName(s.name);P=_?T:s.name,M=calcPossibleSecurityContexts(this._schemaRegistry,i,T,!1),A=0,S||this._validatePropertyOrAttributeName(T,s.sourceSpan,!1)}return new BoundElementProperty(P,A,M[0],s.expression,T,s.sourceSpan,s.valueSpan)}parseEvent(i,s,S,_,T,A){0===i.length&&this._reportError("Event name is missing in binding",S),isAnimationLabel(i)?(i=i.substr(1),this._parseAnimationEvent(i,s,S,_,A)):this._parseRegularEvent(i,s,S,_,T,A)}calcPossibleSecurityContexts(i,s,S){const _=this._schemaRegistry.getMappedPropName(s);return calcPossibleSecurityContexts(this._schemaRegistry,i,_,S)}_parseAnimationEvent(i,s,S,_,T){const A=function splitAtPeriod(i,s){return _splitAt(i,".",s)}(i,[i,""]),P=A[0],N=A[1].toLowerCase();if(N)switch(N){case"start":case"done":const i=this._parseAction(s,_);T.push(new ParsedEvent(P,N,1,i,S,_));break;default:this._reportError(`The provided animation output phase value "${N}" for "@${P}" is not supported (use start or done)`,S)}else this._reportError(`The animation trigger output event (@${P}) is missing its phase value name (start or done are currently supported)`,S)}_parseRegularEvent(i,s,S,_,T,A){const[P,N]=splitAtColon(i,[null,i]),M=this._parseAction(s,_);T.push([i,M.source]),A.push(new ParsedEvent(N,P,0,M,S,_))}_parseAction(i,s){const S=(s&&s.start||"(unknown").toString(),_=s&&s.start?s.start.offset:0;try{const T=this._exprParser.parseAction(i,S,_,this._interpolationConfig);return T&&this._reportExpressionParserErrors(T.errors,s),!T||T.ast instanceof EmptyExpr?(this._reportError("Empty expressions are not allowed",s),this._exprParser.wrapLiteralPrimitive("ERROR",S,_)):(this._checkPipes(T,s),T)}catch(i){return this._reportError(""+i,s),this._exprParser.wrapLiteralPrimitive("ERROR",S,_)}}_reportError(i,s,S=et.ERROR){this.errors.push(new ParseError(s,i,S))}_reportExpressionParserErrors(i,s){for(const S of i)this._reportError(S.message,s)}_checkPipes(i,s){if(i&&this.pipesByName){const S=new PipeCollector;i.visit(S),S.pipes.forEach((i,S)=>{const _=this.pipesByName.get(S);_?this._usedPipes.set(S,_):this._reportError(`The pipe '${S}' could not be found`,new ParseSourceSpan(s.start.moveBy(i.span.start),s.start.moveBy(i.span.end)))})}}_validatePropertyOrAttributeName(i,s,S){const _=S?this._schemaRegistry.validateAttribute(i):this._schemaRegistry.validateProperty(i);_.error&&this._reportError(_.msg,s,et.ERROR)}}class PipeCollector extends RecursiveAstVisitor$1{constructor(){super(...arguments),this.pipes=new Map}visitPipe(i,s){return this.pipes.set(i.name,i),i.exp.visit(this),this.visitAll(i.args,s),null}}function isAnimationLabel(i){return"@"==i[0]}function calcPossibleSecurityContexts(i,s,S,_){const T=[];return CssSelector.parse(s).forEach(s=>{const A=s.element?[s.element]:i.allKnownElementNames(),P=new Set(s.notSelectors.filter(i=>i.isElementSelector()).map(i=>i.element)),N=A.filter(i=>!P.has(i));T.push(...N.map(s=>i.securityContext(s,S,_)))}),0===T.length?[ae.NONE]:Array.from(new Set(T)).sort()}function moveParseSourceSpan(i,s){const S=s.start-i.start.offset,_=s.end-i.end.offset;return new ParseSourceSpan(i.start.moveBy(S),i.end.moveBy(_))}function preparseElement(i){let s=null,S=null,_=null,T=!1,A="";i.attrs.forEach(i=>{const P=i.name.toLowerCase();"select"==P?s=i.value:"href"==P?S=i.value:"rel"==P?_=i.value:"ngNonBindable"==i.name?T=!0:"ngProjectAs"==i.name&&i.value.length>0&&(A=i.value)}),s=function normalizeNgContentSelect(i){if(null===i||0===i.length)return"*";return i}(s);const P=i.name.toLowerCase();let N=Yt.OTHER;return isNgContent(P)?N=Yt.NG_CONTENT:"style"==P?N=Yt.STYLE:"script"==P?N=Yt.SCRIPT:"link"==P&&"stylesheet"==_&&(N=Yt.STYLESHEET),new PreparsedElement(N,s,S,T,A)}var Yt;!function(i){i[i.NG_CONTENT=0]="NG_CONTENT",i[i.STYLE=1]="STYLE",i[i.STYLESHEET=2]="STYLESHEET",i[i.SCRIPT=3]="SCRIPT",i[i.OTHER=4]="OTHER"}(Yt||(Yt={}));class PreparsedElement{constructor(i,s,S,_,T){this.type=i,this.selectAttr=s,this.hrefAttr=S,this.nonBindable=_,this.projectAs=T}}const Zt=/^(?:(?:(?:(bind-)|(let-)|(ref-|#)|(on-)|(bindon-)|(@))(.*))|\[\(([^\)]+)\)\]|\[([^\]]+)\]|\(([^\)]+)\))$/;let er;function TEXT_CSS_SELECTOR(){return er||(er=CssSelector.parse("*")[0]),er}class TemplateParseError extends ParseError{constructor(i,s,S){super(s,i,S)}}class TemplateParseResult{constructor(i,s,S){this.templateAst=i,this.usedPipes=s,this.errors=S}}class TemplateParser{constructor(i,s,S,_,T,A,P){this._config=i,this._reflector=s,this._exprParser=S,this._schemaRegistry=_,this._htmlParser=T,this._console=A,this.transforms=P}get expressionParser(){return this._exprParser}parse(i,s,S,_,T,A,P){var N;const M=this.tryParse(i,s,S,_,T,A,P),k=M.errors.filter(i=>i.level===et.WARNING),R=M.errors.filter(i=>i.level===et.ERROR);if(k.length>0&&(null===(N=this._console)||void 0===N||N.warn("Template parse warnings:\n"+k.join("\n"))),R.length>0){throw syntaxError("Template parse errors:\n"+R.join("\n"),R)}return{template:M.templateAst,pipes:M.usedPipes}}tryParse(i,s,S,_,T,A,P){let N="string"==typeof s?this._htmlParser.parse(s,A,{tokenizeExpansionForms:!0,interpolationConfig:this.getInterpolationConfig(i)}):s;return P||(N=removeWhitespaces(N)),this.tryParseHtml(this.expandHtml(N),i,S,_,T)}tryParseHtml(i,s,S,_,T){let A;const P=i.errors,N=[];if(i.rootNodes.length>0){const M=removeSummaryDuplicates(S),k=removeSummaryDuplicates(_),R=new ProviderViewContext(this._reflector,s);let F=void 0;s.template&&s.template.interpolation&&(F={start:s.template.interpolation[0],end:s.template.interpolation[1]});const D=new BindingParser(this._exprParser,F,this._schemaRegistry,k,P),L=new TemplateParseVisitor(this._reflector,this._config,R,M,D,this._schemaRegistry,T,P);A=visitAll$1(L,i.rootNodes,tr),P.push(...R.errors),N.push(...D.getUsedPipes())}else A=[];return this._assertNoReferenceDuplicationOnTemplate(A,P),P.length>0||this.transforms&&this.transforms.forEach(i=>{A=templateVisitAll(i,A)}),new TemplateParseResult(A,N,P)}expandHtml(i,s=!1){const S=i.errors;if(0==S.length||s){const s=expandNodes(i.rootNodes);S.push(...s.errors),i=new ParseTreeResult(s.nodes,S)}return i}getInterpolationConfig(i){if(i.template)return InterpolationConfig.fromArray(i.template.interpolation)}_assertNoReferenceDuplicationOnTemplate(i,s){const S=[];i.filter(i=>!!i.references).forEach(i=>i.references.forEach(i=>{const _=i.name;if(S.indexOf(_)<0)S.push(_);else{const S=new TemplateParseError(`Reference "#${_}" is defined several times`,i.sourceSpan,et.ERROR);s.push(S)}}))}}class TemplateParseVisitor{constructor(i,s,S,_,T,A,P,N){this.reflector=i,this.config=s,this.providerViewContext=S,this._bindingParser=T,this._schemaRegistry=A,this._schemas=P,this._targetErrors=N,this.selectorMatcher=new SelectorMatcher,this.directivesIndex=new Map,this.ngContentCount=0,this.contentQueryStartId=S.component.viewQueries.length+1,_.forEach((i,s)=>{const S=CssSelector.parse(i.selector);this.selectorMatcher.addSelectables(S,i),this.directivesIndex.set(i,s)})}visitExpansion(i,s){return null}visitExpansionCase(i,s){return null}visitText(i,s){const S=s.findNgContentIndex(TEXT_CSS_SELECTOR()),_=replaceNgsp(i.value),T=this._bindingParser.parseInterpolation(_,i.sourceSpan);return T?new BoundTextAst(T,S,i.sourceSpan):new TextAst(_,S,i.sourceSpan)}visitAttribute(i,s){return new AttrAst(i.name,i.value,i.sourceSpan)}visitComment(i,s){return null}visitElement(i,s){const S=this.contentQueryStartId,_=i.name,T=preparseElement(i);if(T.type===Yt.SCRIPT||T.type===Yt.STYLE)return null;if(T.type===Yt.STYLESHEET&&isStyleUrlResolvable(T.hrefAttr))return null;const A=[],P=[],N=[],M=[],k=[],R=[],F=[],D=[];let L=!1;const $=[],V=isNgTemplate(i.name);i.attrs.forEach(i=>{const s=this._parseAttr(V,i,A,P,k,N,M);let S,_;M.push(...[].map(i=>VariableAst.fromParsedVariable(i)));const T=this._normalizeAttributeName(i.name);T.startsWith("*")&&(S=i.value,_=T.substring("*".length));const U=null!=S;if(U){L&&this._reportError("Can't have multiple template bindings on one element. Use only one attribute prefixed with *",i.sourceSpan),L=!0;const s=[],T=(i.valueSpan||i.sourceSpan).start.offset;this._bindingParser.parseInlineTemplateBinding(_,S,i.sourceSpan,T,F,R,s),D.push(...s.map(i=>VariableAst.fromParsedVariable(i)))}s||U||($.push(this.visitAttribute(i,null)),A.push([i.name,i.value]))});const U=createElementCssSelector(_,A),{directives:W,matchElement:z}=this._parseDirectives(this.selectorMatcher,U),H=[],q=new Set,K=this._createDirectiveAsts(V,i.name,W,P,N,i.sourceSpan,H,q),G=this._createElementPropertyAsts(i.name,P,q),X=s.isTemplateElement||L,Q=new ProviderElementContext(this.providerViewContext,s.providerContext,X,K,$,H,V,S,i.sourceSpan),J=visitAll$1(T.nonBindable?rr:this,i.children,ElementContext.create(V,K,V?s.providerContext:Q));Q.afterElement();const Y=""!=T.projectAs?CssSelector.parse(T.projectAs)[0]:U,Z=s.findNgContentIndex(Y);let ee;if(T.type===Yt.NG_CONTENT)i.children&&!i.children.every(_isEmptyTextNode)&&this._reportError("<ng-content> element cannot have content.",i.sourceSpan),ee=new NgContentAst(this.ngContentCount++,L?null:Z,i.sourceSpan);else if(V)this._assertAllEventsPublishedByDirectives(K,k),this._assertNoComponentsNorElementBindingsOnTemplate(K,G,i.sourceSpan),ee=new EmbeddedTemplateAst($,k,H,M,Q.transformedDirectiveAsts,Q.transformProviders,Q.transformedHasViewContainer,Q.queryMatches,J,L?null:Z,i.sourceSpan);else{this._assertElementExists(z,i),this._assertOnlyOneComponent(K,i.sourceSpan);const S=L?null:s.findNgContentIndex(Y);ee=new ElementAst(_,$,G,k,H,Q.transformedDirectiveAsts,Q.transformProviders,Q.transformedHasViewContainer,Q.queryMatches,J,L?null:S,i.sourceSpan,i.endSourceSpan||null)}if(L){const S=this.contentQueryStartId,T=createElementCssSelector("ng-template",F),{directives:A}=this._parseDirectives(this.selectorMatcher,T),P=new Set,N=this._createDirectiveAsts(!0,_,A,R,[],i.sourceSpan,[],P),M=this._createElementPropertyAsts(_,R,P);this._assertNoComponentsNorElementBindingsOnTemplate(N,M,i.sourceSpan);const k=new ProviderElementContext(this.providerViewContext,s.providerContext,s.isTemplateElement,N,[],[],!0,S,i.sourceSpan);k.afterElement(),ee=new EmbeddedTemplateAst([],[],[],D,k.transformedDirectiveAsts,k.transformProviders,k.transformedHasViewContainer,k.queryMatches,[ee],Z,i.sourceSpan)}return ee}_parseAttr(i,s,S,_,T,A,P){const N=this._normalizeAttributeName(s.name),M=s.value,k=s.sourceSpan,R=s.valueSpan?s.valueSpan.start.offset:k.start.offset,F=[],D=N.match(Zt);let L=!1;if(null!==D)if(L=!0,null!=D[1])this._bindingParser.parsePropertyBinding(D[7],M,!1,k,R,s.valueSpan,S,_);else if(D[2])if(i){const i=D[7];this._parseVariable(i,M,k,P)}else this._reportError('"let-" is only supported on ng-template elements.',k);else if(D[3]){const i=D[7];this._parseReference(i,M,k,A)}else D[4]?this._bindingParser.parseEvent(D[7],M,k,s.valueSpan||k,S,F):D[5]?(this._bindingParser.parsePropertyBinding(D[7],M,!1,k,R,s.valueSpan,S,_),this._parseAssignmentEvent(D[7],M,k,s.valueSpan||k,S,F)):D[6]?this._bindingParser.parseLiteralAttr(N,M,k,R,s.valueSpan,S,_):D[8]?(this._bindingParser.parsePropertyBinding(D[8],M,!1,k,R,s.valueSpan,S,_),this._parseAssignmentEvent(D[8],M,k,s.valueSpan||k,S,F)):D[9]?this._bindingParser.parsePropertyBinding(D[9],M,!1,k,R,s.valueSpan,S,_):D[10]&&this._bindingParser.parseEvent(D[10],M,k,s.valueSpan||k,S,F);else L=this._bindingParser.parsePropertyInterpolation(N,M,k,s.valueSpan,S,_);return L||this._bindingParser.parseLiteralAttr(N,M,k,R,s.valueSpan,S,_),T.push(...F.map(i=>BoundEventAst.fromParsedEvent(i))),L}_normalizeAttributeName(i){return/^data-/i.test(i)?i.substring(5):i}_parseVariable(i,s,S,_){i.indexOf("-")>-1?this._reportError('"-" is not allowed in variable names',S):0===i.length&&this._reportError("Variable does not have a name",S),_.push(new VariableAst(i,s,S))}_parseReference(i,s,S,_){i.indexOf("-")>-1?this._reportError('"-" is not allowed in reference names',S):0===i.length&&this._reportError("Reference does not have a name",S),_.push(new ElementOrDirectiveRef(i,s,S))}_parseAssignmentEvent(i,s,S,_,T,A){this._bindingParser.parseEvent(i+"Change",s+"=$event",S,_,T,A)}_parseDirectives(i,s){const S=newArray(this.directivesIndex.size);let _=!1;return i.match(s,(i,s)=>{S[this.directivesIndex.get(s)]=s,_=_||i.hasElementSelector()}),{directives:S.filter(i=>!!i),matchElement:_}}_createDirectiveAsts(i,s,S,_,T,A,P,N){const M=new Set;let k=null;const R=S.map(i=>{const S=new ParseSourceSpan(A.start,A.end,"Directive "+identifierName(i.type));i.isComponent&&(k=i);const R=[];let F=this._bindingParser.createDirectiveHostPropertyAsts(i,s,S).map(i=>BoundElementPropertyAst.fromBoundProperty(i));F=this._checkPropertiesInSchema(s,F);const D=this._bindingParser.createDirectiveHostEventAsts(i,S);this._createDirectivePropertyAsts(i.inputs,_,R,N),T.forEach(s=>{(0===s.value.length&&i.isComponent||s.isReferenceToDirective(i))&&(P.push(new ReferenceAst(s.name,createTokenForReference(i.type.reference),s.value,s.sourceSpan)),M.add(s.name))});const L=D.map(i=>BoundEventAst.fromParsedEvent(i)),$=this.contentQueryStartId;return this.contentQueryStartId+=i.queries.length,new DirectiveAst(i,R,F,L,$,S)});return T.forEach(s=>{if(s.value.length>0)M.has(s.name)||this._reportError(`There is no directive with "exportAs" set to "${s.value}"`,s.sourceSpan);else if(!k){let S=null;i&&(S=createTokenForExternalReference(this.reflector,Identifiers.TemplateRef)),P.push(new ReferenceAst(s.name,S,s.value,s.sourceSpan))}}),R}_createDirectivePropertyAsts(i,s,S,_){if(i){const T=new Map;s.forEach(i=>{const s=T.get(i.name);s&&!s.isLiteral||T.set(i.name,i)}),Object.keys(i).forEach(s=>{const A=i[s],P=T.get(A);P&&(_.add(P.name),isEmptyExpression(P.expression)||S.push(new BoundDirectivePropertyAst(s,P.name,P.expression,P.sourceSpan)))})}}_createElementPropertyAsts(i,s,S){const _=[];return s.forEach(s=>{if(!s.isLiteral&&!S.has(s.name)){const S=this._bindingParser.createBoundElementProperty(i,s);_.push(BoundElementPropertyAst.fromBoundProperty(S))}}),this._checkPropertiesInSchema(i,_)}_findComponentDirectives(i){return i.filter(i=>i.directive.isComponent)}_findComponentDirectiveNames(i){return this._findComponentDirectives(i).map(i=>identifierName(i.directive.type))}_assertOnlyOneComponent(i,s){const S=this._findComponentDirectiveNames(i);S.length>1&&this._reportError("More than one component matched on this element.\nMake sure that only one component's selector can match a given element.\nConflicting components: "+S.join(","),s)}_assertElementExists(i,s){const S=s.name.replace(/^:xhtml:/,"");if(!i&&!this._schemaRegistry.hasElement(S,this._schemas)){let i=`'${S}' is not a known element:\n`;i+=`1. If '${S}' is an Angular component, then verify that it is part of this module.\n`,S.indexOf("-")>-1?i+=`2. If '${S}' is a Web Component then add 'CUSTOM_ELEMENTS_SCHEMA' to the '@NgModule.schemas' of this component to suppress this message.`:i+="2. To allow any element add 'NO_ERRORS_SCHEMA' to the '@NgModule.schemas' of this component.",this._reportError(i,s.sourceSpan)}}_assertNoComponentsNorElementBindingsOnTemplate(i,s,S){const _=this._findComponentDirectiveNames(i);_.length>0&&this._reportError("Components on an embedded template: "+_.join(","),S),s.forEach(i=>{this._reportError(`Property binding ${i.name} not used by any directive on an embedded template. Make sure that the property name is spelled correctly and all directives are listed in the "@NgModule.declarations".`,S)})}_assertAllEventsPublishedByDirectives(i,s){const S=new Set;i.forEach(i=>{Object.keys(i.directive.outputs).forEach(s=>{const _=i.directive.outputs[s];S.add(_)})}),s.forEach(i=>{null==i.target&&S.has(i.name)||this._reportError(`Event binding ${i.fullName} not emitted by any directive on an embedded template. Make sure that the event name is spelled correctly and all directives are listed in the "@NgModule.declarations".`,i.sourceSpan)})}_checkPropertiesInSchema(i,s){return s.filter(s=>{if(0===s.type&&!this._schemaRegistry.hasProperty(i,s.name,this._schemas)){let S=`Can't bind to '${s.name}' since it isn't a known property of '${i}'.`;i.startsWith("ng-")?S+=`\n1. If '${s.name}' is an Angular directive, then add 'CommonModule' to the '@NgModule.imports' of this component.\n2. To allow any property add 'NO_ERRORS_SCHEMA' to the '@NgModule.schemas' of this component.`:i.indexOf("-")>-1&&(S+=`\n1. If '${i}' is an Angular component and it has '${s.name}' input, then verify that it is part of this module.\n2. If '${i}' is a Web Component then add 'CUSTOM_ELEMENTS_SCHEMA' to the '@NgModule.schemas' of this component to suppress this message.\n3. To allow any property add 'NO_ERRORS_SCHEMA' to the '@NgModule.schemas' of this component.`),this._reportError(S,s.sourceSpan)}return!isEmptyExpression(s.value)})}_reportError(i,s,S=et.ERROR){this._targetErrors.push(new ParseError(s,i,S))}}class ElementOrDirectiveRef{constructor(i,s,S){this.name=i,this.value=s,this.sourceSpan=S}isReferenceToDirective(i){return-1!==function splitExportAs(i){return i?i.split(",").map(i=>i.trim()):[]}(i.exportAs).indexOf(this.value)}}function splitClasses(i){return i.trim().split(/\s+/g)}class ElementContext{constructor(i,s,S,_){this.isTemplateElement=i,this._ngContentIndexMatcher=s,this._wildcardNgContentIndex=S,this.providerContext=_}static create(i,s,S){const _=new SelectorMatcher;let T=null;const A=s.find(i=>i.directive.isComponent);if(A){const i=A.directive.template.ngContentSelectors;for(let s=0;s<i.length;s++){"*"===i[s]?T=s:_.addSelectables(CssSelector.parse(i[s]),s)}}return new ElementContext(i,_,T,S)}findNgContentIndex(i){const s=[];return this._ngContentIndexMatcher.match(i,(i,S)=>{s.push(S)}),s.sort(),null!=this._wildcardNgContentIndex&&s.push(this._wildcardNgContentIndex),s.length>0?s[0]:null}}function createElementCssSelector(i,s){const S=new CssSelector,_=splitNsName(i)[1];S.setElement(_);for(let i=0;i<s.length;i++){const _=s[i][0],T=splitNsName(_)[1],A=s[i][1];if(S.addAttribute(T,A),"class"==_.toLowerCase()){splitClasses(A).forEach(i=>S.addClassName(i))}}return S}const tr=new ElementContext(!0,new SelectorMatcher,null,null),rr=new class NonBindableVisitor{visitElement(i,s){const S=preparseElement(i);if(S.type===Yt.SCRIPT||S.type===Yt.STYLE||S.type===Yt.STYLESHEET)return null;const _=i.attrs.map(i=>[i.name,i.value]),T=createElementCssSelector(i.name,_),A=s.findNgContentIndex(T),P=visitAll$1(this,i.children,tr);return new ElementAst(i.name,visitAll$1(this,i.attrs),[],[],[],[],[],!1,[],P,A,i.sourceSpan,i.endSourceSpan)}visitComment(i,s){return null}visitAttribute(i,s){return new AttrAst(i.name,i.value,i.sourceSpan)}visitText(i,s){const S=s.findNgContentIndex(TEXT_CSS_SELECTOR());return new TextAst(i.value,S,i.sourceSpan)}visitExpansion(i,s){return i}visitExpansionCase(i,s){return i}};function _isEmptyTextNode(i){return i instanceof Text$3&&0==i.value.trim().length}function removeSummaryDuplicates(i){const s=new Map;return i.forEach(i=>{s.get(i.type.reference)||s.set(i.type.reference,i)}),Array.from(s.values())}function isEmptyExpression(i){return i instanceof ASTWithSource&&(i=i.ast),i instanceof EmptyExpr}function stripUnnecessaryQuotes(i){const s=i.charCodeAt(0);if(s==i.charCodeAt(i.length-1)&&(39==s||34==s)){const s=i.substring(1,i.length-1);-1==s.indexOf("'")&&-1==s.indexOf('"')&&(i=s)}return i}function hyphenate(i){return i.replace(/[a-z][A-Z]/g,i=>i.charAt(0)+"-"+i.charAt(1)).toLowerCase()}class StylingBuilder{constructor(i){this._directiveExpr=i,this._hasInitialValues=!1,this.hasBindings=!1,this.hasBindingsWithPipes=!1,this._classMapInput=null,this._styleMapInput=null,this._singleStyleInputs=null,this._singleClassInputs=null,this._lastStylingInput=null,this._firstStylingInput=null,this._stylesIndex=new Map,this._classesIndex=new Map,this._initialStyleValues=[],this._initialClassValues=[]}registerBoundInput(i){let s=null,S=i.name;switch(i.type){case 0:s=this.registerInputBasedOnName(S,i.value,i.sourceSpan);break;case 3:s=this.registerStyleInput(S,!1,i.value,i.sourceSpan,i.unit);break;case 2:s=this.registerClassInput(S,!1,i.value,i.sourceSpan)}return!!s}registerInputBasedOnName(i,s,S){let _=null;const T=i.substring(0,6),A="style"===i||"style."===T||"style!"===T;if(A||!A&&("class"===i||"class."===T||"class!"===T)){const T="."!==i.charAt(5),P=i.substr(T?5:6);_=A?this.registerStyleInput(P,T,s,S):this.registerClassInput(P,T,s,S)}return _}registerStyleInput(i,s,S,_,T){if(isEmptyExpression(S))return null;i=function normalizePropName(i){return hyphenate(i)}(i);const{property:A,hasOverrideFlag:P,suffix:N}=parseProperty(i),M={name:A,suffix:T="string"==typeof T&&0!==T.length?T:N,value:S,sourceSpan:_,hasOverrideFlag:P};return s?this._styleMapInput=M:((this._singleStyleInputs=this._singleStyleInputs||[]).push(M),registerIntoMap(this._stylesIndex,A)),this._lastStylingInput=M,this._firstStylingInput=this._firstStylingInput||M,this._checkForPipes(S),this.hasBindings=!0,M}registerClassInput(i,s,S,_){if(isEmptyExpression(S))return null;const{property:T,hasOverrideFlag:A}=parseProperty(i),P={name:T,value:S,sourceSpan:_,hasOverrideFlag:A,suffix:null};if(s){if(this._classMapInput)throw new Error("[class] and [className] bindings cannot be used on the same element simultaneously");this._classMapInput=P}else(this._singleClassInputs=this._singleClassInputs||[]).push(P),registerIntoMap(this._classesIndex,T);return this._lastStylingInput=P,this._firstStylingInput=this._firstStylingInput||P,this._checkForPipes(S),this.hasBindings=!0,P}_checkForPipes(i){i instanceof ASTWithSource&&i.ast instanceof BindingPipe&&(this.hasBindingsWithPipes=!0)}registerStyleAttr(i){this._initialStyleValues=function parse(i){const s=[];let S=0,_=0,T=0,A=0,P=0,N=null,M=!1;for(;S<i.length;){switch(i.charCodeAt(S++)){case 40:_++;break;case 41:_--;break;case 39:M=M||A>0,0===T?T=39:39===T&&92!==i.charCodeAt(S-1)&&(T=0);break;case 34:M=M||A>0,0===T?T=34:34===T&&92!==i.charCodeAt(S-1)&&(T=0);break;case 58:N||0!==_||0!==T||(N=hyphenate(i.substring(P,S-1).trim()),A=S);break;case 59:if(N&&A>0&&0===_&&0===T){const _=i.substring(A,S-1).trim();s.push(N,M?stripUnnecessaryQuotes(_):_),P=S,A=0,N=null,M=!1}}}if(N&&A){const S=i.substr(A).trim();s.push(N,M?stripUnnecessaryQuotes(S):S)}return s}(i),this._hasInitialValues=!0}registerClassAttr(i){this._initialClassValues=i.trim().split(/\s+/g),this._hasInitialValues=!0}populateInitialStylingAttrs(i){if(this._initialClassValues.length){i.push(literal(1));for(let s=0;s<this._initialClassValues.length;s++)i.push(literal(this._initialClassValues[s]))}if(this._initialStyleValues.length){i.push(literal(2));for(let s=0;s<this._initialStyleValues.length;s+=2)i.push(literal(this._initialStyleValues[s]),literal(this._initialStyleValues[s+1]))}}assignHostAttrs(i,s){this._directiveExpr&&(i.length||this._hasInitialValues)&&(this.populateInitialStylingAttrs(i),s.set("hostAttrs",literalArr(i)))}buildClassMapInstruction(i){return this._classMapInput?this._buildMapBasedInstruction(i,!0,this._classMapInput):null}buildStyleMapInstruction(i){return this._styleMapInput?this._buildMapBasedInstruction(i,!1,this._styleMapInput):null}_buildMapBasedInstruction(i,s,S){let _=2;const T=S.value.visit(i);let A;return T instanceof Interpolation?(_+=T.expressions.length,A=s?function getClassMapInterpolationExpression(i){switch(getInterpolationArgsLength(i)){case 1:return Identifiers$1.classMap;case 3:return Identifiers$1.classMapInterpolate1;case 5:return Identifiers$1.classMapInterpolate2;case 7:return Identifiers$1.classMapInterpolate3;case 9:return Identifiers$1.classMapInterpolate4;case 11:return Identifiers$1.classMapInterpolate5;case 13:return Identifiers$1.classMapInterpolate6;case 15:return Identifiers$1.classMapInterpolate7;case 17:return Identifiers$1.classMapInterpolate8;default:return Identifiers$1.classMapInterpolateV}}(T):function getStyleMapInterpolationExpression(i){switch(getInterpolationArgsLength(i)){case 1:return Identifiers$1.styleMap;case 3:return Identifiers$1.styleMapInterpolate1;case 5:return Identifiers$1.styleMapInterpolate2;case 7:return Identifiers$1.styleMapInterpolate3;case 9:return Identifiers$1.styleMapInterpolate4;case 11:return Identifiers$1.styleMapInterpolate5;case 13:return Identifiers$1.styleMapInterpolate6;case 15:return Identifiers$1.styleMapInterpolate7;case 17:return Identifiers$1.styleMapInterpolate8;default:return Identifiers$1.styleMapInterpolateV}}(T)):A=s?Identifiers$1.classMap:Identifiers$1.styleMap,{reference:A,calls:[{supportsInterpolation:!0,sourceSpan:S.sourceSpan,allocateBindingSlots:_,params:i=>{const s=i(T);return Array.isArray(s)?s:[s]}}]}}_buildSingleInputs(i,s,S,_,T){const A=[];return s.forEach(s=>{const P=A[A.length-1],N=s.value.visit(S);let M=i,k=2;N instanceof Interpolation&&(k+=N.expressions.length,_&&(M=_(N)));const R={sourceSpan:s.sourceSpan,allocateBindingSlots:k,supportsInterpolation:!!_,params:i=>{const S=[];S.push(literal(s.name));const _=i(N);return Array.isArray(_)?S.push(..._):S.push(_),T||null===s.suffix||S.push(literal(s.suffix)),S}};P&&P.reference===M?P.calls.push(R):A.push({reference:M,calls:[R]})}),A}_buildClassInputs(i){return this._singleClassInputs?this._buildSingleInputs(Identifiers$1.classProp,this._singleClassInputs,i,null,!0):[]}_buildStyleInputs(i){return this._singleStyleInputs?this._buildSingleInputs(Identifiers$1.styleProp,this._singleStyleInputs,i,getStylePropInterpolationExpression,!1):[]}buildUpdateLevelInstructions(i){const s=[];if(this.hasBindings){const S=this.buildStyleMapInstruction(i);S&&s.push(S);const _=this.buildClassMapInstruction(i);_&&s.push(_),s.push(...this._buildStyleInputs(i)),s.push(...this._buildClassInputs(i))}return s}}function registerIntoMap(i,s){i.has(s)||i.set(s,i.size)}function parseProperty(i){let s=!1;const S=i.indexOf("!important");-1!==S&&(i=S>0?i.substring(0,S):"",s=!0);let _=null,T=i;const A=i.lastIndexOf(".");return A>0&&(_=i.substr(A+1),T=i.substring(0,A)),{property:T,suffix:_,hasOverrideFlag:s}}function getStylePropInterpolationExpression(i){switch(getInterpolationArgsLength(i)){case 1:return Identifiers$1.styleProp;case 3:return Identifiers$1.stylePropInterpolate1;case 5:return Identifiers$1.stylePropInterpolate2;case 7:return Identifiers$1.stylePropInterpolate3;case 9:return Identifiers$1.stylePropInterpolate4;case 11:return Identifiers$1.stylePropInterpolate5;case 13:return Identifiers$1.stylePropInterpolate6;case 15:return Identifiers$1.stylePropInterpolate7;case 17:return Identifiers$1.stylePropInterpolate8;default:return Identifiers$1.stylePropInterpolateV}}var nr;!function(i){i[i.Character=0]="Character",i[i.Identifier=1]="Identifier",i[i.Keyword=2]="Keyword",i[i.String=3]="String",i[i.Operator=4]="Operator",i[i.Number=5]="Number",i[i.Error=6]="Error"}(nr||(nr={}));const ir=["var","let","as","null","undefined","true","false","if","else","this"];class Lexer{tokenize(i){const s=new _Scanner(i),S=[];let _=s.scanToken();for(;null!=_;)S.push(_),_=s.scanToken();return S}}class Token$1{constructor(i,s,S,_,T){this.index=i,this.end=s,this.type=S,this.numValue=_,this.strValue=T}isCharacter(i){return this.type==nr.Character&&this.numValue==i}isNumber(){return this.type==nr.Number}isString(){return this.type==nr.String}isOperator(i){return this.type==nr.Operator&&this.strValue==i}isIdentifier(){return this.type==nr.Identifier}isKeyword(){return this.type==nr.Keyword}isKeywordLet(){return this.type==nr.Keyword&&"let"==this.strValue}isKeywordAs(){return this.type==nr.Keyword&&"as"==this.strValue}isKeywordNull(){return this.type==nr.Keyword&&"null"==this.strValue}isKeywordUndefined(){return this.type==nr.Keyword&&"undefined"==this.strValue}isKeywordTrue(){return this.type==nr.Keyword&&"true"==this.strValue}isKeywordFalse(){return this.type==nr.Keyword&&"false"==this.strValue}isKeywordThis(){return this.type==nr.Keyword&&"this"==this.strValue}isError(){return this.type==nr.Error}toNumber(){return this.type==nr.Number?this.numValue:-1}toString(){switch(this.type){case nr.Character:case nr.Identifier:case nr.Keyword:case nr.Operator:case nr.String:case nr.Error:return this.strValue;case nr.Number:return this.numValue.toString();default:return null}}}function newCharacterToken(i,s,S){return new Token$1(i,s,nr.Character,S,String.fromCharCode(S))}function newOperatorToken(i,s,S){return new Token$1(i,s,nr.Operator,0,S)}const sr=new Token$1(-1,-1,nr.Character,0,"");class _Scanner{constructor(i){this.input=i,this.peek=0,this.index=-1,this.length=i.length,this.advance()}advance(){this.peek=++this.index>=this.length?0:this.input.charCodeAt(this.index)}scanToken(){const i=this.input,s=this.length;let S=this.peek,_=this.index;for(;S<=32;){if(++_>=s){S=0;break}S=i.charCodeAt(_)}if(this.peek=S,this.index=_,_>=s)return null;if(isIdentifierStart(S))return this.scanIdentifier();if(isDigit(S))return this.scanNumber(_);const T=_;switch(S){case 46:return this.advance(),isDigit(this.peek)?this.scanNumber(T):newCharacterToken(T,this.index,46);case 40:case 41:case 123:case 125:case 91:case 93:case 44:case 58:case 59:return this.scanCharacter(T,S);case 39:case 34:return this.scanString();case 35:case 43:case 45:case 42:case 47:case 37:case 94:return this.scanOperator(T,String.fromCharCode(S));case 63:return this.scanComplexOperator(T,"?",46,".");case 60:case 62:return this.scanComplexOperator(T,String.fromCharCode(S),61,"=");case 33:case 61:return this.scanComplexOperator(T,String.fromCharCode(S),61,"=",61,"=");case 38:return this.scanComplexOperator(T,"&",38,"&");case 124:return this.scanComplexOperator(T,"|",124,"|");case 160:for(;isWhitespace(this.peek);)this.advance();return this.scanToken()}return this.advance(),this.error(`Unexpected character [${String.fromCharCode(S)}]`,0)}scanCharacter(i,s){return this.advance(),newCharacterToken(i,this.index,s)}scanOperator(i,s){return this.advance(),newOperatorToken(i,this.index,s)}scanComplexOperator(i,s,S,_,T,A){this.advance();let P=s;return this.peek==S&&(this.advance(),P+=_),null!=T&&this.peek==T&&(this.advance(),P+=A),newOperatorToken(i,this.index,P)}scanIdentifier(){const i=this.index;for(this.advance();isIdentifierPart(this.peek);)this.advance();const s=this.input.substring(i,this.index);return ir.indexOf(s)>-1?function newKeywordToken(i,s,S){return new Token$1(i,s,nr.Keyword,0,S)}(i,this.index,s):function newIdentifierToken(i,s,S){return new Token$1(i,s,nr.Identifier,0,S)}(i,this.index,s)}scanNumber(i){let s=this.index===i;for(this.advance();;){if(isDigit(this.peek));else if(46==this.peek)s=!1;else{if(101!=(S=this.peek)&&69!=S)break;if(this.advance(),isExponentSign(this.peek)&&this.advance(),!isDigit(this.peek))return this.error("Invalid exponent",-1);s=!1}this.advance()}var S;const _=this.input.substring(i,this.index),T=s?function parseIntAutoRadix(i){const s=parseInt(i);if(isNaN(s))throw new Error("Invalid integer literal when parsing "+i);return s}(_):parseFloat(_);return function newNumberToken(i,s,S){return new Token$1(i,s,nr.Number,S,"")}(i,this.index,T)}scanString(){const i=this.index,s=this.peek;this.advance();let S="",_=this.index;const T=this.input;for(;this.peek!=s;)if(92==this.peek){let i;if(S+=T.substring(_,this.index),this.advance(),this.peek=this.peek,117==this.peek){const s=T.substring(this.index+1,this.index+5);if(!/^[0-9a-f]+$/i.test(s))return this.error(`Invalid unicode escape [\\u${s}]`,0);i=parseInt(s,16);for(let i=0;i<5;i++)this.advance()}else i=unescape(this.peek),this.advance();S+=String.fromCharCode(i),_=this.index}else{if(0==this.peek)return this.error("Unterminated quote",0);this.advance()}const A=T.substring(_,this.index);return this.advance(),function newStringToken(i,s,S){return new Token$1(i,s,nr.String,0,S)}(i,this.index,S+A)}error(i,s){const S=this.index+s;return function newErrorToken(i,s,S){return new Token$1(i,s,nr.Error,0,S)}(S,this.index,`Lexer Error: ${i} at column ${S} in expression [${this.input}]`)}}function isIdentifierStart(i){return 97<=i&&i<=122||65<=i&&i<=90||95==i||36==i}function isIdentifier(i){if(0==i.length)return!1;const s=new _Scanner(i);if(!isIdentifierStart(s.peek))return!1;for(s.advance();0!==s.peek;){if(!isIdentifierPart(s.peek))return!1;s.advance()}return!0}function isIdentifierPart(i){return isAsciiLetter(i)||isDigit(i)||95==i||36==i}function isExponentSign(i){return 45==i||43==i}function isQuote(i){return 39===i||34===i||96===i}function unescape(i){switch(i){case 110:return 10;case 102:return 12;case 114:return 13;case 116:return 9;case 118:return 11;default:return i}}class SplitInterpolation{constructor(i,s,S,_,T){this.strings=i,this.stringSpans=s,this.expressions=S,this.expressionsSpans=_,this.offsets=T}}class TemplateBindingParseResult{constructor(i,s,S){this.templateBindings=i,this.warnings=s,this.errors=S}}const ar=_createInterpolateRegExp(ut);function _getInterpolateRegExp(i){return i===ut?ar:_createInterpolateRegExp(i)}function _createInterpolateRegExp(i){const s=escapeRegExp(i.start)+"([\\s\\S]*?)"+escapeRegExp(i.end);return new RegExp(s,"g")}class Parser$1{constructor(i){this._lexer=i,this.errors=[],this.simpleExpressionChecker=SimpleExpressionChecker}parseAction(i,s,S,_=ut){this._checkNoInterpolation(i,s,_);const T=this._stripComments(i),A=this._lexer.tokenize(this._stripComments(i)),P=new _ParseAST(i,s,S,A,T.length,!0,this.errors,i.length-T.length).parseChain();return new ASTWithSource(P,i,s,S,this.errors)}parseBinding(i,s,S,_=ut){const T=this._parseBindingAst(i,s,S,_);return new ASTWithSource(T,i,s,S,this.errors)}checkSimpleExpression(i){const s=new this.simpleExpressionChecker;return i.visit(s),s.errors}parseSimpleBinding(i,s,S,_=ut){const T=this._parseBindingAst(i,s,S,_),A=this.checkSimpleExpression(T);return A.length>0&&this._reportError("Host binding expression cannot contain "+A.join(" "),i,s),new ASTWithSource(T,i,s,S,this.errors)}_reportError(i,s,S,_){this.errors.push(new ParserError(i,s,S,_))}_parseBindingAst(i,s,S,_){const T=this._parseQuote(i,s,S);if(null!=T)return T;this._checkNoInterpolation(i,s,_);const A=this._stripComments(i),P=this._lexer.tokenize(A);return new _ParseAST(i,s,S,P,A.length,!1,this.errors,i.length-A.length).parseChain()}_parseQuote(i,s,S){if(null==i)return null;const _=i.indexOf(":");if(-1==_)return null;const T=i.substring(0,_).trim();if(!isIdentifier(T))return null;const A=i.substring(_+1),P=new ParseSpan(0,i.length);return new Quote(P,P.toAbsolute(S),T,A,s)}parseTemplateBindings(i,s,S,_,T){const A=this._lexer.tokenize(s);return new _ParseAST(s,S,T,A,s.length,!1,this.errors,0).parseTemplateBindings({source:i,span:new AbsoluteSourceSpan(_,_+i.length)})}parseInterpolation(i,s,S,_=ut){const T=this.splitInterpolation(i,s,_);if(null==T)return null;const A=[];for(let _=0;_<T.expressions.length;++_){const P=T.expressions[_],N=this._stripComments(P),M=this._lexer.tokenize(N),k=new _ParseAST(i,s,S,M,N.length,!1,this.errors,T.offsets[_]+(P.length-N.length)).parseChain();A.push(k)}const P=new ParseSpan(0,null==i?0:i.length);return new ASTWithSource(new Interpolation(P,P.toAbsolute(S),T.strings,A),i,s,S,this.errors)}splitInterpolation(i,s,S=ut){const _=_getInterpolateRegExp(S),T=i.split(_);if(T.length<=1)return null;const A=[],P=[],N=[],M=[],k=[];let R=0;for(let _=0;_<T.length;_++){const F=T[_];if(_%2==0){A.push(F);const i=R;R+=F.length,M.push({start:i,end:R})}else if(F.trim().length>0){const i=R;R+=S.start.length,P.push(F),N.push(R),R+=F.length+S.end.length,k.push({start:i,end:R})}else this._reportError("Blank expressions are not allowed in interpolated strings",i,`at column ${this._findInterpolationErrorColumn(T,_,S)} in`,s),P.push("$implicit"),N.push(R),k.push({start:R,end:R})}return new SplitInterpolation(A,M,P,k,N)}wrapLiteralPrimitive(i,s,S){const _=new ParseSpan(0,null==i?0:i.length);return new ASTWithSource(new LiteralPrimitive(_,_.toAbsolute(S),i),i,s,S,this.errors)}_stripComments(i){const s=this._commentStart(i);return null!=s?i.substring(0,s).trim():i}_commentStart(i){let s=null;for(let S=0;S<i.length-1;S++){const _=i.charCodeAt(S),T=i.charCodeAt(S+1);if(47===_&&47==T&&null==s)return S;s===_?s=null:null==s&&isQuote(_)&&(s=_)}return null}_checkNoInterpolation(i,s,S){const _=_getInterpolateRegExp(S),T=i.split(_);T.length>1&&this._reportError(`Got interpolation (${S.start}${S.end}) where expression was expected`,i,`at column ${this._findInterpolationErrorColumn(T,1,S)} in`,s)}_findInterpolationErrorColumn(i,s,S){let _="";for(let T=0;T<s;T++)_+=T%2==0?i[T]:`${S.start}${i[T]}${S.end}`;return _.length}}class IvyParser extends Parser$1{constructor(){super(...arguments),this.simpleExpressionChecker=IvySimpleExpressionChecker}}class _ParseAST{constructor(i,s,S,_,T,A,P,N){this.input=i,this.location=s,this.absoluteOffset=S,this.tokens=_,this.inputLength=T,this.parseAction=A,this.errors=P,this.offset=N,this.rparensExpected=0,this.rbracketsExpected=0,this.rbracesExpected=0,this.sourceSpanCache=new Map,this.index=0}peek(i){const s=this.index+i;return s<this.tokens.length?this.tokens[s]:sr}get next(){return this.peek(0)}get atEOF(){return this.index>=this.tokens.length}get inputIndex(){return this.atEOF?this.currentEndIndex:this.next.index+this.offset}get currentEndIndex(){if(this.index>0){return this.peek(-1).end+this.offset}return 0===this.tokens.length?this.inputLength+this.offset:this.next.index+this.offset}get currentAbsoluteOffset(){return this.absoluteOffset+this.inputIndex}span(i){return new ParseSpan(i,this.currentEndIndex)}sourceSpan(i){const s=`${i}@${this.inputIndex}`;return this.sourceSpanCache.has(s)||this.sourceSpanCache.set(s,this.span(i).toAbsolute(this.absoluteOffset)),this.sourceSpanCache.get(s)}advance(){this.index++}consumeOptionalCharacter(i){return!!this.next.isCharacter(i)&&(this.advance(),!0)}peekKeywordLet(){return this.next.isKeywordLet()}peekKeywordAs(){return this.next.isKeywordAs()}expectCharacter(i){this.consumeOptionalCharacter(i)||this.error("Missing expected "+String.fromCharCode(i))}consumeOptionalOperator(i){return!!this.next.isOperator(i)&&(this.advance(),!0)}expectOperator(i){this.consumeOptionalOperator(i)||this.error("Missing expected operator "+i)}expectIdentifierOrKeyword(){const i=this.next;return i.isIdentifier()||i.isKeyword()?(this.advance(),i.toString()):(this.error(`Unexpected token ${i}, expected identifier or keyword`),"")}expectIdentifierOrKeywordOrString(){const i=this.next;return i.isIdentifier()||i.isKeyword()||i.isString()?(this.advance(),i.toString()):(this.error(`Unexpected token ${i}, expected identifier, keyword, or string`),"")}parseChain(){const i=[],s=this.inputIndex;for(;this.index<this.tokens.length;){const s=this.parsePipe();if(i.push(s),this.consumeOptionalCharacter(59))for(this.parseAction||this.error("Binding expression cannot contain chained expression");this.consumeOptionalCharacter(59););else this.index<this.tokens.length&&this.error(`Unexpected token '${this.next}'`)}return 0==i.length?new EmptyExpr(this.span(s),this.sourceSpan(s)):1==i.length?i[0]:new Chain(this.span(s),this.sourceSpan(s),i)}parsePipe(){let i=this.parseExpression();if(this.consumeOptionalOperator("|")){this.parseAction&&this.error("Cannot have a pipe in an action expression");do{const s=this.inputIndex,S=this.expectIdentifierOrKeyword(),_=this.sourceSpan(s),T=[];for(;this.consumeOptionalCharacter(58);)T.push(this.parseExpression());const{start:A}=i.span;i=new BindingPipe(this.span(A),this.sourceSpan(A),i,S,T,_)}while(this.consumeOptionalOperator("|"))}return i}parseExpression(){return this.parseConditional()}parseConditional(){const i=this.inputIndex,s=this.parseLogicalOr();if(this.consumeOptionalOperator("?")){const S=this.parsePipe();let _;if(this.consumeOptionalCharacter(58))_=this.parsePipe();else{const s=this.inputIndex,S=this.input.substring(i,s);this.error(`Conditional expression ${S} requires all 3 expressions`),_=new EmptyExpr(this.span(i),this.sourceSpan(i))}return new Conditional(this.span(i),this.sourceSpan(i),s,S,_)}return s}parseLogicalOr(){let i=this.parseLogicalAnd();for(;this.consumeOptionalOperator("||");){const s=this.parseLogicalAnd(),{start:S}=i.span;i=new Binary(this.span(S),this.sourceSpan(S),"||",i,s)}return i}parseLogicalAnd(){let i=this.parseEquality();for(;this.consumeOptionalOperator("&&");){const s=this.parseEquality(),{start:S}=i.span;i=new Binary(this.span(S),this.sourceSpan(S),"&&",i,s)}return i}parseEquality(){let i=this.parseRelational();for(;this.next.type==nr.Operator;){const s=this.next.strValue;switch(s){case"==":case"===":case"!=":case"!==":this.advance();const S=this.parseRelational(),{start:_}=i.span;i=new Binary(this.span(_),this.sourceSpan(_),s,i,S);continue}break}return i}parseRelational(){let i=this.parseAdditive();for(;this.next.type==nr.Operator;){const s=this.next.strValue;switch(s){case"<":case">":case"<=":case">=":this.advance();const S=this.parseAdditive(),{start:_}=i.span;i=new Binary(this.span(_),this.sourceSpan(_),s,i,S);continue}break}return i}parseAdditive(){let i=this.parseMultiplicative();for(;this.next.type==nr.Operator;){const s=this.next.strValue;switch(s){case"+":case"-":this.advance();let S=this.parseMultiplicative();const{start:_}=i.span;i=new Binary(this.span(_),this.sourceSpan(_),s,i,S);continue}break}return i}parseMultiplicative(){let i=this.parsePrefix();for(;this.next.type==nr.Operator;){const s=this.next.strValue;switch(s){case"*":case"%":case"/":this.advance();let S=this.parsePrefix();const{start:_}=i.span;i=new Binary(this.span(_),this.sourceSpan(_),s,i,S);continue}break}return i}parsePrefix(){if(this.next.type==nr.Operator){const i=this.inputIndex;let s;switch(this.next.strValue){case"+":return this.advance(),s=this.parsePrefix(),Unary.createPlus(this.span(i),this.sourceSpan(i),s);case"-":return this.advance(),s=this.parsePrefix(),Unary.createMinus(this.span(i),this.sourceSpan(i),s);case"!":return this.advance(),s=this.parsePrefix(),new PrefixNot(this.span(i),this.sourceSpan(i),s)}}return this.parseCallChain()}parseCallChain(){let i=this.parsePrimary();const s=i.span.start;for(;;)if(this.consumeOptionalCharacter(46))i=this.parseAccessMemberOrMethodCall(i,!1);else if(this.consumeOptionalOperator("?."))i=this.parseAccessMemberOrMethodCall(i,!0);else if(this.consumeOptionalCharacter(91)){this.rbracketsExpected++;const S=this.parsePipe();if(this.rbracketsExpected--,this.expectCharacter(93),this.consumeOptionalOperator("=")){const _=this.parseConditional();i=new KeyedWrite(this.span(s),this.sourceSpan(s),i,S,_)}else i=new KeyedRead(this.span(s),this.sourceSpan(s),i,S)}else if(this.consumeOptionalCharacter(40)){this.rparensExpected++;const S=this.parseCallArguments();this.rparensExpected--,this.expectCharacter(41),i=new FunctionCall(this.span(s),this.sourceSpan(s),i,S)}else{if(!this.consumeOptionalOperator("!"))return i;i=new NonNullAssert(this.span(s),this.sourceSpan(s),i)}}parsePrimary(){const i=this.inputIndex;if(this.consumeOptionalCharacter(40)){this.rparensExpected++;const i=this.parsePipe();return this.rparensExpected--,this.expectCharacter(41),i}if(this.next.isKeywordNull())return this.advance(),new LiteralPrimitive(this.span(i),this.sourceSpan(i),null);if(this.next.isKeywordUndefined())return this.advance(),new LiteralPrimitive(this.span(i),this.sourceSpan(i),void 0);if(this.next.isKeywordTrue())return this.advance(),new LiteralPrimitive(this.span(i),this.sourceSpan(i),!0);if(this.next.isKeywordFalse())return this.advance(),new LiteralPrimitive(this.span(i),this.sourceSpan(i),!1);if(this.next.isKeywordThis())return this.advance(),new ImplicitReceiver(this.span(i),this.sourceSpan(i));if(this.consumeOptionalCharacter(91)){this.rbracketsExpected++;const s=this.parseExpressionList(93);return this.rbracketsExpected--,this.expectCharacter(93),new LiteralArray(this.span(i),this.sourceSpan(i),s)}if(this.next.isCharacter(123))return this.parseLiteralMap();if(this.next.isIdentifier())return this.parseAccessMemberOrMethodCall(new ImplicitReceiver(this.span(i),this.sourceSpan(i)),!1);if(this.next.isNumber()){const s=this.next.toNumber();return this.advance(),new LiteralPrimitive(this.span(i),this.sourceSpan(i),s)}if(this.next.isString()){const s=this.next.toString();return this.advance(),new LiteralPrimitive(this.span(i),this.sourceSpan(i),s)}return this.index>=this.tokens.length?(this.error("Unexpected end of expression: "+this.input),new EmptyExpr(this.span(i),this.sourceSpan(i))):(this.error("Unexpected token "+this.next),new EmptyExpr(this.span(i),this.sourceSpan(i)))}parseExpressionList(i){const s=[];if(!this.next.isCharacter(i))do{s.push(this.parsePipe())}while(this.consumeOptionalCharacter(44));return s}parseLiteralMap(){const i=[],s=[],S=this.inputIndex;if(this.expectCharacter(123),!this.consumeOptionalCharacter(125)){this.rbracesExpected++;do{const S=this.next.isString(),_=this.expectIdentifierOrKeywordOrString();i.push({key:_,quoted:S}),this.expectCharacter(58),s.push(this.parsePipe())}while(this.consumeOptionalCharacter(44));this.rbracesExpected--,this.expectCharacter(125)}return new LiteralMap(this.span(S),this.sourceSpan(S),i,s)}parseAccessMemberOrMethodCall(i,s=!1){const S=i.span.start,_=this.inputIndex,T=this.expectIdentifierOrKeyword(),A=this.sourceSpan(_);if(this.consumeOptionalCharacter(40)){this.rparensExpected++;const _=this.parseCallArguments();this.expectCharacter(41),this.rparensExpected--;const P=this.span(S),N=this.sourceSpan(S);return s?new SafeMethodCall(P,N,A,i,T,_):new MethodCall(P,N,A,i,T,_)}if(s)return this.consumeOptionalOperator("=")?(this.error("The '?.' operator cannot be used in the assignment"),new EmptyExpr(this.span(S),this.sourceSpan(S))):new SafePropertyRead(this.span(S),this.sourceSpan(S),A,i,T);if(this.consumeOptionalOperator("=")){if(!this.parseAction)return this.error("Bindings cannot contain assignments"),new EmptyExpr(this.span(S),this.sourceSpan(S));const s=this.parseConditional();return new PropertyWrite(this.span(S),this.sourceSpan(S),A,i,T,s)}return new PropertyRead(this.span(S),this.sourceSpan(S),A,i,T)}parseCallArguments(){if(this.next.isCharacter(41))return[];const i=[];do{i.push(this.parsePipe())}while(this.consumeOptionalCharacter(44));return i}expectTemplateBindingKey(){let i="",s=!1;const S=this.currentAbsoluteOffset;do{i+=this.expectIdentifierOrKeywordOrString(),s=this.consumeOptionalOperator("-"),s&&(i+="-")}while(s);return{source:i,span:new AbsoluteSourceSpan(S,S+i.length)}}parseTemplateBindings(i){const s=[];for(s.push(...this.parseDirectiveKeywordBindings(i));this.index<this.tokens.length;){const S=this.parseLetBinding();if(S)s.push(S);else{const S=this.expectTemplateBindingKey(),_=this.parseAsBinding(S);_?s.push(_):(S.source=i.source+S.source[0].toUpperCase()+S.source.substring(1),s.push(...this.parseDirectiveKeywordBindings(S)))}this.consumeStatementTerminator()}return new TemplateBindingParseResult(s,[],this.errors)}parseDirectiveKeywordBindings(i){const s=[];this.consumeOptionalCharacter(58);const S=this.getDirectiveBoundTarget();let _=this.currentAbsoluteOffset;const T=this.parseAsBinding(i);T||(this.consumeStatementTerminator(),_=this.currentAbsoluteOffset);const A=new AbsoluteSourceSpan(i.span.start,_);return s.push(new ExpressionBinding(A,i,S)),T&&s.push(T),s}getDirectiveBoundTarget(){if(this.next===sr||this.peekKeywordAs()||this.peekKeywordLet())return null;const i=this.parsePipe(),{start:s,end:S}=i.span,_=this.input.substring(s,S);return new ASTWithSource(i,_,this.location,this.absoluteOffset+s,this.errors)}parseAsBinding(i){if(!this.peekKeywordAs())return null;this.advance();const s=this.expectTemplateBindingKey();this.consumeStatementTerminator();const S=new AbsoluteSourceSpan(i.span.start,this.currentAbsoluteOffset);return new VariableBinding(S,s,i)}parseLetBinding(){if(!this.peekKeywordLet())return null;const i=this.currentAbsoluteOffset;this.advance();const s=this.expectTemplateBindingKey();let S=null;this.consumeOptionalOperator("=")&&(S=this.expectTemplateBindingKey()),this.consumeStatementTerminator();const _=new AbsoluteSourceSpan(i,this.currentAbsoluteOffset);return new VariableBinding(_,s,S)}consumeStatementTerminator(){this.consumeOptionalCharacter(59)||this.consumeOptionalCharacter(44)}error(i,s=null){this.errors.push(new ParserError(i,this.input,this.locationText(s),this.location)),this.skip()}locationText(i=null){return null==i&&(i=this.index),i<this.tokens.length?`at column ${this.tokens[i].index+1} in`:"at the end of the expression"}skip(){let i=this.next;for(;this.index<this.tokens.length&&!i.isCharacter(59)&&(this.rparensExpected<=0||!i.isCharacter(41))&&(this.rbracesExpected<=0||!i.isCharacter(125))&&(this.rbracketsExpected<=0||!i.isCharacter(93));)this.next.isError()&&this.errors.push(new ParserError(this.next.toString(),this.input,this.locationText(),this.location)),this.advance(),i=this.next}}class SimpleExpressionChecker{constructor(){this.errors=[]}visitImplicitReceiver(i,s){}visitInterpolation(i,s){}visitLiteralPrimitive(i,s){}visitPropertyRead(i,s){}visitPropertyWrite(i,s){}visitSafePropertyRead(i,s){}visitMethodCall(i,s){}visitSafeMethodCall(i,s){}visitFunctionCall(i,s){}visitLiteralArray(i,s){this.visitAll(i.expressions,s)}visitLiteralMap(i,s){this.visitAll(i.values,s)}visitUnary(i,s){}visitBinary(i,s){}visitPrefixNot(i,s){}visitNonNullAssert(i,s){}visitConditional(i,s){}visitPipe(i,s){this.errors.push("pipes")}visitKeyedRead(i,s){}visitKeyedWrite(i,s){}visitAll(i,s){return i.map(i=>i.visit(this,s))}visitChain(i,s){}visitQuote(i,s){}}class IvySimpleExpressionChecker extends RecursiveAstVisitor$1{constructor(){super(...arguments),this.errors=[]}visitPipe(){this.errors.push("pipes")}}let or;function SECURITY_SCHEMA(){return or||(or={},registerContext(ae.HTML,["iframe|srcdoc","*|innerHTML","*|outerHTML"]),registerContext(ae.STYLE,["*|style"]),registerContext(ae.URL,["*|formAction","area|href","area|ping","audio|src","a|href","a|ping","blockquote|cite","body|background","del|cite","form|action","img|src","img|srcset","input|src","ins|cite","q|cite","source|src","source|srcset","track|src","video|poster","video|src"]),registerContext(ae.RESOURCE_URL,["applet|code","applet|codebase","base|href","embed|src","frame|src","head|profile","html|manifest","iframe|src","link|href","media|src","object|codebase","object|data","script|src"])),or}function registerContext(i,s){for(const S of s)or[S.toLowerCase()]=i}class ElementSchemaRegistry{}const lr=["[Element]|textContent,%classList,className,id,innerHTML,*beforecopy,*beforecut,*beforepaste,*copy,*cut,*paste,*search,*selectstart,*webkitfullscreenchange,*webkitfullscreenerror,*wheel,outerHTML,#scrollLeft,#scrollTop,slot,*message,*mozfullscreenchange,*mozfullscreenerror,*mozpointerlockchange,*mozpointerlockerror,*webglcontextcreationerror,*webglcontextlost,*webglcontextrestored","[HTMLElement]^[Element]|accessKey,contentEditable,dir,!draggable,!hidden,innerText,lang,*abort,*auxclick,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,outerText,!spellcheck,%style,#tabIndex,title,!translate","abbr,address,article,aside,b,bdi,bdo,cite,code,dd,dfn,dt,em,figcaption,figure,footer,header,i,kbd,main,mark,nav,noscript,rb,rp,rt,rtc,ruby,s,samp,section,small,strong,sub,sup,u,var,wbr^[HTMLElement]|accessKey,contentEditable,dir,!draggable,!hidden,innerText,lang,*abort,*auxclick,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,outerText,!spellcheck,%style,#tabIndex,title,!translate","media^[HTMLElement]|!autoplay,!controls,%controlsList,%crossOrigin,#currentTime,!defaultMuted,#defaultPlaybackRate,!disableRemotePlayback,!loop,!muted,*encrypted,*waitingforkey,#playbackRate,preload,src,%srcObject,#volume",":svg:^[HTMLElement]|*abort,*auxclick,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,%style,#tabIndex",":svg:graphics^:svg:|",":svg:animation^:svg:|*begin,*end,*repeat",":svg:geometry^:svg:|",":svg:componentTransferFunction^:svg:|",":svg:gradient^:svg:|",":svg:textContent^:svg:graphics|",":svg:textPositioning^:svg:textContent|","a^[HTMLElement]|charset,coords,download,hash,host,hostname,href,hreflang,name,password,pathname,ping,port,protocol,referrerPolicy,rel,rev,search,shape,target,text,type,username","area^[HTMLElement]|alt,coords,download,hash,host,hostname,href,!noHref,password,pathname,ping,port,protocol,referrerPolicy,rel,search,shape,target,username","audio^media|","br^[HTMLElement]|clear","base^[HTMLElement]|href,target","body^[HTMLElement]|aLink,background,bgColor,link,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,text,vLink","button^[HTMLElement]|!autofocus,!disabled,formAction,formEnctype,formMethod,!formNoValidate,formTarget,name,type,value","canvas^[HTMLElement]|#height,#width","content^[HTMLElement]|select","dl^[HTMLElement]|!compact","datalist^[HTMLElement]|","details^[HTMLElement]|!open","dialog^[HTMLElement]|!open,returnValue","dir^[HTMLElement]|!compact","div^[HTMLElement]|align","embed^[HTMLElement]|align,height,name,src,type,width","fieldset^[HTMLElement]|!disabled,name","font^[HTMLElement]|color,face,size","form^[HTMLElement]|acceptCharset,action,autocomplete,encoding,enctype,method,name,!noValidate,target","frame^[HTMLElement]|frameBorder,longDesc,marginHeight,marginWidth,name,!noResize,scrolling,src","frameset^[HTMLElement]|cols,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,rows","hr^[HTMLElement]|align,color,!noShade,size,width","head^[HTMLElement]|","h1,h2,h3,h4,h5,h6^[HTMLElement]|align","html^[HTMLElement]|version","iframe^[HTMLElement]|align,!allowFullscreen,frameBorder,height,longDesc,marginHeight,marginWidth,name,referrerPolicy,%sandbox,scrolling,src,srcdoc,width","img^[HTMLElement]|align,alt,border,%crossOrigin,#height,#hspace,!isMap,longDesc,lowsrc,name,referrerPolicy,sizes,src,srcset,useMap,#vspace,#width","input^[HTMLElement]|accept,align,alt,autocapitalize,autocomplete,!autofocus,!checked,!defaultChecked,defaultValue,dirName,!disabled,%files,formAction,formEnctype,formMethod,!formNoValidate,formTarget,#height,!incremental,!indeterminate,max,#maxLength,min,#minLength,!multiple,name,pattern,placeholder,!readOnly,!required,selectionDirection,#selectionEnd,#selectionStart,#size,src,step,type,useMap,value,%valueAsDate,#valueAsNumber,#width","li^[HTMLElement]|type,#value","label^[HTMLElement]|htmlFor","legend^[HTMLElement]|align","link^[HTMLElement]|as,charset,%crossOrigin,!disabled,href,hreflang,integrity,media,referrerPolicy,rel,%relList,rev,%sizes,target,type","map^[HTMLElement]|name","marquee^[HTMLElement]|behavior,bgColor,direction,height,#hspace,#loop,#scrollAmount,#scrollDelay,!trueSpeed,#vspace,width","menu^[HTMLElement]|!compact","meta^[HTMLElement]|content,httpEquiv,name,scheme","meter^[HTMLElement]|#high,#low,#max,#min,#optimum,#value","ins,del^[HTMLElement]|cite,dateTime","ol^[HTMLElement]|!compact,!reversed,#start,type","object^[HTMLElement]|align,archive,border,code,codeBase,codeType,data,!declare,height,#hspace,name,standby,type,useMap,#vspace,width","optgroup^[HTMLElement]|!disabled,label","option^[HTMLElement]|!defaultSelected,!disabled,label,!selected,text,value","output^[HTMLElement]|defaultValue,%htmlFor,name,value","p^[HTMLElement]|align","param^[HTMLElement]|name,type,value,valueType","picture^[HTMLElement]|","pre^[HTMLElement]|#width","progress^[HTMLElement]|#max,#value","q,blockquote,cite^[HTMLElement]|","script^[HTMLElement]|!async,charset,%crossOrigin,!defer,event,htmlFor,integrity,src,text,type","select^[HTMLElement]|!autofocus,!disabled,#length,!multiple,name,!required,#selectedIndex,#size,value","shadow^[HTMLElement]|","slot^[HTMLElement]|name","source^[HTMLElement]|media,sizes,src,srcset,type","span^[HTMLElement]|","style^[HTMLElement]|!disabled,media,type","caption^[HTMLElement]|align","th,td^[HTMLElement]|abbr,align,axis,bgColor,ch,chOff,#colSpan,headers,height,!noWrap,#rowSpan,scope,vAlign,width","col,colgroup^[HTMLElement]|align,ch,chOff,#span,vAlign,width","table^[HTMLElement]|align,bgColor,border,%caption,cellPadding,cellSpacing,frame,rules,summary,%tFoot,%tHead,width","tr^[HTMLElement]|align,bgColor,ch,chOff,vAlign","tfoot,thead,tbody^[HTMLElement]|align,ch,chOff,vAlign","template^[HTMLElement]|","textarea^[HTMLElement]|autocapitalize,!autofocus,#cols,defaultValue,dirName,!disabled,#maxLength,#minLength,name,placeholder,!readOnly,!required,#rows,selectionDirection,#selectionEnd,#selectionStart,value,wrap","title^[HTMLElement]|text","track^[HTMLElement]|!default,kind,label,src,srclang","ul^[HTMLElement]|!compact,type","unknown^[HTMLElement]|","video^media|#height,poster,#width",":svg:a^:svg:graphics|",":svg:animate^:svg:animation|",":svg:animateMotion^:svg:animation|",":svg:animateTransform^:svg:animation|",":svg:circle^:svg:geometry|",":svg:clipPath^:svg:graphics|",":svg:defs^:svg:graphics|",":svg:desc^:svg:|",":svg:discard^:svg:|",":svg:ellipse^:svg:geometry|",":svg:feBlend^:svg:|",":svg:feColorMatrix^:svg:|",":svg:feComponentTransfer^:svg:|",":svg:feComposite^:svg:|",":svg:feConvolveMatrix^:svg:|",":svg:feDiffuseLighting^:svg:|",":svg:feDisplacementMap^:svg:|",":svg:feDistantLight^:svg:|",":svg:feDropShadow^:svg:|",":svg:feFlood^:svg:|",":svg:feFuncA^:svg:componentTransferFunction|",":svg:feFuncB^:svg:componentTransferFunction|",":svg:feFuncG^:svg:componentTransferFunction|",":svg:feFuncR^:svg:componentTransferFunction|",":svg:feGaussianBlur^:svg:|",":svg:feImage^:svg:|",":svg:feMerge^:svg:|",":svg:feMergeNode^:svg:|",":svg:feMorphology^:svg:|",":svg:feOffset^:svg:|",":svg:fePointLight^:svg:|",":svg:feSpecularLighting^:svg:|",":svg:feSpotLight^:svg:|",":svg:feTile^:svg:|",":svg:feTurbulence^:svg:|",":svg:filter^:svg:|",":svg:foreignObject^:svg:graphics|",":svg:g^:svg:graphics|",":svg:image^:svg:graphics|",":svg:line^:svg:geometry|",":svg:linearGradient^:svg:gradient|",":svg:mpath^:svg:|",":svg:marker^:svg:|",":svg:mask^:svg:|",":svg:metadata^:svg:|",":svg:path^:svg:geometry|",":svg:pattern^:svg:|",":svg:polygon^:svg:geometry|",":svg:polyline^:svg:geometry|",":svg:radialGradient^:svg:gradient|",":svg:rect^:svg:geometry|",":svg:svg^:svg:graphics|#currentScale,#zoomAndPan",":svg:script^:svg:|type",":svg:set^:svg:animation|",":svg:stop^:svg:|",":svg:style^:svg:|!disabled,media,title,type",":svg:switch^:svg:graphics|",":svg:symbol^:svg:|",":svg:tspan^:svg:textPositioning|",":svg:text^:svg:textPositioning|",":svg:textPath^:svg:textContent|",":svg:title^:svg:|",":svg:use^:svg:graphics|",":svg:view^:svg:|#zoomAndPan","data^[HTMLElement]|value","keygen^[HTMLElement]|!autofocus,challenge,!disabled,form,keytype,name","menuitem^[HTMLElement]|type,label,icon,!disabled,!checked,radiogroup,!default","summary^[HTMLElement]|","time^[HTMLElement]|dateTime",":svg:cursor^:svg:|"],cr={class:"className",for:"htmlFor",formaction:"formAction",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"};class DomElementSchemaRegistry extends ElementSchemaRegistry{constructor(){super(),this._schema={},lr.forEach(i=>{const s={},[S,_]=i.split("|"),T=_.split(","),[A,P]=S.split("^");A.split(",").forEach(i=>this._schema[i.toLowerCase()]=s);const N=P&&this._schema[P.toLowerCase()];N&&Object.keys(N).forEach(i=>{s[i]=N[i]}),T.forEach(i=>{if(i.length>0)switch(i[0]){case"*":break;case"!":s[i.substring(1)]="boolean";break;case"#":s[i.substring(1)]="number";break;case"%":s[i.substring(1)]="object";break;default:s[i]="string"}})})}hasProperty(i,s,S){if(S.some(i=>i.name===ee.name))return!0;if(i.indexOf("-")>-1){if(isNgContainer(i)||isNgContent(i))return!1;if(S.some(i=>i.name===Z.name))return!0}return!!(this._schema[i.toLowerCase()]||this._schema.unknown)[s]}hasElement(i,s){if(s.some(i=>i.name===ee.name))return!0;if(i.indexOf("-")>-1){if(isNgContainer(i)||isNgContent(i))return!0;if(s.some(i=>i.name===Z.name))return!0}return!!this._schema[i.toLowerCase()]}securityContext(i,s,S){S&&(s=this.getMappedPropName(s)),i=i.toLowerCase(),s=s.toLowerCase();let _=SECURITY_SCHEMA()[i+"|"+s];return _||(_=SECURITY_SCHEMA()["*|"+s],_||ae.NONE)}getMappedPropName(i){return cr[i]||i}getDefaultComponentElementName(){return"ng-component"}validateProperty(i){if(i.toLowerCase().startsWith("on")){return{error:!0,msg:`Binding to event property '${i}' is disallowed for security reasons, please use (${i.slice(2)})=...\nIf '${i}' is a directive input, make sure the directive is imported by the current module.`}}return{error:!1}}validateAttribute(i){if(i.toLowerCase().startsWith("on")){return{error:!0,msg:`Binding to event attribute '${i}' is disallowed for security reasons, please use (${i.slice(2)})=...`}}return{error:!1}}allKnownElementNames(){return Object.keys(this._schema)}normalizeAnimationStyleProperty(i){return function dashCaseToCamelCase(i){return i.replace(Be,(...i)=>i[1].toUpperCase())}(i)}normalizeAnimationStyleValue(i,s,S){let _="";const T=S.toString().trim();let A=null;if(function _isPixelDimensionStyle(i){switch(i){case"width":case"height":case"minWidth":case"minHeight":case"maxWidth":case"maxHeight":case"left":case"top":case"bottom":case"right":case"fontSize":case"outlineWidth":case"outlineOffset":case"paddingTop":case"paddingLeft":case"paddingBottom":case"paddingRight":case"marginTop":case"marginLeft":case"marginBottom":case"marginRight":case"borderRadius":case"borderWidth":case"borderTopWidth":case"borderLeftWidth":case"borderRightWidth":case"borderBottomWidth":case"textIndent":return!0;default:return!1}}(i)&&0!==S&&"0"!==S)if("number"==typeof S)_="px";else{const i=S.match(/^[+-]?[\d\.]+([a-z]*)$/);i&&0==i[1].length&&(A=`Please provide a CSS unit value for ${s}:${S}`)}return{error:A,value:T+_}}}const ur=/^(?:(?:(?:(bind-)|(let-)|(ref-|#)|(on-)|(bindon-)|(@))(.*))|\[\(([^\)]+)\)\]|\[([^\]]+)\]|\(([^\)]+)\))$/;function htmlAstToRender3Ast(i,s){const S=new HtmlAstToIvyAst(s);return{nodes:visitAll$1(S,i),errors:s.errors.concat(S.errors),styleUrls:S.styleUrls,styles:S.styles,ngContentSelectors:S.ngContentSelectors}}class HtmlAstToIvyAst{constructor(i){this.bindingParser=i,this.errors=[],this.styles=[],this.styleUrls=[],this.ngContentSelectors=[],this.inI18nBlock=!1}visitElement(i){const s=isI18nRootNode(i.i18n);s&&(this.inI18nBlock&&this.reportError("Cannot mark an element as translatable inside of a translatable section. Please remove the nested i18n marker.",i.sourceSpan),this.inI18nBlock=!0);const S=preparseElement(i);if(S.type===Yt.SCRIPT)return null;if(S.type===Yt.STYLE){const s=function textContents(i){return 1===i.children.length&&i.children[0]instanceof Text$3?i.children[0].value:null}(i);return null!==s&&this.styles.push(s),null}if(S.type===Yt.STYLESHEET&&isStyleUrlResolvable(S.hrefAttr))return this.styleUrls.push(S.hrefAttr),null;const _=isNgTemplate(i.name),T=[],A=[],P=[],N=[],M=[],k={},R=[],F=[];let D=!1;for(const s of i.attrs){let i=!1;const S=normalizeAttributeName(s.name);let L=!1;if(s.i18n&&(k[s.name]=s.i18n),S.startsWith("*")){D&&this.reportError("Can't have multiple template bindings on one element. Use only one attribute prefixed with *",s.sourceSpan),L=!0,D=!0;const i=s.value,_=S.substring("*".length),T=[],A=s.valueSpan?s.valueSpan.start.offset:s.sourceSpan.start.offset+s.name.length;this.bindingParser.parseInlineTemplateBinding(_,i,s.sourceSpan,A,[],R,T),F.push(...T.map(i=>new Variable(i.name,i.value,i.sourceSpan,i.valueSpan)))}else i=this.parseAttribute(_,s,[],T,A,P,N);i||L||M.push(this.visitAttribute(s))}const L=visitAll$1(S.nonBindable?pr:this,i.children);let $;if(S.type===Yt.NG_CONTENT){i.children&&!i.children.every(i=>function isEmptyTextNode(i){return i instanceof Text$3&&0==i.value.trim().length}(i)||function isCommentNode(i){return i instanceof Comment}(i))&&this.reportError("<ng-content> element cannot have content.",i.sourceSpan);const s=S.selectAttr,_=i.attrs.map(i=>this.visitAttribute(i));$=new Content(s,_,i.sourceSpan,i.i18n),this.ngContentSelectors.push(s)}else if(_){const s=this.extractAttributes(i.name,T,k);$=new Template(i.name,M,s.bound,A,[],L,N,P,i.sourceSpan,i.startSourceSpan,i.endSourceSpan,i.i18n)}else{const s=this.extractAttributes(i.name,T,k);$=new Element(i.name,M,s.bound,A,L,N,i.sourceSpan,i.startSourceSpan,i.endSourceSpan,i.i18n)}if(D){const S=this.extractAttributes("ng-template",R,k),T=[];S.literal.forEach(i=>T.push(i)),S.bound.forEach(i=>T.push(i));const A=$ instanceof Element?{attributes:$.attributes,inputs:$.inputs,outputs:$.outputs}:{attributes:[],inputs:[],outputs:[]},P=_&&s?void 0:i.i18n;$=new Template($.name,A.attributes,A.inputs,A.outputs,T,[$],[],F,i.sourceSpan,i.startSourceSpan,i.endSourceSpan,P)}return s&&(this.inI18nBlock=!1),$}visitAttribute(i){return new TextAttribute(i.name,i.value,i.sourceSpan,i.valueSpan,i.i18n)}visitText(i){return this._visitTextWithInterpolation(i.value,i.sourceSpan,i.i18n)}visitExpansion(i){if(!i.i18n)return null;if(!isI18nRootNode(i.i18n))throw new Error(`Invalid type "${i.i18n.constructor}" for "i18n" property of ${i.sourceSpan.toString()}. Expected a "Message"`);const s=i.i18n,S={},_={};return Object.keys(s.placeholders).forEach(T=>{const A=s.placeholders[T];if(T.startsWith("VAR_")){const s=this.bindingParser.interpolationConfig,_=`${s.start}${A}${s.end}`,P=T.trim();S[P]=this._visitTextWithInterpolation(_,i.sourceSpan)}else _[T]=this._visitTextWithInterpolation(A,i.sourceSpan)}),new Icu(S,_,i.sourceSpan,s)}visitExpansionCase(i){return null}visitComment(i){return null}extractAttributes(i,s,S){const _=[],T=[];return s.forEach(s=>{const A=S[s.name];if(s.isLiteral)T.push(new TextAttribute(s.name,s.expression.source||"",s.sourceSpan,void 0,A));else{const S=this.bindingParser.createBoundElementProperty(i,s,!0,!1);_.push(BoundAttribute.fromBoundElementProperty(S,A))}}),{bound:_,literal:T}}parseAttribute(i,s,S,_,T,A,P){const N=normalizeAttributeName(s.name),M=s.value,k=s.sourceSpan,R=s.valueSpan?s.valueSpan.start.offset:k.start.offset,F=N.match(ur);let D=!1;if(F){if(D=!0,null!=F[1])this.bindingParser.parsePropertyBinding(F[7],M,!1,k,R,s.valueSpan,S,_);else if(F[2])if(i){const i=F[7];this.parseVariable(i,M,k,s.valueSpan,A)}else this.reportError('"let-" is only supported on ng-template elements.',k);else if(F[3]){const i=F[7];this.parseReference(i,M,k,s.valueSpan,P)}else if(F[4]){const i=[];this.bindingParser.parseEvent(F[7],M,k,s.valueSpan||k,S,i),addEvents(i,T)}else if(F[5])this.bindingParser.parsePropertyBinding(F[7],M,!1,k,R,s.valueSpan,S,_),this.parseAssignmentEvent(F[7],M,k,s.valueSpan,S,T);else if(F[6])this.bindingParser.parseLiteralAttr(N,M,k,R,s.valueSpan,S,_);else if(F[8])this.bindingParser.parsePropertyBinding(F[8],M,!1,k,R,s.valueSpan,S,_),this.parseAssignmentEvent(F[8],M,k,s.valueSpan,S,T);else if(F[9])this.bindingParser.parsePropertyBinding(F[9],M,!1,k,R,s.valueSpan,S,_);else if(F[10]){const i=[];this.bindingParser.parseEvent(F[10],M,k,s.valueSpan||k,S,i),addEvents(i,T)}}else D=this.bindingParser.parsePropertyInterpolation(N,M,k,s.valueSpan,S,_);return D}_visitTextWithInterpolation(i,s,S){const _=replaceNgsp(i),T=this.bindingParser.parseInterpolation(_,s);return T?new BoundText(T,s,S):new Text(_,s)}parseVariable(i,s,S,_,T){i.indexOf("-")>-1?this.reportError('"-" is not allowed in variable names',S):0===i.length&&this.reportError("Variable does not have a name",S),T.push(new Variable(i,s,S,_))}parseReference(i,s,S,_,T){i.indexOf("-")>-1?this.reportError('"-" is not allowed in reference names',S):0===i.length&&this.reportError("Reference does not have a name",S),T.push(new Reference(i,s,S,_))}parseAssignmentEvent(i,s,S,_,T,A){const P=[];this.bindingParser.parseEvent(i+"Change",s+"=$event",S,_||S,T,P),addEvents(P,A)}reportError(i,s,S=et.ERROR){this.errors.push(new ParseError(s,i,S))}}const pr=new class NonBindableVisitor$1{visitElement(i){const s=preparseElement(i);if(s.type===Yt.SCRIPT||s.type===Yt.STYLE||s.type===Yt.STYLESHEET)return null;const S=visitAll$1(this,i.children,null);return new Element(i.name,visitAll$1(this,i.attrs),[],[],S,[],i.sourceSpan,i.startSourceSpan,i.endSourceSpan)}visitComment(i){return null}visitAttribute(i){return new TextAttribute(i.name,i.value,i.sourceSpan,void 0,i.i18n)}visitText(i){return new Text(i.value,i.sourceSpan)}visitExpansion(i){return null}visitExpansionCase(i){return null}};function normalizeAttributeName(i){return/^data-/i.test(i)?i.substring(5):i}function addEvents(i,s){s.push(...i.map(i=>BoundEvent.fromParsedEvent(i)))}var hr;!function(i){i[i.ELEMENT=0]="ELEMENT",i[i.TEMPLATE=1]="TEMPLATE",i[i.PROJECTION=2]="PROJECTION"}(hr||(hr={}));class I18nContext{constructor(i,s,S=0,_=null,T,A){this.index=i,this.ref=s,this.level=S,this.templateIndex=_,this.meta=T,this.registry=A,this.bindings=new Set,this.placeholders=new Map,this.isEmitted=!1,this._unresolvedCtxCount=0,this._registry=A||function setupRegistry(){return{getUniqueId:getSeqNumberGenerator(),icus:new Map}}(),this.id=this._registry.getUniqueId()}appendTag(i,s,S,_){if(s.isVoid&&_)return;const T=s.isVoid||!_?s.startName:s.closeName,A={type:i,index:S,ctx:this.id,isVoid:s.isVoid,closed:_};updatePlaceholderMap(this.placeholders,T,A)}get icus(){return this._registry.icus}get isRoot(){return 0===this.level}get isResolved(){return 0===this._unresolvedCtxCount}getSerializedPlaceholders(){const i=new Map;return this.placeholders.forEach((s,S)=>i.set(S,s.map(serializePlaceholderValue))),i}appendBinding(i){this.bindings.add(i)}appendIcu(i,s){updatePlaceholderMap(this._registry.icus,i,s)}appendBoundText(i){assembleBoundTextPlaceholders(i,this.bindings.size,this.id).forEach((i,s)=>updatePlaceholderMap(this.placeholders,s,...i))}appendTemplate(i,s){this.appendTag(hr.TEMPLATE,i,s,!1),this.appendTag(hr.TEMPLATE,i,s,!0),this._unresolvedCtxCount++}appendElement(i,s,S){this.appendTag(hr.ELEMENT,i,s,S)}appendProjection(i,s){this.appendTag(hr.PROJECTION,i,s,!1),this.appendTag(hr.PROJECTION,i,s,!0)}forkChildContext(i,s,S){return new I18nContext(i,this.ref,this.level+1,s,S,this._registry)}reconcileChildContext(i){["start","close"].forEach(s=>{const S=i.meta[s+"Name"],_=(this.placeholders.get(S)||[]).find(findTemplateFn(this.id,i.templateIndex));_&&(_.ctx=i.id)}),i.placeholders.forEach((s,S)=>{const _=this.placeholders.get(S);if(!_)return void this.placeholders.set(S,s);const T=_.findIndex(findTemplateFn(i.id,i.templateIndex));if(T>=0){const i=S.startsWith("CLOSE");if(S.endsWith("NG-TEMPLATE"))_.splice(T+(i?0:1),0,...s);else{s[i?s.length-1:0].tmpl=_[T],_.splice(T,1,...s)}}else _.push(...s);this.placeholders.set(S,_)}),this._unresolvedCtxCount--}}function wrap(i,s,S,_){return wrapI18nPlaceholder(`${_?"/":""}${i}${s}`,S)}function wrapTag(i,{index:s,ctx:S,isVoid:_},T){return _?wrap(i,s,S)+wrap(i,s,S,!0):wrap(i,s,S,T)}function findTemplateFn(i,s){return S=>"object"==typeof S&&S.type===hr.TEMPLATE&&S.index===s&&S.ctx===i}function serializePlaceholderValue(i){const element=(i,s)=>wrapTag("#",i,s),template=(i,s)=>wrapTag("*",i,s);switch(i.type){case hr.ELEMENT:return i.closed?element(i,!0)+(i.tmpl?template(i.tmpl,!0):""):i.tmpl?template(i.tmpl)+element(i)+(i.isVoid?template(i.tmpl,!0):""):element(i);case hr.TEMPLATE:return template(i,i.closed);case hr.PROJECTION:return s=i,S=i.closed,wrapTag("!",s,S);default:return i}var s,S}const dr=new class IcuSerializerVisitor{visitText(i){return i.value}visitContainer(i){return i.children.map(i=>i.visit(this)).join("")}visitIcu(i){const s=Object.keys(i.cases).map(s=>`${s} {${i.cases[s].visit(this)}}`);return`{${i.expressionPlaceholder}, ${i.type}, ${s.join(" ")}}`}visitTagPlaceholder(i){return i.isVoid?this.formatPh(i.startName):`${this.formatPh(i.startName)}${i.children.map(i=>i.visit(this)).join("")}${this.formatPh(i.closeName)}`}visitPlaceholder(i){return this.formatPh(i.name)}visitIcuPlaceholder(i,s){return this.formatPh(i.name)}formatPh(i){return`{${formatI18nPlaceholderName(i,!1)}}`}};function serializeIcuNode(i){return i.visit(dr)}const mr={A:"LINK",B:"BOLD_TEXT",BR:"LINE_BREAK",EM:"EMPHASISED_TEXT",H1:"HEADING_LEVEL1",H2:"HEADING_LEVEL2",H3:"HEADING_LEVEL3",H4:"HEADING_LEVEL4",H5:"HEADING_LEVEL5",H6:"HEADING_LEVEL6",HR:"HORIZONTAL_RULE",I:"ITALIC_TEXT",LI:"LIST_ITEM",LINK:"MEDIA_LINK",OL:"ORDERED_LIST",P:"PARAGRAPH",Q:"QUOTATION",S:"STRIKETHROUGH_TEXT",SMALL:"SMALL_TEXT",SUB:"SUBSTRIPT",SUP:"SUPERSCRIPT",TBODY:"TABLE_BODY",TD:"TABLE_CELL",TFOOT:"TABLE_FOOTER",TH:"TABLE_HEADER_CELL",THEAD:"TABLE_HEADER",TR:"TABLE_ROW",TT:"MONOSPACED_TEXT",U:"UNDERLINED_TEXT",UL:"UNORDERED_LIST"};class PlaceholderRegistry{constructor(){this._placeHolderNameCounts={},this._signatureToName={}}getStartTagPlaceholderName(i,s,S){const _=this._hashTag(i,s,S);if(this._signatureToName[_])return this._signatureToName[_];const T=i.toUpperCase(),A=mr[T]||"TAG_"+T,P=this._generateUniqueName(S?A:"START_"+A);return this._signatureToName[_]=P,P}getCloseTagPlaceholderName(i){const s=this._hashClosingTag(i);if(this._signatureToName[s])return this._signatureToName[s];const S=i.toUpperCase(),_=mr[S]||"TAG_"+S,T=this._generateUniqueName("CLOSE_"+_);return this._signatureToName[s]=T,T}getPlaceholderName(i,s){const S=i.toUpperCase(),_=`PH: ${S}=${s}`;if(this._signatureToName[_])return this._signatureToName[_];const T=this._generateUniqueName(S);return this._signatureToName[_]=T,T}getUniquePlaceholder(i){return this._generateUniqueName(i.toUpperCase())}_hashTag(i,s,S){return"<"+i+Object.keys(s).sort().map(i=>` ${i}=${s[i]}`).join("")+(S?"/>":`></${i}>`)}_hashClosingTag(i){return this._hashTag("/"+i,{},!1)}_generateUniqueName(i){if(!this._placeHolderNameCounts.hasOwnProperty(i))return this._placeHolderNameCounts[i]=1,i;const s=this._placeHolderNameCounts[i];return this._placeHolderNameCounts[i]=s+1,`${i}_${s}`}}const fr=new Parser$1(new Lexer);function createI18nMessageFactory(i){const s=new _I18nVisitor(fr,i);return(i,S,_,T,A)=>s.toI18nMessage(i,S,_,T,A)}function noopVisitNodeFn(i,s){return s}class _I18nVisitor{constructor(i,s){this._expressionParser=i,this._interpolationConfig=s}toI18nMessage(i,s="",S="",_="",T){const A={isIcu:1==i.length&&i[0]instanceof Expansion,icuDepth:0,placeholderRegistry:new PlaceholderRegistry,placeholderToContent:{},placeholderToMessage:{},visitNodeFn:T||noopVisitNodeFn},P=visitAll$1(this,i,A);return new Message(P,A.placeholderToContent,A.placeholderToMessage,s,S,_)}visitElement(i,s){const S=visitAll$1(this,i.children,s),_={};i.attrs.forEach(i=>{_[i.name]=i.value});const T=getHtmlTagDefinition(i.name).isVoid,A=s.placeholderRegistry.getStartTagPlaceholderName(i.name,_,T);s.placeholderToContent[A]=i.sourceSpan.toString();let P="";T||(P=s.placeholderRegistry.getCloseTagPlaceholderName(i.name),s.placeholderToContent[P]=`</${i.name}>`);const N=new TagPlaceholder(i.name,_,A,P,S,T,i.sourceSpan,i.startSourceSpan,i.endSourceSpan);return s.visitNodeFn(i,N)}visitAttribute(i,s){const S=this._visitTextWithInterpolation(i.value,i.sourceSpan,s);return s.visitNodeFn(i,S)}visitText(i,s){const S=this._visitTextWithInterpolation(i.value,i.sourceSpan,s);return s.visitNodeFn(i,S)}visitComment(i,s){return null}visitExpansion(i,s){s.icuDepth++;const S={},_=new Icu$1(i.switchValue,i.type,S,i.sourceSpan);if(i.cases.forEach(i=>{S[i.value]=new Container(i.expression.map(i=>i.visit(this,s)),i.expSourceSpan)}),s.icuDepth--,s.isIcu||s.icuDepth>0){const S=s.placeholderRegistry.getUniquePlaceholder("VAR_"+i.type);return _.expressionPlaceholder=S,s.placeholderToContent[S]=i.switchValue,s.visitNodeFn(i,_)}const T=s.placeholderRegistry.getPlaceholderName("ICU",i.sourceSpan.toString());s.placeholderToMessage[T]=this.toI18nMessage([i],"","","",void 0);const A=new IcuPlaceholder(_,T,i.sourceSpan);return s.visitNodeFn(i,A)}visitExpansionCase(i,s){throw new Error("Unreachable code")}_visitTextWithInterpolation(i,s,S){const _=this._expressionParser.splitInterpolation(i,s.start.toString(),this._interpolationConfig);if(!_)return new Text$1(i,s);const T=[],A=new Container(T,s),{start:P,end:N}=this._interpolationConfig;for(let i=0;i<_.strings.length-1;i++){const A=_.expressions[i],M=A.split(vr)[2]||"INTERPOLATION",k=S.placeholderRegistry.getPlaceholderName(M,A);if(_.strings[i].length){const S=getOffsetSourceSpan(s,_.stringSpans[i]);T.push(new Text$1(_.strings[i],S))}const R=getOffsetSourceSpan(s,_.expressionsSpans[i]);T.push(new Placeholder(A,k,R)),S.placeholderToContent[k]=P+A+N}const M=_.strings.length-1;if(_.strings[M].length){const i=getOffsetSourceSpan(s,_.stringSpans[M]);T.push(new Text$1(_.strings[M],i))}return A}}function getOffsetSourceSpan(i,{start:s,end:S}){return new ParseSourceSpan(i.start.moveBy(s),i.start.moveBy(S))}const vr=/\/\/[\s\S]*i18n[\s\S]*\([\s\S]*ph[\s\S]*=[\s\S]*("|')([\s\S]*?)\1[\s\S]*\)/g;const setI18nRefs=(i,s)=>(i instanceof NodeWithI18n&&(s instanceof IcuPlaceholder&&i.i18n instanceof Message&&(s.previousMessage=i.i18n),i.i18n=s),s);class I18nMetaVisitor{constructor(i=ut,s=!1,S=!1){this.interpolationConfig=i,this.keepI18nAttrs=s,this.enableI18nLegacyMessageIdFormat=S,this.hasI18nMeta=!1,this._createI18nMessage=createI18nMessageFactory(this.interpolationConfig)}_generateI18nMessage(i,s="",S){const{meaning:_,description:T,customId:A}=this._parseMetadata(s),P=this._createI18nMessage(i,_,T,A,S);return this._setMessageId(P,s),this._setLegacyIds(P,s),P}visitElement(i){if(function hasI18nAttrs(i){return i.attrs.some(i=>isI18nAttribute(i.name))}(i)){this.hasI18nMeta=!0;const s=[],S={};for(const _ of i.attrs)if("i18n"===_.name){const s=i.i18n||_.value,S=this._generateI18nMessage(i.children,s,setI18nRefs);S.nodes.length&&(i.i18n=S)}else if(_.name.startsWith("i18n-")){S[_.name.slice("i18n-".length)]=_.value}else s.push(_);if(Object.keys(S).length)for(const i of s){const s=S[i.name];void 0!==s&&i.value&&(i.i18n=this._generateI18nMessage([i],i.i18n||s))}this.keepI18nAttrs||(i.attrs=s)}return visitAll$1(this,i.children,i.i18n),i}visitExpansion(i,s){let S;const _=i.i18n;if(this.hasI18nMeta=!0,_ instanceof IcuPlaceholder){const s=_.name;S=this._generateI18nMessage([i],_),icuFromI18nMessage(S).name=s}else S=this._generateI18nMessage([i],s||_);return i.i18n=S,i}visitText(i){return i}visitAttribute(i){return i}visitComment(i){return i}visitExpansionCase(i){return i}_parseMetadata(i){return"string"==typeof i?function parseI18nMeta(i=""){let s,S,_;if(i=i.trim()){const T=i.indexOf("@@"),A=i.indexOf("|");let P;[P,s]=T>-1?[i.slice(0,T),i.slice(T+2)]:[i,""],[S,_]=A>-1?[P.slice(0,A),P.slice(A+1)]:["",P]}return{customId:s,meaning:S,description:_}}(i):i instanceof Message?i:{}}_setMessageId(i,s){i.id||(i.id=s instanceof Message&&s.id||decimalDigest(i))}_setLegacyIds(i,s){if(this.enableI18nLegacyMessageIdFormat)i.legacyIds=[computeDigest(i),computeDecimalDigest(i)];else if("string"!=typeof s){const S=s instanceof Message?s:s instanceof IcuPlaceholder?s.previousMessage:void 0;i.legacyIds=S?S.legacyIds:[]}}}function createGoogleGetMsgStatements(i,s,S,_){const T=[literal(function serializeI18nMessageForGetMsg(i){return i.nodes.map(i=>i.visit(gr,null)).join("")}(s))];Object.keys(_).length&&T.push(mapLiteral(_,!0));const A=S.set(variable("goog.getMsg").callFn(T)).toConstDecl(),P=function i18nMetaToJSDoc(i){const s=[];return i.description&&s.push({tagName:"desc",text:i.description}),i.meaning&&s.push({tagName:"meaning",text:i.meaning}),0==s.length?null:jsDocComment(s)}(s);return null!==P&&A.addLeadingComment(P),[A,new ExpressionStatement(i.set(S))]}const gr=new class GetMsgSerializerVisitor{formatPh(i){return`{$${formatI18nPlaceholderName(i)}}`}visitText(i){return i.value}visitContainer(i){return i.children.map(i=>i.visit(this)).join("")}visitIcu(i){return serializeIcuNode(i)}visitTagPlaceholder(i){return i.isVoid?this.formatPh(i.startName):`${this.formatPh(i.startName)}${i.children.map(i=>i.visit(this)).join("")}${this.formatPh(i.closeName)}`}visitPlaceholder(i){return this.formatPh(i.name)}visitIcuPlaceholder(i,s){return this.formatPh(i.name)}};function createLocalizeStatements(i,s,S){const{messageParts:_,placeHolders:T}=function serializeI18nMessageForLocalize(i){const s=[];return i.nodes.forEach(i=>i.visit(yr,s)),function processMessagePieces(i){const s=[],S=[];i[0]instanceof PlaceholderPiece&&s.push(createEmptyMessagePart(i[0].sourceSpan.start));for(let _=0;_<i.length;_++){const T=i[_];T instanceof LiteralPiece?s.push(T):(S.push(T),i[_-1]instanceof PlaceholderPiece&&s.push(createEmptyMessagePart(T.sourceSpan.end)))}i[i.length-1]instanceof PlaceholderPiece&&s.push(createEmptyMessagePart(i[i.length-1].sourceSpan.end));return{messageParts:s,placeHolders:S}}(s)}(s),A=function getSourceSpan(i){const s=i.nodes[0],S=i.nodes[i.nodes.length-1];return new ParseSourceSpan(s.sourceSpan.start,S.sourceSpan.end,s.sourceSpan.details)}(s),P=T.map(i=>S[i.text]),N=function localizedString(i,s,S,_,T){return new LocalizedString(i,s,S,_,T)}(s,_,T,P,A),M=i.set(N);return[new ExpressionStatement(M)]}const yr=new class LocalizeSerializerVisitor{visitText(i,s){s[s.length-1]instanceof LiteralPiece?s[s.length-1].text+=i.value:s.push(new LiteralPiece(i.value,i.sourceSpan))}visitContainer(i,s){i.children.forEach(i=>i.visit(this,s))}visitIcu(i,s){s.push(new LiteralPiece(serializeIcuNode(i),i.sourceSpan))}visitTagPlaceholder(i,s){var S,_;s.push(this.createPlaceholderPiece(i.startName,null!==(S=i.startSourceSpan)&&void 0!==S?S:i.sourceSpan)),i.isVoid||(i.children.forEach(i=>i.visit(this,s)),s.push(this.createPlaceholderPiece(i.closeName,null!==(_=i.endSourceSpan)&&void 0!==_?_:i.sourceSpan)))}visitPlaceholder(i,s){s.push(this.createPlaceholderPiece(i.name,i.sourceSpan))}visitIcuPlaceholder(i,s){s.push(this.createPlaceholderPiece(i.name,i.sourceSpan))}createPlaceholderPiece(i,s){return new PlaceholderPiece(formatI18nPlaceholderName(i,!1),s)}};function createEmptyMessagePart(i){return new LiteralPiece("",new ParseSourceSpan(i,i))}const Er=new Map([["window",Identifiers$1.resolveWindow],["document",Identifiers$1.resolveDocument],["body",Identifiers$1.resolveBody]]),Sr=[" ","\n","\r","\t"];function renderFlagCheckIfStmt(i,s){return ifStmt(variable("rf").bitwiseAnd(literal(i),null,!1),s)}function prepareEventListenerParameters(i,s=null,S=null){const{type:_,name:T,target:A,phase:P,handler:N}=i;if(A&&!Er.has(A))throw new Error(`Unexpected global target '${A}' defined for '${T}' event.\n        Supported list of global targets: ${Array.from(Er.keys())}.`);const M=new Set,k=null===S||0===S.bindingLevel?variable("ctx"):S.getOrCreateSharedContextVar(0),R=convertActionBinding(S,k,N,"b",()=>error("Unexpected interpolation"),i.handlerSpan,M),F=[];S&&(F.push(...S.restoreViewStatement()),F.push(...S.variableDeclarations())),F.push(...R.render3Stmts);const D=1===_?function prepareSyntheticListenerName(i,s){return`@${i}.${s}`}(T,P):T,L=s&&sanitizeIdentifier(s),$=[];M.has("$event")&&$.push(new FnParam("$event",pe));const V=fn($,F,he,null,L),U=[literal(D),V];return A&&U.push(literal(!1),importExpr(Er.get(A))),U}class TemplateDefinitionBuilder{constructor(i,s,S=0,_,T,A,P,N,M,k,R,F,D,L,$={prepareStatements:[],constExpressions:[]}){this.constantPool=i,this.level=S,this.contextName=_,this.i18nContext=T,this.templateIndex=A,this.templateName=P,this.directiveMatcher=N,this.directives=M,this.pipeTypeByName=k,this.pipes=R,this._namespace=F,this.i18nUseExternalIds=L,this._constants=$,this._dataIndex=0,this._bindingContext=0,this._prefixCode=[],this._creationCodeFns=[],this._updateCodeFns=[],this._currentIndex=0,this._tempVariables=[],this._nestedTemplateFns=[],this._unsupported=unsupported,this.i18n=null,this._pureFunctionSlots=0,this._bindingSlots=0,this._ngContentReservedSlots=[],this._ngContentSelectorsOffset=0,this._implicitReceiverExpr=null,this.visitReference=invalid$1,this.visitVariable=invalid$1,this.visitTextAttribute=invalid$1,this.visitBoundAttribute=invalid$1,this.visitBoundEvent=invalid$1,this._bindingScope=s.nestedScope(S),this.fileBasedI18nSuffix=D.replace(/[^A-Za-z0-9]/g,"_")+"_",this._valueConverter=new ValueConverter(i,()=>this.allocateDataSlot(),i=>this.allocatePureFunctionSlots(i),(i,s,S,_)=>{const T=k.get(i);T&&this.pipes.add(T),this._bindingScope.set(this.level,s,_),this.creationInstruction(null,Identifiers$1.pipe,[literal(S),literal(i)])})}buildTemplateFunction(i,s,S=0,_){this._ngContentSelectorsOffset=S,this._namespace!==Identifiers$1.namespaceHTML&&this.creationInstruction(null,this._namespace),s.forEach(i=>this.registerContextVariables(i));const T=this.i18nContext||isI18nRootNode(_)&&!isSingleI18nIcu(_)&&!(function isSingleElementTemplate(i){return 1===i.length&&i[0]instanceof Element}(i)&&i[0].i18n===_),A=hasTextChildrenOnly(i);if(T&&this.i18nStart(null,_,A),visitAll(this,i),this._pureFunctionSlots+=this._bindingSlots,this._valueConverter.updatePipeSlotOffsets(this._bindingSlots),this._nestedTemplateFns.forEach(i=>i()),0===this.level&&this._ngContentReservedSlots.length){const i=[];if(this._ngContentReservedSlots.length>1||"*"!==this._ngContentReservedSlots[0]){const s=this._ngContentReservedSlots.map(i=>"*"!==i?parseSelectorToR3Selector(i):i);i.push(this.constantPool.getConstLiteral(asLiteral(s),!0))}this.creationInstruction(null,Identifiers$1.projectionDef,i,!0)}T&&this.i18nEnd(null,A);const P=this._creationCodeFns.map(i=>i()),N=this._updateCodeFns.map(i=>i()),M=this._bindingScope.viewSnapshotStatements(),k=this._bindingScope.variableDeclarations().concat(this._tempVariables),R=P.length>0?[renderFlagCheckIfStmt(1,M.concat(P))]:[],F=N.length>0?[renderFlagCheckIfStmt(2,k.concat(N))]:[];return fn([new FnParam("rf",fe),new FnParam("ctx",null)],[...this._prefixCode,...R,...F],he,null,this.templateName)}getLocal(i){return this._bindingScope.get(i)}notifyImplicitReceiverUse(){this._bindingScope.notifyImplicitReceiverUse()}i18nTranslate(i,s={},S,_){const T=S||this.i18nGenerateMainBlockVar(),A=function getTranslationDeclStmts(i,s,S,_={},T){const A=[declareI18nVariable(s),ifStmt(createClosureModeGuard(),createGoogleGetMsgStatements(s,i,S,i18nFormatPlaceholderNames(_,!0)),createLocalizeStatements(s,i,i18nFormatPlaceholderNames(_,!1)))];T&&A.push(new ExpressionStatement(s.set(T(s))));return A}(i,T,this.i18nGenerateClosureVar(i.id),s,_);return this._constants.prepareStatements.push(...A),T}registerContextVariables(i){const s=this._bindingScope.freshReferenceName(),S=this.level,_=variable(i.name+s);this._bindingScope.set(S,i.name,_,1,(s,T)=>{let A;if(s.bindingLevel===S)A=variable("ctx");else{const i=s.getSharedContextName(S);A=i||generateNextContextExpr(T)}return[_.set(A.prop(i.value||"$implicit")).toConstDecl()]})}i18nAppendBindings(i){i.length>0&&i.forEach(i=>this.i18n.appendBinding(i))}i18nBindProps(i){const s={};return Object.keys(i).forEach(S=>{const _=i[S];if(_ instanceof Text)s[S]=literal(_.value);else{const i=_.value.visit(this._valueConverter);if(this.allocateBindingSlots(i),i instanceof Interpolation){const{strings:_,expressions:T}=i,{id:A,bindings:P}=this.i18n,N=function assembleI18nBoundString(i,s=0,S=0){if(!i.length)return"";let _="";const T=i.length-1;for(let A=0;A<T;A++)_+=`${i[A]}${wrapI18nPlaceholder(s+A,S)}`;return _+=i[T],_}(_,P.size,A);this.i18nAppendBindings(T),s[S]=literal(N)}}}),s}i18nGenerateMainBlockVar(){return variable(this.constantPool.uniqueName("i18n_"))}i18nGenerateClosureVar(i){let s;const S=this.fileBasedI18nSuffix.toUpperCase();if(this.i18nUseExternalIds){const _=getTranslationConstPrefix("EXTERNAL_"),T=this.constantPool.uniqueName(S);s=`${_}${sanitizeIdentifier(i)}$$${T}`}else{const i=getTranslationConstPrefix(S);s=this.constantPool.uniqueName(i)}return variable(s)}i18nUpdateRef(i){const{icus:s,meta:S,isRoot:_,isResolved:T,isEmitted:A}=i;if(_&&T&&!A&&!isSingleI18nIcu(S)){i.isEmitted=!0;const _=i.getSerializedPlaceholders();let T={},A=_.size?placeholdersToParams(_):{};let P;s.size&&s.forEach((i,s)=>{if(1===i.length)A[s]=i[0];else{const S=wrapI18nPlaceholder("I18N_EXP_"+s);A[s]=literal(S),T[s]=literalArr(i)}}),(Array.from(_.values()).some(i=>i.length>1)||Object.keys(T).length)&&(P=i=>{const s=[i];return Object.keys(T).length&&s.push(mapLiteral(T,!0)),instruction(null,Identifiers$1.i18nPostprocess,s)}),this.i18nTranslate(S,A,i.ref,P)}}i18nStart(i=null,s,S){const _=this.allocateDataSlot();this.i18n=this.i18nContext?this.i18nContext.forkChildContext(_,this.templateIndex,s):new I18nContext(_,this.i18nGenerateMainBlockVar(),0,this.templateIndex,s);const{id:T,ref:A}=this.i18n,P=[literal(_),this.addToConsts(A)];T>0&&P.push(literal(T)),this.creationInstruction(i,S?Identifiers$1.i18n:Identifiers$1.i18nStart,P)}i18nEnd(i=null,s){if(!this.i18n)throw new Error("i18nEnd is executed with no i18n context present");this.i18nContext?(this.i18nContext.reconcileChildContext(this.i18n),this.i18nUpdateRef(this.i18nContext)):this.i18nUpdateRef(this.i18n);const{index:S,bindings:_}=this.i18n;if(_.size){const s=[];_.forEach(S=>{s.push({sourceSpan:i,value:()=>this.convertPropertyBinding(S)})}),this.updateInstructionChainWithAdvance(this.getConstCount()-1,Identifiers$1.i18nExp,s),this.updateInstruction(i,Identifiers$1.i18nApply,[literal(S)])}s||this.creationInstruction(i,Identifiers$1.i18nEnd),this.i18n=null}i18nAttributesInstruction(i,s,S){let _=!1;const T=[],A=[];if(s.forEach(i=>{const s=i.i18n;if(i instanceof TextAttribute)T.push(literal(i.name),this.i18nTranslate(s));else{const P=i.value.visit(this._valueConverter);if(this.allocateBindingSlots(P),P instanceof Interpolation){const N=placeholdersToParams(assembleBoundTextPlaceholders(s));T.push(literal(i.name),this.i18nTranslate(s,N)),P.expressions.forEach(i=>{_=!0,A.push({sourceSpan:S,value:()=>this.convertPropertyBinding(i)})})}}}),A.length>0&&this.updateInstructionChainWithAdvance(i,Identifiers$1.i18nExp,A),T.length>0){const i=literal(this.allocateDataSlot()),s=this.addToConsts(literalArr(T));this.creationInstruction(S,Identifiers$1.i18nAttributes,[i,s]),_&&this.updateInstruction(S,Identifiers$1.i18nApply,[i])}}getNamespaceInstruction(i){switch(i){case"math":return Identifiers$1.namespaceMathML;case"svg":return Identifiers$1.namespaceSVG;default:return Identifiers$1.namespaceHTML}}addNamespaceInstruction(i,s){this._namespace=i,this.creationInstruction(s.sourceSpan,i)}interpolatedUpdateInstruction(i,s,S,_,T,A){this.updateInstructionWithAdvance(s,_.sourceSpan,i,()=>[literal(S),...this.getUpdateInstructionArguments(T),...A])}visitContent(i){const s=this.allocateDataSlot(),S=this._ngContentSelectorsOffset+this._ngContentReservedSlots.length,_=[literal(s)];this._ngContentReservedSlots.push(i.selector);const T=i.attributes.filter(i=>"select"!==i.name.toLowerCase()),A=this.getAttributeExpressions(T,[],[]);A.length>0?_.push(literal(S),literalArr(A)):0!==S&&_.push(literal(S)),this.creationInstruction(i.sourceSpan,Identifiers$1.projection,_),this.i18n&&this.i18n.appendProjection(i.i18n,s)}visitElement(i){const s=this.allocateDataSlot(),S=new StylingBuilder(null);let _=!1;const T=isI18nRootNode(i.i18n)&&!isSingleI18nIcu(i.i18n),A=[],P=[],[N,M]=splitNsName(i.name),k=isNgContainer(i.name);for(const s of i.attributes){const{name:i,value:T}=s;"ngNonBindable"===i?_=!0:"style"===i?S.registerStyleAttr(T):"class"===i?S.registerClassAttr(T):(s.i18n?A:P).push(s)}this.matchDirectives(i.name,i);const R=[literal(s)];k||R.push(literal(M));const F=[];i.inputs.forEach(i=>{S.registerBoundInput(i)||(0===i.type&&i.i18n?A.push(i):F.push(i))});const D=this.getAttributeExpressions(P,F,i.outputs,S,[],A);R.push(this.addAttrsToConsts(D));const L=this.prepareRefsArray(i.references);R.push(this.addToConsts(L));const $=this._namespace,V=this.getNamespaceInstruction(N);V!==$&&this.addNamespaceInstruction(V,i),this.i18n&&this.i18n.appendElement(i.i18n,s);const U=!T&&this.i18n?!hasTextChildrenOnly(i.children):i.children.length>0,W=!S.hasBindingsWithPipes&&0===i.outputs.length&&0===A.length&&!U,z=!W&&hasTextChildrenOnly(i.children);if(W)this.creationInstruction(i.sourceSpan,k?Identifiers$1.elementContainer:Identifiers$1.element,trimTrailingNulls(R));else{if(this.creationInstruction(i.sourceSpan,k?Identifiers$1.elementContainerStart:Identifiers$1.elementStart,trimTrailingNulls(R)),_&&this.creationInstruction(i.sourceSpan,Identifiers$1.disableBindings),A.length>0&&this.i18nAttributesInstruction(s,A,i.sourceSpan),i.outputs.length>0){const S=i.outputs.map(S=>({sourceSpan:S.sourceSpan,params:this.prepareListenerParameter(i.name,S,s)}));this.creationInstructionChain(Identifiers$1.listener,S)}T&&this.i18nStart(i.sourceSpan,i.i18n,z)}const H=S.buildUpdateLevelInstructions(this._valueConverter),q=H.length-1;for(let i=0;i<=q;i++){const S=H[i];this._bindingSlots+=this.processStylingUpdateInstruction(s,S)}const K=literal(void 0),G=[],X=[];if(F.forEach(i=>{const S=i.type;if(4===S){const s=i.value.visit(this._valueConverter),S=!(s instanceof LiteralPrimitive)||!!s.value;this.allocateBindingSlots(s),G.push({name:prepareSyntheticPropertyName(i.name),sourceSpan:i.sourceSpan,value:()=>S?this.convertPropertyBinding(s):K})}else{if(i.i18n)return;const _=i.value.visit(this._valueConverter);if(void 0!==_){const T=[],[A,P]=splitNsName(i.name),N=1===S,M=resolveSanitizationFn(i.securityContext,N);if(M&&T.push(M),A){const i=literal(A);M?T.push(i):T.push(literal(null),i)}if(this.allocateBindingSlots(_),0===S)_ instanceof Interpolation?this.interpolatedUpdateInstruction(getPropertyInterpolationExpression(_),s,P,i,_,T):G.push({name:P,sourceSpan:i.sourceSpan,value:()=>this.convertPropertyBinding(_),params:T});else if(1===S)if(_ instanceof Interpolation&&getInterpolationArgsLength(_)>1)this.interpolatedUpdateInstruction(function getAttributeInterpolationExpression(i){switch(getInterpolationArgsLength(i)){case 3:return Identifiers$1.attributeInterpolate1;case 5:return Identifiers$1.attributeInterpolate2;case 7:return Identifiers$1.attributeInterpolate3;case 9:return Identifiers$1.attributeInterpolate4;case 11:return Identifiers$1.attributeInterpolate5;case 13:return Identifiers$1.attributeInterpolate6;case 15:return Identifiers$1.attributeInterpolate7;case 17:return Identifiers$1.attributeInterpolate8;default:return Identifiers$1.attributeInterpolateV}}(_),s,P,i,_,T);else{const s=_ instanceof Interpolation?_.expressions[0]:_;X.push({name:P,sourceSpan:i.sourceSpan,value:()=>this.convertPropertyBinding(s),params:T})}else this.updateInstructionWithAdvance(s,i.sourceSpan,Identifiers$1.classProp,()=>[literal(s),literal(P),this.convertPropertyBinding(_),...T])}}}),G.length>0&&this.updateInstructionChainWithAdvance(s,Identifiers$1.property,G),X.length>0&&this.updateInstructionChainWithAdvance(s,Identifiers$1.attribute,X),visitAll(this,i.children),!T&&this.i18n&&this.i18n.appendElement(i.i18n,s,!0),!W){const s=i.endSourceSpan||i.sourceSpan;T&&this.i18nEnd(s,z),_&&this.creationInstruction(s,Identifiers$1.enableBindings),this.creationInstruction(s,k?Identifiers$1.elementContainerEnd:Identifiers$1.elementEnd)}}visitTemplate(i){const s=this.allocateDataSlot();this.i18n&&this.i18n.appendTemplate(i.i18n,s);const S=sanitizeIdentifier(i.tagName||""),_=`${this.contextName}${S?"_"+S:""}_${s}`,T=_+"_Template",A=[literal(s),variable(T),literal(i.tagName?splitNsName(i.tagName)[1]:i.tagName)];this.matchDirectives("ng-template",i);const[P,N]=partitionArray(i.attributes,hasI18nMeta),M=this.getAttributeExpressions(N,i.inputs,i.outputs,void 0,i.templateAttrs,P);if(A.push(this.addAttrsToConsts(M)),i.references&&i.references.length){const s=this.prepareRefsArray(i.references);A.push(this.addToConsts(s)),A.push(importExpr(Identifiers$1.templateRefExtractor))}const k=new TemplateDefinitionBuilder(this.constantPool,this._bindingScope,this.level+1,_,this.i18n,s,T,this.directiveMatcher,this.directives,this.pipeTypeByName,this.pipes,this._namespace,this.fileBasedI18nSuffix,this.i18nUseExternalIds,this._constants);if(this._nestedTemplateFns.push(()=>{const s=k.buildTemplateFunction(i.children,i.variables,this._ngContentReservedSlots.length+this._ngContentSelectorsOffset,i.i18n);this.constantPool.statements.push(s.toDeclStmt(T)),k._ngContentReservedSlots.length&&this._ngContentReservedSlots.push(...k._ngContentReservedSlots)}),this.creationInstruction(i.sourceSpan,Identifiers$1.templateCreate,()=>(A.splice(2,0,literal(k.getConstCount()),literal(k.getVarCount())),trimTrailingNulls(A))),this.templatePropertyBindings(s,i.templateAttrs),"ng-template"===i.tagName){const[S,_]=partitionArray(i.inputs,hasI18nMeta),T=[...P,...S];if(T.length>0&&this.i18nAttributesInstruction(s,T,i.sourceSpan),_.length>0&&this.templatePropertyBindings(s,_),i.outputs.length>0){const S=i.outputs.map(i=>({sourceSpan:i.sourceSpan,params:this.prepareListenerParameter("ng_template",i,s)}));this.creationInstructionChain(Identifiers$1.listener,S)}}}visitBoundText(i){if(this.i18n){const s=i.value.visit(this._valueConverter);return this.allocateBindingSlots(s),void(s instanceof Interpolation&&(this.i18n.appendBoundText(i.i18n),this.i18nAppendBindings(s.expressions)))}const s=this.allocateDataSlot();this.creationInstruction(i.sourceSpan,Identifiers$1.text,[literal(s)]);const S=i.value.visit(this._valueConverter);this.allocateBindingSlots(S),S instanceof Interpolation?this.updateInstructionWithAdvance(s,i.sourceSpan,function getTextInterpolationExpression(i){switch(getInterpolationArgsLength(i)){case 1:return Identifiers$1.textInterpolate;case 3:return Identifiers$1.textInterpolate1;case 5:return Identifiers$1.textInterpolate2;case 7:return Identifiers$1.textInterpolate3;case 9:return Identifiers$1.textInterpolate4;case 11:return Identifiers$1.textInterpolate5;case 13:return Identifiers$1.textInterpolate6;case 15:return Identifiers$1.textInterpolate7;case 17:return Identifiers$1.textInterpolate8;default:return Identifiers$1.textInterpolateV}}(S),()=>this.getUpdateInstructionArguments(S)):error("Text nodes should be interpolated and never bound directly.")}visitText(i){this.i18n||this.creationInstruction(i.sourceSpan,Identifiers$1.text,[literal(this.allocateDataSlot()),literal(i.value)])}visitIcu(i){let s=!1;this.i18n||(s=!0,this.i18nStart(null,i.i18n,!0));const S=this.i18n,_=this.i18nBindProps(i.vars),T=this.i18nBindProps(i.placeholders),A=i.i18n,transformFn=i=>{const s=i18nFormatPlaceholderNames(Object.assign(Object.assign({},_),T),!1);return instruction(null,Identifiers$1.i18nPostprocess,[i,mapLiteral(s,!0)])};if(isSingleI18nIcu(S.meta))this.i18nTranslate(A,{},S.ref,transformFn);else{const i=this.i18nTranslate(A,{},void 0,transformFn);S.appendIcu(icuFromI18nMessage(A).name,i)}return s&&this.i18nEnd(null,!0),null}allocateDataSlot(){return this._dataIndex++}getConstCount(){return this._dataIndex}getVarCount(){return this._pureFunctionSlots}getConsts(){return this._constants}getNgContentSelectors(){return this._ngContentReservedSlots.length?this.constantPool.getConstLiteral(asLiteral(this._ngContentReservedSlots),!0):null}bindingContext(){return""+this._bindingContext++}templatePropertyBindings(i,s){const S=[];s.forEach(s=>{if(s instanceof BoundAttribute){const _=s.value.visit(this._valueConverter);if(void 0!==_)if(this.allocateBindingSlots(_),_ instanceof Interpolation){const S=[];this.interpolatedUpdateInstruction(getPropertyInterpolationExpression(_),i,s.name,s,_,S)}else S.push({name:s.name,sourceSpan:s.sourceSpan,value:()=>this.convertPropertyBinding(_)})}}),S.length>0&&this.updateInstructionChainWithAdvance(i,Identifiers$1.property,S)}instructionFn(i,s,S,_,T=!1){i[T?"unshift":"push"](()=>{const i=Array.isArray(_)?_:_();return instruction(s,S,i).toStmt()})}processStylingUpdateInstruction(i,s){let S=0;if(s){const _=[];s.calls.forEach(i=>{S+=i.allocateBindingSlots,_.push({sourceSpan:i.sourceSpan,value:()=>i.params(s=>i.supportsInterpolation&&s instanceof Interpolation?this.getUpdateInstructionArguments(s):this.convertPropertyBinding(s))})}),this.updateInstructionChainWithAdvance(i,s.reference,_)}return S}creationInstruction(i,s,S,_){this.instructionFn(this._creationCodeFns,i,s,S||[],_)}creationInstructionChain(i,s){const S=s.length?s[0].sourceSpan:null;this._creationCodeFns.push(()=>chainedInstruction(i,s.map(i=>i.params()),S).toStmt())}updateInstructionWithAdvance(i,s,S,_){this.addAdvanceInstructionIfNecessary(i,s),this.updateInstruction(s,S,_)}updateInstruction(i,s,S){this.instructionFn(this._updateCodeFns,i,s,S||[])}updateInstructionChain(i,s){const S=s.length?s[0].sourceSpan:null;this._updateCodeFns.push(()=>{const _=s.map(i=>{const s=i.value(),S=Array.isArray(s)?s:[s];return i.params&&S.push(...i.params),i.name&&S.unshift(literal(i.name)),S});return chainedInstruction(i,_,S).toStmt()})}updateInstructionChainWithAdvance(i,s,S){this.addAdvanceInstructionIfNecessary(i,S.length?S[0].sourceSpan:null),this.updateInstructionChain(s,S)}addAdvanceInstructionIfNecessary(i,s){if(i!==this._currentIndex){const S=i-this._currentIndex;if(S<1)throw new Error("advance instruction can only go forwards");this.instructionFn(this._updateCodeFns,s,Identifiers$1.advance,[literal(S)]),this._currentIndex=i}}allocatePureFunctionSlots(i){const s=this._pureFunctionSlots;return this._pureFunctionSlots+=i,s}allocateBindingSlots(i){this._bindingSlots+=i instanceof Interpolation?i.expressions.length:1}getImplicitReceiverExpr(){return this._implicitReceiverExpr?this._implicitReceiverExpr:this._implicitReceiverExpr=0===this.level?variable("ctx"):this._bindingScope.getOrCreateSharedContextVar(0)}convertPropertyBinding(i){const s=convertPropertyBinding(this,this.getImplicitReceiverExpr(),i,this.bindingContext(),vt.Expression,()=>error("Unexpected interpolation")),S=s.currValExpr;return this._tempVariables.push(...s.stmts),S}getUpdateInstructionArguments(i){const{args:s,stmts:S}=function convertUpdateArguments(i,s,S,_){const T=new _AstToIrVisitor(i,s,_,void 0),A=S.visit(T,gt.Expression);T.usesImplicitReceiver&&i.notifyImplicitReceiverUse();const P=getStatementsFromVisitor(T,_);let N=A.args.slice(1);if(S instanceof Interpolation){const i=S.strings;3===N.length&&""===i[0]&&""===i[1]?N=[N[1]]:N.length>=19&&(N=[literalArr(N)])}return{stmts:P,args:N}}(this,this.getImplicitReceiverExpr(),i,this.bindingContext());return this._tempVariables.push(...S),s}matchDirectives(i,s){if(this.directiveMatcher){const S=createCssSelector(i,getAttrsForDirectiveMatching(s));this.directiveMatcher.match(S,(i,s)=>{this.directives.add(s)})}}getAttributeExpressions(i,s,S,_,T=[],A=[]){const P=new Set,N=[];let M;function addAttrExpr(i,s){"string"==typeof i?P.has(i)||(N.push(...getAttributeNameLiterals(i)),void 0!==s&&N.push(s),P.add(i)):N.push(literal(i))}if(i.forEach(i=>{"ngProjectAs"===i.name&&(M=i),N.push(...getAttributeNameLiterals(i.name),asLiteral(i.value))}),M&&N.push(...function getNgProjectAsLiteral(i){const s=parseSelectorToR3Selector(i.value)[0];return[literal(5),asLiteral(s)]}(M)),_&&_.populateInitialStylingAttrs(N),s.length||S.length){const i=N.length;for(let i=0;i<s.length;i++){const S=s[i];4!==S.type&&1!==S.type&&addAttrExpr(S.name)}for(let i=0;i<S.length;i++){const s=S[i];1!==s.type&&addAttrExpr(s.name)}N.length!==i&&N.splice(i,0,literal(3))}return T.length&&(N.push(literal(4)),T.forEach(i=>addAttrExpr(i.name))),A.length&&(N.push(literal(6)),A.forEach(i=>addAttrExpr(i.name))),N}addToConsts(i){if(isNull(i))return Le;const s=this._constants.constExpressions;for(let S=0;S<s.length;S++)if(s[S].isEquivalent(i))return literal(S);return literal(s.push(i)-1)}addAttrsToConsts(i){return i.length>0?this.addToConsts(literalArr(i)):Le}prepareRefsArray(i){if(!i||0===i.length)return Le;return asLiteral(flatten(i.map(i=>{const s=this.allocateDataSlot(),S=this._bindingScope.freshReferenceName(),_=this.level,T=variable(S);return this._bindingScope.set(_,i.name,T,0,(i,S)=>{const _=S>0?[generateNextContextExpr(S).toStmt()]:[],A=T.set(importExpr(Identifiers$1.reference).callFn([literal(s)]));return _.concat(A.toConstDecl())},!0),[i.name,i.value]})))}prepareListenerParameter(i,s,S){return()=>{const _=s.name,T=1===s.type?prepareSyntheticListenerFunctionName(_,s.phase):sanitizeIdentifier(_),A=`${this.templateName}_${i}_${T}_${S}_listener`,P=this._bindingScope.nestedScope(this._bindingScope.bindingLevel);return prepareEventListenerParameters(s,A,P)}}}class ValueConverter extends AstMemoryEfficientTransformer{constructor(i,s,S,_){super(),this.constantPool=i,this.allocateSlot=s,this.allocatePureFunctionSlots=S,this.definePipe=_,this._pipeBindExprs=[]}visitPipe(i,s){const S=this.allocateSlot(),_="PIPE:"+S,T=this.allocatePureFunctionSlots(2+i.args.length),A=new PropertyRead(i.span,i.sourceSpan,i.nameSpan,new ImplicitReceiver(i.span,i.sourceSpan),_),{identifier:P,isVarLength:N}=function pipeBindingCallInfo(i){const s=_r[i.length];return{identifier:s||Identifiers$1.pipeBindV,isVarLength:!s}}(i.args);this.definePipe(i.name,_,S,importExpr(P));const M=[i.exp,...i.args],k=N?this.visitAll([new LiteralArray(i.span,i.sourceSpan,M)]):this.visitAll(M),R=new FunctionCall(i.span,i.sourceSpan,A,[new LiteralPrimitive(i.span,i.sourceSpan,S),new LiteralPrimitive(i.span,i.sourceSpan,T),...k]);return this._pipeBindExprs.push(R),R}updatePipeSlotOffsets(i){this._pipeBindExprs.forEach(s=>{s.args[1].value+=i})}visitLiteralArray(i,s){return new BuiltinFunctionCall(i.span,i.sourceSpan,this.visitAll(i.expressions),i=>{const s=literalArr(i);return getLiteralFactory(this.constantPool,s,this.allocatePureFunctionSlots)})}visitLiteralMap(i,s){return new BuiltinFunctionCall(i.span,i.sourceSpan,this.visitAll(i.values),s=>{const S=literalMap(s.map((s,S)=>({key:i.keys[S].key,value:s,quoted:i.keys[S].quoted})));return getLiteralFactory(this.constantPool,S,this.allocatePureFunctionSlots)})}}const _r=[Identifiers$1.pipeBind1,Identifiers$1.pipeBind2,Identifiers$1.pipeBind3,Identifiers$1.pipeBind4];const xr=[Identifiers$1.pureFunction0,Identifiers$1.pureFunction1,Identifiers$1.pureFunction2,Identifiers$1.pureFunction3,Identifiers$1.pureFunction4,Identifiers$1.pureFunction5,Identifiers$1.pureFunction6,Identifiers$1.pureFunction7,Identifiers$1.pureFunction8];function instruction(i,s,S){return importExpr(s,null,i).callFn(S,i)}function generateNextContextExpr(i){return importExpr(Identifiers$1.nextContext).callFn(i>1?[literal(i)]:[])}function getLiteralFactory(i,s,S){const{literalFactory:_,literalFactoryArguments:T}=i.getLiteralFactory(s),A=S(1+T.length),{identifier:P,isVarLength:N}=function pureFunctionCallInfo(i){const s=xr[i.length];return{identifier:s||Identifiers$1.pureFunctionV,isVarLength:!s}}(T),M=[literal(A),_];return N?M.push(literalArr(T)):M.push(...T),importExpr(P).callFn(M)}function getAttributeNameLiterals(i){const[s,S]=splitNsName(i),_=literal(S);return s?[literal(0),literal(s),_]:[_]}class BindingScope{constructor(i=0,s=null){this.bindingLevel=i,this.parent=s,this.map=new Map,this.referenceNameIndex=0,this.restoreViewVariable=null}static createRootScope(){return(new BindingScope).set(0,"$event",variable("$event"))}get(i){let s=this;for(;s;){let S=s.map.get(i);if(null!=S)return s!==this&&(S={retrievalLevel:S.retrievalLevel,lhs:S.lhs,declareLocalCallback:S.declareLocalCallback,declare:!1,priority:S.priority,localRef:S.localRef},this.map.set(i,S),this.maybeGenerateSharedContextVar(S),this.maybeRestoreView(S.retrievalLevel,S.localRef)),S.declareLocalCallback&&!S.declare&&(S.declare=!0),S.lhs;s=s.parent}return 0===this.bindingLevel?null:this.getComponentProperty(i)}set(i,s,S,_=0,T,A){if(this.map.has(s)){if(A)return this;error(`The name ${s} is already defined in scope to be ${this.map.get(s)}`)}return this.map.set(s,{retrievalLevel:i,lhs:S,declare:!1,declareLocalCallback:T,priority:_,localRef:A||!1}),this}getLocal(i){return this.get(i)}notifyImplicitReceiverUse(){0!==this.bindingLevel&&(this.map.get("$$shared_ctx$$0").declare=!0)}nestedScope(i){const s=new BindingScope(i,this);return i>0&&s.generateSharedContextVar(0),s}getOrCreateSharedContextVar(i){const s="$$shared_ctx$$"+i;return this.map.has(s)||this.generateSharedContextVar(i),this.map.get(s).lhs}getSharedContextName(i){const s=this.map.get("$$shared_ctx$$"+i);return s&&s.declare?s.lhs:null}maybeGenerateSharedContextVar(i){if(1===i.priority&&i.retrievalLevel<this.bindingLevel){const s=this.map.get("$$shared_ctx$$"+i.retrievalLevel);s?s.declare=!0:this.generateSharedContextVar(i.retrievalLevel)}}generateSharedContextVar(i){const s=variable("ctx"+this.freshReferenceName());this.map.set("$$shared_ctx$$"+i,{retrievalLevel:i,lhs:s,declareLocalCallback:(i,S)=>[s.set(generateNextContextExpr(S)).toConstDecl()],declare:!1,priority:2,localRef:!1})}getComponentProperty(i){const s=this.map.get("$$shared_ctx$$0");return s.declare=!0,this.maybeRestoreView(0,!1),s.lhs.prop(i)}maybeRestoreView(i,s){this.isListenerScope()&&(i<this.bindingLevel||s)&&(this.parent.restoreViewVariable||(this.parent.restoreViewVariable=variable(this.parent.freshReferenceName())),this.restoreViewVariable=this.parent.restoreViewVariable)}restoreViewStatement(){return this.restoreViewVariable?[instruction(null,Identifiers$1.restoreView,[this.restoreViewVariable]).toStmt()]:[]}viewSnapshotStatements(){const i=instruction(null,Identifiers$1.getCurrentView,[]);return this.restoreViewVariable?[this.restoreViewVariable.set(i).toConstDecl()]:[]}isListenerScope(){return this.parent&&this.parent.bindingLevel===this.bindingLevel}variableDeclarations(){let i=0;return Array.from(this.map.values()).filter(i=>i.declare).sort((i,s)=>s.retrievalLevel-i.retrievalLevel||s.priority-i.priority).reduce((s,S)=>{const _=this.bindingLevel-S.retrievalLevel,T=S.declareLocalCallback(this,_-i);return i=_,s.concat(T)},[])}freshReferenceName(){let i=this;for(;i.parent;)i=i.parent;return"_r"+i.referenceNameIndex++}}function createCssSelector(i,s){const S=new CssSelector,_=splitNsName(i)[1];return S.setElement(_),Object.getOwnPropertyNames(s).forEach(i=>{const _=splitNsName(i)[1],T=s[i];if(S.addAttribute(_,T),"class"===i.toLowerCase()){T.trim().split(/\s+/).forEach(i=>S.addClassName(i))}}),S}function getPropertyInterpolationExpression(i){switch(getInterpolationArgsLength(i)){case 1:return Identifiers$1.propertyInterpolate;case 3:return Identifiers$1.propertyInterpolate1;case 5:return Identifiers$1.propertyInterpolate2;case 7:return Identifiers$1.propertyInterpolate3;case 9:return Identifiers$1.propertyInterpolate4;case 11:return Identifiers$1.propertyInterpolate5;case 13:return Identifiers$1.propertyInterpolate6;case 15:return Identifiers$1.propertyInterpolate7;case 17:return Identifiers$1.propertyInterpolate8;default:return Identifiers$1.propertyInterpolateV}}function parseTemplate(i,s,S={}){const{interpolationConfig:_,preserveWhitespaces:T,enableI18nLegacyMessageIdFormat:A}=S,P=makeBindingParser(_),N=(new HtmlParser).parse(i,s,Object.assign(Object.assign({leadingTriviaChars:Sr},S),{tokenizeExpansionForms:!0}));if(N.errors&&N.errors.length>0)return{errors:N.errors,nodes:[],styleUrls:[],styles:[],ngContentSelectors:[]};let M=N.rootNodes;const k=new I18nMetaVisitor(_,!T,A);M=visitAll$1(k,M),T||(M=visitAll$1(new WhitespaceVisitor,M),k.hasI18nMeta&&(M=visitAll$1(new I18nMetaVisitor(_,!1),M)));const{nodes:R,errors:F,styleUrls:D,styles:L,ngContentSelectors:$}=htmlAstToRender3Ast(M,P);return F&&F.length>0?{errors:F,nodes:[],styleUrls:[],styles:[],ngContentSelectors:[]}:{nodes:R,styleUrls:D,styles:L,ngContentSelectors:$}}const br=new DomElementSchemaRegistry;function makeBindingParser(i=ut){return new BindingParser(new IvyParser(new Lexer),i,br,null,[])}function resolveSanitizationFn(i,s){switch(i){case ae.HTML:return importExpr(Identifiers$1.sanitizeHtml);case ae.SCRIPT:return importExpr(Identifiers$1.sanitizeScript);case ae.STYLE:return s?importExpr(Identifiers$1.sanitizeStyle):null;case ae.URL:return importExpr(Identifiers$1.sanitizeUrl);case ae.RESOURCE_URL:return importExpr(Identifiers$1.sanitizeResourceUrl);default:return null}}function isTextNode(i){return i instanceof Text||i instanceof BoundText||i instanceof Icu}function hasTextChildrenOnly(i){return i.every(isTextNode)}function createClosureModeGuard(){return typeofExpr(variable("ngI18nClosureMode")).notIdentical(literal("undefined",ye)).and(variable("ngI18nClosureMode"))}const Cr=[],wr=/attr\.([^\]]+)/;function baseDirectiveFields(i,s,S){const _=new DefinitionMap,T=parseSelectorToR3Selector(i.selector);return _.set("type",i.internalType),T.length>0&&_.set("selectors",asLiteral(T)),i.queries.length>0&&_.set("contentQueries",function createContentQueriesFunction(i,s,S){const _=[],T=[],A=temporaryAllocator(T,"_t");for(const S of i){const i=S.static?Identifiers$1.staticContentQuery:Identifiers$1.contentQuery;_.push(importExpr(i).callFn([variable("dirIndex"),...prepareQueryParams(S,s)]).toStmt());const P=A(),N=importExpr(Identifiers$1.loadQuery).callFn([]),M=importExpr(Identifiers$1.queryRefresh).callFn([P.set(N)]),k=variable("ctx").prop(S.propertyName).set(S.first?P.prop("first"):P);T.push(M.and(k).toStmt())}const P=S?S+"_ContentQueries":null;return fn([new FnParam("rf",fe),new FnParam("ctx",null),new FnParam("dirIndex",null)],[renderFlagCheckIfStmt(1,_),renderFlagCheckIfStmt(2,T)],he,null,P)}(i.queries,s,i.name)),i.viewQueries.length&&_.set("viewQuery",function createViewQueriesFunction(i,s,S){const _=[],T=[],A=temporaryAllocator(T,"_t");i.forEach(i=>{const S=importExpr(i.static?Identifiers$1.staticViewQuery:Identifiers$1.viewQuery).callFn(prepareQueryParams(i,s));_.push(S.toStmt());const P=A(),N=importExpr(Identifiers$1.loadQuery).callFn([]),M=importExpr(Identifiers$1.queryRefresh).callFn([P.set(N)]),k=variable("ctx").prop(i.propertyName).set(i.first?P.prop("first"):P);T.push(M.and(k).toStmt())});const P=S?S+"_Query":null;return fn([new FnParam("rf",fe),new FnParam("ctx",null)],[renderFlagCheckIfStmt(1,_),renderFlagCheckIfStmt(2,T)],he,null,P)}(i.viewQueries,s,i.name)),_.set("hostBindings",function createHostBindingsFunction(i,s,S,_,T,A,P){const N=variable("ctx"),M=new StylingBuilder(N),{styleAttr:k,classAttr:R}=i.specialAttributes;void 0!==k&&M.registerStyleAttr(k);void 0!==R&&M.registerClassAttr(R);const F=[],D=[],L=s,$=metadataAsSummary(i),V=S.createDirectiveHostEventAsts($,L);if(V&&V.length){const i=function createHostListeners(i,s){const S=[],_=[],T=[];i.forEach(i=>{let T=i.name&&sanitizeIdentifier(i.name);const A=1===i.type?prepareSyntheticListenerFunctionName(T,i.targetOrPhase):T,P=s&&T?`${s}_${A}_HostBindingHandler`:null,N=prepareEventListenerParameters(BoundEvent.fromParsedEvent(i),P);1==i.type?_.push(N):S.push(N)}),_.length>0&&T.push(chainedInstruction(Identifiers$1.syntheticHostListener,_).toStmt());S.length>0&&T.push(chainedInstruction(Identifiers$1.listener,S).toStmt());return T}(V,A);F.push(...i)}const U=S.createBoundHostProperties($,L),W=[];let z,H=0;U&&U.forEach(i=>{const s=i.name;M.registerInputBasedOnName(s,i.expression,i.sourceSpan)?H+=2:(W.push(i),H++)});const getValueConverter=()=>{if(!z){z=new ValueConverter(_,()=>error("Unexpected node"),i=>{const s=H;return H+=i,s},()=>error("Unexpected pipe"))}return z},q=[],K=[],G=[];W.forEach(i=>{const s=i.expression.visit(getValueConverter()),_=bindingFn(N,s),{bindingName:A,instruction:P,isAttribute:M}=function getBindingNameAndInstruction(i){let s,S=i.name;const _=S.match(wr);_?(S=_[1],s=Identifiers$1.attribute):i.isAnimation?(S=prepareSyntheticPropertyName(S),s=Identifiers$1.syntheticHostProperty):s=Identifiers$1.hostProperty;return{bindingName:S,instruction:s,isAttribute:!!_}}(i),k=S.calcPossibleSecurityContexts(T,A,M).filter(i=>i!==ae.NONE);let R=null;k.length&&(R=2===k.length&&k.indexOf(ae.URL)>-1&&k.indexOf(ae.RESOURCE_URL)>-1?importExpr(Identifiers$1.sanitizeUrlOrResourceUrl):resolveSanitizationFn(k[0],M));const F=[literal(A),_.currValExpr];R&&F.push(R),D.push(..._.stmts),P===Identifiers$1.hostProperty?q.push(F):P===Identifiers$1.attribute?K.push(F):P===Identifiers$1.syntheticHostProperty?G.push(F):D.push(importExpr(P).callFn(F).toStmt())}),q.length>0&&D.push(chainedInstruction(Identifiers$1.hostProperty,q).toStmt());K.length>0&&D.push(chainedInstruction(Identifiers$1.attribute,K).toStmt());G.length>0&&D.push(chainedInstruction(Identifiers$1.syntheticHostProperty,G).toStmt());const X=function convertAttributesToExpressions(i){const s=[];for(let S of Object.getOwnPropertyNames(i)){const _=i[S];s.push(literal(S),_)}return s}(i.attributes);M.assignHostAttrs(X,P),M.hasBindings&&M.buildUpdateLevelInstructions(getValueConverter()).forEach(i=>{if(i.calls.length>0){const s=[];i.calls.forEach(i=>{H+=Math.max(i.allocateBindingSlots-2,0),s.push(function convertStylingCall(i,s,S){return i.params(i=>S(s,i).currValExpr)}(i,N,bindingFn))}),D.push(chainedInstruction(i.reference,s).toStmt())}});H&&P.set("hostVars",literal(H));if(F.length>0||D.length>0){const i=A?A+"_HostBindings":null,s=[];return F.length>0&&s.push(renderFlagCheckIfStmt(1,F)),D.length>0&&s.push(renderFlagCheckIfStmt(2,D)),fn([new FnParam("rf",fe),new FnParam("ctx",null)],s,he,null,i)}return null}(i.host,i.typeSourceSpan,S,s,i.selector||"",i.name,_)),_.set("inputs",conditionallyCreateMapObjectLiteral(i.inputs,!0)),_.set("outputs",conditionallyCreateMapObjectLiteral(i.outputs)),null!==i.exportAs&&_.set("exportAs",literalArr(i.exportAs.map(i=>literal(i)))),_}function addFeatures(i,s){const S=[],_=s.providers,T=s.viewProviders;if(_||T){const i=[_||new LiteralArrayExpr([])];T&&i.push(T),S.push(importExpr(Identifiers$1.ProvidersFeature).callFn(i))}s.usesInheritance&&S.push(importExpr(Identifiers$1.InheritDefinitionFeature)),s.fullInheritance&&S.push(importExpr(Identifiers$1.CopyDefinitionFeature)),s.lifecycle.usesOnChanges&&S.push(importExpr(Identifiers$1.NgOnChangesFeature)),S.length&&i.set("features",literalArr(S))}function compileDirectiveFromMetadata(i,s,S){const _=baseDirectiveFields(i,s,S);addFeatures(_,i);const T=importExpr(Identifiers$1.defineDirective).callFn([_.toLiteralMap()]),A=createDirectiveTypeParams(i);return{expression:T,type:expressionType(importExpr(Identifiers$1.DirectiveDefWithMeta,A))}}function compileComponentFromMetadata(i,s,S){const _=baseDirectiveFields(i,s,S);addFeatures(_,i);const T=i.selector&&CssSelector.parse(i.selector),A=T&&T[0];if(A){const i=A.getAttrs();i.length&&_.set("attrs",s.getConstLiteral(literalArr(i.map(i=>literal(null!=i?i:void 0))),!0))}let P=null;if(i.directives.length>0){const s=new SelectorMatcher;for(const{selector:S,expression:_}of i.directives)s.addSelectables(CssSelector.parse(S),_);P=s}const N=i.name,M=N?N+"_Template":null,k=new Set,R=new Set,F=i.changeDetection,D=i.template,L=new TemplateDefinitionBuilder(s,BindingScope.createRootScope(),0,N,null,null,M,P,k,i.pipes,R,Identifiers$1.namespaceHTML,i.relativeContextFilePath,i.i18nUseExternalIds),$=L.buildTemplateFunction(D.nodes,[]),V=L.getNgContentSelectors();V&&_.set("ngContentSelectors",V),_.set("decls",literal(L.getConstCount())),_.set("vars",literal(L.getVarCount()));const{constExpressions:U,prepareStatements:H}=L.getConsts();if(U.length>0){let i=literalArr(U);H.length>0&&(i=fn([],[...H,new ReturnStatement(i)])),_.set("consts",i)}if(_.set("template",$),k.size){let s=literalArr(Array.from(k));i.wrapDirectivesAndPipesInClosure&&(s=fn([],[new ReturnStatement(s)])),_.set("directives",s)}if(R.size){let s=literalArr(Array.from(R));i.wrapDirectivesAndPipesInClosure&&(s=fn([],[new ReturnStatement(s)])),_.set("pipes",s)}if(null===i.encapsulation&&(i.encapsulation=W.Emulated),i.styles&&i.styles.length){const S=(i.encapsulation==W.Emulated?function compileStyles(i,s,S){const _=new ShadowCss;return i.map(i=>_.shimCssText(i,s,S))}(i.styles,Bt,$t):i.styles).map(i=>s.getConstLiteral(literal(i)));_.set("styles",literalArr(S))}else i.encapsulation===W.Emulated&&(i.encapsulation=W.None);i.encapsulation!==W.Emulated&&_.set("encapsulation",literal(i.encapsulation)),null!==i.animations&&_.set("data",literalMap([{key:"animation",value:i.animations,quoted:!1}])),null!=F&&F!==z.Default&&_.set("changeDetection",literal(F));const q=importExpr(Identifiers$1.defineComponent).callFn([_.toLiteralMap()]),K=createDirectiveTypeParams(i);return K.push(stringArrayAsType(i.template.ngContentSelectors)),{expression:q,type:expressionType(importExpr(Identifiers$1.ComponentDefWithMeta,K))}}function directiveMetadataFromGlobalMetadata(i,s,S){throw new Error("unsupported")}function queriesFromGlobalMetadata(i,s){return i.map(i=>{let S=null;return i.read&&i.read.identifier&&(S=s.importExpr(i.read.identifier.reference)),{propertyName:i.propertyName,first:i.first,predicate:selectorsFromGlobalMetadata(i.selectors,s),descendants:i.descendants,read:S,static:!!i.static}})}function selectorsFromGlobalMetadata(i,s){if(i.length>1||1==i.length&&i[0].value){const S=i.map(i=>i.value);return S.some(i=>!i)&&error("Found a type among the string selectors expected"),s.constantPool.getConstLiteral(literalArr(S.map(i=>literal(i))))}if(1==i.length){const S=i[0];if(S.identifier)return s.importExpr(S.identifier.reference)}return error("Unexpected query form"),Fe}function prepareQueryParams(i,s){const S=[getQueryPredicate(i,s),literal(i.descendants)];return i.read&&S.push(i.read),S}function stringMapAsType(i){return expressionType(literalMap(Object.keys(i).map(s=>({key:s,value:literal(Array.isArray(i[s])?i[s][0]:i[s]),quoted:!0}))))}function stringArrayAsType(i){return i.length>0?expressionType(literalArr(i.map(i=>literal(i)))):Te}function createDirectiveTypeParams(i){const s=null!==i.selector?i.selector.replace(/\n/g,""):null;return[typeWithParameters(i.type.type,i.typeArgumentCount),null!==s?(S=s,expressionType(literal(S))):Te,null!==i.exportAs?stringArrayAsType(i.exportAs):Te,stringMapAsType(i.inputs),stringMapAsType(i.outputs),stringArrayAsType(i.queries.map(i=>i.propertyName))];var S}function bindingFn(i,s){return convertPropertyBinding(null,i,s,"b",vt.Expression,()=>error("Unexpected interpolation"))}function metadataAsSummary(i){return{hostAttributes:{},hostListeners:i.listeners,hostProperties:i.properties}}function typeMapToExpressionMap(i,s){const S=Array.from(i).map(([i,S])=>[i,s.importExpr(S)]);return new Map(S)}const Ir=/^(?:\[([^\]]+)\])|(?:\(([^\)]+)\))$/;function parseHostBindings(i){const s={},S={},_={},T={};for(const A of Object.keys(i)){const P=i[A],N=A.match(Ir);if(null===N)switch(A){case"class":if("string"!=typeof P)throw new Error("Class binding must be string");T.classAttr=P;break;case"style":if("string"!=typeof P)throw new Error("Style binding must be string");T.styleAttr=P;break;default:s[A]="string"==typeof P?literal(P):P}else if(null!=N[1]){if("string"!=typeof P)throw new Error("Property binding must be string");_[N[1]]=P}else if(null!=N[2]){if("string"!=typeof P)throw new Error("Event binding must be string");S[N[2]]=P}}return{attributes:s,listeners:S,properties:_,specialAttributes:T}}function verifyHostBindings(i,s){const S=metadataAsSummary(i),_=makeBindingParser();return _.createDirectiveHostEventAsts(S,s),_.createBoundHostProperties(S,s),_.errors}class ResourceLoader{get(i){return""}}class CompilerFacadeImpl{constructor(i=new JitEvaluator){this.jitEvaluator=i,this.R3ResolvedDependencyType=lt,this.R3FactoryTarget=ot,this.ResourceLoader=ResourceLoader,this.elementSchemaRegistry=new DomElementSchemaRegistry}compilePipe(i,s,S){const _=compilePipeFromMetadata({name:S.name,type:wrapReference$1(S.type),internalType:new WrappedNodeExpr(S.type),typeArgumentCount:S.typeArgumentCount,deps:convertR3DependencyMetadataArray(S.deps),pipeName:S.pipeName,pure:S.pure});return this.jitExpression(_.expression,i,s,[])}compileInjectable(i,s,S){const{expression:_,statements:T}=compileInjectable({name:S.name,type:wrapReference$1(S.type),internalType:new WrappedNodeExpr(S.type),typeArgumentCount:S.typeArgumentCount,providedIn:computeProvidedIn(S.providedIn),useClass:wrapExpression(S,Tr),useFactory:wrapExpression(S,Ar),useValue:wrapExpression(S,Pr),useExisting:wrapExpression(S,Nr),userDeps:convertR3DependencyMetadataArray(S.userDeps)||void 0});return this.jitExpression(_,i,s,T)}compileInjector(i,s,S){const _=compileInjector({name:S.name,type:wrapReference$1(S.type),internalType:new WrappedNodeExpr(S.type),deps:convertR3DependencyMetadataArray(S.deps),providers:new WrappedNodeExpr(S.providers),imports:S.imports.map(i=>new WrappedNodeExpr(i))});return this.jitExpression(_.expression,i,s,_.statements)}compileNgModule(i,s,S){const _=compileNgModule({type:wrapReference$1(S.type),internalType:new WrappedNodeExpr(S.type),adjacentType:new WrappedNodeExpr(S.type),bootstrap:S.bootstrap.map(wrapReference$1),declarations:S.declarations.map(wrapReference$1),imports:S.imports.map(wrapReference$1),exports:S.exports.map(wrapReference$1),emitInline:!0,containsForwardDecls:!1,schemas:S.schemas?S.schemas.map(wrapReference$1):null,id:S.id?new WrappedNodeExpr(S.id):null});return this.jitExpression(_.expression,i,s,[])}compileDirective(i,s,S){const _=new ConstantPool,T=makeBindingParser(),A=compileDirectiveFromMetadata(convertDirectiveFacadeToMetadata(S),_,T);return this.jitExpression(A.expression,i,s,_.statements)}compileComponent(i,s,S){const _=new ConstantPool,T=S.interpolation?InterpolationConfig.fromArray(S.interpolation):ut,A=parseTemplate(S.template,s,{preserveWhitespaces:S.preserveWhitespaces,interpolationConfig:T});if(void 0!==A.errors){const i=A.errors.map(i=>i.toString()).join(", ");throw new Error(`Errors during JIT compilation of template for ${S.name}: ${i}`)}const P=compileComponentFromMetadata(Object.assign(Object.assign(Object.assign({},S),convertDirectiveFacadeToMetadata(S)),{selector:S.selector||this.elementSchemaRegistry.getDefaultComponentElementName(),template:A,wrapDirectivesAndPipesInClosure:!1,styles:[...S.styles,...A.styles],encapsulation:S.encapsulation,interpolation:T,changeDetection:S.changeDetection,animations:null!=S.animations?new WrappedNodeExpr(S.animations):null,viewProviders:null!=S.viewProviders?new WrappedNodeExpr(S.viewProviders):null,relativeContextFilePath:"",i18nUseExternalIds:!0}),_,makeBindingParser(T)),N=`ng:///${S.name}.js`;return this.jitExpression(P.expression,i,N,_.statements)}compileFactory(i,s,S){const _=compileFactoryFunction({name:S.name,type:wrapReference$1(S.type),internalType:new WrappedNodeExpr(S.type),typeArgumentCount:S.typeArgumentCount,deps:convertR3DependencyMetadataArray(S.deps),injectFn:"directiveInject"===S.injectFn?Identifiers.directiveInject:Identifiers.inject,target:S.target});return this.jitExpression(_.factory,i,s,_.statements)}createParseSourceSpan(i,s,S){return r3JitTypeSourceSpan(i,s,S)}jitExpression(i,s,S,_){const T=[..._,new DeclareVarStmt("$def",i,void 0,[$e.Exported])];return this.jitEvaluator.evaluateStatements(S,T,new R3JitReflector(s),!0).$def}}const Tr=Object.keys({useClass:null})[0],Ar=Object.keys({useFactory:null})[0],Pr=Object.keys({useValue:null})[0],Nr=Object.keys({useExisting:null})[0],wrapReference$1=function(i){const s=new WrappedNodeExpr(i);return{value:s,type:s}};function convertToR3QueryMetadata(i){return Object.assign(Object.assign({},i),{predicate:Array.isArray(i.predicate)?i.predicate:new WrappedNodeExpr(i.predicate),read:i.read?new WrappedNodeExpr(i.read):null,static:i.static})}function convertDirectiveFacadeToMetadata(i){const s=parseInputOutputs(i.inputs||[]),S=parseInputOutputs(i.outputs||[]),_=i.propMetadata,T={},A={};for(const i in _)_.hasOwnProperty(i)&&_[i].forEach(s=>{"Input"===s.ngMetadataName?T[i]=s.bindingPropertyName?[s.bindingPropertyName,i]:i:isOutput(s)&&(A[i]=s.bindingPropertyName||i)});return Object.assign(Object.assign({},i),{typeSourceSpan:i.typeSourceSpan,type:wrapReference$1(i.type),internalType:new WrappedNodeExpr(i.type),deps:convertR3DependencyMetadataArray(i.deps),host:extractHostBindings(i.propMetadata,i.typeSourceSpan,i.host),inputs:Object.assign(Object.assign({},s),T),outputs:Object.assign(Object.assign({},S),A),queries:i.queries.map(convertToR3QueryMetadata),providers:null!=i.providers?new WrappedNodeExpr(i.providers):null,viewQueries:i.viewQueries.map(convertToR3QueryMetadata),fullInheritance:!1})}function wrapExpression(i,s){return i.hasOwnProperty(s)?new WrappedNodeExpr(i[s]):void 0}function computeProvidedIn(i){return null==i||"string"==typeof i?new LiteralExpr(i):new WrappedNodeExpr(i)}function convertR3DependencyMetadata(i){let s;return s=null===i.token?new LiteralExpr(null):i.resolved===lt.Attribute?new LiteralExpr(i.token):new WrappedNodeExpr(i.token),{token:s,attribute:null,resolved:i.resolved,host:i.host,optional:i.optional,self:i.self,skipSelf:i.skipSelf}}function convertR3DependencyMetadataArray(i){return null==i?null:i.map(convertR3DependencyMetadata)}function extractHostBindings(i,s,S){const _=parseHostBindings(S||{}),T=verifyHostBindings(_,s);if(T.length)throw new Error(T.map(i=>i.msg).join("\n"));for(const s in i)i.hasOwnProperty(s)&&i[s].forEach(i=>{"HostBinding"===i.ngMetadataName?_.properties[i.hostPropertyName||s]=s:isHostListener(i)&&(_.listeners[i.eventName||s]=`${s}(${(i.args||[]).join(",")})`)});return _}function isHostListener(i){return"HostListener"===i.ngMetadataName}function isOutput(i){return"Output"===i.ngMetadataName}function parseInputOutputs(i){return i.reduce((i,s)=>{const[S,_]=s.split(",").map(i=>i.trim());return i[S]=_||S,i},{})}function publishFacade(i){(i.ng||(i.ng={})).ɵcompilerFacade=new CompilerFacadeImpl}const Mr=new Version("10.1.4");class CompilerConfig{constructor({defaultEncapsulation:i=W.Emulated,useJit:s=!0,jitDevMode:S=!1,missingTranslation:_=null,preserveWhitespaces:T,strictInjectionParameters:A}={}){this.defaultEncapsulation=i,this.useJit=!!s,this.jitDevMode=!!S,this.missingTranslation=_,this.preserveWhitespaces=preserveWhitespacesDefault(noUndefined(T)),this.strictInjectionParameters=!0===A}}function preserveWhitespacesDefault(i,s=!1){return null===i?s:i}class DirectiveNormalizer{constructor(i,s,S,_){this._resourceLoader=i,this._urlResolver=s,this._htmlParser=S,this._config=_,this._resourceLoaderCache=new Map}clearCache(){this._resourceLoaderCache.clear()}clearCacheFor(i){if(!i.isComponent)return;const s=i.template;this._resourceLoaderCache.delete(s.templateUrl),s.externalStylesheets.forEach(i=>{this._resourceLoaderCache.delete(i.moduleUrl)})}_fetch(i){let s=this._resourceLoaderCache.get(i);return s||(s=this._resourceLoader.get(i),this._resourceLoaderCache.set(i,s)),s}normalizeTemplate(i){if(isDefined(i.template)){if(isDefined(i.templateUrl))throw syntaxError(`'${stringify(i.componentType)}' component cannot define both template and templateUrl`);if("string"!=typeof i.template)throw syntaxError(`The template specified for component ${stringify(i.componentType)} is not a string`)}else{if(!isDefined(i.templateUrl))throw syntaxError("No template specified for component "+stringify(i.componentType));if("string"!=typeof i.templateUrl)throw syntaxError(`The templateUrl specified for component ${stringify(i.componentType)} is not a string`)}if(isDefined(i.preserveWhitespaces)&&"boolean"!=typeof i.preserveWhitespaces)throw syntaxError(`The preserveWhitespaces option for component ${stringify(i.componentType)} must be a boolean`);return SyncAsync_then(this._preParseTemplate(i),s=>this._normalizeTemplateMetadata(i,s))}_preParseTemplate(i){let s,S;return null!=i.template?(s=i.template,S=i.moduleUrl):(S=this._urlResolver.resolve(i.moduleUrl,i.templateUrl),s=this._fetch(S)),SyncAsync_then(s,s=>this._preparseLoadedTemplate(i,s,S))}_preparseLoadedTemplate(i,s,S){const _=!!i.template,T=InterpolationConfig.fromArray(i.interpolation),A=templateSourceUrl({reference:i.ngModuleType},{type:{reference:i.componentType}},{isInline:_,templateUrl:S}),P=this._htmlParser.parse(s,A,{tokenizeExpansionForms:!0,interpolationConfig:T});if(P.errors.length>0){throw syntaxError("Template parse errors:\n"+P.errors.join("\n"))}const N=this._normalizeStylesheet(new CompileStylesheetMetadata({styles:i.styles,moduleUrl:i.moduleUrl})),M=new TemplatePreparseVisitor;visitAll$1(M,P.rootNodes);const k=this._normalizeStylesheet(new CompileStylesheetMetadata({styles:M.styles,styleUrls:M.styleUrls,moduleUrl:S}));return{template:s,templateUrl:S,isInline:_,htmlAst:P,styles:N.styles.concat(k.styles),inlineStyleUrls:N.styleUrls.concat(k.styleUrls),styleUrls:this._normalizeStylesheet(new CompileStylesheetMetadata({styleUrls:i.styleUrls,moduleUrl:i.moduleUrl})).styleUrls,ngContentSelectors:M.ngContentSelectors}}_normalizeTemplateMetadata(i,s){return SyncAsync_then(this._loadMissingExternalStylesheets(s.styleUrls.concat(s.inlineStyleUrls)),S=>this._normalizeLoadedTemplateMetadata(i,s,S))}_normalizeLoadedTemplateMetadata(i,s,S){const _=[...s.styles];this._inlineStyles(s.inlineStyleUrls,S,_);const T=s.styleUrls,A=T.map(i=>{const s=S.get(i),_=[...s.styles];return this._inlineStyles(s.styleUrls,S,_),new CompileStylesheetMetadata({moduleUrl:i,styles:_})});let P=i.encapsulation;return null==P&&(P=this._config.defaultEncapsulation),P===W.Emulated&&0===_.length&&0===T.length&&(P=W.None),new CompileTemplateMetadata({encapsulation:P,template:s.template,templateUrl:s.templateUrl,htmlAst:s.htmlAst,styles:_,styleUrls:T,ngContentSelectors:s.ngContentSelectors,animations:i.animations,interpolation:i.interpolation,isInline:s.isInline,externalStylesheets:A,preserveWhitespaces:preserveWhitespacesDefault(i.preserveWhitespaces,this._config.preserveWhitespaces)})}_inlineStyles(i,s,S){i.forEach(i=>{const _=s.get(i);_.styles.forEach(i=>S.push(i)),this._inlineStyles(_.styleUrls,s,S)})}_loadMissingExternalStylesheets(i,s=new Map){return SyncAsync_then(SyncAsync_all(i.filter(i=>!s.has(i)).map(i=>SyncAsync_then(this._fetch(i),S=>{const _=this._normalizeStylesheet(new CompileStylesheetMetadata({styles:[S],moduleUrl:i}));return s.set(i,_),this._loadMissingExternalStylesheets(_.styleUrls,s)}))),i=>s)}_normalizeStylesheet(i){const s=i.moduleUrl,S=i.styleUrls.filter(isStyleUrlResolvable).map(i=>this._urlResolver.resolve(s,i)),_=i.styles.map(i=>{const _=function extractStyleUrls(i,s,S){const _=[],T=S.replace(Qt,"").replace(Xt,(...S)=>{const T=S[1]||S[2];return isStyleUrlResolvable(T)?(_.push(i.resolve(s,T)),""):S[0]});return new StyleWithImports(T,_)}(this._urlResolver,s,i);return S.push(..._.styleUrls),_.style});return new CompileStylesheetMetadata({styles:_,styleUrls:S,moduleUrl:s})}}class TemplatePreparseVisitor{constructor(){this.ngContentSelectors=[],this.styles=[],this.styleUrls=[],this.ngNonBindableStackCount=0}visitElement(i,s){const S=preparseElement(i);switch(S.type){case Yt.NG_CONTENT:0===this.ngNonBindableStackCount&&this.ngContentSelectors.push(S.selectAttr);break;case Yt.STYLE:let s="";i.children.forEach(i=>{i instanceof Text$3&&(s+=i.value)}),this.styles.push(s);break;case Yt.STYLESHEET:this.styleUrls.push(S.hrefAttr)}return S.nonBindable&&this.ngNonBindableStackCount++,visitAll$1(this,i.children),S.nonBindable&&this.ngNonBindableStackCount--,null}visitExpansion(i,s){visitAll$1(this,i.cases)}visitExpansionCase(i,s){visitAll$1(this,i.expression)}visitComment(i,s){return null}visitAttribute(i,s){return null}visitText(i,s){return null}}const kr=[V,$,L,D];class DirectiveResolver{constructor(i){this._reflector=i}isDirective(i){const s=this._reflector.annotations(resolveForwardRef(i));return s&&s.some(isDirectiveMetadata)}resolve(i,s=!0){const S=this._reflector.annotations(resolveForwardRef(i));if(S){const s=findLast(S,isDirectiveMetadata);if(s){const S=this._reflector.propMetadata(i),_=this._reflector.guards(i);return this._mergeWithPropertyMetadata(s,S,_,i)}}if(s)throw new Error("No Directive annotation found on "+stringify(i));return null}_mergeWithPropertyMetadata(i,s,S,_){const T=[],A=[],P={},N={};return Object.keys(s).forEach(i=>{const S=findLast(s[i],i=>K.isTypeOf(i));S&&(S.bindingPropertyName?T.push(`${i}: ${S.bindingPropertyName}`):T.push(i));const _=findLast(s[i],i=>G.isTypeOf(i));_&&(_.bindingPropertyName?A.push(`${i}: ${_.bindingPropertyName}`):A.push(i)),s[i].filter(i=>X.isTypeOf(i)).forEach(s=>{if(s.hostPropertyName){const S=s.hostPropertyName[0];if("("===S)throw new Error("@HostBinding can not bind to events. Use @HostListener instead.");if("["===S)throw new Error("@HostBinding parameter should be a property name, 'class.<name>', or 'attr.<name>'.");P[`[${s.hostPropertyName}]`]=i}else P[`[${i}]`]=i}),s[i].filter(i=>Q.isTypeOf(i)).forEach(s=>{const S=s.args||[];P[`(${s.eventName})`]=`${i}(${S.join(",")})`});const M=findLast(s[i],i=>kr.some(s=>s.isTypeOf(i)));M&&(N[i]=M)}),this._merge(i,T,A,P,N,S,_)}_extractPublicName(i){return splitAtColon(i,[null,i])[1].trim()}_dedupeBindings(i){const s=new Set,S=new Set,_=[];for(let T=i.length-1;T>=0;T--){const A=i[T],P=this._extractPublicName(A);S.add(P),s.has(P)||(s.add(P),_.push(A))}return _.reverse()}_merge(i,s,S,_,T,A,P){const N=this._dedupeBindings(i.inputs?i.inputs.concat(s):s),M=this._dedupeBindings(i.outputs?i.outputs.concat(S):S),k=i.host?Object.assign(Object.assign({},i.host),_):_,R=i.queries?Object.assign(Object.assign({},i.queries),T):T;if(H.isTypeOf(i)){const s=i;return H({selector:s.selector,inputs:N,outputs:M,host:k,exportAs:s.exportAs,moduleId:s.moduleId,queries:R,changeDetection:s.changeDetection,providers:s.providers,viewProviders:s.viewProviders,entryComponents:s.entryComponents,template:s.template,templateUrl:s.templateUrl,styles:s.styles,styleUrls:s.styleUrls,encapsulation:s.encapsulation,animations:s.animations,interpolation:s.interpolation,preserveWhitespaces:i.preserveWhitespaces})}return U({selector:i.selector,inputs:N,outputs:M,host:k,exportAs:i.exportAs,queries:R,providers:i.providers,guards:A})}}function isDirectiveMetadata(i){return U.isTypeOf(i)||H.isTypeOf(i)}function findLast(i,s){for(let S=i.length-1;S>=0;S--)if(s(i[S]))return i[S];return null}class I18nError extends ParseError{constructor(i,s){super(i,s)}}const Rr=/^i18n:?/;let Or=!1;class ExtractionResult{constructor(i,s){this.messages=i,this.errors=s}}var Fr;!function(i){i[i.Extract=0]="Extract",i[i.Merge=1]="Merge"}(Fr||(Fr={}));class _Visitor$2{constructor(i,s){this._implicitTags=i,this._implicitAttrs=s}extract(i,s){return this._init(Fr.Extract,s),i.forEach(i=>i.visit(this,null)),this._inI18nBlock&&this._reportError(i[i.length-1],"Unclosed block"),new ExtractionResult(this._messages,this._errors)}merge(i,s,S){this._init(Fr.Merge,S),this._translations=s;const _=new Element$1("wrapper",[],i,void 0,void 0,void 0).visit(this,null);return this._inI18nBlock&&this._reportError(i[i.length-1],"Unclosed block"),new ParseTreeResult(_.children,this._errors)}visitExpansionCase(i,s){const S=visitAll$1(this,i.expression,s);if(this._mode===Fr.Merge)return new ExpansionCase(i.value,S,i.sourceSpan,i.valueSourceSpan,i.expSourceSpan)}visitExpansion(i,s){this._mayBeAddBlockChildren(i);const S=this._inIcu;this._inIcu||(this._isInTranslatableSection&&this._addMessage([i]),this._inIcu=!0);const _=visitAll$1(this,i.cases,s);return this._mode===Fr.Merge&&(i=new Expansion(i.switchValue,i.type,_,i.sourceSpan,i.switchValueSourceSpan)),this._inIcu=S,i}visitComment(i,s){const S=function _isOpeningComment(i){return!!(i instanceof Comment&&i.value&&i.value.startsWith("i18n"))}(i);if(S&&this._isInTranslatableSection)return void this._reportError(i,"Could not start a block inside a translatable section");const _=function _isClosingComment(i){return!!(i instanceof Comment&&i.value&&"/i18n"===i.value)}(i);if(!_||this._inI18nBlock){if(!this._inI18nNode&&!this._inIcu)if(this._inI18nBlock){if(_){if(this._depth==this._blockStartDepth){this._closeTranslatableSection(i,this._blockChildren),this._inI18nBlock=!1;const s=this._addMessage(this._blockChildren,this._blockMeaningAndDesc);return visitAll$1(this,this._translateMessage(i,s))}return void this._reportError(i,"I18N blocks should not cross element boundaries")}}else if(S){if(!Or&&console&&console.warn){Or=!0;const s=i.sourceSpan.details?", "+i.sourceSpan.details:"";console.warn(`I18n comments are deprecated, use an <ng-container> element instead (${i.sourceSpan.start}${s})`)}this._inI18nBlock=!0,this._blockStartDepth=this._depth,this._blockChildren=[],this._blockMeaningAndDesc=i.value.replace(Rr,"").trim(),this._openTranslatableSection(i)}}else this._reportError(i,"Trying to close an unopened block")}visitText(i,s){return this._isInTranslatableSection&&this._mayBeAddBlockChildren(i),i}visitElement(i,s){this._mayBeAddBlockChildren(i),this._depth++;const S=this._inI18nNode,_=this._inImplicitNode;let T=[],A=void 0;const P=function _getI18nAttr(i){return i.attrs.find(i=>"i18n"===i.name)||null}(i),N=P?P.value:"",M=this._implicitTags.some(s=>i.name===s)&&!this._inIcu&&!this._isInTranslatableSection,k=!_&&M;if(this._inImplicitNode=_||M,this._isInTranslatableSection||this._inIcu)(P||k)&&this._reportError(i,"Could not mark an element as translatable inside a translatable section"),this._mode==Fr.Extract&&visitAll$1(this,i.children);else{if(P||k){this._inI18nNode=!0;const s=this._addMessage(i.children,N);A=this._translateMessage(i,s)}if(this._mode==Fr.Extract){const s=P||k;s&&this._openTranslatableSection(i),visitAll$1(this,i.children),s&&this._closeTranslatableSection(i,i.children)}}if(this._mode===Fr.Merge){(A||i.children).forEach(i=>{const S=i.visit(this,s);S&&!this._isInTranslatableSection&&(T=T.concat(S))})}if(this._visitAttributesOf(i),this._depth--,this._inI18nNode=S,this._inImplicitNode=_,this._mode===Fr.Merge){const s=this._translateAttributes(i);return new Element$1(i.name,s,T,i.sourceSpan,i.startSourceSpan,i.endSourceSpan)}return null}visitAttribute(i,s){throw new Error("unreachable code")}_init(i,s){this._mode=i,this._inI18nBlock=!1,this._inI18nNode=!1,this._depth=0,this._inIcu=!1,this._msgCountAtSectionStart=void 0,this._errors=[],this._messages=[],this._inImplicitNode=!1,this._createI18nMessage=createI18nMessageFactory(s)}_visitAttributesOf(i){const s={},S=this._implicitAttrs[i.name]||[];i.attrs.filter(i=>i.name.startsWith("i18n-")).forEach(i=>s[i.name.slice("i18n-".length)]=i.value),i.attrs.forEach(i=>{i.name in s?this._addMessage([i],s[i.name]):S.some(s=>i.name===s)&&this._addMessage([i])})}_addMessage(i,s){if(0==i.length||1==i.length&&i[0]instanceof Attribute&&!i[0].value)return null;const{meaning:S,description:_,id:T}=_parseMessageMeta(s),A=this._createI18nMessage(i,S,_,T);return this._messages.push(A),A}_translateMessage(i,s){if(s&&this._mode===Fr.Merge){const S=this._translations.get(s);if(S)return S;this._reportError(i,`Translation unavailable for message id="${this._translations.digest(s)}"`)}return[]}_translateAttributes(i){const s=i.attrs,S={};s.forEach(i=>{i.name.startsWith("i18n-")&&(S[i.name.slice("i18n-".length)]=_parseMessageMeta(i.value))});const _=[];return s.forEach(s=>{if("i18n"!==s.name&&!s.name.startsWith("i18n-"))if(s.value&&""!=s.value&&S.hasOwnProperty(s.name)){const{meaning:T,description:A,id:P}=S[s.name],N=this._createI18nMessage([s],T,A,P),M=this._translations.get(N);if(M)if(0==M.length)_.push(new Attribute(s.name,"",s.sourceSpan));else if(M[0]instanceof Text$3){const i=M[0].value;_.push(new Attribute(s.name,i,s.sourceSpan))}else this._reportError(i,`Unexpected translation for attribute "${s.name}" (id="${P||this._translations.digest(N)}")`);else this._reportError(i,`Translation unavailable for attribute "${s.name}" (id="${P||this._translations.digest(N)}")`)}else _.push(s)}),_}_mayBeAddBlockChildren(i){this._inI18nBlock&&!this._inIcu&&this._depth==this._blockStartDepth&&this._blockChildren.push(i)}_openTranslatableSection(i){this._isInTranslatableSection?this._reportError(i,"Unexpected section start"):this._msgCountAtSectionStart=this._messages.length}get _isInTranslatableSection(){return void 0!==this._msgCountAtSectionStart}_closeTranslatableSection(i,s){if(!this._isInTranslatableSection)return void this._reportError(i,"Unexpected section end");const S=this._msgCountAtSectionStart;if(1==s.reduce((i,s)=>i+(s instanceof Comment?0:1),0))for(let i=this._messages.length-1;i>=S;i--){const s=this._messages[i].nodes;if(!(1==s.length&&s[0]instanceof Text$1)){this._messages.splice(i,1);break}}this._msgCountAtSectionStart=void 0}_reportError(i,s){this._errors.push(new I18nError(i.sourceSpan,s))}}function _parseMessageMeta(i){if(!i)return{meaning:"",description:"",id:""};const s=i.indexOf("@@"),S=i.indexOf("|"),[_,T]=s>-1?[i.slice(0,s),i.slice(s+2)]:[i,""],[A,P]=S>-1?[_.slice(0,S),_.slice(S+1)]:["",_];return{meaning:A,description:P,id:T.trim()}}const Dr=new class XmlTagDefinition{constructor(){this.closedByParent=!1,this.contentType=_.PARSABLE_DATA,this.isVoid=!1,this.ignoreFirstLf=!1,this.canSelfClose=!0,this.preventNamespaceInheritance=!1}requireExtraParent(i){return!1}isClosedByChild(i){return!1}};function getXmlTagDefinition(i){return Dr}class XmlParser extends Parser{constructor(){super(getXmlTagDefinition)}parse(i,s,S){return super.parse(i,s,S)}}class Xliff extends Serializer{write(i,s){const S=new _WriteVisitor,_=[];i.forEach(i=>{let s=[];i.sources.forEach(i=>{let S=new Tag("context-group",{purpose:"location"});S.children.push(new CR(10),new Tag("context",{"context-type":"sourcefile"},[new Text$2(i.filePath)]),new CR(10),new Tag("context",{"context-type":"linenumber"},[new Text$2(""+i.startLine)]),new CR(8)),s.push(new CR(8),S)});const T=new Tag("trans-unit",{id:i.id,datatype:"html"});T.children.push(new CR(8),new Tag("source",{},S.serialize(i.nodes)),...s),i.description&&T.children.push(new CR(8),new Tag("note",{priority:"1",from:"description"},[new Text$2(i.description)])),i.meaning&&T.children.push(new CR(8),new Tag("note",{priority:"1",from:"meaning"},[new Text$2(i.meaning)])),T.children.push(new CR(6)),_.push(new CR(6),T)});const T=new Tag("body",{},[..._,new CR(4)]),A=new Tag("file",{"source-language":s||"en",datatype:"plaintext",original:"ng2.template"},[new CR(4),T,new CR(2)]),P=new Tag("xliff",{version:"1.2",xmlns:"urn:oasis:names:tc:xliff:document:1.2"},[new CR(2),A,new CR]);return serialize([new Declaration({version:"1.0",encoding:"UTF-8"}),new CR,P,new CR])}load(i,s){const S=new XliffParser,{locale:_,msgIdToHtml:T,errors:A}=S.parse(i,s),P={},N=new XmlToI18n;if(Object.keys(T).forEach(i=>{const{i18nNodes:S,errors:_}=N.convert(T[i],s);A.push(..._),P[i]=S}),A.length)throw new Error("xliff parse errors:\n"+A.join("\n"));return{locale:_,i18nNodesByMsgId:P}}digest(i){return digest(i)}}class _WriteVisitor{visitText(i,s){return[new Text$2(i.value)]}visitContainer(i,s){const S=[];return i.children.forEach(i=>S.push(...i.visit(this))),S}visitIcu(i,s){const S=[new Text$2(`{${i.expressionPlaceholder}, ${i.type}, `)];return Object.keys(i.cases).forEach(s=>{S.push(new Text$2(s+" {"),...i.cases[s].visit(this),new Text$2("} "))}),S.push(new Text$2("}")),S}visitTagPlaceholder(i,s){const S=function getCtypeForTag(i){switch(i.toLowerCase()){case"br":return"lb";case"img":return"image";default:return"x-"+i}}(i.tag);if(i.isVoid)return[new Tag("x",{id:i.startName,ctype:S,"equiv-text":`<${i.tag}/>`})];const _=new Tag("x",{id:i.startName,ctype:S,"equiv-text":`<${i.tag}>`}),T=new Tag("x",{id:i.closeName,ctype:S,"equiv-text":`</${i.tag}>`});return[_,...this.serialize(i.children),T]}visitPlaceholder(i,s){return[new Tag("x",{id:i.name,"equiv-text":`{{${i.value}}}`})]}visitIcuPlaceholder(i,s){const S=`{${i.value.expression}, ${i.value.type}, ${Object.keys(i.value.cases).map(i=>i+" {...}").join(" ")}}`;return[new Tag("x",{id:i.name,"equiv-text":S})]}serialize(i){return[].concat(...i.map(i=>i.visit(this)))}}class XliffParser{constructor(){this._locale=null}parse(i,s){this._unitMlString=null,this._msgIdToHtml={};const S=(new XmlParser).parse(i,s);return this._errors=S.errors,visitAll$1(this,S.rootNodes,null),{msgIdToHtml:this._msgIdToHtml,errors:this._errors,locale:this._locale}}visitElement(i,s){switch(i.name){case"trans-unit":this._unitMlString=null;const s=i.attrs.find(i=>"id"===i.name);if(s){const S=s.value;this._msgIdToHtml.hasOwnProperty(S)?this._addError(i,"Duplicated translations for msg "+S):(visitAll$1(this,i.children,null),"string"==typeof this._unitMlString?this._msgIdToHtml[S]=this._unitMlString:this._addError(i,`Message ${S} misses a translation`))}else this._addError(i,'<trans-unit> misses the "id" attribute');break;case"source":case"seg-source":case"alt-trans":break;case"target":const S=i.startSourceSpan.end.offset,_=i.endSourceSpan.start.offset,T=i.startSourceSpan.start.file.content.slice(S,_);this._unitMlString=T;break;case"file":const A=i.attrs.find(i=>"target-language"===i.name);A&&(this._locale=A.value),visitAll$1(this,i.children,null);break;default:visitAll$1(this,i.children,null)}}visitAttribute(i,s){}visitText(i,s){}visitComment(i,s){}visitExpansion(i,s){}visitExpansionCase(i,s){}_addError(i,s){this._errors.push(new I18nError(i.sourceSpan,s))}}class XmlToI18n{convert(i,s){const S=(new XmlParser).parse(i,s,{tokenizeExpansionForms:!0});return this._errors=S.errors,{i18nNodes:this._errors.length>0||0==S.rootNodes.length?[]:[].concat(...visitAll$1(this,S.rootNodes)),errors:this._errors}}visitText(i,s){return new Text$1(i.value,i.sourceSpan)}visitElement(i,s){if("x"===i.name){const s=i.attrs.find(i=>"id"===i.name);return s?new Placeholder("",s.value,i.sourceSpan):(this._addError(i,'<x> misses the "id" attribute'),null)}return"mrk"===i.name?[].concat(...visitAll$1(this,i.children)):(this._addError(i,"Unexpected tag"),null)}visitExpansion(i,s){const S={};return visitAll$1(this,i.cases).forEach(s=>{S[s.value]=new Container(s.nodes,i.sourceSpan)}),new Icu$1(i.switchValue,i.type,S,i.sourceSpan)}visitExpansionCase(i,s){return{value:i.value,nodes:visitAll$1(this,i.expression)}}visitComment(i,s){}visitAttribute(i,s){}_addError(i,s){this._errors.push(new I18nError(i.sourceSpan,s))}}class Xliff2 extends Serializer{write(i,s){const S=new _WriteVisitor$1,_=[];i.forEach(i=>{const s=new Tag("unit",{id:i.id}),T=new Tag("notes");(i.description||i.meaning)&&(i.description&&T.children.push(new CR(8),new Tag("note",{category:"description"},[new Text$2(i.description)])),i.meaning&&T.children.push(new CR(8),new Tag("note",{category:"meaning"},[new Text$2(i.meaning)]))),i.sources.forEach(i=>{T.children.push(new CR(8),new Tag("note",{category:"location"},[new Text$2(`${i.filePath}:${i.startLine}${i.endLine!==i.startLine?","+i.endLine:""}`)]))}),T.children.push(new CR(6)),s.children.push(new CR(6),T);const A=new Tag("segment");A.children.push(new CR(8),new Tag("source",{},S.serialize(i.nodes)),new CR(6)),s.children.push(new CR(6),A,new CR(4)),_.push(new CR(4),s)});const T=new Tag("file",{original:"ng.template",id:"ngi18n"},[..._,new CR(2)]),A=new Tag("xliff",{version:"2.0",xmlns:"urn:oasis:names:tc:xliff:document:2.0",srcLang:s||"en"},[new CR(2),T,new CR]);return serialize([new Declaration({version:"1.0",encoding:"UTF-8"}),new CR,A,new CR])}load(i,s){const S=new Xliff2Parser,{locale:_,msgIdToHtml:T,errors:A}=S.parse(i,s),P={},N=new XmlToI18n$1;if(Object.keys(T).forEach(i=>{const{i18nNodes:S,errors:_}=N.convert(T[i],s);A.push(..._),P[i]=S}),A.length)throw new Error("xliff2 parse errors:\n"+A.join("\n"));return{locale:_,i18nNodesByMsgId:P}}digest(i){return decimalDigest(i)}}class _WriteVisitor$1{visitText(i,s){return[new Text$2(i.value)]}visitContainer(i,s){const S=[];return i.children.forEach(i=>S.push(...i.visit(this))),S}visitIcu(i,s){const S=[new Text$2(`{${i.expressionPlaceholder}, ${i.type}, `)];return Object.keys(i.cases).forEach(s=>{S.push(new Text$2(s+" {"),...i.cases[s].visit(this),new Text$2("} "))}),S.push(new Text$2("}")),S}visitTagPlaceholder(i,s){const S=function getTypeForTag(i){switch(i.toLowerCase()){case"br":case"b":case"i":case"u":return"fmt";case"img":return"image";case"a":return"link";default:return"other"}}(i.tag);if(i.isVoid){return[new Tag("ph",{id:(this._nextPlaceholderId++).toString(),equiv:i.startName,type:S,disp:`<${i.tag}/>`})]}const _=new Tag("pc",{id:(this._nextPlaceholderId++).toString(),equivStart:i.startName,equivEnd:i.closeName,type:S,dispStart:`<${i.tag}>`,dispEnd:`</${i.tag}>`}),T=[].concat(...i.children.map(i=>i.visit(this)));return T.length?T.forEach(i=>_.children.push(i)):_.children.push(new Text$2("")),[_]}visitPlaceholder(i,s){const S=(this._nextPlaceholderId++).toString();return[new Tag("ph",{id:S,equiv:i.name,disp:`{{${i.value}}}`})]}visitIcuPlaceholder(i,s){const S=Object.keys(i.value.cases).map(i=>i+" {...}").join(" "),_=(this._nextPlaceholderId++).toString();return[new Tag("ph",{id:_,equiv:i.name,disp:`{${i.value.expression}, ${i.value.type}, ${S}}`})]}serialize(i){return this._nextPlaceholderId=0,[].concat(...i.map(i=>i.visit(this)))}}class Xliff2Parser{constructor(){this._locale=null}parse(i,s){this._unitMlString=null,this._msgIdToHtml={};const S=(new XmlParser).parse(i,s);return this._errors=S.errors,visitAll$1(this,S.rootNodes,null),{msgIdToHtml:this._msgIdToHtml,errors:this._errors,locale:this._locale}}visitElement(i,s){switch(i.name){case"unit":this._unitMlString=null;const s=i.attrs.find(i=>"id"===i.name);if(s){const S=s.value;this._msgIdToHtml.hasOwnProperty(S)?this._addError(i,"Duplicated translations for msg "+S):(visitAll$1(this,i.children,null),"string"==typeof this._unitMlString?this._msgIdToHtml[S]=this._unitMlString:this._addError(i,`Message ${S} misses a translation`))}else this._addError(i,'<unit> misses the "id" attribute');break;case"source":break;case"target":const S=i.startSourceSpan.end.offset,_=i.endSourceSpan.start.offset,T=i.startSourceSpan.start.file.content.slice(S,_);this._unitMlString=T;break;case"xliff":const A=i.attrs.find(i=>"trgLang"===i.name);A&&(this._locale=A.value);const P=i.attrs.find(i=>"version"===i.name);if(P){const s=P.value;"2.0"!==s?this._addError(i,`The XLIFF file version ${s} is not compatible with XLIFF 2.0 serializer`):visitAll$1(this,i.children,null)}break;default:visitAll$1(this,i.children,null)}}visitAttribute(i,s){}visitText(i,s){}visitComment(i,s){}visitExpansion(i,s){}visitExpansionCase(i,s){}_addError(i,s){this._errors.push(new I18nError(i.sourceSpan,s))}}class XmlToI18n$1{convert(i,s){const S=(new XmlParser).parse(i,s,{tokenizeExpansionForms:!0});return this._errors=S.errors,{i18nNodes:this._errors.length>0||0==S.rootNodes.length?[]:[].concat(...visitAll$1(this,S.rootNodes)),errors:this._errors}}visitText(i,s){return new Text$1(i.value,i.sourceSpan)}visitElement(i,s){switch(i.name){case"ph":const s=i.attrs.find(i=>"equiv"===i.name);if(s)return[new Placeholder("",s.value,i.sourceSpan)];this._addError(i,'<ph> misses the "equiv" attribute');break;case"pc":const S=i.attrs.find(i=>"equivStart"===i.name),_=i.attrs.find(i=>"equivEnd"===i.name);if(S){if(_){const s=S.value,T=_.value;return[].concat(new Placeholder("",s,i.sourceSpan),...i.children.map(i=>i.visit(this,null)),new Placeholder("",T,i.sourceSpan))}this._addError(i,'<ph> misses the "equivEnd" attribute')}else this._addError(i,'<ph> misses the "equivStart" attribute');break;case"mrk":return[].concat(...visitAll$1(this,i.children));default:this._addError(i,"Unexpected tag")}return null}visitExpansion(i,s){const S={};return visitAll$1(this,i.cases).forEach(s=>{S[s.value]=new Container(s.nodes,i.sourceSpan)}),new Icu$1(i.switchValue,i.type,S,i.sourceSpan)}visitExpansionCase(i,s){return{value:i.value,nodes:[].concat(...visitAll$1(this,i.expression))}}visitComment(i,s){}visitAttribute(i,s){}_addError(i,s){this._errors.push(new I18nError(i.sourceSpan,s))}}class Xtb extends Serializer{write(i,s){throw new Error("Unsupported")}load(i,s){const S=new XtbParser,{locale:_,msgIdToHtml:T,errors:A}=S.parse(i,s),P={},N=new XmlToI18n$2;if(Object.keys(T).forEach(i=>{!function createLazyProperty(i,s,S){Object.defineProperty(i,s,{configurable:!0,enumerable:!0,get:function(){const _=S();return Object.defineProperty(i,s,{enumerable:!0,value:_}),_},set:i=>{throw new Error("Could not overwrite an XTB translation")}})}(P,i,(function(){const{i18nNodes:S,errors:_}=N.convert(T[i],s);if(_.length)throw new Error("xtb parse errors:\n"+_.join("\n"));return S}))}),A.length)throw new Error("xtb parse errors:\n"+A.join("\n"));return{locale:_,i18nNodesByMsgId:P}}digest(i){return digest$1(i)}createNameMapper(i){return new SimplePlaceholderMapper(i,toPublicName)}}class XtbParser{constructor(){this._locale=null}parse(i,s){this._bundleDepth=0,this._msgIdToHtml={};const S=(new XmlParser).parse(i,s);return this._errors=S.errors,visitAll$1(this,S.rootNodes),{msgIdToHtml:this._msgIdToHtml,errors:this._errors,locale:this._locale}}visitElement(i,s){switch(i.name){case"translationbundle":this._bundleDepth++,this._bundleDepth>1&&this._addError(i,"<translationbundle> elements can not be nested");const s=i.attrs.find(i=>"lang"===i.name);s&&(this._locale=s.value),visitAll$1(this,i.children,null),this._bundleDepth--;break;case"translation":const S=i.attrs.find(i=>"id"===i.name);if(S){const s=S.value;if(this._msgIdToHtml.hasOwnProperty(s))this._addError(i,"Duplicated translations for msg "+s);else{const S=i.startSourceSpan.end.offset,_=i.endSourceSpan.start.offset,T=i.startSourceSpan.start.file.content.slice(S,_);this._msgIdToHtml[s]=T}}else this._addError(i,'<translation> misses the "id" attribute');break;default:this._addError(i,"Unexpected tag")}}visitAttribute(i,s){}visitText(i,s){}visitComment(i,s){}visitExpansion(i,s){}visitExpansionCase(i,s){}_addError(i,s){this._errors.push(new I18nError(i.sourceSpan,s))}}class XmlToI18n$2{convert(i,s){const S=(new XmlParser).parse(i,s,{tokenizeExpansionForms:!0});return this._errors=S.errors,{i18nNodes:this._errors.length>0||0==S.rootNodes.length?[]:visitAll$1(this,S.rootNodes),errors:this._errors}}visitText(i,s){return new Text$1(i.value,i.sourceSpan)}visitExpansion(i,s){const S={};return visitAll$1(this,i.cases).forEach(s=>{S[s.value]=new Container(s.nodes,i.sourceSpan)}),new Icu$1(i.switchValue,i.type,S,i.sourceSpan)}visitExpansionCase(i,s){return{value:i.value,nodes:visitAll$1(this,i.expression)}}visitElement(i,s){if("ph"===i.name){const s=i.attrs.find(i=>"name"===i.name);if(s)return new Placeholder("",s.value,i.sourceSpan);this._addError(i,'<ph> misses the "name" attribute')}else this._addError(i,"Unexpected tag");return null}visitComment(i,s){}visitAttribute(i,s){}_addError(i,s){this._errors.push(new I18nError(i.sourceSpan,s))}}class TranslationBundle{constructor(i={},s,S,_,T=oe.Warning,A){this._i18nNodesByMsgId=i,this.digest=S,this.mapperFactory=_,this._i18nToHtml=new I18nToHtmlVisitor(i,s,S,_,T,A)}static load(i,s,S,_,T){const{locale:A,i18nNodesByMsgId:P}=S.load(i,s);return new TranslationBundle(P,A,i=>S.digest(i),i=>S.createNameMapper(i),_,T)}get(i){const s=this._i18nToHtml.convert(i);if(s.errors.length)throw new Error(s.errors.join("\n"));return s.nodes}has(i){return this.digest(i)in this._i18nNodesByMsgId}}class I18nToHtmlVisitor{constructor(i={},s,S,_,T,A){this._i18nNodesByMsgId=i,this._locale=s,this._digest=S,this._mapperFactory=_,this._missingTranslationStrategy=T,this._console=A,this._contextStack=[],this._errors=[]}convert(i){this._contextStack.length=0,this._errors.length=0;const s=this._convertToText(i),S=i.nodes[0].sourceSpan.start.file.url,_=(new HtmlParser).parse(s,S,{tokenizeExpansionForms:!0});return{nodes:_.rootNodes,errors:[...this._errors,..._.errors]}}visitText(i,s){return escapeXml(i.value)}visitContainer(i,s){return i.children.map(i=>i.visit(this)).join("")}visitIcu(i,s){const S=Object.keys(i.cases).map(s=>`${s} {${i.cases[s].visit(this)}}`);return`{${this._srcMsg.placeholders.hasOwnProperty(i.expression)?this._srcMsg.placeholders[i.expression]:i.expression}, ${i.type}, ${S.join(" ")}}`}visitPlaceholder(i,s){const S=this._mapper(i.name);return this._srcMsg.placeholders.hasOwnProperty(S)?this._srcMsg.placeholders[S]:this._srcMsg.placeholderToMessage.hasOwnProperty(S)?this._convertToText(this._srcMsg.placeholderToMessage[S]):(this._addError(i,`Unknown placeholder "${i.name}"`),"")}visitTagPlaceholder(i,s){const S=""+i.tag,_=Object.keys(i.attrs).map(s=>`${s}="${i.attrs[s]}"`).join(" ");return i.isVoid?`<${S} ${_}/>`:`<${S} ${_}>${i.children.map(i=>i.visit(this)).join("")}</${S}>`}visitIcuPlaceholder(i,s){return this._convertToText(this._srcMsg.placeholderToMessage[i.name])}_convertToText(i){const s=this._digest(i),S=this._mapperFactory?this._mapperFactory(i):null;let _;if(this._contextStack.push({msg:this._srcMsg,mapper:this._mapper}),this._srcMsg=i,this._i18nNodesByMsgId.hasOwnProperty(s))_=this._i18nNodesByMsgId[s],this._mapper=i=>S?S.toInternalName(i):i;else{if(this._missingTranslationStrategy===oe.Error){const S=this._locale?` for locale "${this._locale}"`:"";this._addError(i.nodes[0],`Missing translation for message "${s}"${S}`)}else if(this._console&&this._missingTranslationStrategy===oe.Warning){const i=this._locale?` for locale "${this._locale}"`:"";this._console.warn(`Missing translation for message "${s}"${i}`)}_=i.nodes,this._mapper=i=>i}const T=_.map(i=>i.visit(this)).join(""),A=this._contextStack.pop();return this._srcMsg=A.msg,this._mapper=A.mapper,T}_addError(i,s){this._errors.push(new I18nError(i.sourceSpan,s))}}class I18NHtmlParser{constructor(i,s,S,_=oe.Warning,T){if(this._htmlParser=i,s){const i=function createSerializer(i){switch(i=(i||"xlf").toLowerCase()){case"xmb":return new Xmb;case"xtb":return new Xtb;case"xliff2":case"xlf2":return new Xliff2;case"xliff":case"xlf":default:return new Xliff}}(S);this._translationBundle=TranslationBundle.load(s,"i18n",i,_,T)}else this._translationBundle=new TranslationBundle({},null,digest,void 0,_,T)}parse(i,s,S={}){const _=S.interpolationConfig||ut,T=this._htmlParser.parse(i,s,Object.assign({interpolationConfig:_},S));return T.errors.length?new ParseTreeResult(T.rootNodes,T.errors):function mergeTranslations(i,s,S,_,T){return new _Visitor$2(_,T).merge(i,s,S)}(T.rootNodes,this._translationBundle,_,[],{})}}function convertValueToOutputAst(i,s,S=null){return visitValue(s,new _ValueOutputAstTransformer(i),S)}class _ValueOutputAstTransformer{constructor(i){this.ctx=i}visitArray(i,s){const S=[];for(let s=0;s<i.length;++s)S.push(visitValue(i[s],this,null));return literalArr(S,s)}visitStringMap(i,s){const S=[],_=new Set(i&&i.$quoted$);return Object.keys(i).forEach(s=>{S.push(new LiteralMapEntry(s,visitValue(i[s],this,null),_.has(s)))}),new LiteralMapExpr(S,s)}visitPrimitive(i,s){return literal(i,s)}visitOther(i,s){return i instanceof Expression?i:this.ctx.importExpr(i)}}function mapEntry$1(i,s){return{key:i,value:s,quoted:!1}}class InjectableCompiler{constructor(i,s){this.reflector=i,this.alwaysGenerateDef=s,this.tokenInjector=i.resolveExternalReference(Identifiers.Injector)}depsArray(i,s){return i.map(i=>{let S,_=i,T=[_],A=0;if(Array.isArray(i))for(let s=0;s<i.length;s++){const S=i[s];S&&("Optional"===S.ngMetadataName?A|=8:"SkipSelf"===S.ngMetadataName?A|=4:"Self"===S.ngMetadataName?A|=2:_="Inject"===S.ngMetadataName?S.token:S)}return S="string"==typeof _?literal(_):_===this.tokenInjector?importExpr(Identifiers.INJECTOR):s.importExpr(_),T=0!==A?[S,literal(A)]:[S],importExpr(Identifiers.inject).callFn(T)})}factoryFor(i,s){let S;if(i.useExisting)S=importExpr(Identifiers.inject).callFn([s.importExpr(i.useExisting)]);else if(i.useFactory){const _=i.deps||[];if(!(_.length>0))return s.importExpr(i.useFactory);S=s.importExpr(i.useFactory).callFn(this.depsArray(_,s))}else if(i.useValue)S=convertValueToOutputAst(s,i.useValue);else{const _=i.useClass||i.symbol,T=this.depsArray(this.reflector.parameters(_),s);S=new InstantiateExpr(s.importExpr(_),T)}return fn([],[new ReturnStatement(S)],void 0,void 0,i.symbol.name+"_Factory")}injectableDef(i,s){let S=Fe;void 0!==i.providedIn&&(S=null===i.providedIn?Fe:"string"==typeof i.providedIn?literal(i.providedIn):s.importExpr(i.providedIn));const _=[mapEntry$1("factory",this.factoryFor(i,s)),mapEntry$1("token",s.importExpr(i.type.reference)),mapEntry$1("providedIn",S)];return importExpr(Identifiers.ɵɵdefineInjectable).callFn([literalMap(_)])}compile(i,s){if(this.alwaysGenerateDef||void 0!==i.providedIn){const S=identifierName(i.type),_=new ClassStmt(S,null,[new ClassField("ɵprov",he,[$e.Static],this.injectableDef(i,s))],[],new ClassMethod(null,[],[]),[]);s.statements.push(_)}}}const Lr=/(\.ts|\.d\.ts|\.js|\.jsx|\.tsx)$/,$r=/\.ngfactory\.|\.ngsummary\./,Br=/\.ngsummary\./,Vr=/NgSummary$/;function ngfactoryFilePath(i,s=!1){const S=splitTypescriptSuffix(i,s);return`${S[0]}.ngfactory${normalizeGenFileSuffix(S[1])}`}function stripGeneratedFileSuffix(i){return i.replace($r,".")}function splitTypescriptSuffix(i,s=!1){if(i.endsWith(".d.ts"))return[i.slice(0,-5),s?".ts":".d.ts"];const S=i.lastIndexOf(".");return-1!==S?[i.substring(0,S),i.substring(S)]:[i,""]}function normalizeGenFileSuffix(i){return".tsx"===i?".ts":i}function summaryFileName(i){return i.replace(Lr,"")+".ngsummary.json"}function summaryForJitFileName(i,s=!1){const S=splitTypescriptSuffix(stripGeneratedFileSuffix(i),s);return`${S[0]}.ngsummary${S[1]}`}function summaryForJitName(i){return i+"NgSummary"}const jr=/\u0275\d+/;function isLoweredSymbol(i){return jr.test(i)}function createLoweredSymbol(i){return"ɵ"+i}var Ur;!function(i){i[i.OnInit=0]="OnInit",i[i.OnDestroy=1]="OnDestroy",i[i.DoCheck=2]="DoCheck",i[i.OnChanges=3]="OnChanges",i[i.AfterContentInit=4]="AfterContentInit",i[i.AfterContentChecked=5]="AfterContentChecked",i[i.AfterViewInit=6]="AfterViewInit",i[i.AfterViewChecked=7]="AfterViewChecked"}(Ur||(Ur={}));const Wr=[Ur.OnInit,Ur.OnDestroy,Ur.DoCheck,Ur.OnChanges,Ur.AfterContentInit,Ur.AfterContentChecked,Ur.AfterViewInit,Ur.AfterViewChecked];function hasLifecycleHook(i,s,S){return i.hasLifecycleHook(S,function getHookName(i){switch(i){case Ur.OnInit:return"ngOnInit";case Ur.OnDestroy:return"ngOnDestroy";case Ur.DoCheck:return"ngDoCheck";case Ur.OnChanges:return"ngOnChanges";case Ur.AfterContentInit:return"ngAfterContentInit";case Ur.AfterContentChecked:return"ngAfterContentChecked";case Ur.AfterViewInit:return"ngAfterViewInit";case Ur.AfterViewChecked:return"ngAfterViewChecked";default:throw new Error("unexpected "+i)}}(s))}const zr="ngComponentType";class CompileMetadataResolver{constructor(i,s,S,_,T,A,P,N,M,k,R,F){this._config=i,this._htmlParser=s,this._ngModuleResolver=S,this._directiveResolver=_,this._pipeResolver=T,this._summaryResolver=A,this._schemaRegistry=P,this._directiveNormalizer=N,this._console=M,this._staticSymbolCache=k,this._reflector=R,this._errorCollector=F,this._nonNormalizedDirectiveCache=new Map,this._directiveCache=new Map,this._summaryCache=new Map,this._pipeCache=new Map,this._ngModuleCache=new Map,this._ngModuleOfTypes=new Map,this._shallowModuleCache=new Map}getReflector(){return this._reflector}clearCacheFor(i){const s=this._directiveCache.get(i);this._directiveCache.delete(i),this._nonNormalizedDirectiveCache.delete(i),this._summaryCache.delete(i),this._pipeCache.delete(i),this._ngModuleOfTypes.delete(i),this._ngModuleCache.clear(),s&&this._directiveNormalizer.clearCacheFor(s)}clearCache(){this._directiveCache.clear(),this._nonNormalizedDirectiveCache.clear(),this._summaryCache.clear(),this._pipeCache.clear(),this._ngModuleCache.clear(),this._ngModuleOfTypes.clear(),this._directiveNormalizer.clearCache()}_createProxyClass(i,s){let S=null;const proxyClass=function(){if(!S)throw new Error(`Illegal state: Class ${s} for type ${stringify(i)} is not compiled yet!`);return S.apply(this,arguments)};return proxyClass.setDelegate=i=>{S=i,proxyClass.prototype=i.prototype},proxyClass.overriddenName=s,proxyClass}getGeneratedClass(i,s){return i instanceof StaticSymbol?this._staticSymbolCache.get(ngfactoryFilePath(i.filePath),s):this._createProxyClass(i,s)}getComponentViewClass(i){return this.getGeneratedClass(i,viewClassName(i,0))}getHostComponentViewClass(i){return this.getGeneratedClass(i,hostViewClassName(i))}getHostComponentType(i){const s=identifierName({reference:i})+"_Host";return i instanceof StaticSymbol?this._staticSymbolCache.get(i.filePath,s):this._createProxyClass(i,s)}getRendererType(i){return i instanceof StaticSymbol?this._staticSymbolCache.get(ngfactoryFilePath(i.filePath),rendererTypeName(i)):{}}getComponentFactory(i,s,S,_){if(s instanceof StaticSymbol)return this._staticSymbolCache.get(ngfactoryFilePath(s.filePath),componentFactoryName(s));{const T=this.getHostComponentViewClass(s);return this._reflector.resolveExternalReference(Identifiers.createComponentFactory)(i,s,T,S,_,[])}}initComponentFactory(i,s){i instanceof StaticSymbol||i.ngContentSelectors.push(...s)}_loadSummary(i,s){let S=this._summaryCache.get(i);if(!S){const s=this._summaryResolver.resolveSummary(i);S=s?s.type:null,this._summaryCache.set(i,S||null)}return S&&S.summaryKind===s?S:null}getHostComponentMetadata(i,s){const S=this.getHostComponentType(i.type.reference);s||(s=this.getHostComponentViewClass(S));const _=CssSelector.parse(i.selector)[0].getMatchingElementTemplate(),T=this._htmlParser.parse(_,"");return CompileDirectiveMetadata.create({isHost:!0,type:{reference:S,diDeps:[],lifecycleHooks:[]},template:new CompileTemplateMetadata({encapsulation:W.None,template:_,templateUrl:"",htmlAst:T,styles:[],styleUrls:[],ngContentSelectors:[],animations:[],isInline:!0,externalStylesheets:[],interpolation:null,preserveWhitespaces:!1}),exportAs:null,changeDetection:z.Default,inputs:[],outputs:[],host:{},isComponent:!0,selector:"*",providers:[],viewProviders:[],queries:[],guards:{},viewQueries:[],componentViewType:s,rendererType:{id:"__Host__",encapsulation:W.None,styles:[],data:{}},entryComponents:[],componentFactory:null})}loadDirectiveMetadata(i,s,S){if(this._directiveCache.has(s))return null;s=resolveForwardRef(s);const{annotation:_,metadata:T}=this.getNonNormalizedDirectiveMetadata(s),createDirectiveMetadata=i=>{const S=new CompileDirectiveMetadata({isHost:!1,type:T.type,isComponent:T.isComponent,selector:T.selector,exportAs:T.exportAs,changeDetection:T.changeDetection,inputs:T.inputs,outputs:T.outputs,hostListeners:T.hostListeners,hostProperties:T.hostProperties,hostAttributes:T.hostAttributes,providers:T.providers,viewProviders:T.viewProviders,queries:T.queries,guards:T.guards,viewQueries:T.viewQueries,entryComponents:T.entryComponents,componentViewType:T.componentViewType,rendererType:T.rendererType,componentFactory:T.componentFactory,template:i});return i&&this.initComponentFactory(T.componentFactory,i.ngContentSelectors),this._directiveCache.set(s,S),this._summaryCache.set(s,S.toSummary()),null};if(T.isComponent){const A=T.template,P=this._directiveNormalizer.normalizeTemplate({ngModuleType:i,componentType:s,moduleUrl:this._reflector.componentModuleUrl(s,_),encapsulation:A.encapsulation,template:A.template,templateUrl:A.templateUrl,styles:A.styles,styleUrls:A.styleUrls,animations:A.animations,interpolation:A.interpolation,preserveWhitespaces:A.preserveWhitespaces});return isPromise(P)&&S?(this._reportError(function componentStillLoadingError(i){const s=Error(`Can't compile synchronously as ${stringify(i)} is still being loaded!`);return s[zr]=i,s}(s),s),null):SyncAsync_then(P,createDirectiveMetadata)}return createDirectiveMetadata(null),null}getNonNormalizedDirectiveMetadata(i){if(!(i=resolveForwardRef(i)))return null;let s=this._nonNormalizedDirectiveCache.get(i);if(s)return s;const S=this._directiveResolver.resolve(i,!1);if(!S)return null;let _=void 0;if(H.isTypeOf(S)){const i=S;assertArrayOfStrings("styles",i.styles),assertArrayOfStrings("styleUrls",i.styleUrls),assertInterpolationSymbols("interpolation",i.interpolation);const s=i.animations;_=new CompileTemplateMetadata({encapsulation:noUndefined(i.encapsulation),template:noUndefined(i.template),templateUrl:noUndefined(i.templateUrl),htmlAst:null,styles:i.styles||[],styleUrls:i.styleUrls||[],animations:s||[],interpolation:noUndefined(i.interpolation),isInline:!!i.template,externalStylesheets:[],ngContentSelectors:[],preserveWhitespaces:noUndefined(S.preserveWhitespaces)})}let T=null,A=[],P=[],N=S.selector;if(H.isTypeOf(S)){const s=S;T=s.changeDetection,s.viewProviders&&(A=this._getProvidersMetadata(s.viewProviders,P,`viewProviders for "${stringifyType(i)}"`,[],i)),s.entryComponents&&(P=flattenAndDedupeArray(s.entryComponents).map(i=>this._getEntryComponentMetadata(i)).concat(P)),N||(N=this._schemaRegistry.getDefaultComponentElementName())}else N||(N=null);let M=[];null!=S.providers&&(M=this._getProvidersMetadata(S.providers,P,`providers for "${stringifyType(i)}"`,[],i));let k=[],R=[];null!=S.queries&&(k=this._getQueriesMetadata(S.queries,!1,i),R=this._getQueriesMetadata(S.queries,!0,i));const F=CompileDirectiveMetadata.create({isHost:!1,selector:N,exportAs:noUndefined(S.exportAs),isComponent:!!_,type:this._getTypeMetadata(i),template:_,changeDetection:T,inputs:S.inputs||[],outputs:S.outputs||[],host:S.host||{},providers:M||[],viewProviders:A||[],queries:k||[],guards:S.guards||{},viewQueries:R||[],entryComponents:P,componentViewType:_?this.getComponentViewClass(i):null,rendererType:_?this.getRendererType(i):null,componentFactory:null});return _&&(F.componentFactory=this.getComponentFactory(N,i,F.inputs,F.outputs)),s={metadata:F,annotation:S},this._nonNormalizedDirectiveCache.set(i,s),s}getDirectiveMetadata(i){const s=this._directiveCache.get(i);return s||this._reportError(syntaxError(`Illegal state: getDirectiveMetadata can only be called after loadNgModuleDirectiveAndPipeMetadata for a module that declares it. Directive ${stringifyType(i)}.`),i),s}getDirectiveSummary(i){const s=this._loadSummary(i,Ye.Directive);return s||this._reportError(syntaxError(`Illegal state: Could not load the summary for directive ${stringifyType(i)}.`),i),s}isDirective(i){return!!this._loadSummary(i,Ye.Directive)||this._directiveResolver.isDirective(i)}isAbstractDirective(i){const s=this._loadSummary(i,Ye.Directive);if(s&&!s.isComponent)return!s.selector;const S=this._directiveResolver.resolve(i,!1);return!(!S||H.isTypeOf(S))&&!S.selector}isPipe(i){return!!this._loadSummary(i,Ye.Pipe)||this._pipeResolver.isPipe(i)}isNgModule(i){return!!this._loadSummary(i,Ye.NgModule)||this._ngModuleResolver.isNgModule(i)}getNgModuleSummary(i,s=null){let S=this._loadSummary(i,Ye.NgModule);if(!S){const _=this.getNgModuleMetadata(i,!1,s);S=_?_.toSummary():null,S&&this._summaryCache.set(i,S)}return S}loadNgModuleDirectiveAndPipeMetadata(i,s,S=!0){const _=this.getNgModuleMetadata(i,S),T=[];return _&&(_.declaredDirectives.forEach(S=>{const _=this.loadDirectiveMetadata(i,S.reference,s);_&&T.push(_)}),_.declaredPipes.forEach(i=>this._loadPipeMetadata(i.reference))),Promise.all(T)}getShallowModuleMetadata(i){let s=this._shallowModuleCache.get(i);if(s)return s;const S=findLast(this._reflector.shallowAnnotations(i),J.isTypeOf);return s={type:this._getTypeMetadata(i),rawExports:S.exports,rawImports:S.imports,rawProviders:S.providers},this._shallowModuleCache.set(i,s),s}getNgModuleMetadata(i,s=!0,S=null){i=resolveForwardRef(i);let _=this._ngModuleCache.get(i);if(_)return _;const T=this._ngModuleResolver.resolve(i,s);if(!T)return null;const A=[],P=[],N=[],M=[],k=[],R=[],F=[],D=[],L=[];T.imports&&flattenAndDedupeArray(T.imports).forEach(s=>{let _=void 0;if(isValidType(s))_=s;else if(s&&s.ngModule){const i=s;_=i.ngModule,i.providers&&R.push(...this._getProvidersMetadata(i.providers,F,`provider for the NgModule '${stringifyType(_)}'`,[],s))}if(_){if(this._checkSelfImport(i,_))return;if(S||(S=new Set),S.has(_))return void this._reportError(syntaxError(`${this._getTypeDescriptor(_)} '${stringifyType(s)}' is imported recursively by the module '${stringifyType(i)}'.`),i);S.add(_);const T=this.getNgModuleSummary(_,S);if(S.delete(_),!T)return void this._reportError(syntaxError(`Unexpected ${this._getTypeDescriptor(s)} '${stringifyType(s)}' imported by the module '${stringifyType(i)}'. Please add a @NgModule annotation.`),i);M.push(T)}else this._reportError(syntaxError(`Unexpected value '${stringifyType(s)}' imported by the module '${stringifyType(i)}'`),i)}),T.exports&&flattenAndDedupeArray(T.exports).forEach(s=>{if(!isValidType(s))return void this._reportError(syntaxError(`Unexpected value '${stringifyType(s)}' exported by the module '${stringifyType(i)}'`),i);if(S||(S=new Set),S.has(s))return void this._reportError(syntaxError(`${this._getTypeDescriptor(s)} '${stringify(s)}' is exported recursively by the module '${stringifyType(i)}'`),i);S.add(s);const _=this.getNgModuleSummary(s,S);S.delete(s),_?k.push(_):P.push(this._getIdentifierMetadata(s))});const $=this._getTransitiveNgModuleMetadata(M,k);T.declarations&&flattenAndDedupeArray(T.declarations).forEach(s=>{if(!isValidType(s))return void this._reportError(syntaxError(`Unexpected value '${stringifyType(s)}' declared by the module '${stringifyType(i)}'`),i);const S=this._getIdentifierMetadata(s);if(this.isDirective(s))this.isAbstractDirective(s)&&this._reportError(syntaxError(`Directive ${stringifyType(s)} has no selector, please add it!`),s),$.addDirective(S),A.push(S),this._addTypeToModule(s,i);else{if(!this.isPipe(s))return void this._reportError(syntaxError(`Unexpected ${this._getTypeDescriptor(s)} '${stringifyType(s)}' declared by the module '${stringifyType(i)}'. Please add a @Pipe/@Directive/@Component annotation.`),i);$.addPipe(S),$.pipes.push(S),N.push(S),this._addTypeToModule(s,i)}});const V=[],U=[];return P.forEach(s=>{if($.directivesSet.has(s.reference))V.push(s),$.addExportedDirective(s);else{if(!$.pipesSet.has(s.reference))return void this._reportError(syntaxError(`Can't export ${this._getTypeDescriptor(s.reference)} ${stringifyType(s.reference)} from ${stringifyType(i)} as it was neither declared nor imported!`),i);U.push(s),$.addExportedPipe(s)}}),T.providers&&R.push(...this._getProvidersMetadata(T.providers,F,`provider for the NgModule '${stringifyType(i)}'`,[],i)),T.entryComponents&&F.push(...flattenAndDedupeArray(T.entryComponents).map(i=>this._getEntryComponentMetadata(i))),T.bootstrap&&flattenAndDedupeArray(T.bootstrap).forEach(s=>{isValidType(s)?D.push(this._getIdentifierMetadata(s)):this._reportError(syntaxError(`Unexpected value '${stringifyType(s)}' used in the bootstrap property of module '${stringifyType(i)}'`),i)}),F.push(...D.map(i=>this._getEntryComponentMetadata(i.reference))),T.schemas&&L.push(...flattenAndDedupeArray(T.schemas)),_=new CompileNgModuleMetadata({type:this._getTypeMetadata(i),providers:R,entryComponents:F,bootstrapComponents:D,schemas:L,declaredDirectives:A,exportedDirectives:V,declaredPipes:N,exportedPipes:U,importedModules:M,exportedModules:k,transitiveModule:$,id:T.id||null}),F.forEach(i=>$.addEntryComponent(i)),R.forEach(i=>$.addProvider(i,_.type)),$.addModule(_.type),this._ngModuleCache.set(i,_),_}_checkSelfImport(i,s){return i===s&&(this._reportError(syntaxError(`'${stringifyType(i)}' module can't import itself`),i),!0)}_getTypeDescriptor(i){if(isValidType(i)){if(this.isDirective(i))return"directive";if(this.isPipe(i))return"pipe";if(this.isNgModule(i))return"module"}return i.provide?"provider":"value"}_addTypeToModule(i,s){const S=this._ngModuleOfTypes.get(i);S&&S!==s?this._reportError(syntaxError(`Type ${stringifyType(i)} is part of the declarations of 2 modules: ${stringifyType(S)} and ${stringifyType(s)}! Please consider moving ${stringifyType(i)} to a higher module that imports ${stringifyType(S)} and ${stringifyType(s)}. You can also create a new NgModule that exports and includes ${stringifyType(i)} then import that NgModule in ${stringifyType(S)} and ${stringifyType(s)}.`),s):this._ngModuleOfTypes.set(i,s)}_getTransitiveNgModuleMetadata(i,s){const S=new TransitiveCompileNgModuleMetadata,_=new Map;return i.concat(s).forEach(i=>{i.modules.forEach(i=>S.addModule(i)),i.entryComponents.forEach(i=>S.addEntryComponent(i));const s=new Set;i.providers.forEach(i=>{const T=tokenReference(i.provider.token);let A=_.get(T);A||(A=new Set,_.set(T,A));const P=i.module.reference;!s.has(T)&&A.has(P)||(A.add(P),s.add(T),S.addProvider(i.provider,i.module))})}),s.forEach(i=>{i.exportedDirectives.forEach(i=>S.addExportedDirective(i)),i.exportedPipes.forEach(i=>S.addExportedPipe(i))}),i.forEach(i=>{i.exportedDirectives.forEach(i=>S.addDirective(i)),i.exportedPipes.forEach(i=>S.addPipe(i))}),S}_getIdentifierMetadata(i){return{reference:i=resolveForwardRef(i)}}isInjectable(i){return this._reflector.tryAnnotations(i).some(i=>Y.isTypeOf(i))}getInjectableSummary(i){return{summaryKind:Ye.Injectable,type:this._getTypeMetadata(i,null,!1)}}getInjectableMetadata(i,s=null,S=!0){const _=this._loadSummary(i,Ye.Injectable),T=_?_.type:this._getTypeMetadata(i,s,S),A=this._reflector.annotations(i).filter(i=>Y.isTypeOf(i));if(0===A.length)return null;const P=A[A.length-1];return{symbol:i,type:T,providedIn:P.providedIn,useValue:P.useValue,useClass:P.useClass,useExisting:P.useExisting,useFactory:P.useFactory,deps:P.deps}}_getTypeMetadata(i,s=null,S=!0){const _=this._getIdentifierMetadata(i);return{reference:_.reference,diDeps:this._getDependenciesMetadata(_.reference,s,S),lifecycleHooks:(T=this._reflector,A=_.reference,Wr.filter(i=>hasLifecycleHook(T,i,A)))};var T,A}_getFactoryMetadata(i,s=null){return{reference:i=resolveForwardRef(i),diDeps:this._getDependenciesMetadata(i,s)}}getPipeMetadata(i){const s=this._pipeCache.get(i);return s||this._reportError(syntaxError(`Illegal state: getPipeMetadata can only be called after loadNgModuleDirectiveAndPipeMetadata for a module that declares it. Pipe ${stringifyType(i)}.`),i),s||null}getPipeSummary(i){const s=this._loadSummary(i,Ye.Pipe);return s||this._reportError(syntaxError(`Illegal state: Could not load the summary for pipe ${stringifyType(i)}.`),i),s}getOrLoadPipeMetadata(i){let s=this._pipeCache.get(i);return s||(s=this._loadPipeMetadata(i)),s}_loadPipeMetadata(i){i=resolveForwardRef(i);const s=this._pipeResolver.resolve(i),S=new CompilePipeMetadata({type:this._getTypeMetadata(i),name:s.name,pure:!!s.pure});return this._pipeCache.set(i,S),this._summaryCache.set(i,S.toSummary()),S}_getDependenciesMetadata(i,s,S=!0){let _=!1;const T=(s||this._reflector.parameters(i)||[]).map(i=>{let s=!1,S=!1,T=!1,A=!1,P=!1,N=null;return Array.isArray(i)?i.forEach(i=>{ie.isTypeOf(i)?S=!0:re.isTypeOf(i)?T=!0:ne.isTypeOf(i)?A=!0:te.isTypeOf(i)?P=!0:F.isTypeOf(i)?(s=!0,N=i.attributeName):k.isTypeOf(i)?N=i.token:(R.isTypeOf(i)||i instanceof StaticSymbol||isValidType(i)&&null==N)&&(N=i)}):N=i,null==N?(_=!0,{}):{isAttribute:s,isHost:S,isSelf:T,isSkipSelf:A,isOptional:P,token:this._getTokenMetadata(N)}});if(_){const s=T.map(i=>i.token?stringifyType(i.token):"?").join(", "),_=`Can't resolve all parameters for ${stringifyType(i)}: (${s}).`;(S||this._config.strictInjectionParameters)&&this._reportError(syntaxError(_),i)}return T}_getTokenMetadata(i){let s;return s="string"==typeof(i=resolveForwardRef(i))?{value:i}:{identifier:{reference:i}},s}_getProvidersMetadata(i,s,S,_=[],T){return i.forEach((A,P)=>{if(Array.isArray(A))this._getProvidersMetadata(A,s,S,_);else{let N=void 0;if((A=resolveForwardRef(A))&&"object"==typeof A&&A.hasOwnProperty("provide"))this._validateProvider(A),N=new ProviderMeta(A.provide,A);else{if(!isValidType(A)){if(void 0===A)return void this._reportError(syntaxError("Encountered undefined provider! Usually this means you have a circular dependencies. This might be caused by using 'barrel' index.ts files."));{const s=i.reduce((i,s,S)=>(S<P?i.push(""+stringifyType(s)):S==P?i.push(`?${stringifyType(s)}?`):S==P+1&&i.push("..."),i),[]).join(", ");return void this._reportError(syntaxError(`Invalid ${S||"provider"} - only instances of Provider and Type are allowed, got: [${s}]`),T)}}N=new ProviderMeta(A,{useClass:A})}N.token===this._reflector.resolveExternalReference(Identifiers.ANALYZE_FOR_ENTRY_COMPONENTS)?s.push(...this._getEntryComponentsFromProvider(N,T)):_.push(this.getProviderMetadata(N))}}),_}_validateProvider(i){i.hasOwnProperty("useClass")&&null==i.useClass&&this._reportError(syntaxError(`Invalid provider for ${stringifyType(i.provide)}. useClass cannot be ${i.useClass}.\n           Usually it happens when:\n           1. There's a circular dependency (might be caused by using index.ts (barrel) files).\n           2. Class was used before it was declared. Use forwardRef in this case.`))}_getEntryComponentsFromProvider(i,s){const S=[],_=[];return i.useFactory||i.useExisting||i.useClass?(this._reportError(syntaxError("The ANALYZE_FOR_ENTRY_COMPONENTS token only supports useValue!"),s),[]):i.multi?(function extractIdentifiers(i,s){visitValue(i,new _CompileValueConverter,s)}(i.useValue,_),_.forEach(i=>{const s=this._getEntryComponentMetadata(i.reference,!1);s&&S.push(s)}),S):(this._reportError(syntaxError("The ANALYZE_FOR_ENTRY_COMPONENTS token only supports 'multi = true'!"),s),[])}_getEntryComponentMetadata(i,s=!0){const S=this.getNonNormalizedDirectiveMetadata(i);if(S&&S.metadata.isComponent)return{componentType:i,componentFactory:S.metadata.componentFactory};const _=this._loadSummary(i,Ye.Directive);if(_&&_.isComponent)return{componentType:i,componentFactory:_.componentFactory};if(s)throw syntaxError(i.name+" cannot be used as an entry component.");return null}_getInjectableTypeMetadata(i,s=null){const S=this._loadSummary(i,Ye.Injectable);return S?S.type:this._getTypeMetadata(i,s)}getProviderMetadata(i){let s=void 0,S=null,_=null,T=this._getTokenMetadata(i.token);return i.useClass?(S=this._getInjectableTypeMetadata(i.useClass,i.dependencies),s=S.diDeps,i.token===i.useClass&&(T={identifier:S})):i.useFactory&&(_=this._getFactoryMetadata(i.useFactory,i.dependencies),s=_.diDeps),{token:T,useClass:S,useValue:i.useValue,useFactory:_,useExisting:i.useExisting?this._getTokenMetadata(i.useExisting):void 0,deps:s,multi:i.multi}}_getQueriesMetadata(i,s,S){const _=[];return Object.keys(i).forEach(T=>{const A=i[T];A.isViewQuery===s&&_.push(this._getQueryMetadata(A,T,S))}),_}_queryVarBindings(i){return i.split(/\s*,\s*/)}_getQueryMetadata(i,s,S){let _;return"string"==typeof i.selector?_=this._queryVarBindings(i.selector).map(i=>this._getTokenMetadata(i)):i.selector?_=[this._getTokenMetadata(i.selector)]:(this._reportError(syntaxError(`Can't construct a query for the property "${s}" of "${stringifyType(S)}" since the query selector wasn't defined.`),S),_=[]),{selectors:_,first:i.first,descendants:i.descendants,propertyName:s,read:i.read?this._getTokenMetadata(i.read):null,static:i.static}}_reportError(i,s,S){if(!this._errorCollector)throw i;this._errorCollector(i,s),S&&this._errorCollector(i,S)}}function flattenAndDedupeArray(i){return function dedupeArray(i){return i?Array.from(new Set(i)):[]}(function flattenArray(i,s=[]){if(i)for(let S=0;S<i.length;S++){const _=resolveForwardRef(i[S]);Array.isArray(_)?flattenArray(_,s):s.push(_)}return s}(i))}function isValidType(i){return i instanceof StaticSymbol||i instanceof se}class _CompileValueConverter extends ValueTransformer{visitOther(i,s){s.push({reference:i})}}function stringifyType(i){return i instanceof StaticSymbol?`${i.name} in ${i.filePath}`:stringify(i)}function providerDef(i,s){let S=0;s.eager||(S|=4096),s.providerType===Gt.PrivateService&&(S|=8192),s.isModule&&(S|=1073741824),s.lifecycleHooks.forEach(i=>{i!==Ur.OnDestroy&&s.providerType!==Gt.Directive&&s.providerType!==Gt.Component||(S|=lifecycleHookToNodeFlag(i))});const{providerExpr:_,flags:T,depsExpr:A}=s.multiProvider?function multiProviderDef(i,s,S){const _=[],T=[],A=S.map((s,S)=>{let _;if(s.useClass){const T=convertDeps(S,s.deps||s.useClass.diDeps);_=i.importExpr(s.useClass.reference).instantiate(T)}else if(s.useFactory){const T=convertDeps(S,s.deps||s.useFactory.diDeps);_=i.importExpr(s.useFactory.reference).callFn(T)}else if(s.useExisting){_=convertDeps(S,[{token:s.useExisting}])[0]}else _=convertValueToOutputAst(i,s.useValue);return _});return{providerExpr:fn(T,[new ReturnStatement(literalArr(A))],he),flags:1024|s,depsExpr:literalArr(_)};function convertDeps(s,S){return S.map((S,A)=>{const P=`p${s}_${A}`;return T.push(new FnParam(P,pe)),_.push(depDef(i,S)),variable(P)})}}(i,S,s.providers):singleProviderDef(i,S,s.providerType,s.providers[0]);return{providerExpr:_,flags:T,depsExpr:A,tokenExpr:tokenExpr(i,s.token)}}function singleProviderDef(i,s,S,_){let T,A;return S===Gt.Directive||S===Gt.Component?(T=i.importExpr(_.useClass.reference),s|=16384,A=_.deps||_.useClass.diDeps):_.useClass?(T=i.importExpr(_.useClass.reference),s|=512,A=_.deps||_.useClass.diDeps):_.useFactory?(T=i.importExpr(_.useFactory.reference),s|=1024,A=_.deps||_.useFactory.diDeps):_.useExisting?(T=Fe,s|=2048,A=[{token:_.useExisting}]):(T=convertValueToOutputAst(i,_.useValue),s|=256,A=[]),{providerExpr:T,flags:s,depsExpr:literalArr(A.map(s=>depDef(i,s)))}}function tokenExpr(i,s){return s.identifier?i.importExpr(s.identifier.reference):literal(s.value)}function depDef(i,s){const S=s.isValue?convertValueToOutputAst(i,s.value):tokenExpr(i,s.token);let _=0;return s.isSkipSelf&&(_|=1),s.isOptional&&(_|=2),s.isSelf&&(_|=4),s.isValue&&(_|=8),0===_?S:literalArr([literal(_),S])}function lifecycleHookToNodeFlag(i){let s=0;switch(i){case Ur.AfterContentChecked:s=2097152;break;case Ur.AfterContentInit:s=1048576;break;case Ur.AfterViewChecked:s=8388608;break;case Ur.AfterViewInit:s=4194304;break;case Ur.DoCheck:s=262144;break;case Ur.OnChanges:s=524288;break;case Ur.OnDestroy:s=131072;break;case Ur.OnInit:s=65536}return s}function componentFactoryResolverProviderDef(i,s,S,_){const T=_.map(i=>s.importExpr(i.componentFactory)),A=createTokenForExternalReference(i,Identifiers.ComponentFactoryResolver),P={diDeps:[{isValue:!0,value:literalArr(T)},{token:A,isSkipSelf:!0,isOptional:!0},{token:createTokenForExternalReference(i,Identifiers.NgModuleRef)}],lifecycleHooks:[],reference:i.resolveExternalReference(Identifiers.CodegenComponentFactoryResolver)},{providerExpr:N,flags:M,depsExpr:k}=singleProviderDef(s,S,Gt.PrivateService,{token:A,multi:!1,useClass:P});return{providerExpr:N,flags:M,depsExpr:k,tokenExpr:tokenExpr(s,A)}}class NgModuleCompileResult{constructor(i){this.ngModuleFactoryVar=i}}const Hr=variable("_l");class NgModuleCompiler{constructor(i){this.reflector=i}compile(i,s,S){const _=typeSourceSpan("NgModule",s.type),T=s.transitiveModule.entryComponents,A=s.bootstrapComponents,P=new NgModuleProviderAnalyzer(this.reflector,s,S,_),N=[componentFactoryResolverProviderDef(this.reflector,i,0,T)].concat(P.parse().map(s=>providerDef(i,s))).map(({providerExpr:i,depsExpr:s,flags:S,tokenExpr:_})=>importExpr(Identifiers.moduleProviderDef).callFn([literal(S),_,i,s])),M=importExpr(Identifiers.moduleDef).callFn([literalArr(N)]),k=fn([new FnParam(Hr.name)],[new ReturnStatement(M)],he),R=identifierName(s.type)+"NgFactory";if(this._createNgModuleFactory(i,s.type.reference,importExpr(Identifiers.createModuleFactory).callFn([i.importExpr(s.type.reference),literalArr(A.map(s=>i.importExpr(s.reference))),k])),s.id){const S="string"==typeof s.id?literal(s.id):i.importExpr(s.id),_=importExpr(Identifiers.RegisterModuleFactoryFn).callFn([S,variable(R)]).toStmt();i.statements.push(_)}return new NgModuleCompileResult(R)}createStub(i,s){this._createNgModuleFactory(i,s,Fe)}_createNgModuleFactory(i,s,S){const _=variable(identifierName({reference:s})+"NgFactory").set(S).toDeclStmt(importType(Identifiers.NgModuleFactory,[expressionType(i.importExpr(s))],[le.Const]),[$e.Final,$e.Exported]);i.statements.push(_)}}class NgModuleResolver{constructor(i){this._reflector=i}isNgModule(i){return this._reflector.annotations(i).some(J.isTypeOf)}resolve(i,s=!0){const S=findLast(this._reflector.annotations(i),J.isTypeOf);if(S)return S;if(s)throw new Error(`No NgModule metadata found for '${stringify(i)}'.`);return null}}function debugOutputAstAsTypeScript(i){const s=new _TsEmitterVisitor,S=EmitterVisitorContext.createRoot();return(Array.isArray(i)?i:[i]).forEach(i=>{if(i instanceof Statement)i.visitStatement(s,S);else if(i instanceof Expression)i.visitExpression(s,S);else{if(!(i instanceof Type$1))throw new Error("Don't know how to print debug info for "+i);i.visitType(s,S)}}),S.toSource()}class TypeScriptEmitter{emitStatementsAndContext(i,s,S="",_=!0,T,A){const P=new _TsEmitterVisitor(T,A),N=EmitterVisitorContext.createRoot();P.visitAllStatements(s,N);const M=S?S.split("\n"):[];P.reexports.forEach((i,s)=>{const S=i.map(i=>`${i.name} as ${i.as}`).join(",");M.push(`export {${S}} from '${s}';`)}),P.importsWithPrefixes.forEach((i,s)=>{M.push(`import * as ${i} from '${s}';`)});const k=_?N.toSourceMapGenerator(i,M.length).toJsComment():"",R=[...M,N.toSource(),k];return k&&R.push(""),N.setPreambleLineCount(M.length),{sourceText:R.join("\n"),context:N}}emitStatements(i,s,S=""){return this.emitStatementsAndContext(i,s,S).sourceText}}class _TsEmitterVisitor extends AbstractEmitterVisitor{constructor(i,s){super(!1),this.referenceFilter=i,this.importFilter=s,this.typeExpression=0,this.importsWithPrefixes=new Map,this.reexports=new Map}visitType(i,s,S="any"){i?(this.typeExpression++,i.visitType(this,s),this.typeExpression--):s.print(null,S)}visitLiteralExpr(i,s){const S=i.value;return null==S&&i.type!=he?(s.print(i,`(${S} as any)`),null):super.visitLiteralExpr(i,s)}visitLiteralArrayExpr(i,s){0===i.entries.length&&s.print(i,"(");const S=super.visitLiteralArrayExpr(i,s);return 0===i.entries.length&&s.print(i," as any[])"),S}visitExternalExpr(i,s){return this._visitIdentifier(i.value,i.typeParams,s),null}visitAssertNotNullExpr(i,s){const S=super.visitAssertNotNullExpr(i,s);return s.print(i,"!"),S}visitDeclareVarStmt(i,s){if(i.hasModifier($e.Exported)&&i.value instanceof ExternalExpr&&!i.type){const{name:s,moduleName:S}=i.value.value;if(S){let _=this.reexports.get(S);return _||(_=[],this.reexports.set(S,_)),_.push({name:s,as:i.name}),null}}return i.hasModifier($e.Exported)&&s.print(i,"export "),i.hasModifier($e.Final)?s.print(i,"const"):s.print(i,"var"),s.print(i," "+i.name),this._printColonType(i.type,s),i.value&&(s.print(i," = "),i.value.visitExpression(this,s)),s.println(i,";"),null}visitWrappedNodeExpr(i,s){throw new Error("Cannot visit a WrappedNodeExpr when outputting Typescript.")}visitCastExpr(i,s){return s.print(i,"(<"),i.type.visitType(this,s),s.print(i,">"),i.value.visitExpression(this,s),s.print(i,")"),null}visitInstantiateExpr(i,s){return s.print(i,"new "),this.typeExpression++,i.classExpr.visitExpression(this,s),this.typeExpression--,s.print(i,"("),this.visitAllExpressions(i.args,s,","),s.print(i,")"),null}visitDeclareClassStmt(i,s){return s.pushClass(i),i.hasModifier($e.Exported)&&s.print(i,"export "),s.print(i,"class "+i.name),null!=i.parent&&(s.print(i," extends "),this.typeExpression++,i.parent.visitExpression(this,s),this.typeExpression--),s.println(i," {"),s.incIndent(),i.fields.forEach(i=>this._visitClassField(i,s)),null!=i.constructorMethod&&this._visitClassConstructor(i,s),i.getters.forEach(i=>this._visitClassGetter(i,s)),i.methods.forEach(i=>this._visitClassMethod(i,s)),s.decIndent(),s.println(i,"}"),s.popClass(),null}_visitClassField(i,s){i.hasModifier($e.Private)&&s.print(null,"/*private*/ "),i.hasModifier($e.Static)&&s.print(null,"static "),s.print(null,i.name),this._printColonType(i.type,s),i.initializer&&(s.print(null," = "),i.initializer.visitExpression(this,s)),s.println(null,";")}_visitClassGetter(i,s){i.hasModifier($e.Private)&&s.print(null,"private "),s.print(null,`get ${i.name}()`),this._printColonType(i.type,s),s.println(null," {"),s.incIndent(),this.visitAllStatements(i.body,s),s.decIndent(),s.println(null,"}")}_visitClassConstructor(i,s){s.print(i,"constructor("),this._visitParams(i.constructorMethod.params,s),s.println(i,") {"),s.incIndent(),this.visitAllStatements(i.constructorMethod.body,s),s.decIndent(),s.println(i,"}")}_visitClassMethod(i,s){i.hasModifier($e.Private)&&s.print(null,"private "),s.print(null,i.name+"("),this._visitParams(i.params,s),s.print(null,")"),this._printColonType(i.type,s,"void"),s.println(null," {"),s.incIndent(),this.visitAllStatements(i.body,s),s.decIndent(),s.println(null,"}")}visitFunctionExpr(i,s){return i.name&&(s.print(i,"function "),s.print(i,i.name)),s.print(i,"("),this._visitParams(i.params,s),s.print(i,")"),this._printColonType(i.type,s,"void"),i.name||s.print(i," => "),s.println(i,"{"),s.incIndent(),this.visitAllStatements(i.statements,s),s.decIndent(),s.print(i,"}"),null}visitDeclareFunctionStmt(i,s){return i.hasModifier($e.Exported)&&s.print(i,"export "),s.print(i,`function ${i.name}(`),this._visitParams(i.params,s),s.print(i,")"),this._printColonType(i.type,s,"void"),s.println(i," {"),s.incIndent(),this.visitAllStatements(i.statements,s),s.decIndent(),s.println(i,"}"),null}visitTryCatchStmt(i,s){s.println(i,"try {"),s.incIndent(),this.visitAllStatements(i.bodyStmts,s),s.decIndent(),s.println(i,`} catch (${dt.name}) {`),s.incIndent();const S=[mt.set(dt.prop("stack",null)).toDeclStmt(null,[$e.Final])].concat(i.catchStmts);return this.visitAllStatements(S,s),s.decIndent(),s.println(i,"}"),null}visitBuiltinType(i,s){let S;switch(i.name){case ce.Bool:S="boolean";break;case ce.Dynamic:S="any";break;case ce.Function:S="Function";break;case ce.Number:case ce.Int:S="number";break;case ce.String:S="string";break;case ce.None:S="never";break;default:throw new Error("Unsupported builtin type "+i.name)}return s.print(null,S),null}visitExpressionType(i,s){return i.value.visitExpression(this,s),null!==i.typeParams&&(s.print(null,"<"),this.visitAllObjects(i=>this.visitType(i,s),i.typeParams,s,","),s.print(null,">")),null}visitArrayType(i,s){return this.visitType(i.of,s),s.print(null,"[]"),null}visitMapType(i,s){return s.print(null,"{[key: string]:"),this.visitType(i.valueType,s),s.print(null,"}"),null}getBuiltinMethodName(i){let s;switch(i){case Oe.ConcatArray:s="concat";break;case Oe.SubscribeObservable:s="subscribe";break;case Oe.Bind:s="bind";break;default:throw new Error("Unknown builtin method: "+i)}return s}_visitParams(i,s){this.visitAllObjects(i=>{s.print(null,i.name),this._printColonType(i.type,s)},i,s,",")}_visitIdentifier(i,s,S){const{name:_,moduleName:T}=i;if(this.referenceFilter&&this.referenceFilter(i))S.print(null,"(null as any)");else{if(T&&(!this.importFilter||!this.importFilter(i))){let i=this.importsWithPrefixes.get(T);null==i&&(i="i"+this.importsWithPrefixes.size,this.importsWithPrefixes.set(T,i)),S.print(null,i+".")}if(S.print(null,_),this.typeExpression>0){(s||[]).length>0&&(S.print(null,"<"),this.visitAllObjects(i=>i.visitType(this,S),s,S,","),S.print(null,">"))}}}_printColonType(i,s,S){i!==he&&(s.print(null,":"),this.visitType(i,s,S))}}class PipeResolver{constructor(i){this._reflector=i}isPipe(i){const s=this._reflector.annotations(resolveForwardRef(i));return s&&s.some(q.isTypeOf)}resolve(i,s=!0){const S=this._reflector.annotations(resolveForwardRef(i));if(S){const i=findLast(S,q.isTypeOf);if(i)return i}if(s)throw new Error("No Pipe decorator found on "+stringify(i));return null}}class TypeCheckCompiler{constructor(i,s){this.options=i,this.reflector=s}compileComponent(i,s,S,_,T,A){const P=new Map;_.forEach(i=>P.set(i.name,i.type.reference));let N=0;const viewBuilderFactory=(i,S)=>{const _=N++;return new ViewBuilder(this.options,this.reflector,T,i,s.type.reference,s.isHost,_,P,S,A,viewBuilderFactory)},M=viewBuilderFactory(null,[]);return M.visitAll([],S),M.build(i)}}const qr=new class TypeCheckLocalResolver{notifyImplicitReceiverUse(){}getLocal(i){return i===EventHandlerVars.event.name?variable("_any"):null}};class ViewBuilder{constructor(i,s,S,_,T,A,P,N,M,k,R){this.options=i,this.reflector=s,this.externalReferenceVars=S,this.parent=_,this.component=T,this.isHostComponent=A,this.embeddedViewIndex=P,this.pipes=N,this.guards=M,this.ctx=k,this.viewBuilderFactory=R,this.refOutputVars=new Map,this.variables=[],this.children=[],this.updates=[],this.actions=[]}getOutputVar(i){let s;if(s=i===this.component&&this.isHostComponent?"_any":i instanceof StaticSymbol?this.externalReferenceVars.get(i):"_any",!s)throw new Error("Illegal State: referring to a type without a variable "+JSON.stringify(i));return s}getTypeGuardExpressions(i){const s=[...this.guards];for(let S of i.directives)for(let i of S.inputs){const _=S.directive.guards[i.directiveName];if(_){const S="UseIf"===_;s.push({guard:_,useIf:S,expression:{context:this.component,value:i.value,sourceSpan:i.sourceSpan}})}}return s}visitAll(i,s){this.variables=i,templateVisitAll(this,s)}build(i,s=[]){this.children.forEach(S=>S.build(i,s));let S=[variable("_any").set(Fe).toDeclStmt(pe)],_=0;if(this.updates.forEach(i=>{const{sourceSpan:s,context:T,value:A}=this.preprocessUpdateExpression(i),P=""+_++,N=T===this.component?this:qr,{stmts:M,currValExpr:k}=convertPropertyBinding(N,variable(this.getOutputVar(T)),A,P,vt.General);M.push(new ExpressionStatement(k)),S.push(...M.map(i=>applySourceSpanToStatementIfNeeded(i,s)))}),this.actions.forEach(({sourceSpan:i,context:s,value:T})=>{const A=""+_++,P=s===this.component?this:qr,{stmts:N}=convertActionBinding(P,variable(this.getOutputVar(s)),T,A);S.push(...N.map(s=>applySourceSpanToStatementIfNeeded(s,i)))}),this.guards.length){let i=void 0;for(const s of this.guards){const{context:S,value:T}=this.preprocessUpdateExpression(s.expression),A=""+_++,P=S===this.component?this:qr,{stmts:N,currValExpr:M}=convertPropertyBinding(P,variable(this.getOutputVar(S)),T,A,vt.TrySimple);if(0==N.length){const S=s.useIf?M:this.ctx.importExpr(s.guard).callFn([M]);i=i?i.and(S):S}}i&&(S=[new IfStmt(i,S)])}const T=`_View_${i}_${this.embeddedViewIndex}`,A=new DeclareFunctionStmt(T,[],S);return s.push(A),s}visitBoundText(i,s){i.value.ast.expressions.forEach(s=>this.updates.push({context:this.component,value:s,sourceSpan:i.sourceSpan}))}visitEmbeddedTemplate(i,s){if(this.visitElementOrTemplate(i),this.options.fullTemplateTypeCheck){const s=this.getTypeGuardExpressions(i),S=this.viewBuilderFactory(this,s);this.children.push(S),S.visitAll(i.variables,i.children)}}visitElement(i,s){this.visitElementOrTemplate(i);i.inputs.forEach(i=>{this.updates.push({context:this.component,value:i.value,sourceSpan:i.sourceSpan})}),templateVisitAll(this,i.children)}visitElementOrTemplate(i){i.directives.forEach(i=>{this.visitDirective(i)}),i.references.forEach(i=>{let s=null;s=i.value&&i.value.identifier&&this.options.fullTemplateTypeCheck?i.value.identifier.reference:ce.Dynamic,this.refOutputVars.set(i.name,s)}),i.outputs.forEach(i=>{this.actions.push({context:this.component,value:i.handler,sourceSpan:i.sourceSpan})})}visitDirective(i){const s=i.directive.type.reference;i.inputs.forEach(i=>this.updates.push({context:this.component,value:i.value,sourceSpan:i.sourceSpan})),this.options.fullTemplateTypeCheck&&(i.hostProperties.forEach(i=>this.updates.push({context:s,value:i.value,sourceSpan:i.sourceSpan})),i.hostEvents.forEach(i=>this.actions.push({context:s,value:i.handler,sourceSpan:i.sourceSpan})))}notifyImplicitReceiverUse(){}getLocal(i){if(i==EventHandlerVars.event.name)return variable(this.getOutputVar(ce.Dynamic));for(let s=this;s;s=s.parent){let S;if(S=s.refOutputVars.get(i),null==S){s.variables.find(s=>s.name===i)&&(S=ce.Dynamic)}if(null!=S)return variable(this.getOutputVar(S))}return null}pipeOutputVar(i){const s=this.pipes.get(i);if(!s)throw new Error(`Illegal State: Could not find pipe ${i} in template of ${this.component}`);return this.getOutputVar(s)}preprocessUpdateExpression(i){return{sourceSpan:i.sourceSpan,context:i.context,value:convertPropertyBindingBuiltins({createLiteralArrayConverter:i=>i=>{const s=literalArr(i);return this.options.fullTemplateTypeCheck?s:s.cast(pe)},createLiteralMapConverter:i=>s=>{const S=literalMap(i.map((i,S)=>({key:i.key,value:s[S],quoted:i.quoted})));return this.options.fullTemplateTypeCheck?S:S.cast(pe)},createPipeConverter:(i,s)=>s=>(this.options.fullTemplateTypeCheck?variable(this.pipeOutputVar(i)):variable(this.getOutputVar(ce.Dynamic))).callMethod("transform",s)},i.value)}}visitNgContent(i,s){}visitText(i,s){}visitDirectiveProperty(i,s){}visitReference(i,s){}visitVariable(i,s){}visitEvent(i,s){}visitElementProperty(i,s){}visitAttr(i,s){}}class ViewCompileResult{constructor(i,s){this.viewClassVar=i,this.rendererTypeVar=s}}class ViewCompiler{constructor(i){this._reflector=i}compileComponent(i,s,S,_,T){let A=0,P=void 0;if(!s.isHost){const S=s.template,T=[];S.animations&&S.animations.length&&T.push(new LiteralMapEntry("animation",convertValueToOutputAst(i,S.animations),!0));const A=variable(rendererTypeName(s.type.reference));P=A.name,i.statements.push(A.set(importExpr(Identifiers.createRendererType2).callFn([new LiteralMapExpr([new LiteralMapEntry("encapsulation",literal(S.encapsulation),!1),new LiteralMapEntry("styles",_,!1),new LiteralMapEntry("data",new LiteralMapExpr(T),!1)])])).toDeclStmt(importType(Identifiers.RendererType2),[$e.Final,$e.Exported]))}const viewBuilderFactory=S=>{const _=A++;return new ViewBuilder$1(this._reflector,i,S,s,_,T,viewBuilderFactory)},N=viewBuilderFactory(null);return N.visitAll([],S),i.statements.push(...N.build()),new ViewCompileResult(N.viewName,P)}}const Kr=variable("_l"),Gr=variable("_v"),Xr=variable("_ck"),Qr=variable("_co"),Jr=variable("en"),Yr=variable("ad");class ViewBuilder$1{constructor(i,s,S,_,T,A,P){this.reflector=i,this.outputCtx=s,this.parent=S,this.component=_,this.embeddedViewIndex=T,this.usedPipes=A,this.viewBuilderFactory=P,this.nodes=[],this.purePipeNodeIndices=Object.create(null),this.refNodeIndices=Object.create(null),this.variables=[],this.children=[],this.compType=this.embeddedViewIndex>0?pe:expressionType(s.importExpr(this.component.type.reference)),this.viewName=viewClassName(this.component.type.reference,this.embeddedViewIndex)}visitAll(i,s){this.variables=i,this.parent||this.usedPipes.forEach(i=>{i.pure&&(this.purePipeNodeIndices[i.name]=this._createPipe(null,i))}),this.parent||this.component.viewQueries.forEach((i,s)=>{const S=s+1,_=i.first?0:1,T=134217728|calcStaticDynamicQueryFlags(i);this.nodes.push(()=>({sourceSpan:null,nodeFlags:T,nodeDef:importExpr(Identifiers.queryDef).callFn([literal(T),literal(S),new LiteralMapExpr([new LiteralMapEntry(i.propertyName,literal(_),!1)])])}))}),templateVisitAll(this,s),this.parent&&(0===s.length||function needsAdditionalRootNode(i){const s=i[i.length-1];if(s instanceof EmbeddedTemplateAst)return s.hasViewContainer;if(s instanceof ElementAst)return isNgContainer(s.name)&&s.children.length?needsAdditionalRootNode(s.children):s.hasViewContainer;return s instanceof NgContentAst}(s))&&this.nodes.push(()=>({sourceSpan:null,nodeFlags:1,nodeDef:importExpr(Identifiers.anchorDef).callFn([literal(0),Fe,Fe,literal(0)])}))}build(i=[]){this.children.forEach(s=>s.build(i));const{updateRendererStmts:s,updateDirectivesStmts:S,nodeDefExprs:_}=this._createNodeExpressions(),T=this._createUpdateFn(s),A=this._createUpdateFn(S);let P=0;this.parent||this.component.changeDetection!==z.OnPush||(P|=2);const N=new DeclareFunctionStmt(this.viewName,[new FnParam(Kr.name)],[new ReturnStatement(importExpr(Identifiers.viewDef).callFn([literal(P),literalArr(_),A,T]))],importType(Identifiers.ViewDefinition),0===this.embeddedViewIndex?[$e.Exported]:[]);return i.push(N),i}_createUpdateFn(i){let s;if(i.length>0){const S=[];!this.component.isHost&&findReadVarNames(i).has(Qr.name)&&S.push(Qr.set(Gr.prop("component")).toDeclStmt(this.compType)),s=fn([new FnParam(Xr.name,he),new FnParam(Gr.name,he)],[...S,...i],he)}else s=Fe;return s}visitNgContent(i,s){this.nodes.push(()=>({sourceSpan:i.sourceSpan,nodeFlags:8,nodeDef:importExpr(Identifiers.ngContentDef).callFn([literal(i.ngContentIndex),literal(i.index)])}))}visitText(i,s){this.nodes.push(()=>({sourceSpan:i.sourceSpan,nodeFlags:2,nodeDef:importExpr(Identifiers.textDef).callFn([literal(-1),literal(i.ngContentIndex),literalArr([literal(i.value)])])}))}visitBoundText(i,s){const S=this.nodes.length;this.nodes.push(null);const _=i.value.ast,T=_.expressions.map((s,_)=>this._preprocessUpdateExpression({nodeIndex:S,bindingIndex:_,sourceSpan:i.sourceSpan,context:Qr,value:s})),A=S;this.nodes[S]=()=>({sourceSpan:i.sourceSpan,nodeFlags:2,nodeDef:importExpr(Identifiers.textDef).callFn([literal(A),literal(i.ngContentIndex),literalArr(_.strings.map(i=>literal(i)))]),updateRenderer:T})}visitEmbeddedTemplate(i,s){const S=this.nodes.length;this.nodes.push(null);const{flags:_,queryMatchesExpr:T,hostEvents:A}=this._visitElementOrTemplate(S,i),P=this.viewBuilderFactory(this);this.children.push(P),P.visitAll(i.variables,i.children);const N=this.nodes.length-S-1;this.nodes[S]=()=>({sourceSpan:i.sourceSpan,nodeFlags:1|_,nodeDef:importExpr(Identifiers.anchorDef).callFn([literal(_),T,literal(i.ngContentIndex),literal(N),this._createElementHandleEventFn(S,A),variable(P.viewName)])})}visitElement(i,s){const S=this.nodes.length;this.nodes.push(null);const _=isNgContainer(i.name)?null:i.name,{flags:T,usedEvents:A,queryMatchesExpr:P,hostBindings:N,hostEvents:M}=this._visitElementOrTemplate(S,i);let k=[],R=[],F=[];if(_){const s=i.inputs.map(i=>({context:Qr,inputAst:i,dirAst:null})).concat(N);s.length&&(R=s.map((i,s)=>this._preprocessUpdateExpression({context:i.context,nodeIndex:S,bindingIndex:s,sourceSpan:i.inputAst.sourceSpan,value:i.inputAst.value})),k=s.map(i=>function elementBindingDef(i,s){const S=i.type;switch(S){case 1:return literalArr([literal(1),literal(i.name),literal(i.securityContext)]);case 0:return literalArr([literal(8),literal(i.name),literal(i.securityContext)]);case 4:return literalArr([literal(8|(s&&s.directive.isComponent?32:16)),literal("@"+i.name),literal(i.securityContext)]);case 2:return literalArr([literal(2),literal(i.name),Fe]);case 3:return literalArr([literal(4),literal(i.name),literal(i.unit)]);default:throw new Error("unexpected "+S)}}(i.inputAst,i.dirAst))),F=A.map(([i,s])=>literalArr([literal(i),literal(s)]))}templateVisitAll(this,i.children);const D=this.nodes.length-S-1,L=i.directives.find(i=>i.directive.isComponent);let $=Fe,V=Fe;L&&(V=this.outputCtx.importExpr(L.directive.componentViewType),$=this.outputCtx.importExpr(L.directive.rendererType));const U=S;this.nodes[S]=()=>({sourceSpan:i.sourceSpan,nodeFlags:1|T,nodeDef:importExpr(Identifiers.elementDef).callFn([literal(U),literal(T),P,literal(i.ngContentIndex),literal(D),literal(_),_?fixedAttrsDef(i):Fe,k.length?literalArr(k):Fe,F.length?literalArr(F):Fe,this._createElementHandleEventFn(S,M),V,$]),updateRenderer:R})}_visitElementOrTemplate(i,s){let S=0;s.hasViewContainer&&(S|=16777216);const _=new Map;s.outputs.forEach(i=>{const{name:s,target:S}=elementEventNameAndTarget(i,null);_.set(elementEventFullName(S,s),[S,s])}),s.directives.forEach(i=>{i.hostEvents.forEach(s=>{const{name:S,target:T}=elementEventNameAndTarget(s,i);_.set(elementEventFullName(T,S),[T,S])})});const T=[],A=[];this._visitComponentFactoryResolverProvider(s.directives),s.providers.forEach(i=>{let S=void 0;if(s.directives.forEach(s=>{s.directive.type.reference===tokenReference(i.token)&&(S=s)}),S){const{hostBindings:P,hostEvents:N}=this._visitDirective(i,S,s.references,s.queryMatches,_);T.push(...P),A.push(...N)}else this._visitProvider(i,s.queryMatches)});let P=[];return s.queryMatches.forEach(i=>{let s=void 0;tokenReference(i.value)===this.reflector.resolveExternalReference(Identifiers.ElementRef)?s=0:tokenReference(i.value)===this.reflector.resolveExternalReference(Identifiers.ViewContainerRef)?s=3:tokenReference(i.value)===this.reflector.resolveExternalReference(Identifiers.TemplateRef)&&(s=2),null!=s&&P.push(literalArr([literal(i.queryId),literal(s)]))}),s.references.forEach(s=>{let S=void 0;s.value?tokenReference(s.value)===this.reflector.resolveExternalReference(Identifiers.TemplateRef)&&(S=2):S=1,null!=S&&(this.refNodeIndices[s.name]=i,P.push(literalArr([literal(s.name),literal(S)])))}),s.outputs.forEach(i=>{A.push({context:Qr,eventAst:i,dirAst:null})}),{flags:S,usedEvents:Array.from(_.values()),queryMatchesExpr:P.length?literalArr(P):Fe,hostBindings:T,hostEvents:A}}_visitDirective(i,s,S,_,T){const A=this.nodes.length;this.nodes.push(null),s.directive.queries.forEach((i,S)=>{const _=s.contentQueryStartId+S,T=67108864|calcStaticDynamicQueryFlags(i),A=i.first?0:1;this.nodes.push(()=>({sourceSpan:s.sourceSpan,nodeFlags:T,nodeDef:importExpr(Identifiers.queryDef).callFn([literal(T),literal(_),new LiteralMapExpr([new LiteralMapEntry(i.propertyName,literal(A),!1)])])}))});const P=this.nodes.length-A-1;let{flags:N,queryMatchExprs:M,providerExpr:k,depsExpr:R}=this._visitProviderOrDirective(i,_);S.forEach(s=>{s.value&&tokenReference(s.value)===tokenReference(i.token)&&(this.refNodeIndices[s.name]=A,M.push(literalArr([literal(s.name),literal(4)])))}),s.directive.isComponent&&(N|=32768);const F=s.inputs.map((i,s)=>{const S=literalArr([literal(s),literal(i.directiveName)]);return new LiteralMapEntry(i.directiveName,S,!1)}),D=[],L=s.directive;Object.keys(L.outputs).forEach(i=>{const s=L.outputs[i];T.has(s)&&D.push(new LiteralMapEntry(i,literal(s),!1))});let $=[];(s.inputs.length||(327680&N)>0)&&($=s.inputs.map((i,s)=>this._preprocessUpdateExpression({nodeIndex:A,bindingIndex:s,sourceSpan:i.sourceSpan,context:Qr,value:i.value})));const V=importExpr(Identifiers.nodeValue).callFn([Gr,literal(A)]),U=s.hostProperties.map(i=>({context:V,dirAst:s,inputAst:i})),W=s.hostEvents.map(i=>({context:V,eventAst:i,dirAst:s})),z=A;return this.nodes[A]=()=>({sourceSpan:s.sourceSpan,nodeFlags:16384|N,nodeDef:importExpr(Identifiers.directiveDef).callFn([literal(z),literal(N),M.length?literalArr(M):Fe,literal(P),k,R,F.length?new LiteralMapExpr(F):Fe,D.length?new LiteralMapExpr(D):Fe]),updateDirectives:$,directive:s.directive.type}),{hostBindings:U,hostEvents:W}}_visitProvider(i,s){this._addProviderNode(this._visitProviderOrDirective(i,s))}_visitComponentFactoryResolverProvider(i){const s=i.find(i=>i.directive.isComponent);if(s&&s.directive.entryComponents.length){const{providerExpr:i,depsExpr:S,flags:_,tokenExpr:T}=componentFactoryResolverProviderDef(this.reflector,this.outputCtx,8192,s.directive.entryComponents);this._addProviderNode({providerExpr:i,depsExpr:S,flags:_,tokenExpr:T,queryMatchExprs:[],sourceSpan:s.sourceSpan})}}_addProviderNode(i){this.nodes.push(()=>({sourceSpan:i.sourceSpan,nodeFlags:i.flags,nodeDef:importExpr(Identifiers.providerDef).callFn([literal(i.flags),i.queryMatchExprs.length?literalArr(i.queryMatchExprs):Fe,i.tokenExpr,i.providerExpr,i.depsExpr])}))}_visitProviderOrDirective(i,s){let S=[];s.forEach(s=>{tokenReference(s.value)===tokenReference(i.token)&&S.push(literalArr([literal(s.queryId),literal(4)]))});const{providerExpr:_,depsExpr:T,flags:A,tokenExpr:P}=providerDef(this.outputCtx,i);return{flags:0|A,queryMatchExprs:S,providerExpr:_,depsExpr:T,tokenExpr:P,sourceSpan:i.sourceSpan}}getLocal(i){if(i==EventHandlerVars.event.name)return EventHandlerVars.event;let s=Gr;for(let S=this;S;S=S.parent,s=s.prop("parent").cast(pe)){const _=S.refNodeIndices[i];if(null!=_)return importExpr(Identifiers.nodeValue).callFn([s,literal(_)]);const T=S.variables.find(s=>s.name===i);if(T){const i=T.value||"$implicit";return s.prop("context").prop(i)}}return null}notifyImplicitReceiverUse(){}_createLiteralArrayConverter(i,s){if(0===s){const i=importExpr(Identifiers.EMPTY_ARRAY);return()=>i}const S=this.nodes.length;return this.nodes.push(()=>({sourceSpan:i,nodeFlags:32,nodeDef:importExpr(Identifiers.pureArrayDef).callFn([literal(S),literal(s)])})),i=>callCheckStmt(S,i)}_createLiteralMapConverter(i,s){if(0===s.length){const i=importExpr(Identifiers.EMPTY_MAP);return()=>i}const S=literalMap(s.map((i,s)=>Object.assign(Object.assign({},i),{value:literal(s)}))),_=this.nodes.length;return this.nodes.push(()=>({sourceSpan:i,nodeFlags:64,nodeDef:importExpr(Identifiers.pureObjectDef).callFn([literal(_),S])})),i=>callCheckStmt(_,i)}_createPipeConverter(i,s,S){const _=this.usedPipes.find(i=>i.name===s);if(_.pure){const _=this.nodes.length;this.nodes.push(()=>({sourceSpan:i.sourceSpan,nodeFlags:128,nodeDef:importExpr(Identifiers.purePipeDef).callFn([literal(_),literal(S)])}));let T=Gr,A=this;for(;A.parent;)A=A.parent,T=T.prop("parent").cast(pe);const P=A.purePipeNodeIndices[s],N=importExpr(Identifiers.nodeValue).callFn([T,literal(P)]);return s=>callUnwrapValue(i.nodeIndex,i.bindingIndex,callCheckStmt(_,[N].concat(s)))}{const s=this._createPipe(i.sourceSpan,_),S=importExpr(Identifiers.nodeValue).callFn([Gr,literal(s)]);return s=>callUnwrapValue(i.nodeIndex,i.bindingIndex,S.callMethod("transform",s))}}_createPipe(i,s){const S=this.nodes.length;let _=0;s.type.lifecycleHooks.forEach(i=>{i===Ur.OnDestroy&&(_|=lifecycleHookToNodeFlag(i))});const T=s.type.diDeps.map(i=>depDef(this.outputCtx,i));return this.nodes.push(()=>({sourceSpan:i,nodeFlags:16,nodeDef:importExpr(Identifiers.pipeDef).callFn([literal(_),this.outputCtx.importExpr(s.type.reference),literalArr(T)])})),S}_preprocessUpdateExpression(i){return{nodeIndex:i.nodeIndex,bindingIndex:i.bindingIndex,sourceSpan:i.sourceSpan,context:i.context,value:convertPropertyBindingBuiltins({createLiteralArrayConverter:s=>this._createLiteralArrayConverter(i.sourceSpan,s),createLiteralMapConverter:s=>this._createLiteralMapConverter(i.sourceSpan,s),createPipeConverter:(s,S)=>this._createPipeConverter(i,s,S)},i.value)}}_createNodeExpressions(){const i=this;let s=0;const S=[],_=[],T=this.nodes.map((i,s)=>{const{nodeDef:T,nodeFlags:A,updateDirectives:P,updateRenderer:N,sourceSpan:M}=i();return N&&S.push(...createUpdateStatements(s,M,N,!1)),P&&_.push(...createUpdateStatements(s,M,P,(327680&A)>0)),applySourceSpanToExpressionIfNeeded(3&A?new CommaExpr([Kr.callFn([]).callFn([]),T]):T,M)});return{updateRendererStmts:S,updateDirectivesStmts:_,nodeDefExprs:T};function createUpdateStatements(S,_,T,A){const P=[],N=T.map(({sourceSpan:S,context:_,value:T})=>{const A=""+s++,N=_===Qr?i:null,{stmts:M,currValExpr:k}=convertPropertyBinding(N,_,T,A,vt.General);return P.push(...M.map(i=>applySourceSpanToStatementIfNeeded(i,S))),applySourceSpanToExpressionIfNeeded(k,S)});return(T.length||A)&&P.push(applySourceSpanToStatementIfNeeded(callCheckStmt(S,N).toStmt(),_)),P}}_createElementHandleEventFn(i,s){const S=[];let _,T=0;if(s.forEach(({context:i,eventAst:s,dirAst:_})=>{const A=""+T++,P=i===Qr?this:null,{stmts:N,allowDefault:M}=convertActionBinding(P,i,s.handler,A),k=N;M&&k.push(Yr.set(M.and(Yr)).toStmt());const{target:R,name:F}=elementEventNameAndTarget(s,_),D=elementEventFullName(R,F);S.push(applySourceSpanToStatementIfNeeded(new IfStmt(literal(D).identical(Jr),k),s.sourceSpan))}),S.length>0){const i=[Yr.set(literal(!0)).toDeclStmt(de)];!this.component.isHost&&findReadVarNames(S).has(Qr.name)&&i.push(Qr.set(Gr.prop("component")).toDeclStmt(this.compType)),_=fn([new FnParam(Gr.name,he),new FnParam(Jr.name,he),new FnParam(EventHandlerVars.event.name,he)],[...i,...S,new ReturnStatement(Yr)],he)}else _=Fe;return _}visitDirective(i,s){}visitDirectiveProperty(i,s){}visitReference(i,s){}visitVariable(i,s){}visitEvent(i,s){}visitElementProperty(i,s){}visitAttr(i,s){}}function fixedAttrsDef(i){const s=Object.create(null);return i.attrs.forEach(i=>{s[i.name]=i.value}),i.directives.forEach(i=>{Object.keys(i.directive.hostAttributes).forEach(S=>{const _=i.directive.hostAttributes[S],T=s[S];s[S]=null!=T?function mergeAttributeValue(i,s,S){return"class"==i||"style"==i?`${s} ${S}`:S}(S,T,_):_})}),literalArr(Object.keys(s).sort().map(i=>literalArr([literal(i),literal(s[i])])))}function callCheckStmt(i,s){return s.length>10?Xr.callFn([Gr,literal(i),literal(1),literalArr(s)]):Xr.callFn([Gr,literal(i),literal(0),...s])}function callUnwrapValue(i,s,S){return importExpr(Identifiers.unwrapValue).callFn([Gr,literal(i),literal(s),S])}function elementEventNameAndTarget(i,s){return i.isAnimation?{name:`@${i.name}.${i.phase}`,target:s&&s.directive.isComponent?"component":null}:i}function calcStaticDynamicQueryFlags(i){let s=0;return i.first&&i.static?s|=268435456:s|=536870912,s}function elementEventFullName(i,s){return i?`${i}:${s}`:s}class MessageBundle{constructor(i,s,S,_=null){this._htmlParser=i,this._implicitTags=s,this._implicitAttrs=S,this._locale=_,this._messages=[]}updateFromTemplate(i,s,S){const _=this._htmlParser.parse(i,s,{tokenizeExpansionForms:!0,interpolationConfig:S});if(_.errors.length)return _.errors;const T=function extractMessages(i,s,S,_){return new _Visitor$2(S,_).extract(i,s)}(_.rootNodes,S,this._implicitTags,this._implicitAttrs);return T.errors.length?T.errors:(this._messages.push(...T.messages),[])}getMessages(){return this._messages}write(i,s){const S={},_=new MapPlaceholderNames;this._messages.forEach(s=>{const _=i.digest(s);S.hasOwnProperty(_)?S[_].sources.push(...s.sources):S[_]=s});const T=Object.keys(S).map(T=>{const A=i.createNameMapper(S[T]),P=S[T],N=A?_.convert(P.nodes,A):P.nodes;let M=new Message(N,{},{},P.meaning,P.description,T);return M.sources=P.sources,s&&M.sources.forEach(i=>i.filePath=s(i.filePath)),M});return i.write(T,this._locale)}}class MapPlaceholderNames extends class CloneVisitor{visitText(i,s){return new Text$1(i.value,i.sourceSpan)}visitContainer(i,s){const S=i.children.map(i=>i.visit(this,s));return new Container(S,i.sourceSpan)}visitIcu(i,s){const S={};Object.keys(i.cases).forEach(_=>S[_]=i.cases[_].visit(this,s));const _=new Icu$1(i.expression,i.type,S,i.sourceSpan);return _.expressionPlaceholder=i.expressionPlaceholder,_}visitTagPlaceholder(i,s){const S=i.children.map(i=>i.visit(this,s));return new TagPlaceholder(i.tag,i.attrs,i.startName,i.closeName,S,i.isVoid,i.sourceSpan,i.startSourceSpan,i.endSourceSpan)}visitPlaceholder(i,s){return new Placeholder(i.value,i.name,i.sourceSpan)}visitIcuPlaceholder(i,s){return new IcuPlaceholder(i.value,i.name,i.sourceSpan)}}{convert(i,s){return s?i.map(i=>i.visit(this,s)):i}visitTagPlaceholder(i,s){const S=s.toPublicName(i.startName),_=i.closeName?s.toPublicName(i.closeName):i.closeName,T=i.children.map(i=>i.visit(this,s));return new TagPlaceholder(i.tag,i.attrs,S,_,T,i.isVoid,i.sourceSpan,i.startSourceSpan,i.endSourceSpan)}visitPlaceholder(i,s){return new Placeholder(i.value,s.toPublicName(i.name),i.sourceSpan)}visitIcuPlaceholder(i,s){return new IcuPlaceholder(i.value,s.toPublicName(i.name),i.sourceSpan)}}class GeneratedFile{constructor(i,s,S){this.srcFileUrl=i,this.genFileUrl=s,"string"==typeof S?(this.source=S,this.stmts=null):(this.source=null,this.stmts=S)}isEquivalent(i){return this.genFileUrl===i.genFileUrl&&(this.source?this.source===i.source:null!=i.stmts&&areAllEquivalent(this.stmts,i.stmts))}}function toTypeScript(i,s=""){if(!i.stmts)throw new Error("Illegal state: No stmts present on GeneratedFile "+i.genFileUrl);return(new TypeScriptEmitter).emitStatements(i.genFileUrl,i.stmts,s)}function listLazyRoutes(i,s){const S=[];for(const{provider:_,module:T}of i.transitiveModule.providers)if(tokenReference(_.token)===s.ROUTES){const i=_collectLoadChildren(_.useValue);for(const _ of i)S.push(parseLazyRoute(_,s,T.reference))}return S}function _collectLoadChildren(i,s=[]){if("string"==typeof i)s.push(i);else if(Array.isArray(i))for(const S of i)_collectLoadChildren(S,s);else i.loadChildren?_collectLoadChildren(i.loadChildren,s):i.children&&_collectLoadChildren(i.children,s);return s}function parseLazyRoute(i,s,S){const[_,T]=i.split("#"),A=s.resolveExternalReference({moduleName:_,name:T},S?S.filePath:void 0);return{route:i,module:S||A,referencedModule:A}}const Zr=/^(?!.*\.d\.ts$).*\.ts$/;class ResolvedStaticSymbol{constructor(i,s){this.symbol=i,this.metadata=s}}class StaticSymbolResolver{constructor(i,s,S,_){this.host=i,this.staticSymbolCache=s,this.summaryResolver=S,this.errorRecorder=_,this.metadataCache=new Map,this.resolvedSymbols=new Map,this.importAs=new Map,this.symbolResourcePaths=new Map,this.symbolFromFile=new Map,this.knownFileNameToModuleNames=new Map}resolveSymbol(i){if(i.members.length>0)return this._resolveSymbolMembers(i);const s=this._resolveSymbolFromSummary(i);if(s)return s;const S=this.resolvedSymbols.get(i);return S||(this._createSymbolsOf(i.filePath),this.resolvedSymbols.get(i))}getImportAs(i,s=!0){if(i.members.length){const S=this.getStaticSymbol(i.filePath,i.name),_=this.getImportAs(S,s);return _?this.getStaticSymbol(_.filePath,_.name,i.members):null}const S=function stripSummaryForJitFileSuffix(i){return i.replace(Br,".")}(i.filePath);if(S!==i.filePath){const _=function stripSummaryForJitNameSuffix(i){return i.replace(Vr,"")}(i.name),T=this.getStaticSymbol(S,_,i.members),A=this.getImportAs(T,s);return A?this.getStaticSymbol(summaryForJitFileName(A.filePath),summaryForJitName(A.name),T.members):null}let _=s&&this.summaryResolver.getImportAs(i)||null;return _||(_=this.importAs.get(i)),_}getResourcePath(i){return this.symbolResourcePaths.get(i)||i.filePath}getTypeArity(i){if(function isGeneratedFile(i){return $r.test(i)}(i.filePath))return null;let s=unwrapResolvedMetadata(this.resolveSymbol(i));for(;s&&s.metadata instanceof StaticSymbol;)s=unwrapResolvedMetadata(this.resolveSymbol(s.metadata));return s&&s.metadata&&s.metadata.arity||null}getKnownModuleName(i){return this.knownFileNameToModuleNames.get(i)||null}recordImportAs(i,s){i.assertNoMembers(),s.assertNoMembers(),this.importAs.set(i,s)}recordModuleNameForFileName(i,s){this.knownFileNameToModuleNames.set(i,s)}invalidateFile(i){this.metadataCache.delete(i);const s=this.symbolFromFile.get(i);if(!s)return[];this.symbolFromFile.delete(i);for(const i of s)this.resolvedSymbols.delete(i),this.importAs.delete(i),this.symbolResourcePaths.delete(i);return s}ignoreErrorsFor(i){const s=this.errorRecorder;this.errorRecorder=()=>{};try{return i()}finally{this.errorRecorder=s}}_resolveSymbolMembers(i){const s=i.members,S=this.resolveSymbol(this.getStaticSymbol(i.filePath,i.name));if(!S)return null;let _=unwrapResolvedMetadata(S.metadata);if(_ instanceof StaticSymbol)return new ResolvedStaticSymbol(i,this.getStaticSymbol(_.filePath,_.name,s));if(!_||"class"!==_.__symbolic){let S=_;for(let i=0;i<s.length&&S;i++)S=S[s[i]];return new ResolvedStaticSymbol(i,S)}return _.statics&&1===s.length?new ResolvedStaticSymbol(i,_.statics[s[0]]):null}_resolveSymbolFromSummary(i){const s=this.summaryResolver.resolveSummary(i);return s?new ResolvedStaticSymbol(i,s.metadata):null}getStaticSymbol(i,s,S){return this.staticSymbolCache.get(i,s,S)}hasDecorators(i){const s=this.getModuleMetadata(i);return!!s.metadata&&Object.keys(s.metadata).some(i=>{const S=s.metadata[i];return S&&"class"===S.__symbolic&&S.decorators})}getSymbolsOf(i){const s=this.summaryResolver.getSymbolsOf(i);return s||(this._createSymbolsOf(i),this.symbolFromFile.get(i)||[])}_createSymbolsOf(i){if(this.symbolFromFile.has(i))return;const s=[],S=this.getModuleMetadata(i);if(S.importAs&&this.knownFileNameToModuleNames.set(i,S.importAs),S.exports)for(const _ of S.exports)if(_.export)_.export.forEach(S=>{let T;T="string"==typeof S?S:S.as,T=unescapeIdentifier(T);let A=T;"string"!=typeof S&&(A=unescapeIdentifier(S.name));const P=this.resolveModule(_.from,i);if(P){const S=this.getStaticSymbol(P,A),_=this.getStaticSymbol(i,T);s.push(this.createExport(_,S))}});else{const S=this.resolveModule(_.from,i);if(S&&S!==i){this.getSymbolsOf(S).forEach(S=>{const _=this.getStaticSymbol(i,S.name);s.push(this.createExport(_,S))})}}if(S.metadata){const _=new Set(Object.keys(S.metadata).map(unescapeIdentifier)),T=S.origins||{};Object.keys(S.metadata).forEach(A=>{const P=S.metadata[A],N=unescapeIdentifier(A),M=this.getStaticSymbol(i,N),k=T.hasOwnProperty(A)&&T[A];if(k){const s=this.resolveModule(k,i);s?this.symbolResourcePaths.set(M,s):this.reportError(new Error(`Couldn't resolve original symbol for ${k} from ${this.host.getOutputName(i)}`))}s.push(this.createResolvedSymbol(M,i,_,P))})}const _=new Set;for(const i of s)this.resolvedSymbols.set(i.symbol,i),_.add(i.symbol);this.symbolFromFile.set(i,Array.from(_))}createResolvedSymbol(i,s,S,_){const T=Zr.test(i.filePath);if(this.summaryResolver.isLibraryFile(i.filePath)&&!T&&_&&"class"===_.__symbolic){const s={__symbolic:"class",arity:_.arity};return new ResolvedStaticSymbol(i,s)}let A;const getOriginalName=()=>(A||(A=this.host.getOutputName(s.replace(/((\.ts)|(\.d\.ts)|)$/,".ts").replace(/^.*node_modules[/\\]/,""))),A),P=this;const N=visitValue(_,new class ReferenceTransformer extends ValueTransformer{visitStringMap(_,T){const A=_.__symbolic;if("function"===A){const i=T.length;T.push(..._.parameters||[]);const s=super.visitStringMap(_,T);return T.length=i,s}if("reference"!==A)return"error"===A?Object.assign(Object.assign({},_),{fileName:getOriginalName()}):super.visitStringMap(_,T);{const A=_.module,N=_.name?unescapeIdentifier(_.name):_.name;if(!N)return null;let M;if(A)return M=P.resolveModule(A,i.filePath),M?{__symbolic:"resolved",symbol:P.getStaticSymbol(M,N),line:_.line,character:_.character,fileName:getOriginalName()}:{__symbolic:"error",message:`Could not resolve ${A} relative to ${P.host.getMetadataFor(i.filePath)}.`,line:_.line,character:_.character,fileName:getOriginalName()};if(T.indexOf(N)>=0)return{__symbolic:"reference",name:N};if(S.has(N))return P.getStaticSymbol(s,N)}}},[]);let M=unwrapResolvedMetadata(N);return M instanceof StaticSymbol?this.createExport(i,M):new ResolvedStaticSymbol(i,N)}createExport(i,s){return i.assertNoMembers(),s.assertNoMembers(),this.summaryResolver.isLibraryFile(i.filePath)&&this.summaryResolver.isLibraryFile(s.filePath)&&this.importAs.set(s,this.getImportAs(i)||i),new ResolvedStaticSymbol(i,s)}reportError(i,s,S){if(!this.errorRecorder)throw i;this.errorRecorder(i,s&&s.filePath||S)}getModuleMetadata(i){let s=this.metadataCache.get(i);if(!s){const S=this.host.getMetadataFor(i);if(S){let i=-1;S.forEach(S=>{S&&S.version>i&&(i=S.version,s=S)})}if(s||(s={__symbolic:"module",version:4,module:i,metadata:{}}),4!=s.version){const S=2==s.version?`Unsupported metadata version ${s.version} for module ${i}. This module should be compiled with a newer version of ngc`:`Metadata version mismatch for module ${this.host.getOutputName(i)}, found version ${s.version}, expected 4`;this.reportError(new Error(S))}this.metadataCache.set(i,s)}return s}getSymbolByModule(i,s,S){const _=this.resolveModule(i,S);return _?this.getStaticSymbol(_,s):(this.reportError(new Error(`Could not resolve module ${i}${S?" relative to "+this.host.getOutputName(S):""}`)),this.getStaticSymbol("ERROR:"+i,s))}resolveModule(i,s){try{return this.host.moduleNameToFileName(i,s)}catch(S){console.error(`Could not resolve module '${i}' relative to file ${s}`),this.reportError(S,void 0,s)}return null}}function unescapeIdentifier(i){return i.startsWith("___")?i.substr(1):i}function unwrapResolvedMetadata(i){return i&&"resolved"===i.__symbolic?i.symbol:i}function createSummaryForJitFunction(i,s,S){const _=summaryForJitName(s.name);i.statements.push(fn([],[new ReturnStatement(S)],new ArrayType(pe)).toDeclStmt(_,[$e.Final,$e.Exported]))}class ToJsonSerializer extends ValueTransformer{constructor(i,s,S){super(),this.symbolResolver=i,this.summaryResolver=s,this.srcFileName=S,this.symbols=[],this.indexBySymbol=new Map,this.reexportedBy=new Map,this.processedSummaryBySymbol=new Map,this.processedSummaries=[],this.unprocessedSymbolSummariesBySymbol=new Map,this.moduleName=i.getKnownModuleName(S)}addSummary(i){let s=this.unprocessedSymbolSummariesBySymbol.get(i.symbol),S=this.processedSummaryBySymbol.get(i.symbol);if(s||(s={symbol:i.symbol,metadata:void 0},this.unprocessedSymbolSummariesBySymbol.set(i.symbol,s),S={symbol:this.processValue(i.symbol,0)},this.processedSummaries.push(S),this.processedSummaryBySymbol.set(i.symbol,S)),!s.metadata&&i.metadata){let _=i.metadata||{};if("class"===_.__symbolic){const i={};Object.keys(_).forEach(s=>{"decorators"!==s&&(i[s]=_[s])}),_=i}else isCall(_)&&(function isFunctionCall(i){return isCall(i)&&unwrapResolvedMetadata(i.expression)instanceof StaticSymbol}(_)||function isMethodCallOnVariable(i){return isCall(i)&&i.expression&&"select"===i.expression.__symbolic&&unwrapResolvedMetadata(i.expression.expression)instanceof StaticSymbol}(_)||(_={__symbolic:"error",message:"Complex function calls are not supported."}));if(s.metadata=_,S.metadata=this.processValue(_,1),_ instanceof StaticSymbol&&this.summaryResolver.isLibraryFile(_.filePath)){const s=this.symbols[this.indexBySymbol.get(_)];isLoweredSymbol(s.name)||this.reexportedBy.set(s,i.symbol)}}if(!s.type&&i.type&&(s.type=i.type,S.type=this.processValue(i.type,0),i.type.summaryKind===Ye.NgModule)){const s=i.type;s.exportedDirectives.concat(s.exportedPipes).forEach(i=>{const s=i.reference;if(this.summaryResolver.isLibraryFile(s.filePath)&&!this.unprocessedSymbolSummariesBySymbol.has(s)){const i=this.summaryResolver.resolveSummary(s);i&&this.addSummary(i)}})}}serialize(i){const s=[];return{json:JSON.stringify({moduleName:this.moduleName,summaries:this.processedSummaries,symbols:this.symbols.map((S,_)=>{S.assertNoMembers();let T=void 0;if(this.summaryResolver.isLibraryFile(S.filePath)){const A=this.reexportedBy.get(S);if(A)T=this.indexBySymbol.get(A);else if(i){const i=this.unprocessedSymbolSummariesBySymbol.get(S);i&&i.metadata&&"interface"===i.metadata.__symbolic||(T=`${S.name}_${_}`,s.push({symbol:S,exportAs:T}))}}return{__symbol:_,name:S.name,filePath:this.summaryResolver.toSummaryFileName(S.filePath,this.srcFileName),importAs:T}})}),exportAs:s}}processValue(i,s){return visitValue(i,this,s)}visitOther(i,s){if(i instanceof StaticSymbol){let S=this.symbolResolver.getStaticSymbol(i.filePath,i.name);return{__symbol:this.visitStaticSymbol(S,s),members:i.members}}}visitStringMap(i,s){return"resolved"===i.__symbolic?visitValue(i.symbol,this,s):("error"===i.__symbolic&&(delete i.line,delete i.character),super.visitStringMap(i,s))}visitStaticSymbol(i,s){let S=this.indexBySymbol.get(i),_=null;if(1&s&&this.summaryResolver.isLibraryFile(i.filePath)){if(this.unprocessedSymbolSummariesBySymbol.has(i))return S;_=this.loadSummary(i),_&&_.metadata instanceof StaticSymbol&&(S=this.visitStaticSymbol(_.metadata,s),_=null)}else if(null!=S)return S;return null==S&&(S=this.symbols.length,this.symbols.push(i)),this.indexBySymbol.set(i,S),_&&this.addSummary(_),S}loadSummary(i){let s=this.summaryResolver.resolveSummary(i);if(!s){const S=this.symbolResolver.resolveSymbol(i);S&&(s={symbol:S.symbol,metadata:S.metadata})}return s}}class ForJitSerializer{constructor(i,s,S){this.outputCtx=i,this.symbolResolver=s,this.summaryResolver=S,this.data=[]}addSourceType(i,s){this.data.push({summary:i,metadata:s,isLibrary:!1})}addLibType(i){this.data.push({summary:i,metadata:null,isLibrary:!0})}serialize(i){const s=new Map;for(const{symbol:S,exportAs:_}of i)s.set(S,_);const S=new Set;for(const{summary:i,metadata:s,isLibrary:_}of this.data){if(i.summaryKind===Ye.NgModule){S.add(i.type.reference);const s=i;for(const i of s.modules)S.add(i.reference)}if(!_){summaryForJitName(i.type.reference.name);createSummaryForJitFunction(this.outputCtx,i.type.reference,this.serializeSummaryWithDeps(i,s))}}S.forEach(i=>{if(this.summaryResolver.isLibraryFile(i.filePath)){const S=summaryForJitName(s.get(i)||i.name);this.outputCtx.statements.push(variable(S).set(this.serializeSummaryRef(i)).toDeclStmt(null,[$e.Exported]))}})}serializeSummaryWithDeps(i,s){const S=[this.serializeSummary(i)];let _=[];if(s instanceof CompileNgModuleMetadata)S.push(...s.declaredDirectives.concat(s.declaredPipes).map(i=>i.reference).concat(s.transitiveModule.modules.map(i=>i.reference).filter(i=>i!==s.type.reference)).map(i=>this.serializeSummaryRef(i))),_=s.providers;else if(i.summaryKind===Ye.Directive){const s=i;_=s.providers.concat(s.viewProviders)}return S.push(..._.filter(i=>!!i.useClass).map(i=>this.serializeSummary({summaryKind:Ye.Injectable,type:i.useClass}))),literalArr(S)}serializeSummaryRef(i){const s=this.symbolResolver.getStaticSymbol(summaryForJitFileName(i.filePath),summaryForJitName(i.name));return this.outputCtx.importExpr(s)}serializeSummary(i){const s=this.outputCtx;return visitValue(i,new class Transformer{visitArray(i,s){return literalArr(i.map(i=>visitValue(i,this,s)))}visitStringMap(i,s){return new LiteralMapExpr(Object.keys(i).map(S=>new LiteralMapEntry(S,visitValue(i[S],this,s),!1)))}visitPrimitive(i,s){return literal(i)}visitOther(i,S){if(i instanceof StaticSymbol)return s.importExpr(i);throw new Error("Illegal State: Encountered value "+i)}},null)}}class FromJsonDeserializer extends ValueTransformer{constructor(i,s){super(),this.symbolCache=i,this.summaryResolver=s}deserialize(i,s){const S=JSON.parse(s),_=[];this.symbols=S.symbols.map(s=>this.symbolCache.get(this.summaryResolver.fromSummaryFileName(s.filePath,i),s.name)),S.symbols.forEach((s,S)=>{const T=this.symbols[S],A=s.importAs;"number"==typeof A?_.push({symbol:T,importAs:this.symbols[A]}):"string"==typeof A&&_.push({symbol:T,importAs:this.symbolCache.get(ngfactoryFilePath(i),A)})});const T=visitValue(S.summaries,this,null);return{moduleName:S.moduleName,summaries:T,importAs:_}}visitStringMap(i,s){if("__symbol"in i){const s=this.symbols[i.__symbol],S=i.members;return S.length?this.symbolCache.get(s.filePath,s.name,S):s}return super.visitStringMap(i,s)}}function isCall(i){return i&&"call"===i.__symbolic}class AotCompiler{constructor(i,s,S,_,T,A,P,N,M,k,R,F,D,L){this._config=i,this._options=s,this._host=S,this.reflector=_,this._metadataResolver=T,this._templateParser=A,this._styleCompiler=P,this._viewCompiler=N,this._typeCheckCompiler=M,this._ngModuleCompiler=k,this._injectableCompiler=R,this._outputEmitter=F,this._summaryResolver=D,this._symbolResolver=L,this._templateAstCache=new Map,this._analyzedFiles=new Map,this._analyzedFilesForInjectables=new Map}clearCache(){this._metadataResolver.clearCache()}analyzeModulesSync(i){const s=analyzeAndValidateNgModules(i,this._host,this._symbolResolver,this._metadataResolver);return s.ngModules.forEach(i=>this._metadataResolver.loadNgModuleDirectiveAndPipeMetadata(i.type.reference,!0)),s}analyzeModulesAsync(i){const s=analyzeAndValidateNgModules(i,this._host,this._symbolResolver,this._metadataResolver);return Promise.all(s.ngModules.map(i=>this._metadataResolver.loadNgModuleDirectiveAndPipeMetadata(i.type.reference,!1))).then(()=>s)}_analyzeFile(i){let s=this._analyzedFiles.get(i);return s||(s=analyzeFile(this._host,this._symbolResolver,this._metadataResolver,i),this._analyzedFiles.set(i,s)),s}_analyzeFileForInjectables(i){let s=this._analyzedFilesForInjectables.get(i);return s||(s=analyzeFileForInjectables(this._host,this._symbolResolver,this._metadataResolver,i),this._analyzedFilesForInjectables.set(i,s)),s}findGeneratedFileNames(i){const s=[],S=this._analyzeFile(i);(this._options.allowEmptyCodegenFiles||S.directives.length||S.pipes.length||S.injectables.length||S.ngModules.length||S.exportsNonSourceFiles)&&(s.push(ngfactoryFilePath(S.fileName,!0)),this._options.enableSummariesForJit&&s.push(summaryForJitFileName(S.fileName,!0)));const _=normalizeGenFileSuffix(splitTypescriptSuffix(S.fileName,!0)[1]);return S.directives.forEach(i=>{const T=this._metadataResolver.getNonNormalizedDirectiveMetadata(i).metadata;T.isComponent&&T.template.styleUrls.forEach(i=>{const A=this._host.resourceNameToFileName(i,S.fileName);if(!A)throw syntaxError(`Couldn't resolve resource ${i} relative to ${S.fileName}`);const P=(T.template.encapsulation||this._config.defaultEncapsulation)===W.Emulated;s.push(_stylesModuleUrl(A,P,_)),this._options.allowEmptyCodegenFiles&&s.push(_stylesModuleUrl(A,!P,_))})}),s}emitBasicStub(i,s){const S=this._createOutputContext(i);if(i.endsWith(".ngfactory.ts")){if(!s)throw new Error("Assertion error: require the original file for .ngfactory.ts stubs. File: "+i);const _=this._analyzeFile(s);this._createNgFactoryStub(S,_,1)}else if(i.endsWith(".ngsummary.ts")){if(this._options.enableSummariesForJit){if(!s)throw new Error("Assertion error: require the original file for .ngsummary.ts stubs. File: "+i);const _=this._analyzeFile(s);_createEmptyStub(S),_.ngModules.forEach(i=>{!function createForJitStub(i,s){return createSummaryForJitFunction(i,s,Fe)}(S,i.type.reference)})}}else i.endsWith(".ngstyle.ts")&&_createEmptyStub(S);return this._codegenSourceModule("unknown",S)}emitTypeCheckStub(i,s){const S=this._analyzeFile(s),_=this._createOutputContext(i);return i.endsWith(".ngfactory.ts")&&this._createNgFactoryStub(_,S,2),_.statements.length>0?this._codegenSourceModule(S.fileName,_):null}loadFilesAsync(i,s){const S=i.map(i=>this._analyzeFile(i)),_=[];S.forEach(i=>i.ngModules.forEach(i=>_.push(this._metadataResolver.loadNgModuleDirectiveAndPipeMetadata(i.type.reference,!1))));const T=s.map(i=>this._analyzeFileForInjectables(i));return Promise.all(_).then(i=>({analyzedModules:mergeAndValidateNgFiles(S),analyzedInjectables:T}))}loadFilesSync(i,s){const S=i.map(i=>this._analyzeFile(i));S.forEach(i=>i.ngModules.forEach(i=>this._metadataResolver.loadNgModuleDirectiveAndPipeMetadata(i.type.reference,!0)));const _=s.map(i=>this._analyzeFileForInjectables(i));return{analyzedModules:mergeAndValidateNgFiles(S),analyzedInjectables:_}}_createNgFactoryStub(i,s,S){let _=0;s.ngModules.forEach((s,T)=>{this._ngModuleCompiler.createStub(i,s.type.reference);const A=[...s.transitiveModule.directives.map(i=>i.reference),...s.transitiveModule.pipes.map(i=>i.reference),...s.importedModules.map(i=>i.type.reference),...s.exportedModules.map(i=>i.type.reference),...this._externalIdentifierReferences([Identifiers.TemplateRef,Identifiers.ElementRef])],P=new Map;A.forEach((i,s)=>{P.set(i,`_decl${T}_${s}`)}),P.forEach((s,S)=>{i.statements.push(variable(s).set(Fe.cast(pe)).toDeclStmt(expressionType(i.importExpr(S,null,!1))))}),2&S&&s.declaredDirectives.forEach(S=>{const T=this._metadataResolver.getDirectiveMetadata(S.reference);T.isComponent&&(_++,this._createTypeCheckBlock(i,`${T.type.reference.name}_Host_${_}`,s,this._metadataResolver.getHostComponentMetadata(T),[T.type],P),this._createTypeCheckBlock(i,`${T.type.reference.name}_${_}`,s,T,s.transitiveModule.directives,P))})}),0===i.statements.length&&_createEmptyStub(i)}_externalIdentifierReferences(i){const s=[];for(let S of i){const i=createTokenForExternalReference(this.reflector,S);i.identifier&&s.push(i.identifier.reference)}return s}_createTypeCheckBlock(i,s,S,_,T,A){const{template:P,pipes:N}=this._parseTemplate(_,S,T);i.statements.push(...this._typeCheckCompiler.compileComponent(s,_,P,N,A,i))}emitMessageBundle(i,s){const S=[],_=new HtmlParser,T=new MessageBundle(_,[],{},s);if(i.files.forEach(i=>{const s=[];i.directives.forEach(i=>{const S=this._metadataResolver.getDirectiveMetadata(i);S&&S.isComponent&&s.push(S)}),s.forEach(i=>{const s=i.template.template,_=i.template.templateUrl,A=InterpolationConfig.fromArray(i.template.interpolation);S.push(...T.updateFromTemplate(s,_,A))})}),S.length)throw new Error(S.map(i=>i.toString()).join("\n"));return T}emitAllPartialModules({ngModuleByPipeOrDirective:i,files:s},S){const _=new Map,getContext=i=>(_.has(i)||_.set(i,this._createOutputContext(i)),_.get(i));return s.forEach(s=>this._compilePartialModule(s.fileName,i,s.directives,s.pipes,s.ngModules,s.injectables,getContext(s.fileName))),S.forEach(i=>this._compileShallowModules(i.fileName,i.shallowModules,getContext(i.fileName))),Array.from(_.values()).map(i=>({fileName:i.genFilePath,statements:[...i.constantPool.statements,...i.statements]}))}_compileShallowModules(i,s,S){s.forEach(i=>function compileNgModuleFromRender2(i,s,S){const _=identifierName(s.type),T=s.rawImports?[s.rawImports]:[],A=s.rawExports?[s.rawExports]:[],P=mapLiteral({factory:S.factoryFor({type:s.type,symbol:s.type.reference},i),providers:convertMetaToOutput(s.rawProviders,i),imports:convertMetaToOutput([...T,...A],i)}),N=importExpr(Identifiers$1.defineInjector).callFn([P]);i.statements.push(new ClassStmt(_,null,[new ClassField("ɵinj",he,[$e.Static],N)],[],new ClassMethod(null,[],[]),[]))}(S,i,this._injectableCompiler))}_compilePartialModule(i,s,S,_,T,A,P){const N=new DomElementSchemaRegistry,M=new BindingParser(this._templateParser.expressionParser,ut,N,[],[]);S.forEach(i=>{const S=this._metadataResolver.getDirectiveMetadata(i);if(S.isComponent){const _=s.get(i);_||error(`Cannot determine the module for component '${identifierName(S.type)}'`);let T=S.template.htmlAst;S.template.preserveWhitespaces||(T=removeWhitespaces(T));const A=htmlAstToRender3Ast(T.rootNodes,M),N=new Map;_.transitiveModule.directives.map(i=>this._metadataResolver.getDirectiveSummary(i.reference)).forEach(i=>{i.selector&&N.set(i.selector,i.type.reference)});const k=new Map;_.transitiveModule.pipes.map(i=>this._metadataResolver.getPipeSummary(i.reference)).forEach(i=>{k.set(i.name,i.type.reference)}),function compileComponentFromRender2(i,s,S,_,T,A,P){const N=identifierName(s.type);N||error("Cannot resolver the name of "+s.type);const M=i.constantPool.propertyNameOf(2),k=s.toSummary(),R=Object.assign(Object.assign({},directiveMetadataFromGlobalMetadata(s,i,_)),{selector:s.selector,template:{nodes:S.nodes,ngContentSelectors:S.ngContentSelectors},directives:[],pipes:typeMapToExpressionMap(P,i),viewQueries:queriesFromGlobalMetadata(s.viewQueries,i),wrapDirectivesAndPipesInClosure:!1,styles:k.template&&k.template.styles||Cr,encapsulation:k.template&&k.template.encapsulation||W.Emulated,interpolation:ut,animations:null,viewProviders:s.viewProviders.length>0?new WrappedNodeExpr(s.viewProviders):null,relativeContextFilePath:"",i18nUseExternalIds:!0}),F=compileComponentFromMetadata(R,i.constantPool,T),D=compileFactoryFunction(Object.assign(Object.assign({},R),{injectFn:Identifiers$1.directiveInject,target:ot.Directive})),L=new ClassStmt(N,null,[new ClassField("ɵfac",he,[$e.Static],D.factory)],[],new ClassMethod(null,[],[]),[]),$=new ClassStmt(N,null,[new ClassField(M,he,[$e.Static],F.expression)],[],new ClassMethod(null,[],[]),[]);i.statements.push(L,$)}(P,S,A,this.reflector,M,0,k)}else!function compileDirectiveFromRender2(i,s,S,_){const T=identifierName(s.type);T||error("Cannot resolver the name of "+s.type);const A=i.constantPool.propertyNameOf(1),P=directiveMetadataFromGlobalMetadata(s,i,S),N=compileDirectiveFromMetadata(P,i.constantPool,_),M=compileFactoryFunction(Object.assign(Object.assign({},P),{injectFn:Identifiers$1.directiveInject,target:ot.Directive})),k=new ClassStmt(T,null,[new ClassField("ɵfac",he,[$e.Static],M.factory)],[],new ClassMethod(null,[],[]),[]),R=new ClassStmt(T,null,[new ClassField(A,he,[$e.Static],N.expression)],[],new ClassMethod(null,[],[]),[]);i.statements.push(k,R)}(P,S,this.reflector,M)}),_.forEach(i=>{const s=this._metadataResolver.getPipeMetadata(i);s&&function compilePipeFromRender2(i,s,S){const _=identifierName(s.type);if(!_)return error("Cannot resolve the name of "+s.type);const T=i.importExpr(s.type.reference),A={name:_,type:wrapReference(T),internalType:T,pipeName:s.name,typeArgumentCount:0,deps:dependenciesFromGlobalMetadata(s.type,i,S),pure:s.pure},P=compilePipeFromMetadata(A),N=compileFactoryFunction(Object.assign(Object.assign({},A),{injectFn:Identifiers$1.directiveInject,target:ot.Pipe})),M=i.constantPool.propertyNameOf(3),k=new ClassStmt(_,null,[new ClassField("ɵfac",he,[$e.Static],N.factory)],[],new ClassMethod(null,[],[]),[]),R=new ClassStmt(_,null,[new ClassField(M,he,[$e.Static],P.expression)],[],new ClassMethod(null,[],[]),[]);i.statements.push(k,R)}(P,s,this.reflector)}),A.forEach(i=>this._injectableCompiler.compile(i,P))}emitAllPartialModules2(i){return i.reduce((i,s)=>(i.push(...this._emitPartialModule2(s.fileName,s.injectables)),i),[])}_emitPartialModule2(i,s){const S=this._createOutputContext(i);return s.forEach(i=>this._injectableCompiler.compile(i,S)),S.statements&&S.statements.length>0?[{fileName:i,statements:[...S.constantPool.statements,...S.statements]}]:[]}emitAllImpls(i){const{ngModuleByPipeOrDirective:s,files:S}=i;return flatten(S.map(i=>this._compileImplFile(i.fileName,s,i.directives,i.pipes,i.ngModules,i.injectables)))}_compileImplFile(i,s,S,_,T,A){const P=normalizeGenFileSuffix(splitTypescriptSuffix(i,!0)[1]),N=[],M=this._createOutputContext(ngfactoryFilePath(i,!0));if(N.push(...this._createSummary(i,S,_,T,A,M)),T.forEach(i=>this._compileModule(M,i)),S.forEach(S=>{const _=this._metadataResolver.getDirectiveMetadata(S);if(!_.isComponent)return;const T=s.get(S);if(!T)throw new Error(`Internal Error: cannot determine the module for component ${identifierName(_.type)}!`);const A=this._styleCompiler.compileComponent(M,_);_.template.externalStylesheets.forEach(s=>{const S=this._styleCompiler.needsStyleShim(_);N.push(this._codegenStyles(i,_,s,S,P)),this._options.allowEmptyCodegenFiles&&N.push(this._codegenStyles(i,_,s,!S,P))});this._compileComponent(M,_,T,T.transitiveModule.directives,A,P);this._compileComponentFactory(M,_,T,P)}),M.statements.length>0||this._options.allowEmptyCodegenFiles){const s=this._codegenSourceModule(i,M);N.unshift(s)}return N}_createSummary(i,s,S,_,T,A){const P=this._symbolResolver.getSymbolsOf(i).map(i=>this._symbolResolver.resolveSymbol(i)),N=[..._.map(i=>({summary:this._metadataResolver.getNgModuleSummary(i.type.reference),metadata:this._metadataResolver.getNgModuleMetadata(i.type.reference)})),...s.map(i=>({summary:this._metadataResolver.getDirectiveSummary(i),metadata:this._metadataResolver.getDirectiveMetadata(i)})),...S.map(i=>({summary:this._metadataResolver.getPipeSummary(i),metadata:this._metadataResolver.getPipeMetadata(i)})),...T.map(i=>({summary:this._metadataResolver.getInjectableSummary(i.symbol),metadata:this._metadataResolver.getInjectableSummary(i.symbol).type}))],M=this._options.enableSummariesForJit?this._createOutputContext(summaryForJitFileName(i,!0)):null,{json:k,exportAs:R}=function serializeSummaries(i,s,S,_,T,A,P=!1){const N=new ToJsonSerializer(_,S,i);T.forEach(i=>N.addSummary({symbol:i.symbol,metadata:i.metadata})),A.forEach(({summary:i,metadata:s})=>{N.addSummary({symbol:i.type.reference,metadata:void 0,type:i})});const{json:M,exportAs:k}=N.serialize(P);if(s){const i=new ForJitSerializer(s,_,S);A.forEach(({summary:s,metadata:S})=>{i.addSourceType(s,S)}),N.unprocessedSymbolSummariesBySymbol.forEach(s=>{S.isLibraryFile(s.symbol.filePath)&&s.type&&i.addLibType(s.type)}),i.serialize(k)}return{json:M,exportAs:k}}(i,M,this._summaryResolver,this._symbolResolver,P,N,this._options.createExternalSymbolFactoryReexports);R.forEach(i=>{A.statements.push(variable(i.exportAs).set(A.importExpr(i.symbol)).toDeclStmt(null,[$e.Exported]))});const F=[new GeneratedFile(i,summaryFileName(i),k)];return M&&F.push(this._codegenSourceModule(i,M)),F}_compileModule(i,s){const S=[];if(this._options.locale){const i=this._options.locale.replace(/_/g,"-");S.push({token:createTokenForExternalReference(this.reflector,Identifiers.LOCALE_ID),useValue:i})}this._options.i18nFormat&&S.push({token:createTokenForExternalReference(this.reflector,Identifiers.TRANSLATIONS_FORMAT),useValue:this._options.i18nFormat}),this._ngModuleCompiler.compile(i,s,S)}_compileComponentFactory(i,s,S,_){const T=this._metadataResolver.getHostComponentMetadata(s),A=this._compileComponent(i,T,S,[s.type],null,_).viewClassVar,P=componentFactoryName(s.type.reference),N=[];for(let i in s.inputs){const S=s.inputs[i];N.push(new LiteralMapEntry(i,literal(S),!1))}const M=[];for(let i in s.outputs){const S=s.outputs[i];M.push(new LiteralMapEntry(i,literal(S),!1))}i.statements.push(variable(P).set(importExpr(Identifiers.createComponentFactory).callFn([literal(s.selector),i.importExpr(s.type.reference),variable(A),new LiteralMapExpr(N),new LiteralMapExpr(M),literalArr(s.template.ngContentSelectors.map(i=>literal(i)))])).toDeclStmt(importType(Identifiers.ComponentFactory,[expressionType(i.importExpr(s.type.reference))],[le.Const]),[$e.Final,$e.Exported]))}_compileComponent(i,s,S,_,T,A){const{template:P,pipes:N}=this._parseTemplate(s,S,_),M=T?variable(T.stylesVar):literalArr([]),k=this._viewCompiler.compileComponent(i,s,P,M,N);return T&&_resolveStyleStatements(this._symbolResolver,T,this._styleCompiler.needsStyleShim(s),A),k}_parseTemplate(i,s,S){if(this._templateAstCache.has(i.type.reference))return this._templateAstCache.get(i.type.reference);const _=i.template.preserveWhitespaces,T=S.map(i=>this._metadataResolver.getDirectiveSummary(i.reference)),A=s.transitiveModule.pipes.map(i=>this._metadataResolver.getPipeSummary(i.reference)),P=this._templateParser.parse(i,i.template.htmlAst,T,A,s.schemas,templateSourceUrl(s.type,i,i.template),_);return this._templateAstCache.set(i.type.reference,P),P}_createOutputContext(i){return{statements:[],genFilePath:i,importExpr:(s,S=null,_=!0)=>{if(!(s instanceof StaticSymbol))throw new Error("Internal error: unknown identifier "+JSON.stringify(s));const T=this._symbolResolver.getTypeArity(s)||0,{filePath:A,name:P,members:N}=this._symbolResolver.getImportAs(s,_)||s,M=this._fileNameToModuleName(A,i),k=M===this._fileNameToModuleName(i,i)?null:M,R=S||[],F=T-R.length,D=R.concat(newArray(F,pe));return N.reduce((i,s)=>i.prop(s),importExpr(new ExternalReference(k,P,null),D))},constantPool:new ConstantPool}}_fileNameToModuleName(i,s){return this._summaryResolver.getKnownModuleName(i)||this._symbolResolver.getKnownModuleName(i)||this._host.fileNameToModuleName(i,s)}_codegenStyles(i,s,S,_,T){const A=this._createOutputContext(_stylesModuleUrl(S.moduleUrl,_,T)),P=this._styleCompiler.compileStyles(A,s,S,_);return _resolveStyleStatements(this._symbolResolver,P,_,T),this._codegenSourceModule(i,A)}_codegenSourceModule(i,s){return new GeneratedFile(i,s.genFilePath,s.statements)}listLazyRoutes(i,s){const S=this;if(i){return function visitLazyRoute(i,s=new Set,_=[]){if(s.has(i)||!i.name)return _;s.add(i);const T=listLazyRoutes(S._metadataResolver.getNgModuleMetadata(i,!0),S.reflector);for(const i of T)_.push(i),visitLazyRoute(i.referencedModule,s,_);return _}(parseLazyRoute(i,this.reflector).referencedModule)}if(s){const i=[];for(const S of s.ngModules){const s=listLazyRoutes(S,this.reflector);for(const S of s)i.push(S)}return i}throw new Error("Either route or analyzedModules has to be specified!")}}function _createEmptyStub(i){i.statements.push(importExpr(Identifiers.ComponentFactory).toStmt())}function _resolveStyleStatements(i,s,S,_){s.dependencies.forEach(s=>{s.setValue(i.getStaticSymbol(_stylesModuleUrl(s.moduleUrl,S,_),s.name))})}function _stylesModuleUrl(i,s,S){return`${i}${s?".shim":""}.ngstyle${S}`}function analyzeNgModules(i,s,S,_){return mergeAnalyzedFiles(function _analyzeFilesIncludingNonProgramFiles(i,s,S,_){const T=new Set,A=[],visitFile=i=>{if(T.has(i)||!s.isSourceFile(i))return!1;T.add(i);const P=analyzeFile(s,S,_,i);A.push(P),P.ngModules.forEach(i=>{i.transitiveModule.modules.forEach(i=>visitFile(i.reference.filePath))})};return i.forEach(i=>visitFile(i)),A}(i,s,S,_))}function analyzeAndValidateNgModules(i,s,S,_){return validateAnalyzedModules(analyzeNgModules(i,s,S,_))}function validateAnalyzedModules(i){if(i.symbolsMissingModule&&i.symbolsMissingModule.length){throw syntaxError(i.symbolsMissingModule.map(i=>`Cannot determine the module for class ${i.name} in ${i.filePath}! Add ${i.name} to the NgModule to fix it.`).join("\n"))}return i}function analyzeFile(i,s,S,_){const T=[],A=[],P=[],N=[],M=[],k=s.hasDecorators(_);let R=!1;return _.endsWith(".d.ts")&&!k||s.getSymbolsOf(_).forEach(_=>{const k=s.resolveSymbol(_).metadata;if(!k||"error"===k.__symbolic)return;let F=!1;if("class"===k.__symbolic)if(S.isDirective(_))F=!0,S.isAbstractDirective(_)?T.push(_):A.push(_);else if(S.isPipe(_))F=!0,P.push(_);else if(S.isNgModule(_)){const i=S.getNgModuleMetadata(_,!1);i&&(F=!0,M.push(i))}else if(S.isInjectable(_)){F=!0;const i=S.getInjectableMetadata(_,null,!1);i&&N.push(i)}F||(R=R||function isValueExportingNonSourceFile(i,s){let S=!1;return visitValue(s,new class Visitor{visitArray(i,s){i.forEach(i=>visitValue(i,this,s))}visitStringMap(i,s){Object.keys(i).forEach(S=>visitValue(i[S],this,s))}visitPrimitive(i,s){}visitOther(s,_){s instanceof StaticSymbol&&!i.isSourceFile(s.filePath)&&(S=!0)}},null),S}(i,k))}),{fileName:_,directives:A,abstractDirectives:T,pipes:P,ngModules:M,injectables:N,exportsNonSourceFiles:R}}function analyzeFileForInjectables(i,s,S,_){const T=[],A=[];return s.hasDecorators(_)&&s.getSymbolsOf(_).forEach(i=>{const _=s.resolveSymbol(i).metadata;if(_&&"error"!==_.__symbolic&&"class"===_.__symbolic)if(S.isInjectable(i)){const s=S.getInjectableMetadata(i,null,!1);s&&T.push(s)}else if(S.isNgModule(i)){const s=S.getShallowModuleMetadata(i);s&&A.push(s)}}),{fileName:_,injectables:T,shallowModules:A}}function mergeAnalyzedFiles(i){const s=[],S=new Map,_=new Set;i.forEach(i=>{i.ngModules.forEach(i=>{s.push(i),i.declaredDirectives.forEach(s=>S.set(s.reference,i)),i.declaredPipes.forEach(s=>S.set(s.reference,i))}),i.directives.forEach(i=>_.add(i)),i.pipes.forEach(i=>_.add(i))});const T=[];return _.forEach(i=>{S.has(i)||T.push(i)}),{ngModules:s,ngModuleByPipeOrDirective:S,symbolsMissingModule:T,files:i}}function mergeAndValidateNgFiles(i){return validateAnalyzedModules(mergeAnalyzedFiles(i))}function formatChain(i,s=0){if(!i)return"";const S=i.position?`${i.position.fileName}(${i.position.line+1},${i.position.column+1})`:"",_=S&&0!==s?" at "+S:"";let T=`${S&&0===s?S+": ":""}${i.message}${_}`;if(i.next)for(const S of i.next)T+="\n"+formatChain(S,s+2);return`${function indentStr(i){if(i<=0)return"";if(i<6)return[""," ","  ","   ","    ","     "][i];const s=indentStr(Math.floor(i/2));return s+s+(i%2==1?" ":"")}(s)}${T}`}function formattedError(i){const s=syntaxError(formatChain(i)+".");return s.ngFormattedMessage=!0,s.chain=i,s.position=i.position,s}function isFormattedError(i){return!!i.ngFormattedMessage}const en="@angular/core",tn=/^\$.*\$$/,rn={__symbolic:"ignore"},nn=new Set(["useValue","useFactory","data","id","loadChildren"]);function shouldIgnore(i){return i&&"ignore"==i.__symbolic}class StaticReflector{constructor(i,s,S=[],_=[],T){this.summaryResolver=i,this.symbolResolver=s,this.errorRecorder=T,this.annotationCache=new Map,this.shallowAnnotationCache=new Map,this.propertyCache=new Map,this.parameterCache=new Map,this.methodCache=new Map,this.staticCache=new Map,this.conversionMap=new Map,this.resolvedExternalReferences=new Map,this.annotationForParentClassWithSummaryKind=new Map,this.initializeConversionMap(),S.forEach(i=>this._registerDecoratorOrConstructor(this.getStaticSymbol(i.filePath,i.name),i.ctor)),_.forEach(i=>this._registerFunction(this.getStaticSymbol(i.filePath,i.name),i.fn)),this.annotationForParentClassWithSummaryKind.set(Ye.Directive,[U,H]),this.annotationForParentClassWithSummaryKind.set(Ye.Pipe,[q]),this.annotationForParentClassWithSummaryKind.set(Ye.NgModule,[J]),this.annotationForParentClassWithSummaryKind.set(Ye.Injectable,[Y,q,U,H,J])}componentModuleUrl(i){const s=this.findSymbolDeclaration(i);return this.symbolResolver.getResourcePath(s)}invalidateSymbols(i){for(const s of i)this.annotationCache.delete(s),this.shallowAnnotationCache.delete(s),this.propertyCache.delete(s),this.parameterCache.delete(s),this.methodCache.delete(s),this.staticCache.delete(s),this.conversionMap.delete(s)}resolveExternalReference(i,s){let S=void 0;if(!s){S=`${i.moduleName}:${i.name}`;const s=this.resolvedExternalReferences.get(S);if(s)return s}const _=this.symbolResolver.getSymbolByModule(i.moduleName,i.name,s),T=this.findSymbolDeclaration(_);return s||(this.symbolResolver.recordModuleNameForFileName(_.filePath,i.moduleName),this.symbolResolver.recordImportAs(T,_)),S&&this.resolvedExternalReferences.set(S,T),T}findDeclaration(i,s,S){return this.findSymbolDeclaration(this.symbolResolver.getSymbolByModule(i,s,S))}tryFindDeclaration(i,s,S){return this.symbolResolver.ignoreErrorsFor(()=>this.findDeclaration(i,s,S))}findSymbolDeclaration(i){const s=this.symbolResolver.resolveSymbol(i);if(s){let i=s.metadata;if(i&&"resolved"===i.__symbolic&&(i=i.symbol),i instanceof StaticSymbol)return this.findSymbolDeclaration(s.metadata)}return i}tryAnnotations(i){const s=this.errorRecorder;this.errorRecorder=(i,s)=>{};try{return this.annotations(i)}finally{this.errorRecorder=s}}annotations(i){return this._annotations(i,(i,s)=>this.simplify(i,s),this.annotationCache)}shallowAnnotations(i){return this._annotations(i,(i,s)=>this.simplify(i,s,!0),this.shallowAnnotationCache)}_annotations(i,s,S){let _=S.get(i);if(!_){_=[];const T=this.getTypeMetadata(i),A=this.findParentType(i,T);if(A){const i=this.annotations(A);_.push(...i)}let P=[];if(T.decorators&&(P=s(i,T.decorators),P&&_.push(...P)),A&&!this.summaryResolver.isLibraryFile(i.filePath)&&this.summaryResolver.isLibraryFile(A.filePath)){const s=this.summaryResolver.resolveSummary(A);if(s&&s.type){const S=this.annotationForParentClassWithSummaryKind.get(s.type.summaryKind);S.some(i=>P.some(s=>i.isTypeOf(s)))||this.reportError(formatMetadataError(metadataError(`Class ${i.name} in ${i.filePath} extends from a ${Ye[s.type.summaryKind]} in another compilation unit without duplicating the decorator`,void 0,`Please add a ${S.map(i=>i.ngMetadataName).join(" or ")} decorator to the class`),i),i)}}S.set(i,_.filter(i=>!!i))}return _}propMetadata(i){let s=this.propertyCache.get(i);if(!s){const S=this.getTypeMetadata(i);s={};const _=this.findParentType(i,S);if(_){const i=this.propMetadata(_);Object.keys(i).forEach(S=>{s[S]=i[S]})}const T=S.members||{};Object.keys(T).forEach(S=>{const _=T[S].find(i=>"property"==i.__symbolic||"method"==i.__symbolic),A=[];(null==s?void 0:s.hasOwnProperty(S))&&A.push(...s[S]),s[S]=A,_&&_.decorators&&A.push(...this.simplify(i,_.decorators))}),this.propertyCache.set(i,s)}return s}parameters(i){if(!(i instanceof StaticSymbol))return this.reportError(new Error(`parameters received ${JSON.stringify(i)} which is not a StaticSymbol`),i),[];try{let s=this.parameterCache.get(i);if(!s){const S=this.getTypeMetadata(i),_=this.findParentType(i,S),T=S?S.members:null,A=T?T.__ctor__:null;if(A){const S=A.find(i=>"constructor"==i.__symbolic),_=S.parameters||[],T=this.simplify(i,S.parameterDecorators||[]);s=[],_.forEach((S,_)=>{const A=[],P=this.trySimplify(i,S);P&&A.push(P);const N=T?T[_]:null;N&&A.push(...N),s.push(A)})}else _&&(s=this.parameters(_));s||(s=[]),this.parameterCache.set(i,s)}return s}catch(s){throw console.error(`Failed on type ${JSON.stringify(i)} with error ${s}`),s}}_methodNames(i){let s=this.methodCache.get(i);if(!s){const S=this.getTypeMetadata(i);s={};const _=this.findParentType(i,S);if(_){const i=this._methodNames(_);Object.keys(i).forEach(S=>{s[S]=i[S]})}const T=S.members||{};Object.keys(T).forEach(i=>{const S=T[i].some(i=>"method"==i.__symbolic);s[i]=s[i]||S}),this.methodCache.set(i,s)}return s}_staticMembers(i){let s=this.staticCache.get(i);if(!s){const S=this.getTypeMetadata(i).statics||{};s=Object.keys(S),this.staticCache.set(i,s)}return s}findParentType(i,s){const S=this.trySimplify(i,s.extends);if(S instanceof StaticSymbol)return S}hasLifecycleHook(i,s){i instanceof StaticSymbol||this.reportError(new Error(`hasLifecycleHook received ${JSON.stringify(i)} which is not a StaticSymbol`),i);try{return!!this._methodNames(i)[s]}catch(s){throw console.error(`Failed on type ${JSON.stringify(i)} with error ${s}`),s}}guards(i){if(!(i instanceof StaticSymbol))return this.reportError(new Error(`guards received ${JSON.stringify(i)} which is not a StaticSymbol`),i),{};const s=this._staticMembers(i),S={};for(let _ of s)if(_.endsWith("TypeGuard")){let s,T=_.substr(0,_.length-"TypeGuard".length);T.endsWith("UseIf")?(T=_.substr(0,T.length-"UseIf".length),s="UseIf"):s=this.getStaticSymbol(i.filePath,i.name,[_]),S[T]=s}return S}_registerDecoratorOrConstructor(i,s){this.conversionMap.set(i,(i,S)=>new s(...S))}_registerFunction(i,s){this.conversionMap.set(i,(i,S)=>s.apply(void 0,S))}initializeConversionMap(){this._registerDecoratorOrConstructor(this.findDeclaration(en,"Injectable"),Y),this.injectionToken=this.findDeclaration(en,"InjectionToken"),this.opaqueToken=this.findDeclaration(en,"OpaqueToken"),this.ROUTES=this.tryFindDeclaration("@angular/router","ROUTES"),this.ANALYZE_FOR_ENTRY_COMPONENTS=this.findDeclaration(en,"ANALYZE_FOR_ENTRY_COMPONENTS"),this._registerDecoratorOrConstructor(this.findDeclaration(en,"Host"),ie),this._registerDecoratorOrConstructor(this.findDeclaration(en,"Self"),re),this._registerDecoratorOrConstructor(this.findDeclaration(en,"SkipSelf"),ne),this._registerDecoratorOrConstructor(this.findDeclaration(en,"Inject"),k),this._registerDecoratorOrConstructor(this.findDeclaration(en,"Optional"),te),this._registerDecoratorOrConstructor(this.findDeclaration(en,"Attribute"),F),this._registerDecoratorOrConstructor(this.findDeclaration(en,"ContentChild"),L),this._registerDecoratorOrConstructor(this.findDeclaration(en,"ContentChildren"),D),this._registerDecoratorOrConstructor(this.findDeclaration(en,"ViewChild"),V),this._registerDecoratorOrConstructor(this.findDeclaration(en,"ViewChildren"),$),this._registerDecoratorOrConstructor(this.findDeclaration(en,"Input"),K),this._registerDecoratorOrConstructor(this.findDeclaration(en,"Output"),G),this._registerDecoratorOrConstructor(this.findDeclaration(en,"Pipe"),q),this._registerDecoratorOrConstructor(this.findDeclaration(en,"HostBinding"),X),this._registerDecoratorOrConstructor(this.findDeclaration(en,"HostListener"),Q),this._registerDecoratorOrConstructor(this.findDeclaration(en,"Directive"),U),this._registerDecoratorOrConstructor(this.findDeclaration(en,"Component"),H),this._registerDecoratorOrConstructor(this.findDeclaration(en,"NgModule"),J),this._registerDecoratorOrConstructor(this.findDeclaration(en,"Host"),ie),this._registerDecoratorOrConstructor(this.findDeclaration(en,"Self"),re),this._registerDecoratorOrConstructor(this.findDeclaration(en,"SkipSelf"),ne),this._registerDecoratorOrConstructor(this.findDeclaration(en,"Optional"),te)}getStaticSymbol(i,s,S){return this.symbolResolver.getStaticSymbol(i,s,S)}trySimplify(i,s){const S=this.errorRecorder;this.errorRecorder=(i,s)=>{};const _=this.simplify(i,s);return this.errorRecorder=S,_}simplify(i,s,S=!1){const _=this;let T=BindingScope$1.empty;const A=new Map;let P;try{P=function simplifyInContext(i,s,S,P){function resolveReferenceValue(i){const s=_.symbolResolver.resolveSymbol(i);return s?s.metadata:null}function simplifyEagerly(s){return simplifyInContext(i,s,S,0)}function simplifyNested(s,T){if(s===i)return simplifyInContext(s,T,S+1,P);try{return simplifyInContext(s,T,S+1,P)}catch(S){if(!isMetadataError(S))throw S;{const T=S.chain?"references '"+S.symbol.name+"'":function errorSummary(i){if(i.summary)return i.summary;switch(i.message){case"Reference to non-exported class":if(i.context&&i.context.className)return"references non-exported class "+i.context.className;break;case"Variable not initialized":return"is not initialized";case"Destructuring not supported":return"is a destructured variable";case"Could not resolve type":return"could not be resolved";case sn:return i.context&&i.context.name?`calls '${i.context.name}'`:"calls a function";case"Reference to a local symbol":return i.context&&i.context.name?"references local variable "+i.context.name:"references a local variable"}return"contains the error"}(S),A={message:`'${s.name}' ${T}`,position:S.position,next:S.chain};_.error({message:S.message,advise:S.advise,context:S.context,chain:A,symbol:s},i)}}}function simplify(s){if(isPrimitive(s))return s;if(Array.isArray(s)){const i=[];for(const S of s){if(S&&"spread"===S.__symbolic){const s=simplifyEagerly(S.expression);if(Array.isArray(s)){for(const S of s)i.push(S);continue}}const s=simplify(S);shouldIgnore(s)||i.push(s)}return i}if(s instanceof StaticSymbol){if(s===_.injectionToken||_.conversionMap.has(s)||P>0&&!s.members.length)return s;{const i=s,S=resolveReferenceValue(i);return null!=S?simplifyNested(i,S):i}}if(s){if(s.__symbolic){let P;switch(s.__symbolic){case"binop":let N=simplify(s.left);if(shouldIgnore(N))return N;let M=simplify(s.right);if(shouldIgnore(M))return M;switch(s.operator){case"&&":return N&&M;case"||":return N||M;case"|":return N|M;case"^":return N^M;case"&":return N&M;case"==":return N==M;case"!=":return N!=M;case"===":return N===M;case"!==":return N!==M;case"<":return N<M;case">":return N>M;case"<=":return N<=M;case">=":return N>=M;case"<<":return N<<M;case">>":return N>>M;case"+":return N+M;case"-":return N-M;case"*":return N*M;case"/":return N/M;case"%":return N%M}return null;case"if":let k=simplify(s.condition);return simplify(k?s.thenExpression:s.elseExpression);case"pre":let R=simplify(s.operand);if(shouldIgnore(R))return R;switch(s.operator){case"+":return R;case"-":return-R;case"!":return!R;case"~":return~R}return null;case"index":let F=simplifyEagerly(s.expression),D=simplifyEagerly(s.index);return F&&isPrimitive(D)?F[D]:null;case"select":const L=s.member;let $=i,V=simplify(s.expression);if(V instanceof StaticSymbol){const i=V.members.concat(L);$=_.getStaticSymbol(V.filePath,V.name,i);const s=resolveReferenceValue($);return null!=s?simplifyNested($,s):$}return V&&isPrimitive(L)?simplifyNested($,V[L]):null;case"reference":const U=s.name,W=T.resolve(U);if(W!=BindingScope$1.missing)return W;break;case"resolved":try{return simplify(s.symbol)}catch(i){throw isMetadataError(i)&&null!=s.fileName&&null!=s.line&&null!=s.character&&(i.position={fileName:s.fileName,line:s.line,column:s.character}),i}case"class":case"function":return i;case"new":case"call":if(P=simplifyInContext(i,s.expression,S+1,0),P instanceof StaticSymbol){if(P===_.injectionToken||P===_.opaqueToken)return i;const N=s.arguments||[];let M=_.conversionMap.get(P);if(M){const s=N.map(s=>simplifyNested(i,s)).map(i=>shouldIgnore(i)?void 0:i);return M(i,s)}return function simplifyCall(s,P,N,M){if(P&&"function"==P.__symbolic){A.get(s)&&_.error({message:"Recursion is not supported",summary:`called '${s.name}' recursively`,value:P},s);try{const _=P.value;if(_&&(0!=S||"error"!=_.__symbolic)){const S=P.parameters,M=P.defaults;N=N.map(s=>simplifyNested(i,s)).map(i=>shouldIgnore(i)?void 0:i),M&&M.length>N.length&&N.push(...M.slice(N.length).map(i=>simplify(i))),A.set(s,!0);const k=BindingScope$1.build();for(let i=0;i<S.length;i++)k.define(S[i],N[i]);const R=T;let F;try{T=k.done(),F=simplifyNested(s,_)}finally{T=R}return F}}finally{A.delete(s)}}if(0===S)return rn;let k=void 0;if(M&&"resolved"==M.__symbolic){const i=M.line,s=M.character,S=M.fileName;null!=S&&null!=i&&null!=s&&(k={fileName:S,line:i,column:s})}_.error({message:sn,context:s,value:P,position:k},i)}(P,resolveReferenceValue(P),N,s.expression)}return rn;case"error":let z=s.message;return null!=s.line?_.error({message:z,context:s.context,value:s,position:{fileName:s.fileName,line:s.line,column:s.character}},i):_.error({message:z,context:s.context},i),rn;case"ignore":return s}return null}return function mapStringMap(i,s){if(!i)return{};const S={};return Object.keys(i).forEach(_=>{const T=s(i[_],_);shouldIgnore(T)||(tn.test(_)?Object.defineProperty(S,_,{enumerable:!1,configurable:!0,value:T}):S[_]=T)}),S}(s,(T,A)=>{if(nn.has(A)){if("useValue"===A&&"provide"in s){const i=simplify(s.provide);if(i===_.ROUTES||i==_.ANALYZE_FOR_ENTRY_COMPONENTS)return simplify(T)}return function simplifyLazily(s){return simplifyInContext(i,s,S,P+1)}(T)}return simplify(T)})}return rn}return simplify(s)}(i,s,0,S?1:0)}catch(s){if(!this.errorRecorder)throw formatMetadataError(s,i);this.reportError(s,i)}if(!shouldIgnore(P))return P}getTypeMetadata(i){const s=this.symbolResolver.resolveSymbol(i);return s&&s.metadata?s.metadata:{__symbolic:"class"}}reportError(i,s,S){if(!this.errorRecorder)throw i;this.errorRecorder(formatMetadataError(i,s),s&&s.filePath||S)}error({message:i,summary:s,advise:S,position:_,context:T,value:A,symbol:P,chain:N},M){this.reportError(metadataError(i,s,S,_,P,T,N),M)}}function metadataError(i,s,S,_,T,A,P){const N=syntaxError(i);return N.ngMetadataError=!0,S&&(N.advise=S),_&&(N.position=_),s&&(N.summary=s),A&&(N.context=A),P&&(N.chain=P),T&&(N.symbol=T),N}function isMetadataError(i){return!!i.ngMetadataError}const sn="Function call not supported";function isPrimitive(i){return null===i||"function"!=typeof i&&"object"!=typeof i}class BindingScope$1{static build(){const i=new Map;return{define:function(s,S){return i.set(s,S),this},done:function(){return i.size>0?new PopulatedScope(i):BindingScope$1.empty}}}}BindingScope$1.missing={},BindingScope$1.empty={resolve:i=>BindingScope$1.missing};class PopulatedScope extends BindingScope$1{constructor(i){super(),this.bindings=i}resolve(i){return this.bindings.has(i)?this.bindings.get(i):BindingScope$1.missing}}function formatMetadataMessageChain(i,s){const S=`${function expandedMessage(i,s){switch(i){case"Reference to non-exported class":if(s&&s.className)return`References to a non-exported class are not supported in decorators but ${s.className} was referenced.`;break;case"Variable not initialized":return"Only initialized variables and constants can be referenced in decorators because the value of this variable is needed by the template compiler";case"Destructuring not supported":return"Referencing an exported destructured variable or constant is not supported in decorators and this value is needed by the template compiler";case"Could not resolve type":if(s&&s.typeName)return"Could not resolve type "+s.typeName;break;case sn:return s&&s.name?`Function calls are not supported in decorators but '${s.name}' was called`:"Function calls are not supported in decorators";case"Reference to a local symbol":if(s&&s.name)return`Reference to a local (non-exported) symbols are not supported in decorators but '${s.name}' was referenced`;break;case"Lambda not supported":return"Function expressions are not supported in decorators"}return i}(i.message,i.context)}${i.symbol?` in '${i.symbol.name}'`:""}`,_=i.position,T=i.next?formatMetadataMessageChain(i.next,s):s?{message:s}:void 0;return{message:S,position:_,next:T?[T]:void 0}}function formatMetadataError(i,s){if(isMetadataError(i)){const S=i.position;return formattedError(formatMetadataMessageChain({message:`Error during template compile of '${s.name}'`,position:S,next:{message:i.message,next:i.chain,context:i.context,symbol:i.symbol}},i.advise||function messageAdvise(i,s){switch(i){case"Reference to non-exported class":if(s&&s.className)return`Consider exporting '${s.className}'`;break;case"Destructuring not supported":return"Consider simplifying to avoid destructuring";case"Reference to a local symbol":if(s&&s.name)return`Consider exporting '${s.name}'`;break;case"Lambda not supported":return"Consider changing the function expression into an exported function"}}(i.message,i.context)))}return i}class AotSummaryResolver{constructor(i,s){this.host=i,this.staticSymbolCache=s,this.summaryCache=new Map,this.loadedFilePaths=new Map,this.importAs=new Map,this.knownFileNameToModuleNames=new Map}isLibraryFile(i){return!this.host.isSourceFile(stripGeneratedFileSuffix(i))}toSummaryFileName(i,s){return this.host.toSummaryFileName(i,s)}fromSummaryFileName(i,s){return this.host.fromSummaryFileName(i,s)}resolveSummary(i){const s=i.members.length?this.staticSymbolCache.get(i.filePath,i.name):i;let S=this.summaryCache.get(s);return S||(this._loadSummaryFile(i.filePath),S=this.summaryCache.get(i)),s===i&&S||null}getSymbolsOf(i){return this._loadSummaryFile(i)?Array.from(this.summaryCache.keys()).filter(s=>s.filePath===i):null}getImportAs(i){return i.assertNoMembers(),this.importAs.get(i)}getKnownModuleName(i){return this.knownFileNameToModuleNames.get(i)||null}addSummary(i){this.summaryCache.set(i.symbol,i)}_loadSummaryFile(i){let s=this.loadedFilePaths.get(i);if(null!=s)return s;let S=null;if(this.isLibraryFile(i)){const s=summaryFileName(i);try{S=this.host.loadSummary(s)}catch(i){throw console.error("Error loading summary file "+s),i}}if(s=null!=S,this.loadedFilePaths.set(i,s),S){const{moduleName:s,summaries:_,importAs:T}=function deserializeSummaries(i,s,S,_){return new FromJsonDeserializer(i,s).deserialize(S,_)}(this.staticSymbolCache,this,i,S);_.forEach(i=>this.summaryCache.set(i.symbol,i)),s&&this.knownFileNameToModuleNames.set(i,s),T.forEach(i=>{this.importAs.set(i.symbol,i.importAs)})}return s}}function createAotUrlResolver(i){return{resolve:(s,S)=>{const _=i.resourceNameToFileName(S,s);if(!_)throw syntaxError(`Couldn't resolve resource ${S} from ${s}`);return _}}}function createAotCompiler(i,s,S){let _=s.translations||"";const T=createAotUrlResolver(i),A=new StaticSymbolCache,P=new AotSummaryResolver(i,A),N=new StaticSymbolResolver(i,A,P),M=new StaticReflector(P,N,[],[],S);let k;k=s.enableIvy?new HtmlParser:new I18NHtmlParser(new HtmlParser,_,s.i18nFormat,s.missingTranslation,console);const R=new CompilerConfig({defaultEncapsulation:W.Emulated,useJit:!1,missingTranslation:s.missingTranslation,preserveWhitespaces:s.preserveWhitespaces,strictInjectionParameters:s.strictInjectionParameters}),F=new DirectiveNormalizer({get:s=>i.loadResource(s)},T,k,R),D=new Parser$1(new Lexer),L=new DomElementSchemaRegistry,$=new TemplateParser(R,M,D,L,k,console,[]),V=new CompileMetadataResolver(R,k,new NgModuleResolver(M),new DirectiveResolver(M),new PipeResolver(M),P,L,F,console,A,M,S),U=new ViewCompiler(M),z=new TypeCheckCompiler(s,M);return{compiler:new AotCompiler(R,s,i,M,V,$,new StyleCompiler(T),U,z,new NgModuleCompiler(M),new InjectableCompiler(M,!!s.enableIvy),new TypeScriptEmitter,P,N),reflector:M}}class SummaryResolver{}class JitSummaryResolver{constructor(){this._summaries=new Map}isLibraryFile(){return!1}toSummaryFileName(i){return i}fromSummaryFileName(i){return i}resolveSummary(i){return this._summaries.get(i)||null}getSymbolsOf(){return[]}getImportAs(i){return i}getKnownModuleName(i){return null}addSummary(i){this._summaries.set(i.symbol,i)}}function _executeFunctionStatements(i,s,S,_,T){const A=_.createChildWihtLocalVars();for(let S=0;S<i.length;S++)A.vars.set(i[S],s[S]);const P=T.visitAllStatements(S,A);return P?P.value:null}class _ExecutionContext{constructor(i,s,S,_){this.parent=i,this.instance=s,this.className=S,this.vars=_,this.exports=[]}createChildWihtLocalVars(){return new _ExecutionContext(this,this.instance,this.className,new Map)}}class ReturnValue{constructor(i){this.value=i}}class StatementInterpreter{constructor(i){this.reflector=i}debugAst(i){return debugOutputAstAsTypeScript(i)}visitDeclareVarStmt(i,s){const S=i.value?i.value.visitExpression(this,s):void 0;return s.vars.set(i.name,S),i.hasModifier($e.Exported)&&s.exports.push(i.name),null}visitWriteVarExpr(i,s){const S=i.value.visitExpression(this,s);let _=s;for(;null!=_;){if(_.vars.has(i.name))return _.vars.set(i.name,S),S;_=_.parent}throw new Error("Not declared variable "+i.name)}visitWrappedNodeExpr(i,s){throw new Error("Cannot interpret a WrappedNodeExpr.")}visitTypeofExpr(i,s){throw new Error("Cannot interpret a TypeofExpr")}visitReadVarExpr(i,s){let S=i.name;if(null!=i.builtin)switch(i.builtin){case Re.Super:return Object.getPrototypeOf(s.instance);case Re.This:return s.instance;case Re.CatchError:S=an;break;case Re.CatchStack:S=on;break;default:throw new Error("Unknown builtin variable "+i.builtin)}let _=s;for(;null!=_;){if(_.vars.has(S))return _.vars.get(S);_=_.parent}throw new Error("Not declared variable "+S)}visitWriteKeyExpr(i,s){const S=i.receiver.visitExpression(this,s),_=i.index.visitExpression(this,s),T=i.value.visitExpression(this,s);return S[_]=T,T}visitWritePropExpr(i,s){const S=i.receiver.visitExpression(this,s),_=i.value.visitExpression(this,s);return S[i.name]=_,_}visitInvokeMethodExpr(i,s){const S=i.receiver.visitExpression(this,s),_=this.visitAllExpressions(i.args,s);let T;if(null!=i.builtin)switch(i.builtin){case Oe.ConcatArray:T=S.concat(..._);break;case Oe.SubscribeObservable:T=S.subscribe({next:_[0]});break;case Oe.Bind:T=S.bind(..._);break;default:throw new Error("Unknown builtin method "+i.builtin)}else T=S[i.name].apply(S,_);return T}visitInvokeFunctionExpr(i,s){const S=this.visitAllExpressions(i.args,s),_=i.fn;if(_ instanceof ReadVarExpr&&_.builtin===Re.Super)return s.instance.constructor.prototype.constructor.apply(s.instance,S),null;return i.fn.visitExpression(this,s).apply(null,S)}visitReturnStmt(i,s){return new ReturnValue(i.value.visitExpression(this,s))}visitDeclareClassStmt(i,s){const S=function createDynamicClass(i,s,S){const _={};i.getters.forEach(T=>{_[T.name]={configurable:!1,get:function(){const _=new _ExecutionContext(s,this,i.name,s.vars);return _executeFunctionStatements([],[],T.body,_,S)}}}),i.methods.forEach((function(T){const A=T.params.map(i=>i.name);_[T.name]={writable:!1,configurable:!1,value:function(..._){const P=new _ExecutionContext(s,this,i.name,s.vars);return _executeFunctionStatements(A,_,T.body,P,S)}}}));const T=i.constructorMethod.params.map(i=>i.name),ctor=function(..._){const A=new _ExecutionContext(s,this,i.name,s.vars);i.fields.forEach(i=>{this[i.name]=void 0}),_executeFunctionStatements(T,_,i.constructorMethod.body,A,S)},A=i.parent?i.parent.visitExpression(S,s):Object;return ctor.prototype=Object.create(A.prototype,_),ctor}(i,s,this);return s.vars.set(i.name,S),i.hasModifier($e.Exported)&&s.exports.push(i.name),null}visitExpressionStmt(i,s){return i.expr.visitExpression(this,s)}visitIfStmt(i,s){return i.condition.visitExpression(this,s)?this.visitAllStatements(i.trueCase,s):null!=i.falseCase?this.visitAllStatements(i.falseCase,s):null}visitTryCatchStmt(i,s){try{return this.visitAllStatements(i.bodyStmts,s)}catch(S){const _=s.createChildWihtLocalVars();return _.vars.set(an,S),_.vars.set(on,S.stack),this.visitAllStatements(i.catchStmts,_)}}visitThrowStmt(i,s){throw i.error.visitExpression(this,s)}visitInstantiateExpr(i,s){const S=this.visitAllExpressions(i.args,s);return new(i.classExpr.visitExpression(this,s))(...S)}visitLiteralExpr(i,s){return i.value}visitLocalizedString(i,s){return null}visitExternalExpr(i,s){return this.reflector.resolveExternalReference(i.value)}visitConditionalExpr(i,s){return i.condition.visitExpression(this,s)?i.trueCase.visitExpression(this,s):null!=i.falseCase?i.falseCase.visitExpression(this,s):null}visitNotExpr(i,s){return!i.condition.visitExpression(this,s)}visitAssertNotNullExpr(i,s){return i.condition.visitExpression(this,s)}visitCastExpr(i,s){return i.value.visitExpression(this,s)}visitFunctionExpr(i,s){return _declareFn(i.params.map(i=>i.name),i.statements,s,this)}visitDeclareFunctionStmt(i,s){const S=i.params.map(i=>i.name);return s.vars.set(i.name,_declareFn(S,i.statements,s,this)),i.hasModifier($e.Exported)&&s.exports.push(i.name),null}visitUnaryOperatorExpr(i,s){const rhs=()=>i.expr.visitExpression(this,s);switch(i.operator){case Ne.Plus:return+rhs();case Ne.Minus:return-rhs();default:throw new Error("Unknown operator "+i.operator)}}visitBinaryOperatorExpr(i,s){const lhs=()=>i.lhs.visitExpression(this,s),rhs=()=>i.rhs.visitExpression(this,s);switch(i.operator){case Me.Equals:return lhs()==rhs();case Me.Identical:return lhs()===rhs();case Me.NotEquals:return lhs()!=rhs();case Me.NotIdentical:return lhs()!==rhs();case Me.And:return lhs()&&rhs();case Me.Or:return lhs()||rhs();case Me.Plus:return lhs()+rhs();case Me.Minus:return lhs()-rhs();case Me.Divide:return lhs()/rhs();case Me.Multiply:return lhs()*rhs();case Me.Modulo:return lhs()%rhs();case Me.Lower:return lhs()<rhs();case Me.LowerEquals:return lhs()<=rhs();case Me.Bigger:return lhs()>rhs();case Me.BiggerEquals:return lhs()>=rhs();default:throw new Error("Unknown operator "+i.operator)}}visitReadPropExpr(i,s){let S;return S=i.receiver.visitExpression(this,s)[i.name],S}visitReadKeyExpr(i,s){return i.receiver.visitExpression(this,s)[i.index.visitExpression(this,s)]}visitLiteralArrayExpr(i,s){return this.visitAllExpressions(i.entries,s)}visitLiteralMapExpr(i,s){const S={};return i.entries.forEach(i=>S[i.key]=i.value.visitExpression(this,s)),S}visitCommaExpr(i,s){const S=this.visitAllExpressions(i.parts,s);return S[S.length-1]}visitAllExpressions(i,s){return i.map(i=>i.visitExpression(this,s))}visitAllStatements(i,s){for(let S=0;S<i.length;S++){const _=i[S].visitStatement(this,s);if(_ instanceof ReturnValue)return _}return null}}function _declareFn(i,s,S,_){return(...T)=>_executeFunctionStatements(i,T,s,S,_)}const an="error",on="stack";class JitCompiler{constructor(i,s,S,_,T,A,P,N,M,k,R){this._metadataResolver=i,this._templateParser=s,this._styleCompiler=S,this._viewCompiler=_,this._ngModuleCompiler=T,this._summaryResolver=A,this._reflector=P,this._jitEvaluator=N,this._compilerConfig=M,this._console=k,this.getExtraNgModuleProviders=R,this._compiledTemplateCache=new Map,this._compiledHostTemplateCache=new Map,this._compiledDirectiveWrapperCache=new Map,this._compiledNgModuleCache=new Map,this._sharedStylesheetCount=0,this._addedAotSummaries=new Set}compileModuleSync(i){return SyncAsync_assertSync(this._compileModuleAndComponents(i,!0))}compileModuleAsync(i){return Promise.resolve(this._compileModuleAndComponents(i,!1))}compileModuleAndAllComponentsSync(i){return SyncAsync_assertSync(this._compileModuleAndAllComponents(i,!0))}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this._compileModuleAndAllComponents(i,!1))}getComponentFactory(i){return this._metadataResolver.getDirectiveSummary(i).componentFactory}loadAotSummaries(i){this.clearCache(),this._addAotSummaries(i)}_addAotSummaries(i){if(this._addedAotSummaries.has(i))return;this._addedAotSummaries.add(i);const s=i();for(let i=0;i<s.length;i++){const S=s[i];if("function"==typeof S)this._addAotSummaries(S);else{const i=S;this._summaryResolver.addSummary({symbol:i.type.reference,metadata:null,type:i})}}}hasAotSummary(i){return!!this._summaryResolver.resolveSummary(i)}_filterJitIdentifiers(i){return i.map(i=>i.reference).filter(i=>!this.hasAotSummary(i))}_compileModuleAndComponents(i,s){return SyncAsync_then(this._loadModules(i,s),()=>(this._compileComponents(i,null),this._compileModule(i)))}_compileModuleAndAllComponents(i,s){return SyncAsync_then(this._loadModules(i,s),()=>{const s=[];return this._compileComponents(i,s),{ngModuleFactory:this._compileModule(i),componentFactories:s}})}_loadModules(i,s){const S=[],_=this._metadataResolver.getNgModuleMetadata(i);return this._filterJitIdentifiers(_.transitiveModule.modules).forEach(i=>{const _=this._metadataResolver.getNgModuleMetadata(i);this._filterJitIdentifiers(_.declaredDirectives).forEach(i=>{const T=this._metadataResolver.loadDirectiveMetadata(_.type.reference,i,s);T&&S.push(T)}),this._filterJitIdentifiers(_.declaredPipes).forEach(i=>this._metadataResolver.getOrLoadPipeMetadata(i))}),SyncAsync_all(S)}_compileModule(i){let s=this._compiledNgModuleCache.get(i);if(!s){const S=this._metadataResolver.getNgModuleMetadata(i),_=this.getExtraNgModuleProviders(S.type.reference),T=createOutputContext(),A=this._ngModuleCompiler.compile(T,S,_);s=this._interpretOrJit(ngModuleJitUrl(S),T.statements)[A.ngModuleFactoryVar],this._compiledNgModuleCache.set(S.type.reference,s)}return s}_compileComponents(i,s){const S=this._metadataResolver.getNgModuleMetadata(i),_=new Map,T=new Set,A=this._filterJitIdentifiers(S.transitiveModule.modules);A.forEach(i=>{const S=this._metadataResolver.getNgModuleMetadata(i);this._filterJitIdentifiers(S.declaredDirectives).forEach(i=>{_.set(i,S);const A=this._metadataResolver.getDirectiveMetadata(i);if(A.isComponent&&(T.add(this._createCompiledTemplate(A,S)),s)){const i=this._createCompiledHostTemplate(A.type.reference,S);T.add(i),s.push(A.componentFactory)}})}),A.forEach(i=>{const s=this._metadataResolver.getNgModuleMetadata(i);this._filterJitIdentifiers(s.declaredDirectives).forEach(i=>{const s=this._metadataResolver.getDirectiveMetadata(i);s.isComponent&&s.entryComponents.forEach(i=>{const s=_.get(i.componentType);T.add(this._createCompiledHostTemplate(i.componentType,s))})}),s.entryComponents.forEach(i=>{if(!this.hasAotSummary(i.componentType)){const s=_.get(i.componentType);T.add(this._createCompiledHostTemplate(i.componentType,s))}})}),T.forEach(i=>this._compileTemplate(i))}clearCacheFor(i){this._compiledNgModuleCache.delete(i),this._metadataResolver.clearCacheFor(i),this._compiledHostTemplateCache.delete(i),this._compiledTemplateCache.get(i)&&this._compiledTemplateCache.delete(i)}clearCache(){this._metadataResolver.clearCache(),this._compiledTemplateCache.clear(),this._compiledHostTemplateCache.clear(),this._compiledNgModuleCache.clear()}_createCompiledHostTemplate(i,s){if(!s)throw new Error(`Component ${stringify(i)} is not part of any NgModule or the module has not been imported into your module.`);let S=this._compiledHostTemplateCache.get(i);if(!S){const _=this._metadataResolver.getDirectiveMetadata(i);assertComponent(_);const T=this._metadataResolver.getHostComponentMetadata(_,_.componentFactory.viewDefFactory);S=new CompiledTemplate(!0,_.type,T,s,[_.type]),this._compiledHostTemplateCache.set(i,S)}return S}_createCompiledTemplate(i,s){let S=this._compiledTemplateCache.get(i.type.reference);return S||(assertComponent(i),S=new CompiledTemplate(!1,i.type,i,s,s.transitiveModule.directives),this._compiledTemplateCache.set(i.type.reference,S)),S}_compileTemplate(i){if(i.isCompiled)return;const s=i.compMeta,S=new Map,_=createOutputContext(),T=this._styleCompiler.compileComponent(_,s);s.template.externalStylesheets.forEach(i=>{const _=this._styleCompiler.compileStyles(createOutputContext(),s,i);S.set(i.moduleUrl,_)}),this._resolveStylesCompileResult(T,S);i.ngModule.transitiveModule.pipes.map(i=>this._metadataResolver.getPipeSummary(i.reference));const{template:A,pipes:P}=this._parseTemplate(s,i.ngModule,i.directives),N=this._viewCompiler.compileComponent(_,s,A,variable(T.stylesVar),P),M=this._interpretOrJit(templateJitUrl(i.ngModule.type,i.compMeta),_.statements),k=M[N.viewClassVar],R=M[N.rendererTypeVar];i.compiled(k,R)}_parseTemplate(i,s,S){const _=i.template.preserveWhitespaces,T=S.map(i=>this._metadataResolver.getDirectiveSummary(i.reference)),A=s.transitiveModule.pipes.map(i=>this._metadataResolver.getPipeSummary(i.reference));return this._templateParser.parse(i,i.template.htmlAst,T,A,s.schemas,templateSourceUrl(s.type,i,i.template),_)}_resolveStylesCompileResult(i,s){i.dependencies.forEach((i,S)=>{const _=s.get(i.moduleUrl),T=this._resolveAndEvalStylesCompileResult(_,s);i.setValue(T)})}_resolveAndEvalStylesCompileResult(i,s){return this._resolveStylesCompileResult(i,s),this._interpretOrJit(sharedStylesheetJitUrl(i.meta,this._sharedStylesheetCount++),i.outputCtx.statements)[i.stylesVar]}_interpretOrJit(i,s){return this._compilerConfig.useJit?this._jitEvaluator.evaluateStatements(i,s,this._reflector,this._compilerConfig.jitDevMode):function interpretStatements(i,s){const S=new _ExecutionContext(null,null,null,new Map);new StatementInterpreter(s).visitAllStatements(i,S);const _={};return S.exports.forEach(i=>{_[i]=S.vars.get(i)}),_}(s,this._reflector)}}class CompiledTemplate{constructor(i,s,S,_,T){this.isHost=i,this.compType=s,this.compMeta=S,this.ngModule=_,this.directives=T,this._viewClass=null,this.isCompiled=!1}compiled(i,s){this._viewClass=i,this.compMeta.componentViewType.setDelegate(i);for(let i in s)this.compMeta.rendererType[i]=s[i];this.isCompiled=!0}}function assertComponent(i){if(!i.isComponent)throw new Error(`Could not compile '${identifierName(i.type)}' because it is not a component.`)}function createOutputContext(){return{statements:[],genFilePath:"",importExpr:i=>importExpr({name:identifierName(i),moduleName:null,runtime:i}),constantPool:new ConstantPool}}class CompileReflector{}function createUrlResolverWithoutPackagePrefix(){return new ln}function createOfflineCompileUrlResolver(){return new ln(".")}const ln=class UrlResolverImpl{constructor(i=null){this._packagePrefix=i}resolve(i,s){let S=s;null!=i&&i.length>0&&(S=function _resolveUrl(i,s){const S=_split(encodeURI(s)),_=_split(i);if(null!=S[un.Scheme])return _joinAndCanonicalizePath(S);S[un.Scheme]=_[un.Scheme];for(let i=un.Scheme;i<=un.Port;i++)null==S[i]&&(S[i]=_[i]);if("/"==S[un.Path][0])return _joinAndCanonicalizePath(S);let T=_[un.Path];null==T&&(T="/");const A=T.lastIndexOf("/");return T=T.substring(0,A+1)+S[un.Path],S[un.Path]=T,_joinAndCanonicalizePath(S)}(i,S));const _=_split(S);let T=this._packagePrefix;if(null!=T&&null!=_&&"package"==_[un.Scheme]){let i=_[un.Path];return T=T.replace(/\/+$/,""),i=i.replace(/^\/+/,""),`${T}/${i}`}return S}};function getUrlScheme(i){const s=_split(i);return s&&s[un.Scheme]||""}const cn=new RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([\\w\\d\\-\\u0100-\\uffff.%]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");var un;function _split(i){return i.match(cn)}function _joinAndCanonicalizePath(i){let s=i[un.Path];return s=null==s?"":function _removeDotSegments(i){if("/"==i)return"/";const s="/"==i[0]?"/":"",S="/"===i[i.length-1]?"/":"",_=i.split("/"),T=[];let A=0;for(let i=0;i<_.length;i++){const s=_[i];switch(s){case"":case".":break;case"..":T.length>0?T.pop():A++;break;default:T.push(s)}}if(""==s){for(;A-- >0;)T.unshift("..");0===T.length&&T.push(".")}return s+T.join("/")+S}(s),i[un.Path]=s,function _buildFromEncodedParts(i,s,S,_,T,A,P){const N=[];return null!=i&&N.push(i+":"),null!=S&&(N.push("//"),null!=s&&N.push(s+"@"),N.push(S),null!=_&&N.push(":"+_)),null!=T&&N.push(T),null!=A&&N.push("?"+A),null!=P&&N.push("#"+P),N.join("")}(i[un.Scheme],i[un.UserInfo],i[un.Domain],i[un.Port],s,i[un.QueryData],i[un.Fragment])}!function(i){i[i.Scheme=1]="Scheme",i[i.UserInfo=2]="UserInfo",i[i.Domain=3]="Domain",i[i.Port=4]="Port",i[i.Path=5]="Path",i[i.QueryData=6]="QueryData",i[i.Fragment=7]="Fragment"}(un||(un={}));class Extractor{constructor(i,s,S,_){this.host=i,this.staticSymbolResolver=s,this.messageBundle=S,this.metadataResolver=_}extract(i){const{files:s,ngModules:S}=analyzeAndValidateNgModules(i,this.host,this.staticSymbolResolver,this.metadataResolver);return Promise.all(S.map(i=>this.metadataResolver.loadNgModuleDirectiveAndPipeMetadata(i.type.reference,!1))).then(()=>{const i=[];if(s.forEach(s=>{const S=[];s.directives.forEach(i=>{const s=this.metadataResolver.getDirectiveMetadata(i);s&&s.isComponent&&S.push(s)}),S.forEach(s=>{const S=s.template.template,_=s.template.templateUrl,T=InterpolationConfig.fromArray(s.template.interpolation);i.push(...this.messageBundle.updateFromTemplate(S,_,T))})}),i.length)throw new Error(i.map(i=>i.toString()).join("\n"));return this.messageBundle})}static create(i,s){const S=new HtmlParser,_=createAotUrlResolver(i),T=new StaticSymbolCache,A=new AotSummaryResolver(i,T),P=new StaticSymbolResolver(i,T,A),N=new StaticReflector(A,P),M=new CompilerConfig({defaultEncapsulation:W.Emulated,useJit:!1}),k=new DirectiveNormalizer({get:s=>i.loadResource(s)},_,S,M),R=new DomElementSchemaRegistry,F=new CompileMetadataResolver(M,S,new NgModuleResolver(N),new DirectiveResolver(N),new PipeResolver(N),A,R,k,console,T,N),D=new MessageBundle(S,[],{},s);return{extractor:new Extractor(i,P,D,F),staticReflector:N}}}class R3TargetBinder{constructor(i){this.directiveMatcher=i}bind(i){if(!i.template)throw new Error("Binding without a template not yet supported");const s=Scope.apply(i.template),{directives:S,bindings:_,references:T}=DirectiveBinder.apply(i.template,this.directiveMatcher),{expressions:A,symbols:P,nestingLevel:N,usedPipes:M}=TemplateBinder.apply(i.template,s);return new R3BoundTarget(i,S,_,T,A,P,N,M)}}class Scope{constructor(i){this.parentScope=i,this.namedEntities=new Map,this.childScopes=new Map}static apply(i){const s=new Scope;return s.ingest(i),s}ingest(i){i instanceof Template?(i.variables.forEach(i=>this.visitVariable(i)),i.children.forEach(i=>i.visit(this))):i.forEach(i=>i.visit(this))}visitElement(i){i.references.forEach(i=>this.visitReference(i)),i.children.forEach(i=>i.visit(this))}visitTemplate(i){i.references.forEach(i=>this.visitReference(i));const s=new Scope(this);s.ingest(i),this.childScopes.set(i,s)}visitVariable(i){this.maybeDeclare(i)}visitReference(i){this.maybeDeclare(i)}visitContent(i){}visitBoundAttribute(i){}visitBoundEvent(i){}visitBoundText(i){}visitText(i){}visitTextAttribute(i){}visitIcu(i){}maybeDeclare(i){this.namedEntities.has(i.name)||this.namedEntities.set(i.name,i)}lookup(i){return this.namedEntities.has(i)?this.namedEntities.get(i):void 0!==this.parentScope?this.parentScope.lookup(i):null}getChildScope(i){const s=this.childScopes.get(i);if(void 0===s)throw new Error(`Assertion error: child scope for ${i} not found`);return s}}class DirectiveBinder{constructor(i,s,S,_){this.matcher=i,this.directives=s,this.bindings=S,this.references=_}static apply(i,s){const S=new Map,_=new Map,T=new Map;return new DirectiveBinder(s,S,_,T).ingest(i),{directives:S,bindings:_,references:T}}ingest(i){i.forEach(i=>i.visit(this))}visitElement(i){this.visitElementOrTemplate(i.name,i)}visitTemplate(i){this.visitElementOrTemplate("ng-template",i)}visitElementOrTemplate(i,s){const S=createCssSelector(i,getAttrsForDirectiveMatching(s)),_=[];this.matcher.match(S,(i,s)=>_.push(s)),_.length>0&&this.directives.set(s,_),s.references.forEach(i=>{let S=null;if(""===i.value.trim())S=_.find(i=>i.isComponent)||null;else if(S=_.find(s=>null!==s.exportAs&&s.exportAs.some(s=>s===i.value))||null,null===S)return;null!==S?this.references.set(i,{directive:S,node:s}):this.references.set(i,s)});const setAttributeBinding=(i,S)=>{const T=_.find(s=>s[S].hasBindingPropertyName(i.name)),A=void 0!==T?T:s;this.bindings.set(i,A)};s.inputs.forEach(i=>setAttributeBinding(i,"inputs")),s.attributes.forEach(i=>setAttributeBinding(i,"inputs")),s instanceof Template&&s.templateAttrs.forEach(i=>setAttributeBinding(i,"inputs")),s.outputs.forEach(i=>setAttributeBinding(i,"outputs")),s.children.forEach(i=>i.visit(this))}visitContent(i){}visitVariable(i){}visitReference(i){}visitTextAttribute(i){}visitBoundAttribute(i){}visitBoundEvent(i){}visitBoundAttributeOrEvent(i){}visitText(i){}visitBoundText(i){}visitIcu(i){}}class TemplateBinder extends RecursiveAstVisitor$1{constructor(i,s,S,_,T,A,P){super(),this.bindings=i,this.symbols=s,this.usedPipes=S,this.nestingLevel=_,this.scope=T,this.template=A,this.level=P,this.pipesUsed=[],this.visitNode=i=>i.visit(this)}visit(i,s){i instanceof AST?i.visit(this,s):i.visit(this)}static apply(i,s){const S=new Map,_=new Map,T=new Map,A=new Set;return new TemplateBinder(S,_,A,T,s,i instanceof Template?i:null,0).ingest(i),{expressions:S,symbols:_,nestingLevel:T,usedPipes:A}}ingest(i){i instanceof Template?(i.variables.forEach(this.visitNode),i.children.forEach(this.visitNode),this.nestingLevel.set(i,this.level)):i.forEach(this.visitNode)}visitElement(i){i.inputs.forEach(this.visitNode),i.outputs.forEach(this.visitNode),i.children.forEach(this.visitNode)}visitTemplate(i){i.inputs.forEach(this.visitNode),i.outputs.forEach(this.visitNode),i.templateAttrs.forEach(this.visitNode),i.references.forEach(this.visitNode);const s=this.scope.getChildScope(i);new TemplateBinder(this.bindings,this.symbols,this.usedPipes,this.nestingLevel,s,i,this.level+1).ingest(i)}visitVariable(i){null!==this.template&&this.symbols.set(i,this.template)}visitReference(i){null!==this.template&&this.symbols.set(i,this.template)}visitText(i){}visitContent(i){}visitTextAttribute(i){}visitIcu(i){Object.keys(i.vars).forEach(s=>i.vars[s].visit(this)),Object.keys(i.placeholders).forEach(s=>i.placeholders[s].visit(this))}visitBoundAttribute(i){i.value.visit(this)}visitBoundEvent(i){i.handler.visit(this)}visitBoundText(i){i.value.visit(this)}visitPipe(i,s){return this.usedPipes.add(i.name),super.visitPipe(i,s)}visitPropertyRead(i,s){return this.maybeMap(s,i,i.name),super.visitPropertyRead(i,s)}visitSafePropertyRead(i,s){return this.maybeMap(s,i,i.name),super.visitSafePropertyRead(i,s)}visitPropertyWrite(i,s){return this.maybeMap(s,i,i.name),super.visitPropertyWrite(i,s)}visitMethodCall(i,s){return this.maybeMap(s,i,i.name),super.visitMethodCall(i,s)}visitSafeMethodCall(i,s){return this.maybeMap(s,i,i.name),super.visitSafeMethodCall(i,s)}maybeMap(i,s,S){if(!(s.receiver instanceof ImplicitReceiver))return;let _=this.scope.lookup(S);null!==_&&this.bindings.set(s,_)}}class R3BoundTarget{constructor(i,s,S,_,T,A,P,N){this.target=i,this.directives=s,this.bindings=S,this.references=_,this.exprTargets=T,this.symbols=A,this.nestingLevel=P,this.usedPipes=N}getDirectivesOfNode(i){return this.directives.get(i)||null}getReferenceTarget(i){return this.references.get(i)||null}getConsumerOfBinding(i){return this.bindings.get(i)||null}getExpressionTarget(i){return this.exprTargets.get(i)||null}getTemplateOfSymbol(i){return this.symbols.get(i)||null}getNestingLevel(i){return this.nestingLevel.get(i)||0}getUsedDirectives(){const i=new Set;return this.directives.forEach(s=>s.forEach(s=>i.add(s))),Array.from(i.values())}getUsedPipes(){return Array.from(this.usedPipes)}}publishFacade(qe)}.call(this,S("yLpj"))},"2Bhr":function(i,s,S){"use strict";var _=S("TqRt"),T=_(S("lwsE")),A=_(S("W8MJ")),P=_(S("RIqP")),N=S("jw7u"),M=S("LvDl");function getPossibleTypes(i){switch(i.type){case"identifier":return[i.value];case"matches":var s=i.selectors.map(getPossibleTypes);return s.every(Boolean)?M.union.apply(M,(0,P.default)(s)):null;case"compound":var S=i.selectors.map(getPossibleTypes).filter((function(i){return i}));return S.length?M.intersection.apply(M,(0,P.default)(S)):null;case"child":case"descendant":case"sibling":case"adjacent":return getPossibleTypes(i.right);default:return null}}function countClassAttributes(i){switch(i.type){case"child":case"descendant":case"sibling":case"adjacent":return countClassAttributes(i.left)+countClassAttributes(i.right);case"compound":case"not":case"matches":return i.selectors.reduce((function(i,s){return i+countClassAttributes(s)}),0);case"attribute":case"field":case"nth-child":case"nth-last-child":return 1;default:return 0}}function countIdentifiers(i){switch(i.type){case"child":case"descendant":case"sibling":case"adjacent":return countIdentifiers(i.left)+countIdentifiers(i.right);case"compound":case"not":case"matches":return i.selectors.reduce((function(i,s){return i+countIdentifiers(s)}),0);case"identifier":return 1;default:return 0}}function compareSpecificity(i,s){return i.attributeCount-s.attributeCount||i.identifierCount-s.identifierCount||(i.rawSelector<=s.rawSelector?-1:1)}var k=M.memoize((function(i){var s=function tryParseSelector(i){try{return N.parse(i.replace(/:exit$/,""))}catch(s){if("number"==typeof s.offset)throw new SyntaxError('Syntax error in selector "'.concat(i,'" at position ').concat(s.offset,": ").concat(s.message));throw s}}(i);return{rawSelector:i,isExit:i.endsWith(":exit"),parsedSelector:s,listenerTypes:getPossibleTypes(s),attributeCount:countClassAttributes(s),identifierCount:countIdentifiers(s)}})),R=function(){function NodeEventGenerator(i){var s=this;(0,T.default)(this,NodeEventGenerator),this.emitter=i,this.currentAncestry=[],this.enterSelectorsByNodeType=new Map,this.exitSelectorsByNodeType=new Map,this.anyTypeEnterSelectors=[],this.anyTypeExitSelectors=[],i.eventNames().forEach((function(i){var S=k(i);if(S.listenerTypes){var _=S.isExit?s.exitSelectorsByNodeType:s.enterSelectorsByNodeType;S.listenerTypes.forEach((function(i){_.has(i)||_.set(i,[]),_.get(i).push(S)}))}else{(S.isExit?s.anyTypeExitSelectors:s.anyTypeEnterSelectors).push(S)}})),this.anyTypeEnterSelectors.sort(compareSpecificity),this.anyTypeExitSelectors.sort(compareSpecificity),this.enterSelectorsByNodeType.forEach((function(i){return i.sort(compareSpecificity)})),this.exitSelectorsByNodeType.forEach((function(i){return i.sort(compareSpecificity)}))}return(0,A.default)(NodeEventGenerator,[{key:"applySelector",value:function applySelector(i,s){N.matches(i,s.parsedSelector,this.currentAncestry)&&this.emitter.emit(s.rawSelector,i)}},{key:"applySelectors",value:function applySelectors(i,s){for(var S=(s?this.exitSelectorsByNodeType:this.enterSelectorsByNodeType).get(i.type)||[],_=s?this.anyTypeExitSelectors:this.anyTypeEnterSelectors,T=0,A=0;T<S.length||A<_.length;)T>=S.length||A<_.length&&compareSpecificity(_[A],S[T])<0?this.applySelector(i,_[A++]):this.applySelector(i,S[T++])}},{key:"enterNode",value:function enterNode(i){i.parent&&this.currentAncestry.unshift(i.parent),this.applySelectors(i,!1)}},{key:"leaveNode",value:function leaveNode(i){this.applySelectors(i,!0),this.currentAncestry.shift()}}]),NodeEventGenerator}();i.exports=R},"5OMM":function(i){i.exports=JSON.parse('{"name":"esrecurse","description":"ECMAScript AST recursive visitor","homepage":"https://github.com/estools/esrecurse","main":"esrecurse.js","version":"4.3.0","engines":{"node":">=4.0"},"maintainers":[{"name":"Yusuke Suzuki","email":"utatane.tea@gmail.com","web":"https://github.com/Constellation"}],"repository":{"type":"git","url":"https://github.com/estools/esrecurse.git"},"dependencies":{"estraverse":"^5.2.0"},"devDependencies":{"babel-cli":"^6.24.1","babel-eslint":"^7.2.3","babel-preset-es2015":"^6.24.1","babel-register":"^6.24.1","chai":"^4.0.2","esprima":"^4.0.0","gulp":"^3.9.0","gulp-bump":"^2.7.0","gulp-eslint":"^4.0.0","gulp-filter":"^5.0.0","gulp-git":"^2.4.1","gulp-mocha":"^4.3.1","gulp-tag-version":"^1.2.1","jsdoc":"^3.3.0-alpha10","minimist":"^1.1.0"},"license":"BSD-2-Clause","scripts":{"test":"gulp travis","unit-test":"gulp test","lint":"gulp lint"},"babel":{"presets":["es2015"]}}')},"8oxB":function(i,s){var S,_,T=i.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(i){if(S===setTimeout)return setTimeout(i,0);if((S===defaultSetTimout||!S)&&setTimeout)return S=setTimeout,setTimeout(i,0);try{return S(i,0)}catch(s){try{return S.call(null,i,0)}catch(s){return S.call(this,i,0)}}}!function(){try{S="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(i){S=defaultSetTimout}try{_="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(i){_=defaultClearTimeout}}();var A,P=[],N=!1,M=-1;function cleanUpNextTick(){N&&A&&(N=!1,A.length?P=A.concat(P):M=-1,P.length&&drainQueue())}function drainQueue(){if(!N){var i=runTimeout(cleanUpNextTick);N=!0;for(var s=P.length;s;){for(A=P,P=[];++M<s;)A&&A[M].run();M=-1,s=P.length}A=null,N=!1,function runClearTimeout(i){if(_===clearTimeout)return clearTimeout(i);if((_===defaultClearTimeout||!_)&&clearTimeout)return _=clearTimeout,clearTimeout(i);try{return _(i)}catch(s){try{return _.call(null,i)}catch(s){return _.call(this,i)}}}(i)}}function Item(i,s){this.fun=i,this.array=s}function noop(){}T.nextTick=function(i){var s=new Array(arguments.length-1);if(arguments.length>1)for(var S=1;S<arguments.length;S++)s[S-1]=arguments[S];P.push(new Item(i,s)),1!==P.length||N||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},T.title="browser",T.browser=!0,T.env={},T.argv=[],T.version="",T.versions={},T.on=noop,T.addListener=noop,T.once=noop,T.off=noop,T.removeListener=noop,T.removeAllListeners=noop,T.emit=noop,T.prependListener=noop,T.prependOnceListener=noop,T.listeners=function(i){return[]},T.binding=function(i){throw new Error("process.binding is not supported")},T.cwd=function(){return"/"},T.chdir=function(i){throw new Error("process.chdir is not supported")},T.umask=function(){return 0}},"9lTW":function(i,s,S){"use strict";(function(s){var _=S("MgzW");function compare(i,s){if(i===s)return 0;for(var S=i.length,_=s.length,T=0,A=Math.min(S,_);T<A;++T)if(i[T]!==s[T]){S=i[T],_=s[T];break}return S<_?-1:_<S?1:0}function isBuffer(i){return s.Buffer&&"function"==typeof s.Buffer.isBuffer?s.Buffer.isBuffer(i):!(null==i||!i._isBuffer)}var T=S("MCLT"),A=Object.prototype.hasOwnProperty,P=Array.prototype.slice,N="foo"===function foo(){}.name;function pToString(i){return Object.prototype.toString.call(i)}function isView(i){return!isBuffer(i)&&("function"==typeof s.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(i):!!i&&(i instanceof DataView||!!(i.buffer&&i.buffer instanceof ArrayBuffer))))}var M=i.exports=ok,k=/\s*function\s+([^\(\s]*)\s*/;function getName(i){if(T.isFunction(i)){if(N)return i.name;var s=i.toString().match(k);return s&&s[1]}}function truncate(i,s){return"string"==typeof i?i.length<s?i:i.slice(0,s):i}function inspect(i){if(N||!T.isFunction(i))return T.inspect(i);var s=getName(i);return"[Function"+(s?": "+s:"")+"]"}function fail(i,s,S,_,T){throw new M.AssertionError({message:S,actual:i,expected:s,operator:_,stackStartFunction:T})}function ok(i,s){i||fail(i,!0,s,"==",M.ok)}function _deepEqual(i,s,S,_){if(i===s)return!0;if(isBuffer(i)&&isBuffer(s))return 0===compare(i,s);if(T.isDate(i)&&T.isDate(s))return i.getTime()===s.getTime();if(T.isRegExp(i)&&T.isRegExp(s))return i.source===s.source&&i.global===s.global&&i.multiline===s.multiline&&i.lastIndex===s.lastIndex&&i.ignoreCase===s.ignoreCase;if(null!==i&&"object"==typeof i||null!==s&&"object"==typeof s){if(isView(i)&&isView(s)&&pToString(i)===pToString(s)&&!(i instanceof Float32Array||i instanceof Float64Array))return 0===compare(new Uint8Array(i.buffer),new Uint8Array(s.buffer));if(isBuffer(i)!==isBuffer(s))return!1;var A=(_=_||{actual:[],expected:[]}).actual.indexOf(i);return-1!==A&&A===_.expected.indexOf(s)||(_.actual.push(i),_.expected.push(s),function objEquiv(i,s,S,_){if(null==i||null==s)return!1;if(T.isPrimitive(i)||T.isPrimitive(s))return i===s;if(S&&Object.getPrototypeOf(i)!==Object.getPrototypeOf(s))return!1;var A=isArguments(i),N=isArguments(s);if(A&&!N||!A&&N)return!1;if(A)return i=P.call(i),s=P.call(s),_deepEqual(i,s,S);var M,k,F=R(i),D=R(s);if(F.length!==D.length)return!1;for(F.sort(),D.sort(),k=F.length-1;k>=0;k--)if(F[k]!==D[k])return!1;for(k=F.length-1;k>=0;k--)if(M=F[k],!_deepEqual(i[M],s[M],S,_))return!1;return!0}(i,s,S,_))}return S?i===s:i==s}function isArguments(i){return"[object Arguments]"==Object.prototype.toString.call(i)}function expectedException(i,s){if(!i||!s)return!1;if("[object RegExp]"==Object.prototype.toString.call(s))return s.test(i);try{if(i instanceof s)return!0}catch(i){}return!Error.isPrototypeOf(s)&&!0===s.call({},i)}function _throws(i,s,S,_){var A;if("function"!=typeof s)throw new TypeError('"block" argument must be a function');"string"==typeof S&&(_=S,S=null),A=function _tryBlock(i){var s;try{i()}catch(i){s=i}return s}(s),_=(S&&S.name?" ("+S.name+").":".")+(_?" "+_:"."),i&&!A&&fail(A,S,"Missing expected exception"+_);var P="string"==typeof _,N=!i&&A&&!S;if((!i&&T.isError(A)&&P&&expectedException(A,S)||N)&&fail(A,S,"Got unwanted exception"+_),i&&A&&S&&!expectedException(A,S)||!i&&A)throw A}M.AssertionError=function AssertionError(i){this.name="AssertionError",this.actual=i.actual,this.expected=i.expected,this.operator=i.operator,i.message?(this.message=i.message,this.generatedMessage=!1):(this.message=function getMessage(i){return truncate(inspect(i.actual),128)+" "+i.operator+" "+truncate(inspect(i.expected),128)}(this),this.generatedMessage=!0);var s=i.stackStartFunction||fail;if(Error.captureStackTrace)Error.captureStackTrace(this,s);else{var S=new Error;if(S.stack){var _=S.stack,T=getName(s),A=_.indexOf("\n"+T);if(A>=0){var P=_.indexOf("\n",A+1);_=_.substring(P+1)}this.stack=_}}},T.inherits(M.AssertionError,Error),M.fail=fail,M.ok=ok,M.equal=function equal(i,s,S){i!=s&&fail(i,s,S,"==",M.equal)},M.notEqual=function notEqual(i,s,S){i==s&&fail(i,s,S,"!=",M.notEqual)},M.deepEqual=function deepEqual(i,s,S){_deepEqual(i,s,!1)||fail(i,s,S,"deepEqual",M.deepEqual)},M.deepStrictEqual=function deepStrictEqual(i,s,S){_deepEqual(i,s,!0)||fail(i,s,S,"deepStrictEqual",M.deepStrictEqual)},M.notDeepEqual=function notDeepEqual(i,s,S){_deepEqual(i,s,!1)&&fail(i,s,S,"notDeepEqual",M.notDeepEqual)},M.notDeepStrictEqual=function notDeepStrictEqual(i,s,S){_deepEqual(i,s,!0)&&fail(i,s,S,"notDeepStrictEqual",notDeepStrictEqual)},M.strictEqual=function strictEqual(i,s,S){i!==s&&fail(i,s,S,"===",M.strictEqual)},M.notStrictEqual=function notStrictEqual(i,s,S){i===s&&fail(i,s,S,"!==",M.notStrictEqual)},M.throws=function(i,s,S){_throws(!0,i,s,S)},M.doesNotThrow=function(i,s,S){_throws(!1,i,s,S)},M.ifError=function(i){if(i)throw i},M.strict=_((function strict(i,s){i||fail(i,!0,s,"==",strict)}),M,{equal:M.strictEqual,deepEqual:M.deepStrictEqual,notEqual:M.notStrictEqual,notDeepEqual:M.notDeepStrictEqual}),M.strict.strict=M.strict;var R=Object.keys||function(i){var s=[];for(var S in i)A.call(i,S)&&s.push(S);return s}}).call(this,S("yLpj"))},DX5S:function(i){i.exports=JSON.parse('{"name":"eslint-scope","description":"ECMAScript scope analyzer for ESLint","homepage":"http://github.com/eslint/eslint-scope","main":"lib/index.js","version":"5.1.1","engines":{"node":">=8.0.0"},"repository":"eslint/eslint-scope","bugs":{"url":"https://github.com/eslint/eslint-scope/issues"},"license":"BSD-2-Clause","scripts":{"test":"node Makefile.js test","lint":"node Makefile.js lint","generate-release":"eslint-generate-release","generate-alpharelease":"eslint-generate-prerelease alpha","generate-betarelease":"eslint-generate-prerelease beta","generate-rcrelease":"eslint-generate-prerelease rc","publish-release":"eslint-publish-release"},"files":["LICENSE","README.md","lib"],"dependencies":{"esrecurse":"^4.3.0","estraverse":"^4.1.1"},"devDependencies":{"@typescript-eslint/parser":"^1.11.0","chai":"^4.2.0","eslint":"^6.0.1","eslint-config-eslint":"^5.0.1","eslint-plugin-node":"^9.1.0","eslint-release":"^1.0.0","eslint-visitor-keys":"^1.2.0","espree":"^7.1.0","istanbul":"^0.4.5","mocha":"^6.1.4","npm-license":"^0.3.3","shelljs":"^0.8.3","typescript":"^3.5.2"}}')},KKCa:function(i,s){"function"==typeof Object.create?i.exports=function inherits(i,s){i.super_=s,i.prototype=Object.create(s.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}})}:i.exports=function inherits(i,s){i.super_=s;var TempCtor=function(){};TempCtor.prototype=s.prototype,i.prototype=new TempCtor,i.prototype.constructor=i}},LvDl:function(i,s,S){(function(i,_){var T;(function(){var A="Expected a function",P="__lodash_placeholder__",N=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],M="[object Arguments]",k="[object Array]",R="[object Boolean]",F="[object Date]",D="[object Error]",L="[object Function]",$="[object GeneratorFunction]",V="[object Map]",U="[object Number]",W="[object Object]",z="[object RegExp]",H="[object Set]",q="[object String]",K="[object Symbol]",G="[object WeakMap]",X="[object ArrayBuffer]",Q="[object DataView]",J="[object Float32Array]",Y="[object Float64Array]",Z="[object Int8Array]",ee="[object Int16Array]",te="[object Int32Array]",re="[object Uint8Array]",ne="[object Uint16Array]",ie="[object Uint32Array]",se=/\b__p \+= '';/g,ae=/\b(__p \+=) '' \+/g,oe=/(__e\(.*?\)|\b__t\)) \+\n'';/g,le=/&(?:amp|lt|gt|quot|#39);/g,ce=/[&<>"']/g,ue=RegExp(le.source),pe=RegExp(ce.source),he=/<%-([\s\S]+?)%>/g,de=/<%([\s\S]+?)%>/g,fe=/<%=([\s\S]+?)%>/g,ye=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Te=/^\w*$/,Ne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Me=/[\\^$.*+?()[\]{}|]/g,Re=RegExp(Me.source),Oe=/^\s+|\s+$/g,Fe=/^\s+/,Le=/\s+$/,$e=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Be=/\{\n\/\* \[wrapped with (.+)\] \*/,Ve=/,? & /,Ue=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,We=/\\(\\)?/g,ze=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,He=/\w*$/,qe=/^[-+]0x[0-9a-f]+$/i,Ke=/^0b[01]+$/i,Ge=/^\[object .+?Constructor\]$/,Xe=/^0o[0-7]+$/i,Qe=/^(?:0|[1-9]\d*)$/,Je=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ye=/($^)/,Ze=/['\n\r\u2028\u2029\\]/g,et="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",tt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rt="[\\ud800-\\udfff]",nt="["+tt+"]",it="["+et+"]",st="\\d+",at="[\\u2700-\\u27bf]",ot="[a-z\\xdf-\\xf6\\xf8-\\xff]",lt="[^\\ud800-\\udfff"+tt+st+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",ct="\\ud83c[\\udffb-\\udfff]",ut="[^\\ud800-\\udfff]",pt="(?:\\ud83c[\\udde6-\\uddff]){2}",ht="[\\ud800-\\udbff][\\udc00-\\udfff]",dt="[A-Z\\xc0-\\xd6\\xd8-\\xde]",mt="(?:"+ot+"|"+lt+")",ft="(?:"+dt+"|"+lt+")",vt="(?:"+it+"|"+ct+")"+"?",gt="[\\ufe0e\\ufe0f]?"+vt+("(?:\\u200d(?:"+[ut,pt,ht].join("|")+")[\\ufe0e\\ufe0f]?"+vt+")*"),yt="(?:"+[at,pt,ht].join("|")+")"+gt,Et="(?:"+[ut+it+"?",it,pt,ht,rt].join("|")+")",St=RegExp("['’]","g"),_t=RegExp(it,"g"),xt=RegExp(ct+"(?="+ct+")|"+Et+gt,"g"),bt=RegExp([dt+"?"+ot+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[nt,dt,"$"].join("|")+")",ft+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[nt,dt+mt,"$"].join("|")+")",dt+"?"+mt+"+(?:['’](?:d|ll|m|re|s|t|ve))?",dt+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",st,yt].join("|"),"g"),Ct=RegExp("[\\u200d\\ud800-\\udfff"+et+"\\ufe0e\\ufe0f]"),wt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,It=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Tt=-1,At={};At[J]=At[Y]=At[Z]=At[ee]=At[te]=At[re]=At["[object Uint8ClampedArray]"]=At[ne]=At[ie]=!0,At[M]=At[k]=At[X]=At[R]=At[Q]=At[F]=At[D]=At[L]=At[V]=At[U]=At[W]=At[z]=At[H]=At[q]=At[G]=!1;var Pt={};Pt[M]=Pt[k]=Pt[X]=Pt[Q]=Pt[R]=Pt[F]=Pt[J]=Pt[Y]=Pt[Z]=Pt[ee]=Pt[te]=Pt[V]=Pt[U]=Pt[W]=Pt[z]=Pt[H]=Pt[q]=Pt[K]=Pt[re]=Pt["[object Uint8ClampedArray]"]=Pt[ne]=Pt[ie]=!0,Pt[D]=Pt[L]=Pt[G]=!1;var Nt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Mt=parseFloat,kt=parseInt,Rt="object"==typeof i&&i&&i.Object===Object&&i,Ot="object"==typeof self&&self&&self.Object===Object&&self,Ft=Rt||Ot||Function("return this")(),Dt=s&&!s.nodeType&&s,Lt=Dt&&"object"==typeof _&&_&&!_.nodeType&&_,$t=Lt&&Lt.exports===Dt,Bt=$t&&Rt.process,Vt=function(){try{var i=Lt&&Lt.require&&Lt.require("util").types;return i||Bt&&Bt.binding&&Bt.binding("util")}catch(i){}}(),jt=Vt&&Vt.isArrayBuffer,Ut=Vt&&Vt.isDate,Wt=Vt&&Vt.isMap,zt=Vt&&Vt.isRegExp,Ht=Vt&&Vt.isSet,qt=Vt&&Vt.isTypedArray;function apply(i,s,S){switch(S.length){case 0:return i.call(s);case 1:return i.call(s,S[0]);case 2:return i.call(s,S[0],S[1]);case 3:return i.call(s,S[0],S[1],S[2])}return i.apply(s,S)}function arrayAggregator(i,s,S,_){for(var T=-1,A=null==i?0:i.length;++T<A;){var P=i[T];s(_,P,S(P),i)}return _}function arrayEach(i,s){for(var S=-1,_=null==i?0:i.length;++S<_&&!1!==s(i[S],S,i););return i}function arrayEachRight(i,s){for(var S=null==i?0:i.length;S--&&!1!==s(i[S],S,i););return i}function arrayEvery(i,s){for(var S=-1,_=null==i?0:i.length;++S<_;)if(!s(i[S],S,i))return!1;return!0}function arrayFilter(i,s){for(var S=-1,_=null==i?0:i.length,T=0,A=[];++S<_;){var P=i[S];s(P,S,i)&&(A[T++]=P)}return A}function arrayIncludes(i,s){return!!(null==i?0:i.length)&&baseIndexOf(i,s,0)>-1}function arrayIncludesWith(i,s,S){for(var _=-1,T=null==i?0:i.length;++_<T;)if(S(s,i[_]))return!0;return!1}function arrayMap(i,s){for(var S=-1,_=null==i?0:i.length,T=Array(_);++S<_;)T[S]=s(i[S],S,i);return T}function arrayPush(i,s){for(var S=-1,_=s.length,T=i.length;++S<_;)i[T+S]=s[S];return i}function arrayReduce(i,s,S,_){var T=-1,A=null==i?0:i.length;for(_&&A&&(S=i[++T]);++T<A;)S=s(S,i[T],T,i);return S}function arrayReduceRight(i,s,S,_){var T=null==i?0:i.length;for(_&&T&&(S=i[--T]);T--;)S=s(S,i[T],T,i);return S}function arraySome(i,s){for(var S=-1,_=null==i?0:i.length;++S<_;)if(s(i[S],S,i))return!0;return!1}var Kt=baseProperty("length");function baseFindKey(i,s,S){var _;return S(i,(function(i,S,T){if(s(i,S,T))return _=S,!1})),_}function baseFindIndex(i,s,S,_){for(var T=i.length,A=S+(_?1:-1);_?A--:++A<T;)if(s(i[A],A,i))return A;return-1}function baseIndexOf(i,s,S){return s==s?function strictIndexOf(i,s,S){var _=S-1,T=i.length;for(;++_<T;)if(i[_]===s)return _;return-1}(i,s,S):baseFindIndex(i,baseIsNaN,S)}function baseIndexOfWith(i,s,S,_){for(var T=S-1,A=i.length;++T<A;)if(_(i[T],s))return T;return-1}function baseIsNaN(i){return i!=i}function baseMean(i,s){var S=null==i?0:i.length;return S?baseSum(i,s)/S:NaN}function baseProperty(i){return function(s){return null==s?void 0:s[i]}}function basePropertyOf(i){return function(s){return null==i?void 0:i[s]}}function baseReduce(i,s,S,_,T){return T(i,(function(i,T,A){S=_?(_=!1,i):s(S,i,T,A)})),S}function baseSum(i,s){for(var S,_=-1,T=i.length;++_<T;){var A=s(i[_]);void 0!==A&&(S=void 0===S?A:S+A)}return S}function baseTimes(i,s){for(var S=-1,_=Array(i);++S<i;)_[S]=s(S);return _}function baseUnary(i){return function(s){return i(s)}}function baseValues(i,s){return arrayMap(s,(function(s){return i[s]}))}function cacheHas(i,s){return i.has(s)}function charsStartIndex(i,s){for(var S=-1,_=i.length;++S<_&&baseIndexOf(s,i[S],0)>-1;);return S}function charsEndIndex(i,s){for(var S=i.length;S--&&baseIndexOf(s,i[S],0)>-1;);return S}function countHolders(i,s){for(var S=i.length,_=0;S--;)i[S]===s&&++_;return _}var Gt=basePropertyOf({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Xt=basePropertyOf({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function escapeStringChar(i){return"\\"+Nt[i]}function hasUnicode(i){return Ct.test(i)}function mapToArray(i){var s=-1,S=Array(i.size);return i.forEach((function(i,_){S[++s]=[_,i]})),S}function overArg(i,s){return function(S){return i(s(S))}}function replaceHolders(i,s){for(var S=-1,_=i.length,T=0,A=[];++S<_;){var N=i[S];N!==s&&N!==P||(i[S]=P,A[T++]=S)}return A}function setToArray(i){var s=-1,S=Array(i.size);return i.forEach((function(i){S[++s]=i})),S}function setToPairs(i){var s=-1,S=Array(i.size);return i.forEach((function(i){S[++s]=[i,i]})),S}function stringSize(i){return hasUnicode(i)?function unicodeSize(i){var s=xt.lastIndex=0;for(;xt.test(i);)++s;return s}(i):Kt(i)}function stringToArray(i){return hasUnicode(i)?function unicodeToArray(i){return i.match(xt)||[]}(i):function asciiToArray(i){return i.split("")}(i)}var Qt=basePropertyOf({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Jt=function runInContext(i){var s,S=(i=null==i?Ft:Jt.defaults(Ft.Object(),i,Jt.pick(Ft,It))).Array,_=i.Date,T=i.Error,et=i.Function,tt=i.Math,rt=i.Object,nt=i.RegExp,it=i.String,st=i.TypeError,at=S.prototype,ot=et.prototype,lt=rt.prototype,ct=i["__core-js_shared__"],ut=ot.toString,pt=lt.hasOwnProperty,ht=0,dt=(s=/[^.]+$/.exec(ct&&ct.keys&&ct.keys.IE_PROTO||""))?"Symbol(src)_1."+s:"",mt=lt.toString,ft=ut.call(rt),vt=Ft._,gt=nt("^"+ut.call(pt).replace(Me,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),yt=$t?i.Buffer:void 0,Et=i.Symbol,xt=i.Uint8Array,Ct=yt?yt.allocUnsafe:void 0,Nt=overArg(rt.getPrototypeOf,rt),Rt=rt.create,Ot=lt.propertyIsEnumerable,Dt=at.splice,Lt=Et?Et.isConcatSpreadable:void 0,Bt=Et?Et.iterator:void 0,Vt=Et?Et.toStringTag:void 0,Kt=function(){try{var i=getNative(rt,"defineProperty");return i({},"",{}),i}catch(i){}}(),Yt=i.clearTimeout!==Ft.clearTimeout&&i.clearTimeout,Zt=_&&_.now!==Ft.Date.now&&_.now,er=i.setTimeout!==Ft.setTimeout&&i.setTimeout,tr=tt.ceil,rr=tt.floor,nr=rt.getOwnPropertySymbols,ir=yt?yt.isBuffer:void 0,sr=i.isFinite,ar=at.join,or=overArg(rt.keys,rt),lr=tt.max,cr=tt.min,ur=_.now,pr=i.parseInt,hr=tt.random,dr=at.reverse,mr=getNative(i,"DataView"),fr=getNative(i,"Map"),vr=getNative(i,"Promise"),gr=getNative(i,"Set"),yr=getNative(i,"WeakMap"),Er=getNative(rt,"create"),Sr=yr&&new yr,_r={},xr=toSource(mr),br=toSource(fr),Cr=toSource(vr),wr=toSource(gr),Ir=toSource(yr),Tr=Et?Et.prototype:void 0,Ar=Tr?Tr.valueOf:void 0,Pr=Tr?Tr.toString:void 0;function lodash(i){if(isObjectLike(i)&&!Fn(i)&&!(i instanceof LazyWrapper)){if(i instanceof LodashWrapper)return i;if(pt.call(i,"__wrapped__"))return wrapperClone(i)}return new LodashWrapper(i)}var Nr=function(){function object(){}return function(i){if(!isObject(i))return{};if(Rt)return Rt(i);object.prototype=i;var s=new object;return object.prototype=void 0,s}}();function baseLodash(){}function LodashWrapper(i,s){this.__wrapped__=i,this.__actions__=[],this.__chain__=!!s,this.__index__=0,this.__values__=void 0}function LazyWrapper(i){this.__wrapped__=i,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Hash(i){var s=-1,S=null==i?0:i.length;for(this.clear();++s<S;){var _=i[s];this.set(_[0],_[1])}}function ListCache(i){var s=-1,S=null==i?0:i.length;for(this.clear();++s<S;){var _=i[s];this.set(_[0],_[1])}}function MapCache(i){var s=-1,S=null==i?0:i.length;for(this.clear();++s<S;){var _=i[s];this.set(_[0],_[1])}}function SetCache(i){var s=-1,S=null==i?0:i.length;for(this.__data__=new MapCache;++s<S;)this.add(i[s])}function Stack(i){var s=this.__data__=new ListCache(i);this.size=s.size}function arrayLikeKeys(i,s){var S=Fn(i),_=!S&&On(i),T=!S&&!_&&Ln(i),A=!S&&!_&&!T&&Un(i),P=S||_||T||A,N=P?baseTimes(i.length,it):[],M=N.length;for(var k in i)!s&&!pt.call(i,k)||P&&("length"==k||T&&("offset"==k||"parent"==k)||A&&("buffer"==k||"byteLength"==k||"byteOffset"==k)||isIndex(k,M))||N.push(k);return N}function arraySample(i){var s=i.length;return s?i[baseRandom(0,s-1)]:void 0}function arraySampleSize(i,s){return shuffleSelf(copyArray(i),baseClamp(s,0,i.length))}function arrayShuffle(i){return shuffleSelf(copyArray(i))}function assignMergeValue(i,s,S){(void 0!==S&&!eq(i[s],S)||void 0===S&&!(s in i))&&baseAssignValue(i,s,S)}function assignValue(i,s,S){var _=i[s];pt.call(i,s)&&eq(_,S)&&(void 0!==S||s in i)||baseAssignValue(i,s,S)}function assocIndexOf(i,s){for(var S=i.length;S--;)if(eq(i[S][0],s))return S;return-1}function baseAggregator(i,s,S,_){return Mr(i,(function(i,T,A){s(_,i,S(i),A)})),_}function baseAssign(i,s){return i&&copyObject(s,keys(s),i)}function baseAssignValue(i,s,S){"__proto__"==s&&Kt?Kt(i,s,{configurable:!0,enumerable:!0,value:S,writable:!0}):i[s]=S}function baseAt(i,s){for(var _=-1,T=s.length,A=S(T),P=null==i;++_<T;)A[_]=P?void 0:get(i,s[_]);return A}function baseClamp(i,s,S){return i==i&&(void 0!==S&&(i=i<=S?i:S),void 0!==s&&(i=i>=s?i:s)),i}function baseClone(i,s,S,_,T,A){var P,N=1&s,k=2&s,D=4&s;if(S&&(P=T?S(i,_,T,A):S(i)),void 0!==P)return P;if(!isObject(i))return i;var G=Fn(i);if(G){if(P=function initCloneArray(i){var s=i.length,S=new i.constructor(s);s&&"string"==typeof i[0]&&pt.call(i,"index")&&(S.index=i.index,S.input=i.input);return S}(i),!N)return copyArray(i,P)}else{var se=Wr(i),ae=se==L||se==$;if(Ln(i))return cloneBuffer(i,N);if(se==W||se==M||ae&&!T){if(P=k||ae?{}:initCloneObject(i),!N)return k?function copySymbolsIn(i,s){return copyObject(i,Ur(i),s)}(i,function baseAssignIn(i,s){return i&&copyObject(s,keysIn(s),i)}(P,i)):function copySymbols(i,s){return copyObject(i,jr(i),s)}(i,baseAssign(P,i))}else{if(!Pt[se])return T?i:{};P=function initCloneByTag(i,s,S){var _=i.constructor;switch(s){case X:return cloneArrayBuffer(i);case R:case F:return new _(+i);case Q:return function cloneDataView(i,s){var S=s?cloneArrayBuffer(i.buffer):i.buffer;return new i.constructor(S,i.byteOffset,i.byteLength)}(i,S);case J:case Y:case Z:case ee:case te:case re:case"[object Uint8ClampedArray]":case ne:case ie:return cloneTypedArray(i,S);case V:return new _;case U:case q:return new _(i);case z:return function cloneRegExp(i){var s=new i.constructor(i.source,He.exec(i));return s.lastIndex=i.lastIndex,s}(i);case H:return new _;case K:return function cloneSymbol(i){return Ar?rt(Ar.call(i)):{}}(i)}}(i,se,N)}}A||(A=new Stack);var oe=A.get(i);if(oe)return oe;A.set(i,P),jn(i)?i.forEach((function(_){P.add(baseClone(_,s,S,_,i,A))})):Bn(i)&&i.forEach((function(_,T){P.set(T,baseClone(_,s,S,T,i,A))}));var le=G?void 0:(D?k?getAllKeysIn:getAllKeys:k?keysIn:keys)(i);return arrayEach(le||i,(function(_,T){le&&(_=i[T=_]),assignValue(P,T,baseClone(_,s,S,T,i,A))})),P}function baseConformsTo(i,s,S){var _=S.length;if(null==i)return!_;for(i=rt(i);_--;){var T=S[_],A=s[T],P=i[T];if(void 0===P&&!(T in i)||!A(P))return!1}return!0}function baseDelay(i,s,S){if("function"!=typeof i)throw new st(A);return qr((function(){i.apply(void 0,S)}),s)}function baseDifference(i,s,S,_){var T=-1,A=arrayIncludes,P=!0,N=i.length,M=[],k=s.length;if(!N)return M;S&&(s=arrayMap(s,baseUnary(S))),_?(A=arrayIncludesWith,P=!1):s.length>=200&&(A=cacheHas,P=!1,s=new SetCache(s));e:for(;++T<N;){var R=i[T],F=null==S?R:S(R);if(R=_||0!==R?R:0,P&&F==F){for(var D=k;D--;)if(s[D]===F)continue e;M.push(R)}else A(s,F,_)||M.push(R)}return M}lodash.templateSettings={escape:he,evaluate:de,interpolate:fe,variable:"",imports:{_:lodash}},lodash.prototype=baseLodash.prototype,lodash.prototype.constructor=lodash,LodashWrapper.prototype=Nr(baseLodash.prototype),LodashWrapper.prototype.constructor=LodashWrapper,LazyWrapper.prototype=Nr(baseLodash.prototype),LazyWrapper.prototype.constructor=LazyWrapper,Hash.prototype.clear=function hashClear(){this.__data__=Er?Er(null):{},this.size=0},Hash.prototype.delete=function hashDelete(i){var s=this.has(i)&&delete this.__data__[i];return this.size-=s?1:0,s},Hash.prototype.get=function hashGet(i){var s=this.__data__;if(Er){var S=s[i];return"__lodash_hash_undefined__"===S?void 0:S}return pt.call(s,i)?s[i]:void 0},Hash.prototype.has=function hashHas(i){var s=this.__data__;return Er?void 0!==s[i]:pt.call(s,i)},Hash.prototype.set=function hashSet(i,s){var S=this.__data__;return this.size+=this.has(i)?0:1,S[i]=Er&&void 0===s?"__lodash_hash_undefined__":s,this},ListCache.prototype.clear=function listCacheClear(){this.__data__=[],this.size=0},ListCache.prototype.delete=function listCacheDelete(i){var s=this.__data__,S=assocIndexOf(s,i);return!(S<0)&&(S==s.length-1?s.pop():Dt.call(s,S,1),--this.size,!0)},ListCache.prototype.get=function listCacheGet(i){var s=this.__data__,S=assocIndexOf(s,i);return S<0?void 0:s[S][1]},ListCache.prototype.has=function listCacheHas(i){return assocIndexOf(this.__data__,i)>-1},ListCache.prototype.set=function listCacheSet(i,s){var S=this.__data__,_=assocIndexOf(S,i);return _<0?(++this.size,S.push([i,s])):S[_][1]=s,this},MapCache.prototype.clear=function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(fr||ListCache),string:new Hash}},MapCache.prototype.delete=function mapCacheDelete(i){var s=getMapData(this,i).delete(i);return this.size-=s?1:0,s},MapCache.prototype.get=function mapCacheGet(i){return getMapData(this,i).get(i)},MapCache.prototype.has=function mapCacheHas(i){return getMapData(this,i).has(i)},MapCache.prototype.set=function mapCacheSet(i,s){var S=getMapData(this,i),_=S.size;return S.set(i,s),this.size+=S.size==_?0:1,this},SetCache.prototype.add=SetCache.prototype.push=function setCacheAdd(i){return this.__data__.set(i,"__lodash_hash_undefined__"),this},SetCache.prototype.has=function setCacheHas(i){return this.__data__.has(i)},Stack.prototype.clear=function stackClear(){this.__data__=new ListCache,this.size=0},Stack.prototype.delete=function stackDelete(i){var s=this.__data__,S=s.delete(i);return this.size=s.size,S},Stack.prototype.get=function stackGet(i){return this.__data__.get(i)},Stack.prototype.has=function stackHas(i){return this.__data__.has(i)},Stack.prototype.set=function stackSet(i,s){var S=this.__data__;if(S instanceof ListCache){var _=S.__data__;if(!fr||_.length<199)return _.push([i,s]),this.size=++S.size,this;S=this.__data__=new MapCache(_)}return S.set(i,s),this.size=S.size,this};var Mr=createBaseEach(baseForOwn),kr=createBaseEach(baseForOwnRight,!0);function baseEvery(i,s){var S=!0;return Mr(i,(function(i,_,T){return S=!!s(i,_,T)})),S}function baseExtremum(i,s,S){for(var _=-1,T=i.length;++_<T;){var A=i[_],P=s(A);if(null!=P&&(void 0===N?P==P&&!isSymbol(P):S(P,N)))var N=P,M=A}return M}function baseFilter(i,s){var S=[];return Mr(i,(function(i,_,T){s(i,_,T)&&S.push(i)})),S}function baseFlatten(i,s,S,_,T){var A=-1,P=i.length;for(S||(S=isFlattenable),T||(T=[]);++A<P;){var N=i[A];s>0&&S(N)?s>1?baseFlatten(N,s-1,S,_,T):arrayPush(T,N):_||(T[T.length]=N)}return T}var Rr=createBaseFor(),Or=createBaseFor(!0);function baseForOwn(i,s){return i&&Rr(i,s,keys)}function baseForOwnRight(i,s){return i&&Or(i,s,keys)}function baseFunctions(i,s){return arrayFilter(s,(function(s){return isFunction(i[s])}))}function baseGet(i,s){for(var S=0,_=(s=castPath(s,i)).length;null!=i&&S<_;)i=i[toKey(s[S++])];return S&&S==_?i:void 0}function baseGetAllKeys(i,s,S){var _=s(i);return Fn(i)?_:arrayPush(_,S(i))}function baseGetTag(i){return null==i?void 0===i?"[object Undefined]":"[object Null]":Vt&&Vt in rt(i)?function getRawTag(i){var s=pt.call(i,Vt),S=i[Vt];try{i[Vt]=void 0;var _=!0}catch(i){}var T=mt.call(i);_&&(s?i[Vt]=S:delete i[Vt]);return T}(i):function objectToString(i){return mt.call(i)}(i)}function baseGt(i,s){return i>s}function baseHas(i,s){return null!=i&&pt.call(i,s)}function baseHasIn(i,s){return null!=i&&s in rt(i)}function baseIntersection(i,s,_){for(var T=_?arrayIncludesWith:arrayIncludes,A=i[0].length,P=i.length,N=P,M=S(P),k=1/0,R=[];N--;){var F=i[N];N&&s&&(F=arrayMap(F,baseUnary(s))),k=cr(F.length,k),M[N]=!_&&(s||A>=120&&F.length>=120)?new SetCache(N&&F):void 0}F=i[0];var D=-1,L=M[0];e:for(;++D<A&&R.length<k;){var $=F[D],V=s?s($):$;if($=_||0!==$?$:0,!(L?cacheHas(L,V):T(R,V,_))){for(N=P;--N;){var U=M[N];if(!(U?cacheHas(U,V):T(i[N],V,_)))continue e}L&&L.push(V),R.push($)}}return R}function baseInvoke(i,s,S){var _=null==(i=parent(i,s=castPath(s,i)))?i:i[toKey(last(s))];return null==_?void 0:apply(_,i,S)}function baseIsArguments(i){return isObjectLike(i)&&baseGetTag(i)==M}function baseIsEqual(i,s,S,_,T){return i===s||(null==i||null==s||!isObjectLike(i)&&!isObjectLike(s)?i!=i&&s!=s:function baseIsEqualDeep(i,s,S,_,T,A){var P=Fn(i),N=Fn(s),L=P?k:Wr(i),$=N?k:Wr(s),G=(L=L==M?W:L)==W,J=($=$==M?W:$)==W,Y=L==$;if(Y&&Ln(i)){if(!Ln(s))return!1;P=!0,G=!1}if(Y&&!G)return A||(A=new Stack),P||Un(i)?equalArrays(i,s,S,_,T,A):function equalByTag(i,s,S,_,T,A,P){switch(S){case Q:if(i.byteLength!=s.byteLength||i.byteOffset!=s.byteOffset)return!1;i=i.buffer,s=s.buffer;case X:return!(i.byteLength!=s.byteLength||!A(new xt(i),new xt(s)));case R:case F:case U:return eq(+i,+s);case D:return i.name==s.name&&i.message==s.message;case z:case q:return i==s+"";case V:var N=mapToArray;case H:var M=1&_;if(N||(N=setToArray),i.size!=s.size&&!M)return!1;var k=P.get(i);if(k)return k==s;_|=2,P.set(i,s);var L=equalArrays(N(i),N(s),_,T,A,P);return P.delete(i),L;case K:if(Ar)return Ar.call(i)==Ar.call(s)}return!1}(i,s,L,S,_,T,A);if(!(1&S)){var Z=G&&pt.call(i,"__wrapped__"),ee=J&&pt.call(s,"__wrapped__");if(Z||ee){var te=Z?i.value():i,re=ee?s.value():s;return A||(A=new Stack),T(te,re,S,_,A)}}if(!Y)return!1;return A||(A=new Stack),function equalObjects(i,s,S,_,T,A){var P=1&S,N=getAllKeys(i),M=N.length,k=getAllKeys(s).length;if(M!=k&&!P)return!1;var R=M;for(;R--;){var F=N[R];if(!(P?F in s:pt.call(s,F)))return!1}var D=A.get(i);if(D&&A.get(s))return D==s;var L=!0;A.set(i,s),A.set(s,i);var $=P;for(;++R<M;){F=N[R];var V=i[F],U=s[F];if(_)var W=P?_(U,V,F,s,i,A):_(V,U,F,i,s,A);if(!(void 0===W?V===U||T(V,U,S,_,A):W)){L=!1;break}$||($="constructor"==F)}if(L&&!$){var z=i.constructor,H=s.constructor;z==H||!("constructor"in i)||!("constructor"in s)||"function"==typeof z&&z instanceof z&&"function"==typeof H&&H instanceof H||(L=!1)}return A.delete(i),A.delete(s),L}(i,s,S,_,T,A)}(i,s,S,_,baseIsEqual,T))}function baseIsMatch(i,s,S,_){var T=S.length,A=T,P=!_;if(null==i)return!A;for(i=rt(i);T--;){var N=S[T];if(P&&N[2]?N[1]!==i[N[0]]:!(N[0]in i))return!1}for(;++T<A;){var M=(N=S[T])[0],k=i[M],R=N[1];if(P&&N[2]){if(void 0===k&&!(M in i))return!1}else{var F=new Stack;if(_)var D=_(k,R,M,i,s,F);if(!(void 0===D?baseIsEqual(R,k,3,_,F):D))return!1}}return!0}function baseIsNative(i){return!(!isObject(i)||function isMasked(i){return!!dt&&dt in i}(i))&&(isFunction(i)?gt:Ge).test(toSource(i))}function baseIteratee(i){return"function"==typeof i?i:null==i?identity:"object"==typeof i?Fn(i)?baseMatchesProperty(i[0],i[1]):baseMatches(i):property(i)}function baseKeys(i){if(!isPrototype(i))return or(i);var s=[];for(var S in rt(i))pt.call(i,S)&&"constructor"!=S&&s.push(S);return s}function baseKeysIn(i){if(!isObject(i))return function nativeKeysIn(i){var s=[];if(null!=i)for(var S in rt(i))s.push(S);return s}(i);var s=isPrototype(i),S=[];for(var _ in i)("constructor"!=_||!s&&pt.call(i,_))&&S.push(_);return S}function baseLt(i,s){return i<s}function baseMap(i,s){var _=-1,T=isArrayLike(i)?S(i.length):[];return Mr(i,(function(i,S,A){T[++_]=s(i,S,A)})),T}function baseMatches(i){var s=getMatchData(i);return 1==s.length&&s[0][2]?matchesStrictComparable(s[0][0],s[0][1]):function(S){return S===i||baseIsMatch(S,i,s)}}function baseMatchesProperty(i,s){return isKey(i)&&isStrictComparable(s)?matchesStrictComparable(toKey(i),s):function(S){var _=get(S,i);return void 0===_&&_===s?hasIn(S,i):baseIsEqual(s,_,3)}}function baseMerge(i,s,S,_,T){i!==s&&Rr(s,(function(A,P){if(T||(T=new Stack),isObject(A))!function baseMergeDeep(i,s,S,_,T,A,P){var N=safeGet(i,S),M=safeGet(s,S),k=P.get(M);if(k)return void assignMergeValue(i,S,k);var R=A?A(N,M,S+"",i,s,P):void 0,F=void 0===R;if(F){var D=Fn(M),L=!D&&Ln(M),$=!D&&!L&&Un(M);R=M,D||L||$?Fn(N)?R=N:isArrayLikeObject(N)?R=copyArray(N):L?(F=!1,R=cloneBuffer(M,!0)):$?(F=!1,R=cloneTypedArray(M,!0)):R=[]:isPlainObject(M)||On(M)?(R=N,On(N)?R=toPlainObject(N):isObject(N)&&!isFunction(N)||(R=initCloneObject(M))):F=!1}F&&(P.set(M,R),T(R,M,_,A,P),P.delete(M));assignMergeValue(i,S,R)}(i,s,P,S,baseMerge,_,T);else{var N=_?_(safeGet(i,P),A,P+"",i,s,T):void 0;void 0===N&&(N=A),assignMergeValue(i,P,N)}}),keysIn)}function baseNth(i,s){var S=i.length;if(S)return isIndex(s+=s<0?S:0,S)?i[s]:void 0}function baseOrderBy(i,s,S){var _=-1;return s=arrayMap(s.length?s:[identity],baseUnary(getIteratee())),function baseSortBy(i,s){var S=i.length;for(i.sort(s);S--;)i[S]=i[S].value;return i}(baseMap(i,(function(i,S,T){return{criteria:arrayMap(s,(function(s){return s(i)})),index:++_,value:i}})),(function(i,s){return function compareMultiple(i,s,S){var _=-1,T=i.criteria,A=s.criteria,P=T.length,N=S.length;for(;++_<P;){var M=compareAscending(T[_],A[_]);if(M){if(_>=N)return M;var k=S[_];return M*("desc"==k?-1:1)}}return i.index-s.index}(i,s,S)}))}function basePickBy(i,s,S){for(var _=-1,T=s.length,A={};++_<T;){var P=s[_],N=baseGet(i,P);S(N,P)&&baseSet(A,castPath(P,i),N)}return A}function basePullAll(i,s,S,_){var T=_?baseIndexOfWith:baseIndexOf,A=-1,P=s.length,N=i;for(i===s&&(s=copyArray(s)),S&&(N=arrayMap(i,baseUnary(S)));++A<P;)for(var M=0,k=s[A],R=S?S(k):k;(M=T(N,R,M,_))>-1;)N!==i&&Dt.call(N,M,1),Dt.call(i,M,1);return i}function basePullAt(i,s){for(var S=i?s.length:0,_=S-1;S--;){var T=s[S];if(S==_||T!==A){var A=T;isIndex(T)?Dt.call(i,T,1):baseUnset(i,T)}}return i}function baseRandom(i,s){return i+rr(hr()*(s-i+1))}function baseRepeat(i,s){var S="";if(!i||s<1||s>9007199254740991)return S;do{s%2&&(S+=i),(s=rr(s/2))&&(i+=i)}while(s);return S}function baseRest(i,s){return Kr(overRest(i,s,identity),i+"")}function baseSample(i){return arraySample(values(i))}function baseSampleSize(i,s){var S=values(i);return shuffleSelf(S,baseClamp(s,0,S.length))}function baseSet(i,s,S,_){if(!isObject(i))return i;for(var T=-1,A=(s=castPath(s,i)).length,P=A-1,N=i;null!=N&&++T<A;){var M=toKey(s[T]),k=S;if(T!=P){var R=N[M];void 0===(k=_?_(R,M,N):void 0)&&(k=isObject(R)?R:isIndex(s[T+1])?[]:{})}assignValue(N,M,k),N=N[M]}return i}var Fr=Sr?function(i,s){return Sr.set(i,s),i}:identity,Dr=Kt?function(i,s){return Kt(i,"toString",{configurable:!0,enumerable:!1,value:constant(s),writable:!0})}:identity;function baseShuffle(i){return shuffleSelf(values(i))}function baseSlice(i,s,_){var T=-1,A=i.length;s<0&&(s=-s>A?0:A+s),(_=_>A?A:_)<0&&(_+=A),A=s>_?0:_-s>>>0,s>>>=0;for(var P=S(A);++T<A;)P[T]=i[T+s];return P}function baseSome(i,s){var S;return Mr(i,(function(i,_,T){return!(S=s(i,_,T))})),!!S}function baseSortedIndex(i,s,S){var _=0,T=null==i?_:i.length;if("number"==typeof s&&s==s&&T<=2147483647){for(;_<T;){var A=_+T>>>1,P=i[A];null!==P&&!isSymbol(P)&&(S?P<=s:P<s)?_=A+1:T=A}return T}return baseSortedIndexBy(i,s,identity,S)}function baseSortedIndexBy(i,s,S,_){s=S(s);for(var T=0,A=null==i?0:i.length,P=s!=s,N=null===s,M=isSymbol(s),k=void 0===s;T<A;){var R=rr((T+A)/2),F=S(i[R]),D=void 0!==F,L=null===F,$=F==F,V=isSymbol(F);if(P)var U=_||$;else U=k?$&&(_||D):N?$&&D&&(_||!L):M?$&&D&&!L&&(_||!V):!L&&!V&&(_?F<=s:F<s);U?T=R+1:A=R}return cr(A,4294967294)}function baseSortedUniq(i,s){for(var S=-1,_=i.length,T=0,A=[];++S<_;){var P=i[S],N=s?s(P):P;if(!S||!eq(N,M)){var M=N;A[T++]=0===P?0:P}}return A}function baseToNumber(i){return"number"==typeof i?i:isSymbol(i)?NaN:+i}function baseToString(i){if("string"==typeof i)return i;if(Fn(i))return arrayMap(i,baseToString)+"";if(isSymbol(i))return Pr?Pr.call(i):"";var s=i+"";return"0"==s&&1/i==-1/0?"-0":s}function baseUniq(i,s,S){var _=-1,T=arrayIncludes,A=i.length,P=!0,N=[],M=N;if(S)P=!1,T=arrayIncludesWith;else if(A>=200){var k=s?null:Br(i);if(k)return setToArray(k);P=!1,T=cacheHas,M=new SetCache}else M=s?[]:N;e:for(;++_<A;){var R=i[_],F=s?s(R):R;if(R=S||0!==R?R:0,P&&F==F){for(var D=M.length;D--;)if(M[D]===F)continue e;s&&M.push(F),N.push(R)}else T(M,F,S)||(M!==N&&M.push(F),N.push(R))}return N}function baseUnset(i,s){return null==(i=parent(i,s=castPath(s,i)))||delete i[toKey(last(s))]}function baseUpdate(i,s,S,_){return baseSet(i,s,S(baseGet(i,s)),_)}function baseWhile(i,s,S,_){for(var T=i.length,A=_?T:-1;(_?A--:++A<T)&&s(i[A],A,i););return S?baseSlice(i,_?0:A,_?A+1:T):baseSlice(i,_?A+1:0,_?T:A)}function baseWrapperValue(i,s){var S=i;return S instanceof LazyWrapper&&(S=S.value()),arrayReduce(s,(function(i,s){return s.func.apply(s.thisArg,arrayPush([i],s.args))}),S)}function baseXor(i,s,_){var T=i.length;if(T<2)return T?baseUniq(i[0]):[];for(var A=-1,P=S(T);++A<T;)for(var N=i[A],M=-1;++M<T;)M!=A&&(P[A]=baseDifference(P[A]||N,i[M],s,_));return baseUniq(baseFlatten(P,1),s,_)}function baseZipObject(i,s,S){for(var _=-1,T=i.length,A=s.length,P={};++_<T;){var N=_<A?s[_]:void 0;S(P,i[_],N)}return P}function castArrayLikeObject(i){return isArrayLikeObject(i)?i:[]}function castFunction(i){return"function"==typeof i?i:identity}function castPath(i,s){return Fn(i)?i:isKey(i,s)?[i]:Gr(toString(i))}var Lr=baseRest;function castSlice(i,s,S){var _=i.length;return S=void 0===S?_:S,!s&&S>=_?i:baseSlice(i,s,S)}var $r=Yt||function(i){return Ft.clearTimeout(i)};function cloneBuffer(i,s){if(s)return i.slice();var S=i.length,_=Ct?Ct(S):new i.constructor(S);return i.copy(_),_}function cloneArrayBuffer(i){var s=new i.constructor(i.byteLength);return new xt(s).set(new xt(i)),s}function cloneTypedArray(i,s){var S=s?cloneArrayBuffer(i.buffer):i.buffer;return new i.constructor(S,i.byteOffset,i.length)}function compareAscending(i,s){if(i!==s){var S=void 0!==i,_=null===i,T=i==i,A=isSymbol(i),P=void 0!==s,N=null===s,M=s==s,k=isSymbol(s);if(!N&&!k&&!A&&i>s||A&&P&&M&&!N&&!k||_&&P&&M||!S&&M||!T)return 1;if(!_&&!A&&!k&&i<s||k&&S&&T&&!_&&!A||N&&S&&T||!P&&T||!M)return-1}return 0}function composeArgs(i,s,_,T){for(var A=-1,P=i.length,N=_.length,M=-1,k=s.length,R=lr(P-N,0),F=S(k+R),D=!T;++M<k;)F[M]=s[M];for(;++A<N;)(D||A<P)&&(F[_[A]]=i[A]);for(;R--;)F[M++]=i[A++];return F}function composeArgsRight(i,s,_,T){for(var A=-1,P=i.length,N=-1,M=_.length,k=-1,R=s.length,F=lr(P-M,0),D=S(F+R),L=!T;++A<F;)D[A]=i[A];for(var $=A;++k<R;)D[$+k]=s[k];for(;++N<M;)(L||A<P)&&(D[$+_[N]]=i[A++]);return D}function copyArray(i,s){var _=-1,T=i.length;for(s||(s=S(T));++_<T;)s[_]=i[_];return s}function copyObject(i,s,S,_){var T=!S;S||(S={});for(var A=-1,P=s.length;++A<P;){var N=s[A],M=_?_(S[N],i[N],N,S,i):void 0;void 0===M&&(M=i[N]),T?baseAssignValue(S,N,M):assignValue(S,N,M)}return S}function createAggregator(i,s){return function(S,_){var T=Fn(S)?arrayAggregator:baseAggregator,A=s?s():{};return T(S,i,getIteratee(_,2),A)}}function createAssigner(i){return baseRest((function(s,S){var _=-1,T=S.length,A=T>1?S[T-1]:void 0,P=T>2?S[2]:void 0;for(A=i.length>3&&"function"==typeof A?(T--,A):void 0,P&&isIterateeCall(S[0],S[1],P)&&(A=T<3?void 0:A,T=1),s=rt(s);++_<T;){var N=S[_];N&&i(s,N,_,A)}return s}))}function createBaseEach(i,s){return function(S,_){if(null==S)return S;if(!isArrayLike(S))return i(S,_);for(var T=S.length,A=s?T:-1,P=rt(S);(s?A--:++A<T)&&!1!==_(P[A],A,P););return S}}function createBaseFor(i){return function(s,S,_){for(var T=-1,A=rt(s),P=_(s),N=P.length;N--;){var M=P[i?N:++T];if(!1===S(A[M],M,A))break}return s}}function createCaseFirst(i){return function(s){var S=hasUnicode(s=toString(s))?stringToArray(s):void 0,_=S?S[0]:s.charAt(0),T=S?castSlice(S,1).join(""):s.slice(1);return _[i]()+T}}function createCompounder(i){return function(s){return arrayReduce(words(deburr(s).replace(St,"")),i,"")}}function createCtor(i){return function(){var s=arguments;switch(s.length){case 0:return new i;case 1:return new i(s[0]);case 2:return new i(s[0],s[1]);case 3:return new i(s[0],s[1],s[2]);case 4:return new i(s[0],s[1],s[2],s[3]);case 5:return new i(s[0],s[1],s[2],s[3],s[4]);case 6:return new i(s[0],s[1],s[2],s[3],s[4],s[5]);case 7:return new i(s[0],s[1],s[2],s[3],s[4],s[5],s[6])}var S=Nr(i.prototype),_=i.apply(S,s);return isObject(_)?_:S}}function createFind(i){return function(s,S,_){var T=rt(s);if(!isArrayLike(s)){var A=getIteratee(S,3);s=keys(s),S=function(i){return A(T[i],i,T)}}var P=i(s,S,_);return P>-1?T[A?s[P]:P]:void 0}}function createFlow(i){return flatRest((function(s){var S=s.length,_=S,T=LodashWrapper.prototype.thru;for(i&&s.reverse();_--;){var P=s[_];if("function"!=typeof P)throw new st(A);if(T&&!N&&"wrapper"==getFuncName(P))var N=new LodashWrapper([],!0)}for(_=N?_:S;++_<S;){var M=getFuncName(P=s[_]),k="wrapper"==M?Vr(P):void 0;N=k&&isLaziable(k[0])&&424==k[1]&&!k[4].length&&1==k[9]?N[getFuncName(k[0])].apply(N,k[3]):1==P.length&&isLaziable(P)?N[M]():N.thru(P)}return function(){var i=arguments,_=i[0];if(N&&1==i.length&&Fn(_))return N.plant(_).value();for(var T=0,A=S?s[T].apply(this,i):_;++T<S;)A=s[T].call(this,A);return A}}))}function createHybrid(i,s,_,T,A,P,N,M,k,R){var F=128&s,D=1&s,L=2&s,$=24&s,V=512&s,U=L?void 0:createCtor(i);return function wrapper(){for(var W=arguments.length,z=S(W),H=W;H--;)z[H]=arguments[H];if($)var q=getHolder(wrapper),K=countHolders(z,q);if(T&&(z=composeArgs(z,T,A,$)),P&&(z=composeArgsRight(z,P,N,$)),W-=K,$&&W<R){var G=replaceHolders(z,q);return createRecurry(i,s,createHybrid,wrapper.placeholder,_,z,G,M,k,R-W)}var X=D?_:this,Q=L?X[i]:i;return W=z.length,M?z=reorder(z,M):V&&W>1&&z.reverse(),F&&k<W&&(z.length=k),this&&this!==Ft&&this instanceof wrapper&&(Q=U||createCtor(Q)),Q.apply(X,z)}}function createInverter(i,s){return function(S,_){return function baseInverter(i,s,S,_){return baseForOwn(i,(function(i,T,A){s(_,S(i),T,A)})),_}(S,i,s(_),{})}}function createMathOperation(i,s){return function(S,_){var T;if(void 0===S&&void 0===_)return s;if(void 0!==S&&(T=S),void 0!==_){if(void 0===T)return _;"string"==typeof S||"string"==typeof _?(S=baseToString(S),_=baseToString(_)):(S=baseToNumber(S),_=baseToNumber(_)),T=i(S,_)}return T}}function createOver(i){return flatRest((function(s){return s=arrayMap(s,baseUnary(getIteratee())),baseRest((function(S){var _=this;return i(s,(function(i){return apply(i,_,S)}))}))}))}function createPadding(i,s){var S=(s=void 0===s?" ":baseToString(s)).length;if(S<2)return S?baseRepeat(s,i):s;var _=baseRepeat(s,tr(i/stringSize(s)));return hasUnicode(s)?castSlice(stringToArray(_),0,i).join(""):_.slice(0,i)}function createRange(i){return function(s,_,T){return T&&"number"!=typeof T&&isIterateeCall(s,_,T)&&(_=T=void 0),s=toFinite(s),void 0===_?(_=s,s=0):_=toFinite(_),function baseRange(i,s,_,T){for(var A=-1,P=lr(tr((s-i)/(_||1)),0),N=S(P);P--;)N[T?P:++A]=i,i+=_;return N}(s,_,T=void 0===T?s<_?1:-1:toFinite(T),i)}}function createRelationalOperation(i){return function(s,S){return"string"==typeof s&&"string"==typeof S||(s=toNumber(s),S=toNumber(S)),i(s,S)}}function createRecurry(i,s,S,_,T,A,P,N,M,k){var R=8&s;s|=R?32:64,4&(s&=~(R?64:32))||(s&=-4);var F=[i,s,T,R?A:void 0,R?P:void 0,R?void 0:A,R?void 0:P,N,M,k],D=S.apply(void 0,F);return isLaziable(i)&&Hr(D,F),D.placeholder=_,setWrapToString(D,i,s)}function createRound(i){var s=tt[i];return function(i,S){if(i=toNumber(i),(S=null==S?0:cr(toInteger(S),292))&&sr(i)){var _=(toString(i)+"e").split("e");return+((_=(toString(s(_[0]+"e"+(+_[1]+S)))+"e").split("e"))[0]+"e"+(+_[1]-S))}return s(i)}}var Br=gr&&1/setToArray(new gr([,-0]))[1]==1/0?function(i){return new gr(i)}:noop;function createToPairs(i){return function(s){var S=Wr(s);return S==V?mapToArray(s):S==H?setToPairs(s):function baseToPairs(i,s){return arrayMap(s,(function(s){return[s,i[s]]}))}(s,i(s))}}function createWrap(i,s,_,T,N,M,k,R){var F=2&s;if(!F&&"function"!=typeof i)throw new st(A);var D=T?T.length:0;if(D||(s&=-97,T=N=void 0),k=void 0===k?k:lr(toInteger(k),0),R=void 0===R?R:toInteger(R),D-=N?N.length:0,64&s){var L=T,$=N;T=N=void 0}var V=F?void 0:Vr(i),U=[i,s,_,T,N,L,$,M,k,R];if(V&&function mergeData(i,s){var S=i[1],_=s[1],T=S|_,A=T<131,N=128==_&&8==S||128==_&&256==S&&i[7].length<=s[8]||384==_&&s[7].length<=s[8]&&8==S;if(!A&&!N)return i;1&_&&(i[2]=s[2],T|=1&S?0:4);var M=s[3];if(M){var k=i[3];i[3]=k?composeArgs(k,M,s[4]):M,i[4]=k?replaceHolders(i[3],P):s[4]}(M=s[5])&&(k=i[5],i[5]=k?composeArgsRight(k,M,s[6]):M,i[6]=k?replaceHolders(i[5],P):s[6]);(M=s[7])&&(i[7]=M);128&_&&(i[8]=null==i[8]?s[8]:cr(i[8],s[8]));null==i[9]&&(i[9]=s[9]);return i[0]=s[0],i[1]=T,i}(U,V),i=U[0],s=U[1],_=U[2],T=U[3],N=U[4],!(R=U[9]=void 0===U[9]?F?0:i.length:lr(U[9]-D,0))&&24&s&&(s&=-25),s&&1!=s)W=8==s||16==s?function createCurry(i,s,_){var T=createCtor(i);return function wrapper(){for(var A=arguments.length,P=S(A),N=A,M=getHolder(wrapper);N--;)P[N]=arguments[N];var k=A<3&&P[0]!==M&&P[A-1]!==M?[]:replaceHolders(P,M);if((A-=k.length)<_)return createRecurry(i,s,createHybrid,wrapper.placeholder,void 0,P,k,void 0,void 0,_-A);var R=this&&this!==Ft&&this instanceof wrapper?T:i;return apply(R,this,P)}}(i,s,R):32!=s&&33!=s||N.length?createHybrid.apply(void 0,U):function createPartial(i,s,_,T){var A=1&s,P=createCtor(i);return function wrapper(){for(var s=-1,N=arguments.length,M=-1,k=T.length,R=S(k+N),F=this&&this!==Ft&&this instanceof wrapper?P:i;++M<k;)R[M]=T[M];for(;N--;)R[M++]=arguments[++s];return apply(F,A?_:this,R)}}(i,s,_,T);else var W=function createBind(i,s,S){var _=1&s,T=createCtor(i);return function wrapper(){var s=this&&this!==Ft&&this instanceof wrapper?T:i;return s.apply(_?S:this,arguments)}}(i,s,_);return setWrapToString((V?Fr:Hr)(W,U),i,s)}function customDefaultsAssignIn(i,s,S,_){return void 0===i||eq(i,lt[S])&&!pt.call(_,S)?s:i}function customDefaultsMerge(i,s,S,_,T,A){return isObject(i)&&isObject(s)&&(A.set(s,i),baseMerge(i,s,void 0,customDefaultsMerge,A),A.delete(s)),i}function customOmitClone(i){return isPlainObject(i)?void 0:i}function equalArrays(i,s,S,_,T,A){var P=1&S,N=i.length,M=s.length;if(N!=M&&!(P&&M>N))return!1;var k=A.get(i);if(k&&A.get(s))return k==s;var R=-1,F=!0,D=2&S?new SetCache:void 0;for(A.set(i,s),A.set(s,i);++R<N;){var L=i[R],$=s[R];if(_)var V=P?_($,L,R,s,i,A):_(L,$,R,i,s,A);if(void 0!==V){if(V)continue;F=!1;break}if(D){if(!arraySome(s,(function(i,s){if(!cacheHas(D,s)&&(L===i||T(L,i,S,_,A)))return D.push(s)}))){F=!1;break}}else if(L!==$&&!T(L,$,S,_,A)){F=!1;break}}return A.delete(i),A.delete(s),F}function flatRest(i){return Kr(overRest(i,void 0,flatten),i+"")}function getAllKeys(i){return baseGetAllKeys(i,keys,jr)}function getAllKeysIn(i){return baseGetAllKeys(i,keysIn,Ur)}var Vr=Sr?function(i){return Sr.get(i)}:noop;function getFuncName(i){for(var s=i.name+"",S=_r[s],_=pt.call(_r,s)?S.length:0;_--;){var T=S[_],A=T.func;if(null==A||A==i)return T.name}return s}function getHolder(i){return(pt.call(lodash,"placeholder")?lodash:i).placeholder}function getIteratee(){var i=lodash.iteratee||iteratee;return i=i===iteratee?baseIteratee:i,arguments.length?i(arguments[0],arguments[1]):i}function getMapData(i,s){var S=i.__data__;return function isKeyable(i){var s=typeof i;return"string"==s||"number"==s||"symbol"==s||"boolean"==s?"__proto__"!==i:null===i}(s)?S["string"==typeof s?"string":"hash"]:S.map}function getMatchData(i){for(var s=keys(i),S=s.length;S--;){var _=s[S],T=i[_];s[S]=[_,T,isStrictComparable(T)]}return s}function getNative(i,s){var S=function getValue(i,s){return null==i?void 0:i[s]}(i,s);return baseIsNative(S)?S:void 0}var jr=nr?function(i){return null==i?[]:(i=rt(i),arrayFilter(nr(i),(function(s){return Ot.call(i,s)})))}:stubArray,Ur=nr?function(i){for(var s=[];i;)arrayPush(s,jr(i)),i=Nt(i);return s}:stubArray,Wr=baseGetTag;function hasPath(i,s,S){for(var _=-1,T=(s=castPath(s,i)).length,A=!1;++_<T;){var P=toKey(s[_]);if(!(A=null!=i&&S(i,P)))break;i=i[P]}return A||++_!=T?A:!!(T=null==i?0:i.length)&&isLength(T)&&isIndex(P,T)&&(Fn(i)||On(i))}function initCloneObject(i){return"function"!=typeof i.constructor||isPrototype(i)?{}:Nr(Nt(i))}function isFlattenable(i){return Fn(i)||On(i)||!!(Lt&&i&&i[Lt])}function isIndex(i,s){var S=typeof i;return!!(s=null==s?9007199254740991:s)&&("number"==S||"symbol"!=S&&Qe.test(i))&&i>-1&&i%1==0&&i<s}function isIterateeCall(i,s,S){if(!isObject(S))return!1;var _=typeof s;return!!("number"==_?isArrayLike(S)&&isIndex(s,S.length):"string"==_&&s in S)&&eq(S[s],i)}function isKey(i,s){if(Fn(i))return!1;var S=typeof i;return!("number"!=S&&"symbol"!=S&&"boolean"!=S&&null!=i&&!isSymbol(i))||(Te.test(i)||!ye.test(i)||null!=s&&i in rt(s))}function isLaziable(i){var s=getFuncName(i),S=lodash[s];if("function"!=typeof S||!(s in LazyWrapper.prototype))return!1;if(i===S)return!0;var _=Vr(S);return!!_&&i===_[0]}(mr&&Wr(new mr(new ArrayBuffer(1)))!=Q||fr&&Wr(new fr)!=V||vr&&"[object Promise]"!=Wr(vr.resolve())||gr&&Wr(new gr)!=H||yr&&Wr(new yr)!=G)&&(Wr=function(i){var s=baseGetTag(i),S=s==W?i.constructor:void 0,_=S?toSource(S):"";if(_)switch(_){case xr:return Q;case br:return V;case Cr:return"[object Promise]";case wr:return H;case Ir:return G}return s});var zr=ct?isFunction:stubFalse;function isPrototype(i){var s=i&&i.constructor;return i===("function"==typeof s&&s.prototype||lt)}function isStrictComparable(i){return i==i&&!isObject(i)}function matchesStrictComparable(i,s){return function(S){return null!=S&&(S[i]===s&&(void 0!==s||i in rt(S)))}}function overRest(i,s,_){return s=lr(void 0===s?i.length-1:s,0),function(){for(var T=arguments,A=-1,P=lr(T.length-s,0),N=S(P);++A<P;)N[A]=T[s+A];A=-1;for(var M=S(s+1);++A<s;)M[A]=T[A];return M[s]=_(N),apply(i,this,M)}}function parent(i,s){return s.length<2?i:baseGet(i,baseSlice(s,0,-1))}function reorder(i,s){for(var S=i.length,_=cr(s.length,S),T=copyArray(i);_--;){var A=s[_];i[_]=isIndex(A,S)?T[A]:void 0}return i}function safeGet(i,s){if(("constructor"!==s||"function"!=typeof i[s])&&"__proto__"!=s)return i[s]}var Hr=shortOut(Fr),qr=er||function(i,s){return Ft.setTimeout(i,s)},Kr=shortOut(Dr);function setWrapToString(i,s,S){var _=s+"";return Kr(i,function insertWrapDetails(i,s){var S=s.length;if(!S)return i;var _=S-1;return s[_]=(S>1?"& ":"")+s[_],s=s.join(S>2?", ":" "),i.replace($e,"{\n/* [wrapped with "+s+"] */\n")}(_,function updateWrapDetails(i,s){return arrayEach(N,(function(S){var _="_."+S[0];s&S[1]&&!arrayIncludes(i,_)&&i.push(_)})),i.sort()}(function getWrapDetails(i){var s=i.match(Be);return s?s[1].split(Ve):[]}(_),S)))}function shortOut(i){var s=0,S=0;return function(){var _=ur(),T=16-(_-S);if(S=_,T>0){if(++s>=800)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}function shuffleSelf(i,s){var S=-1,_=i.length,T=_-1;for(s=void 0===s?_:s;++S<s;){var A=baseRandom(S,T),P=i[A];i[A]=i[S],i[S]=P}return i.length=s,i}var Gr=function memoizeCapped(i){var s=memoize(i,(function(i){return 500===S.size&&S.clear(),i})),S=s.cache;return s}((function(i){var s=[];return 46===i.charCodeAt(0)&&s.push(""),i.replace(Ne,(function(i,S,_,T){s.push(_?T.replace(We,"$1"):S||i)})),s}));function toKey(i){if("string"==typeof i||isSymbol(i))return i;var s=i+"";return"0"==s&&1/i==-1/0?"-0":s}function toSource(i){if(null!=i){try{return ut.call(i)}catch(i){}try{return i+""}catch(i){}}return""}function wrapperClone(i){if(i instanceof LazyWrapper)return i.clone();var s=new LodashWrapper(i.__wrapped__,i.__chain__);return s.__actions__=copyArray(i.__actions__),s.__index__=i.__index__,s.__values__=i.__values__,s}var Xr=baseRest((function(i,s){return isArrayLikeObject(i)?baseDifference(i,baseFlatten(s,1,isArrayLikeObject,!0)):[]})),Qr=baseRest((function(i,s){var S=last(s);return isArrayLikeObject(S)&&(S=void 0),isArrayLikeObject(i)?baseDifference(i,baseFlatten(s,1,isArrayLikeObject,!0),getIteratee(S,2)):[]})),Jr=baseRest((function(i,s){var S=last(s);return isArrayLikeObject(S)&&(S=void 0),isArrayLikeObject(i)?baseDifference(i,baseFlatten(s,1,isArrayLikeObject,!0),void 0,S):[]}));function findIndex(i,s,S){var _=null==i?0:i.length;if(!_)return-1;var T=null==S?0:toInteger(S);return T<0&&(T=lr(_+T,0)),baseFindIndex(i,getIteratee(s,3),T)}function findLastIndex(i,s,S){var _=null==i?0:i.length;if(!_)return-1;var T=_-1;return void 0!==S&&(T=toInteger(S),T=S<0?lr(_+T,0):cr(T,_-1)),baseFindIndex(i,getIteratee(s,3),T,!0)}function flatten(i){return(null==i?0:i.length)?baseFlatten(i,1):[]}function head(i){return i&&i.length?i[0]:void 0}var Yr=baseRest((function(i){var s=arrayMap(i,castArrayLikeObject);return s.length&&s[0]===i[0]?baseIntersection(s):[]})),Zr=baseRest((function(i){var s=last(i),S=arrayMap(i,castArrayLikeObject);return s===last(S)?s=void 0:S.pop(),S.length&&S[0]===i[0]?baseIntersection(S,getIteratee(s,2)):[]})),en=baseRest((function(i){var s=last(i),S=arrayMap(i,castArrayLikeObject);return(s="function"==typeof s?s:void 0)&&S.pop(),S.length&&S[0]===i[0]?baseIntersection(S,void 0,s):[]}));function last(i){var s=null==i?0:i.length;return s?i[s-1]:void 0}var tn=baseRest(pullAll);function pullAll(i,s){return i&&i.length&&s&&s.length?basePullAll(i,s):i}var rn=flatRest((function(i,s){var S=null==i?0:i.length,_=baseAt(i,s);return basePullAt(i,arrayMap(s,(function(i){return isIndex(i,S)?+i:i})).sort(compareAscending)),_}));function reverse(i){return null==i?i:dr.call(i)}var nn=baseRest((function(i){return baseUniq(baseFlatten(i,1,isArrayLikeObject,!0))})),sn=baseRest((function(i){var s=last(i);return isArrayLikeObject(s)&&(s=void 0),baseUniq(baseFlatten(i,1,isArrayLikeObject,!0),getIteratee(s,2))})),an=baseRest((function(i){var s=last(i);return s="function"==typeof s?s:void 0,baseUniq(baseFlatten(i,1,isArrayLikeObject,!0),void 0,s)}));function unzip(i){if(!i||!i.length)return[];var s=0;return i=arrayFilter(i,(function(i){if(isArrayLikeObject(i))return s=lr(i.length,s),!0})),baseTimes(s,(function(s){return arrayMap(i,baseProperty(s))}))}function unzipWith(i,s){if(!i||!i.length)return[];var S=unzip(i);return null==s?S:arrayMap(S,(function(i){return apply(s,void 0,i)}))}var on=baseRest((function(i,s){return isArrayLikeObject(i)?baseDifference(i,s):[]})),ln=baseRest((function(i){return baseXor(arrayFilter(i,isArrayLikeObject))})),cn=baseRest((function(i){var s=last(i);return isArrayLikeObject(s)&&(s=void 0),baseXor(arrayFilter(i,isArrayLikeObject),getIteratee(s,2))})),un=baseRest((function(i){var s=last(i);return s="function"==typeof s?s:void 0,baseXor(arrayFilter(i,isArrayLikeObject),void 0,s)})),pn=baseRest(unzip);var hn=baseRest((function(i){var s=i.length,S=s>1?i[s-1]:void 0;return S="function"==typeof S?(i.pop(),S):void 0,unzipWith(i,S)}));function chain(i){var s=lodash(i);return s.__chain__=!0,s}function thru(i,s){return s(i)}var dn=flatRest((function(i){var s=i.length,S=s?i[0]:0,_=this.__wrapped__,interceptor=function(s){return baseAt(s,i)};return!(s>1||this.__actions__.length)&&_ instanceof LazyWrapper&&isIndex(S)?((_=_.slice(S,+S+(s?1:0))).__actions__.push({func:thru,args:[interceptor],thisArg:void 0}),new LodashWrapper(_,this.__chain__).thru((function(i){return s&&!i.length&&i.push(void 0),i}))):this.thru(interceptor)}));var mn=createAggregator((function(i,s,S){pt.call(i,S)?++i[S]:baseAssignValue(i,S,1)}));var vn=createFind(findIndex),gn=createFind(findLastIndex);function forEach(i,s){return(Fn(i)?arrayEach:Mr)(i,getIteratee(s,3))}function forEachRight(i,s){return(Fn(i)?arrayEachRight:kr)(i,getIteratee(s,3))}var yn=createAggregator((function(i,s,S){pt.call(i,S)?i[S].push(s):baseAssignValue(i,S,[s])}));var En=baseRest((function(i,s,_){var T=-1,A="function"==typeof s,P=isArrayLike(i)?S(i.length):[];return Mr(i,(function(i){P[++T]=A?apply(s,i,_):baseInvoke(i,s,_)})),P})),Sn=createAggregator((function(i,s,S){baseAssignValue(i,S,s)}));function map(i,s){return(Fn(i)?arrayMap:baseMap)(i,getIteratee(s,3))}var _n=createAggregator((function(i,s,S){i[S?0:1].push(s)}),(function(){return[[],[]]}));var xn=baseRest((function(i,s){if(null==i)return[];var S=s.length;return S>1&&isIterateeCall(i,s[0],s[1])?s=[]:S>2&&isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),baseOrderBy(i,baseFlatten(s,1),[])})),bn=Zt||function(){return Ft.Date.now()};function ary(i,s,S){return s=S?void 0:s,createWrap(i,128,void 0,void 0,void 0,void 0,s=i&&null==s?i.length:s)}function before(i,s){var S;if("function"!=typeof s)throw new st(A);return i=toInteger(i),function(){return--i>0&&(S=s.apply(this,arguments)),i<=1&&(s=void 0),S}}var Cn=baseRest((function(i,s,S){var _=1;if(S.length){var T=replaceHolders(S,getHolder(Cn));_|=32}return createWrap(i,_,s,S,T)})),wn=baseRest((function(i,s,S){var _=3;if(S.length){var T=replaceHolders(S,getHolder(wn));_|=32}return createWrap(s,_,i,S,T)}));function debounce(i,s,S){var _,T,P,N,M,k,R=0,F=!1,D=!1,L=!0;if("function"!=typeof i)throw new st(A);function invokeFunc(s){var S=_,A=T;return _=T=void 0,R=s,N=i.apply(A,S)}function leadingEdge(i){return R=i,M=qr(timerExpired,s),F?invokeFunc(i):N}function shouldInvoke(i){var S=i-k;return void 0===k||S>=s||S<0||D&&i-R>=P}function timerExpired(){var i=bn();if(shouldInvoke(i))return trailingEdge(i);M=qr(timerExpired,function remainingWait(i){var S=s-(i-k);return D?cr(S,P-(i-R)):S}(i))}function trailingEdge(i){return M=void 0,L&&_?invokeFunc(i):(_=T=void 0,N)}function debounced(){var i=bn(),S=shouldInvoke(i);if(_=arguments,T=this,k=i,S){if(void 0===M)return leadingEdge(k);if(D)return $r(M),M=qr(timerExpired,s),invokeFunc(k)}return void 0===M&&(M=qr(timerExpired,s)),N}return s=toNumber(s)||0,isObject(S)&&(F=!!S.leading,P=(D="maxWait"in S)?lr(toNumber(S.maxWait)||0,s):P,L="trailing"in S?!!S.trailing:L),debounced.cancel=function cancel(){void 0!==M&&$r(M),R=0,_=k=T=M=void 0},debounced.flush=function flush(){return void 0===M?N:trailingEdge(bn())},debounced}var In=baseRest((function(i,s){return baseDelay(i,1,s)})),Tn=baseRest((function(i,s,S){return baseDelay(i,toNumber(s)||0,S)}));function memoize(i,s){if("function"!=typeof i||null!=s&&"function"!=typeof s)throw new st(A);var memoized=function(){var S=arguments,_=s?s.apply(this,S):S[0],T=memoized.cache;if(T.has(_))return T.get(_);var A=i.apply(this,S);return memoized.cache=T.set(_,A)||T,A};return memoized.cache=new(memoize.Cache||MapCache),memoized}function negate(i){if("function"!=typeof i)throw new st(A);return function(){var s=arguments;switch(s.length){case 0:return!i.call(this);case 1:return!i.call(this,s[0]);case 2:return!i.call(this,s[0],s[1]);case 3:return!i.call(this,s[0],s[1],s[2])}return!i.apply(this,s)}}memoize.Cache=MapCache;var An=Lr((function(i,s){var S=(s=1==s.length&&Fn(s[0])?arrayMap(s[0],baseUnary(getIteratee())):arrayMap(baseFlatten(s,1),baseUnary(getIteratee()))).length;return baseRest((function(_){for(var T=-1,A=cr(_.length,S);++T<A;)_[T]=s[T].call(this,_[T]);return apply(i,this,_)}))})),Pn=baseRest((function(i,s){return createWrap(i,32,void 0,s,replaceHolders(s,getHolder(Pn)))})),Nn=baseRest((function(i,s){return createWrap(i,64,void 0,s,replaceHolders(s,getHolder(Nn)))})),Mn=flatRest((function(i,s){return createWrap(i,256,void 0,void 0,void 0,s)}));function eq(i,s){return i===s||i!=i&&s!=s}var kn=createRelationalOperation(baseGt),Rn=createRelationalOperation((function(i,s){return i>=s})),On=baseIsArguments(function(){return arguments}())?baseIsArguments:function(i){return isObjectLike(i)&&pt.call(i,"callee")&&!Ot.call(i,"callee")},Fn=S.isArray,Dn=jt?baseUnary(jt):function baseIsArrayBuffer(i){return isObjectLike(i)&&baseGetTag(i)==X};function isArrayLike(i){return null!=i&&isLength(i.length)&&!isFunction(i)}function isArrayLikeObject(i){return isObjectLike(i)&&isArrayLike(i)}var Ln=ir||stubFalse,$n=Ut?baseUnary(Ut):function baseIsDate(i){return isObjectLike(i)&&baseGetTag(i)==F};function isError(i){if(!isObjectLike(i))return!1;var s=baseGetTag(i);return s==D||"[object DOMException]"==s||"string"==typeof i.message&&"string"==typeof i.name&&!isPlainObject(i)}function isFunction(i){if(!isObject(i))return!1;var s=baseGetTag(i);return s==L||s==$||"[object AsyncFunction]"==s||"[object Proxy]"==s}function isInteger(i){return"number"==typeof i&&i==toInteger(i)}function isLength(i){return"number"==typeof i&&i>-1&&i%1==0&&i<=9007199254740991}function isObject(i){var s=typeof i;return null!=i&&("object"==s||"function"==s)}function isObjectLike(i){return null!=i&&"object"==typeof i}var Bn=Wt?baseUnary(Wt):function baseIsMap(i){return isObjectLike(i)&&Wr(i)==V};function isNumber(i){return"number"==typeof i||isObjectLike(i)&&baseGetTag(i)==U}function isPlainObject(i){if(!isObjectLike(i)||baseGetTag(i)!=W)return!1;var s=Nt(i);if(null===s)return!0;var S=pt.call(s,"constructor")&&s.constructor;return"function"==typeof S&&S instanceof S&&ut.call(S)==ft}var Vn=zt?baseUnary(zt):function baseIsRegExp(i){return isObjectLike(i)&&baseGetTag(i)==z};var jn=Ht?baseUnary(Ht):function baseIsSet(i){return isObjectLike(i)&&Wr(i)==H};function isString(i){return"string"==typeof i||!Fn(i)&&isObjectLike(i)&&baseGetTag(i)==q}function isSymbol(i){return"symbol"==typeof i||isObjectLike(i)&&baseGetTag(i)==K}var Un=qt?baseUnary(qt):function baseIsTypedArray(i){return isObjectLike(i)&&isLength(i.length)&&!!At[baseGetTag(i)]};var Wn=createRelationalOperation(baseLt),zn=createRelationalOperation((function(i,s){return i<=s}));function toArray(i){if(!i)return[];if(isArrayLike(i))return isString(i)?stringToArray(i):copyArray(i);if(Bt&&i[Bt])return function iteratorToArray(i){for(var s,S=[];!(s=i.next()).done;)S.push(s.value);return S}(i[Bt]());var s=Wr(i);return(s==V?mapToArray:s==H?setToArray:values)(i)}function toFinite(i){return i?(i=toNumber(i))===1/0||i===-1/0?17976931348623157e292*(i<0?-1:1):i==i?i:0:0===i?i:0}function toInteger(i){var s=toFinite(i),S=s%1;return s==s?S?s-S:s:0}function toLength(i){return i?baseClamp(toInteger(i),0,4294967295):0}function toNumber(i){if("number"==typeof i)return i;if(isSymbol(i))return NaN;if(isObject(i)){var s="function"==typeof i.valueOf?i.valueOf():i;i=isObject(s)?s+"":s}if("string"!=typeof i)return 0===i?i:+i;i=i.replace(Oe,"");var S=Ke.test(i);return S||Xe.test(i)?kt(i.slice(2),S?2:8):qe.test(i)?NaN:+i}function toPlainObject(i){return copyObject(i,keysIn(i))}function toString(i){return null==i?"":baseToString(i)}var Hn=createAssigner((function(i,s){if(isPrototype(s)||isArrayLike(s))copyObject(s,keys(s),i);else for(var S in s)pt.call(s,S)&&assignValue(i,S,s[S])})),qn=createAssigner((function(i,s){copyObject(s,keysIn(s),i)})),Kn=createAssigner((function(i,s,S,_){copyObject(s,keysIn(s),i,_)})),Gn=createAssigner((function(i,s,S,_){copyObject(s,keys(s),i,_)})),Xn=flatRest(baseAt);var Qn=baseRest((function(i,s){i=rt(i);var S=-1,_=s.length,T=_>2?s[2]:void 0;for(T&&isIterateeCall(s[0],s[1],T)&&(_=1);++S<_;)for(var A=s[S],P=keysIn(A),N=-1,M=P.length;++N<M;){var k=P[N],R=i[k];(void 0===R||eq(R,lt[k])&&!pt.call(i,k))&&(i[k]=A[k])}return i})),Jn=baseRest((function(i){return i.push(void 0,customDefaultsMerge),apply(ri,void 0,i)}));function get(i,s,S){var _=null==i?void 0:baseGet(i,s);return void 0===_?S:_}function hasIn(i,s){return null!=i&&hasPath(i,s,baseHasIn)}var Yn=createInverter((function(i,s,S){null!=s&&"function"!=typeof s.toString&&(s=mt.call(s)),i[s]=S}),constant(identity)),Zn=createInverter((function(i,s,S){null!=s&&"function"!=typeof s.toString&&(s=mt.call(s)),pt.call(i,s)?i[s].push(S):i[s]=[S]}),getIteratee),ei=baseRest(baseInvoke);function keys(i){return isArrayLike(i)?arrayLikeKeys(i):baseKeys(i)}function keysIn(i){return isArrayLike(i)?arrayLikeKeys(i,!0):baseKeysIn(i)}var ti=createAssigner((function(i,s,S){baseMerge(i,s,S)})),ri=createAssigner((function(i,s,S,_){baseMerge(i,s,S,_)})),ni=flatRest((function(i,s){var S={};if(null==i)return S;var _=!1;s=arrayMap(s,(function(s){return s=castPath(s,i),_||(_=s.length>1),s})),copyObject(i,getAllKeysIn(i),S),_&&(S=baseClone(S,7,customOmitClone));for(var T=s.length;T--;)baseUnset(S,s[T]);return S}));var ii=flatRest((function(i,s){return null==i?{}:function basePick(i,s){return basePickBy(i,s,(function(s,S){return hasIn(i,S)}))}(i,s)}));function pickBy(i,s){if(null==i)return{};var S=arrayMap(getAllKeysIn(i),(function(i){return[i]}));return s=getIteratee(s),basePickBy(i,S,(function(i,S){return s(i,S[0])}))}var si=createToPairs(keys),ai=createToPairs(keysIn);function values(i){return null==i?[]:baseValues(i,keys(i))}var oi=createCompounder((function(i,s,S){return s=s.toLowerCase(),i+(S?capitalize(s):s)}));function capitalize(i){return mi(toString(i).toLowerCase())}function deburr(i){return(i=toString(i))&&i.replace(Je,Gt).replace(_t,"")}var li=createCompounder((function(i,s,S){return i+(S?"-":"")+s.toLowerCase()})),ci=createCompounder((function(i,s,S){return i+(S?" ":"")+s.toLowerCase()})),ui=createCaseFirst("toLowerCase");var pi=createCompounder((function(i,s,S){return i+(S?"_":"")+s.toLowerCase()}));var hi=createCompounder((function(i,s,S){return i+(S?" ":"")+mi(s)}));var di=createCompounder((function(i,s,S){return i+(S?" ":"")+s.toUpperCase()})),mi=createCaseFirst("toUpperCase");function words(i,s,S){return i=toString(i),void 0===(s=S?void 0:s)?function hasUnicodeWord(i){return wt.test(i)}(i)?function unicodeWords(i){return i.match(bt)||[]}(i):function asciiWords(i){return i.match(Ue)||[]}(i):i.match(s)||[]}var fi=baseRest((function(i,s){try{return apply(i,void 0,s)}catch(i){return isError(i)?i:new T(i)}})),vi=flatRest((function(i,s){return arrayEach(s,(function(s){s=toKey(s),baseAssignValue(i,s,Cn(i[s],i))})),i}));function constant(i){return function(){return i}}var gi=createFlow(),yi=createFlow(!0);function identity(i){return i}function iteratee(i){return baseIteratee("function"==typeof i?i:baseClone(i,1))}var Ei=baseRest((function(i,s){return function(S){return baseInvoke(S,i,s)}})),Si=baseRest((function(i,s){return function(S){return baseInvoke(i,S,s)}}));function mixin(i,s,S){var _=keys(s),T=baseFunctions(s,_);null!=S||isObject(s)&&(T.length||!_.length)||(S=s,s=i,i=this,T=baseFunctions(s,keys(s)));var A=!(isObject(S)&&"chain"in S&&!S.chain),P=isFunction(i);return arrayEach(T,(function(S){var _=s[S];i[S]=_,P&&(i.prototype[S]=function(){var s=this.__chain__;if(A||s){var S=i(this.__wrapped__),T=S.__actions__=copyArray(this.__actions__);return T.push({func:_,args:arguments,thisArg:i}),S.__chain__=s,S}return _.apply(i,arrayPush([this.value()],arguments))})})),i}function noop(){}var _i=createOver(arrayMap),xi=createOver(arrayEvery),bi=createOver(arraySome);function property(i){return isKey(i)?baseProperty(toKey(i)):function basePropertyDeep(i){return function(s){return baseGet(s,i)}}(i)}var Ci=createRange(),wi=createRange(!0);function stubArray(){return[]}function stubFalse(){return!1}var Ii=createMathOperation((function(i,s){return i+s}),0),Ti=createRound("ceil"),Ai=createMathOperation((function(i,s){return i/s}),1),Pi=createRound("floor");var Ni,Mi=createMathOperation((function(i,s){return i*s}),1),ki=createRound("round"),Ri=createMathOperation((function(i,s){return i-s}),0);return lodash.after=function after(i,s){if("function"!=typeof s)throw new st(A);return i=toInteger(i),function(){if(--i<1)return s.apply(this,arguments)}},lodash.ary=ary,lodash.assign=Hn,lodash.assignIn=qn,lodash.assignInWith=Kn,lodash.assignWith=Gn,lodash.at=Xn,lodash.before=before,lodash.bind=Cn,lodash.bindAll=vi,lodash.bindKey=wn,lodash.castArray=function castArray(){if(!arguments.length)return[];var i=arguments[0];return Fn(i)?i:[i]},lodash.chain=chain,lodash.chunk=function chunk(i,s,_){s=(_?isIterateeCall(i,s,_):void 0===s)?1:lr(toInteger(s),0);var T=null==i?0:i.length;if(!T||s<1)return[];for(var A=0,P=0,N=S(tr(T/s));A<T;)N[P++]=baseSlice(i,A,A+=s);return N},lodash.compact=function compact(i){for(var s=-1,S=null==i?0:i.length,_=0,T=[];++s<S;){var A=i[s];A&&(T[_++]=A)}return T},lodash.concat=function concat(){var i=arguments.length;if(!i)return[];for(var s=S(i-1),_=arguments[0],T=i;T--;)s[T-1]=arguments[T];return arrayPush(Fn(_)?copyArray(_):[_],baseFlatten(s,1))},lodash.cond=function cond(i){var s=null==i?0:i.length,S=getIteratee();return i=s?arrayMap(i,(function(i){if("function"!=typeof i[1])throw new st(A);return[S(i[0]),i[1]]})):[],baseRest((function(S){for(var _=-1;++_<s;){var T=i[_];if(apply(T[0],this,S))return apply(T[1],this,S)}}))},lodash.conforms=function conforms(i){return function baseConforms(i){var s=keys(i);return function(S){return baseConformsTo(S,i,s)}}(baseClone(i,1))},lodash.constant=constant,lodash.countBy=mn,lodash.create=function create(i,s){var S=Nr(i);return null==s?S:baseAssign(S,s)},lodash.curry=function curry(i,s,S){var _=createWrap(i,8,void 0,void 0,void 0,void 0,void 0,s=S?void 0:s);return _.placeholder=curry.placeholder,_},lodash.curryRight=function curryRight(i,s,S){var _=createWrap(i,16,void 0,void 0,void 0,void 0,void 0,s=S?void 0:s);return _.placeholder=curryRight.placeholder,_},lodash.debounce=debounce,lodash.defaults=Qn,lodash.defaultsDeep=Jn,lodash.defer=In,lodash.delay=Tn,lodash.difference=Xr,lodash.differenceBy=Qr,lodash.differenceWith=Jr,lodash.drop=function drop(i,s,S){var _=null==i?0:i.length;return _?baseSlice(i,(s=S||void 0===s?1:toInteger(s))<0?0:s,_):[]},lodash.dropRight=function dropRight(i,s,S){var _=null==i?0:i.length;return _?baseSlice(i,0,(s=_-(s=S||void 0===s?1:toInteger(s)))<0?0:s):[]},lodash.dropRightWhile=function dropRightWhile(i,s){return i&&i.length?baseWhile(i,getIteratee(s,3),!0,!0):[]},lodash.dropWhile=function dropWhile(i,s){return i&&i.length?baseWhile(i,getIteratee(s,3),!0):[]},lodash.fill=function fill(i,s,S,_){var T=null==i?0:i.length;return T?(S&&"number"!=typeof S&&isIterateeCall(i,s,S)&&(S=0,_=T),function baseFill(i,s,S,_){var T=i.length;for((S=toInteger(S))<0&&(S=-S>T?0:T+S),(_=void 0===_||_>T?T:toInteger(_))<0&&(_+=T),_=S>_?0:toLength(_);S<_;)i[S++]=s;return i}(i,s,S,_)):[]},lodash.filter=function filter(i,s){return(Fn(i)?arrayFilter:baseFilter)(i,getIteratee(s,3))},lodash.flatMap=function flatMap(i,s){return baseFlatten(map(i,s),1)},lodash.flatMapDeep=function flatMapDeep(i,s){return baseFlatten(map(i,s),1/0)},lodash.flatMapDepth=function flatMapDepth(i,s,S){return S=void 0===S?1:toInteger(S),baseFlatten(map(i,s),S)},lodash.flatten=flatten,lodash.flattenDeep=function flattenDeep(i){return(null==i?0:i.length)?baseFlatten(i,1/0):[]},lodash.flattenDepth=function flattenDepth(i,s){return(null==i?0:i.length)?baseFlatten(i,s=void 0===s?1:toInteger(s)):[]},lodash.flip=function flip(i){return createWrap(i,512)},lodash.flow=gi,lodash.flowRight=yi,lodash.fromPairs=function fromPairs(i){for(var s=-1,S=null==i?0:i.length,_={};++s<S;){var T=i[s];_[T[0]]=T[1]}return _},lodash.functions=function functions(i){return null==i?[]:baseFunctions(i,keys(i))},lodash.functionsIn=function functionsIn(i){return null==i?[]:baseFunctions(i,keysIn(i))},lodash.groupBy=yn,lodash.initial=function initial(i){return(null==i?0:i.length)?baseSlice(i,0,-1):[]},lodash.intersection=Yr,lodash.intersectionBy=Zr,lodash.intersectionWith=en,lodash.invert=Yn,lodash.invertBy=Zn,lodash.invokeMap=En,lodash.iteratee=iteratee,lodash.keyBy=Sn,lodash.keys=keys,lodash.keysIn=keysIn,lodash.map=map,lodash.mapKeys=function mapKeys(i,s){var S={};return s=getIteratee(s,3),baseForOwn(i,(function(i,_,T){baseAssignValue(S,s(i,_,T),i)})),S},lodash.mapValues=function mapValues(i,s){var S={};return s=getIteratee(s,3),baseForOwn(i,(function(i,_,T){baseAssignValue(S,_,s(i,_,T))})),S},lodash.matches=function matches(i){return baseMatches(baseClone(i,1))},lodash.matchesProperty=function matchesProperty(i,s){return baseMatchesProperty(i,baseClone(s,1))},lodash.memoize=memoize,lodash.merge=ti,lodash.mergeWith=ri,lodash.method=Ei,lodash.methodOf=Si,lodash.mixin=mixin,lodash.negate=negate,lodash.nthArg=function nthArg(i){return i=toInteger(i),baseRest((function(s){return baseNth(s,i)}))},lodash.omit=ni,lodash.omitBy=function omitBy(i,s){return pickBy(i,negate(getIteratee(s)))},lodash.once=function once(i){return before(2,i)},lodash.orderBy=function orderBy(i,s,S,_){return null==i?[]:(Fn(s)||(s=null==s?[]:[s]),Fn(S=_?void 0:S)||(S=null==S?[]:[S]),baseOrderBy(i,s,S))},lodash.over=_i,lodash.overArgs=An,lodash.overEvery=xi,lodash.overSome=bi,lodash.partial=Pn,lodash.partialRight=Nn,lodash.partition=_n,lodash.pick=ii,lodash.pickBy=pickBy,lodash.property=property,lodash.propertyOf=function propertyOf(i){return function(s){return null==i?void 0:baseGet(i,s)}},lodash.pull=tn,lodash.pullAll=pullAll,lodash.pullAllBy=function pullAllBy(i,s,S){return i&&i.length&&s&&s.length?basePullAll(i,s,getIteratee(S,2)):i},lodash.pullAllWith=function pullAllWith(i,s,S){return i&&i.length&&s&&s.length?basePullAll(i,s,void 0,S):i},lodash.pullAt=rn,lodash.range=Ci,lodash.rangeRight=wi,lodash.rearg=Mn,lodash.reject=function reject(i,s){return(Fn(i)?arrayFilter:baseFilter)(i,negate(getIteratee(s,3)))},lodash.remove=function remove(i,s){var S=[];if(!i||!i.length)return S;var _=-1,T=[],A=i.length;for(s=getIteratee(s,3);++_<A;){var P=i[_];s(P,_,i)&&(S.push(P),T.push(_))}return basePullAt(i,T),S},lodash.rest=function rest(i,s){if("function"!=typeof i)throw new st(A);return baseRest(i,s=void 0===s?s:toInteger(s))},lodash.reverse=reverse,lodash.sampleSize=function sampleSize(i,s,S){return s=(S?isIterateeCall(i,s,S):void 0===s)?1:toInteger(s),(Fn(i)?arraySampleSize:baseSampleSize)(i,s)},lodash.set=function set(i,s,S){return null==i?i:baseSet(i,s,S)},lodash.setWith=function setWith(i,s,S,_){return _="function"==typeof _?_:void 0,null==i?i:baseSet(i,s,S,_)},lodash.shuffle=function shuffle(i){return(Fn(i)?arrayShuffle:baseShuffle)(i)},lodash.slice=function slice(i,s,S){var _=null==i?0:i.length;return _?(S&&"number"!=typeof S&&isIterateeCall(i,s,S)?(s=0,S=_):(s=null==s?0:toInteger(s),S=void 0===S?_:toInteger(S)),baseSlice(i,s,S)):[]},lodash.sortBy=xn,lodash.sortedUniq=function sortedUniq(i){return i&&i.length?baseSortedUniq(i):[]},lodash.sortedUniqBy=function sortedUniqBy(i,s){return i&&i.length?baseSortedUniq(i,getIteratee(s,2)):[]},lodash.split=function split(i,s,S){return S&&"number"!=typeof S&&isIterateeCall(i,s,S)&&(s=S=void 0),(S=void 0===S?4294967295:S>>>0)?(i=toString(i))&&("string"==typeof s||null!=s&&!Vn(s))&&!(s=baseToString(s))&&hasUnicode(i)?castSlice(stringToArray(i),0,S):i.split(s,S):[]},lodash.spread=function spread(i,s){if("function"!=typeof i)throw new st(A);return s=null==s?0:lr(toInteger(s),0),baseRest((function(S){var _=S[s],T=castSlice(S,0,s);return _&&arrayPush(T,_),apply(i,this,T)}))},lodash.tail=function tail(i){var s=null==i?0:i.length;return s?baseSlice(i,1,s):[]},lodash.take=function take(i,s,S){return i&&i.length?baseSlice(i,0,(s=S||void 0===s?1:toInteger(s))<0?0:s):[]},lodash.takeRight=function takeRight(i,s,S){var _=null==i?0:i.length;return _?baseSlice(i,(s=_-(s=S||void 0===s?1:toInteger(s)))<0?0:s,_):[]},lodash.takeRightWhile=function takeRightWhile(i,s){return i&&i.length?baseWhile(i,getIteratee(s,3),!1,!0):[]},lodash.takeWhile=function takeWhile(i,s){return i&&i.length?baseWhile(i,getIteratee(s,3)):[]},lodash.tap=function tap(i,s){return s(i),i},lodash.throttle=function throttle(i,s,S){var _=!0,T=!0;if("function"!=typeof i)throw new st(A);return isObject(S)&&(_="leading"in S?!!S.leading:_,T="trailing"in S?!!S.trailing:T),debounce(i,s,{leading:_,maxWait:s,trailing:T})},lodash.thru=thru,lodash.toArray=toArray,lodash.toPairs=si,lodash.toPairsIn=ai,lodash.toPath=function toPath(i){return Fn(i)?arrayMap(i,toKey):isSymbol(i)?[i]:copyArray(Gr(toString(i)))},lodash.toPlainObject=toPlainObject,lodash.transform=function transform(i,s,S){var _=Fn(i),T=_||Ln(i)||Un(i);if(s=getIteratee(s,4),null==S){var A=i&&i.constructor;S=T?_?new A:[]:isObject(i)&&isFunction(A)?Nr(Nt(i)):{}}return(T?arrayEach:baseForOwn)(i,(function(i,_,T){return s(S,i,_,T)})),S},lodash.unary=function unary(i){return ary(i,1)},lodash.union=nn,lodash.unionBy=sn,lodash.unionWith=an,lodash.uniq=function uniq(i){return i&&i.length?baseUniq(i):[]},lodash.uniqBy=function uniqBy(i,s){return i&&i.length?baseUniq(i,getIteratee(s,2)):[]},lodash.uniqWith=function uniqWith(i,s){return s="function"==typeof s?s:void 0,i&&i.length?baseUniq(i,void 0,s):[]},lodash.unset=function unset(i,s){return null==i||baseUnset(i,s)},lodash.unzip=unzip,lodash.unzipWith=unzipWith,lodash.update=function update(i,s,S){return null==i?i:baseUpdate(i,s,castFunction(S))},lodash.updateWith=function updateWith(i,s,S,_){return _="function"==typeof _?_:void 0,null==i?i:baseUpdate(i,s,castFunction(S),_)},lodash.values=values,lodash.valuesIn=function valuesIn(i){return null==i?[]:baseValues(i,keysIn(i))},lodash.without=on,lodash.words=words,lodash.wrap=function wrap(i,s){return Pn(castFunction(s),i)},lodash.xor=ln,lodash.xorBy=cn,lodash.xorWith=un,lodash.zip=pn,lodash.zipObject=function zipObject(i,s){return baseZipObject(i||[],s||[],assignValue)},lodash.zipObjectDeep=function zipObjectDeep(i,s){return baseZipObject(i||[],s||[],baseSet)},lodash.zipWith=hn,lodash.entries=si,lodash.entriesIn=ai,lodash.extend=qn,lodash.extendWith=Kn,mixin(lodash,lodash),lodash.add=Ii,lodash.attempt=fi,lodash.camelCase=oi,lodash.capitalize=capitalize,lodash.ceil=Ti,lodash.clamp=function clamp(i,s,S){return void 0===S&&(S=s,s=void 0),void 0!==S&&(S=(S=toNumber(S))==S?S:0),void 0!==s&&(s=(s=toNumber(s))==s?s:0),baseClamp(toNumber(i),s,S)},lodash.clone=function clone(i){return baseClone(i,4)},lodash.cloneDeep=function cloneDeep(i){return baseClone(i,5)},lodash.cloneDeepWith=function cloneDeepWith(i,s){return baseClone(i,5,s="function"==typeof s?s:void 0)},lodash.cloneWith=function cloneWith(i,s){return baseClone(i,4,s="function"==typeof s?s:void 0)},lodash.conformsTo=function conformsTo(i,s){return null==s||baseConformsTo(i,s,keys(s))},lodash.deburr=deburr,lodash.defaultTo=function defaultTo(i,s){return null==i||i!=i?s:i},lodash.divide=Ai,lodash.endsWith=function endsWith(i,s,S){i=toString(i),s=baseToString(s);var _=i.length,T=S=void 0===S?_:baseClamp(toInteger(S),0,_);return(S-=s.length)>=0&&i.slice(S,T)==s},lodash.eq=eq,lodash.escape=function escape(i){return(i=toString(i))&&pe.test(i)?i.replace(ce,Xt):i},lodash.escapeRegExp=function escapeRegExp(i){return(i=toString(i))&&Re.test(i)?i.replace(Me,"\\$&"):i},lodash.every=function every(i,s,S){var _=Fn(i)?arrayEvery:baseEvery;return S&&isIterateeCall(i,s,S)&&(s=void 0),_(i,getIteratee(s,3))},lodash.find=vn,lodash.findIndex=findIndex,lodash.findKey=function findKey(i,s){return baseFindKey(i,getIteratee(s,3),baseForOwn)},lodash.findLast=gn,lodash.findLastIndex=findLastIndex,lodash.findLastKey=function findLastKey(i,s){return baseFindKey(i,getIteratee(s,3),baseForOwnRight)},lodash.floor=Pi,lodash.forEach=forEach,lodash.forEachRight=forEachRight,lodash.forIn=function forIn(i,s){return null==i?i:Rr(i,getIteratee(s,3),keysIn)},lodash.forInRight=function forInRight(i,s){return null==i?i:Or(i,getIteratee(s,3),keysIn)},lodash.forOwn=function forOwn(i,s){return i&&baseForOwn(i,getIteratee(s,3))},lodash.forOwnRight=function forOwnRight(i,s){return i&&baseForOwnRight(i,getIteratee(s,3))},lodash.get=get,lodash.gt=kn,lodash.gte=Rn,lodash.has=function has(i,s){return null!=i&&hasPath(i,s,baseHas)},lodash.hasIn=hasIn,lodash.head=head,lodash.identity=identity,lodash.includes=function includes(i,s,S,_){i=isArrayLike(i)?i:values(i),S=S&&!_?toInteger(S):0;var T=i.length;return S<0&&(S=lr(T+S,0)),isString(i)?S<=T&&i.indexOf(s,S)>-1:!!T&&baseIndexOf(i,s,S)>-1},lodash.indexOf=function indexOf(i,s,S){var _=null==i?0:i.length;if(!_)return-1;var T=null==S?0:toInteger(S);return T<0&&(T=lr(_+T,0)),baseIndexOf(i,s,T)},lodash.inRange=function inRange(i,s,S){return s=toFinite(s),void 0===S?(S=s,s=0):S=toFinite(S),function baseInRange(i,s,S){return i>=cr(s,S)&&i<lr(s,S)}(i=toNumber(i),s,S)},lodash.invoke=ei,lodash.isArguments=On,lodash.isArray=Fn,lodash.isArrayBuffer=Dn,lodash.isArrayLike=isArrayLike,lodash.isArrayLikeObject=isArrayLikeObject,lodash.isBoolean=function isBoolean(i){return!0===i||!1===i||isObjectLike(i)&&baseGetTag(i)==R},lodash.isBuffer=Ln,lodash.isDate=$n,lodash.isElement=function isElement(i){return isObjectLike(i)&&1===i.nodeType&&!isPlainObject(i)},lodash.isEmpty=function isEmpty(i){if(null==i)return!0;if(isArrayLike(i)&&(Fn(i)||"string"==typeof i||"function"==typeof i.splice||Ln(i)||Un(i)||On(i)))return!i.length;var s=Wr(i);if(s==V||s==H)return!i.size;if(isPrototype(i))return!baseKeys(i).length;for(var S in i)if(pt.call(i,S))return!1;return!0},lodash.isEqual=function isEqual(i,s){return baseIsEqual(i,s)},lodash.isEqualWith=function isEqualWith(i,s,S){var _=(S="function"==typeof S?S:void 0)?S(i,s):void 0;return void 0===_?baseIsEqual(i,s,void 0,S):!!_},lodash.isError=isError,lodash.isFinite=function isFinite(i){return"number"==typeof i&&sr(i)},lodash.isFunction=isFunction,lodash.isInteger=isInteger,lodash.isLength=isLength,lodash.isMap=Bn,lodash.isMatch=function isMatch(i,s){return i===s||baseIsMatch(i,s,getMatchData(s))},lodash.isMatchWith=function isMatchWith(i,s,S){return S="function"==typeof S?S:void 0,baseIsMatch(i,s,getMatchData(s),S)},lodash.isNaN=function isNaN(i){return isNumber(i)&&i!=+i},lodash.isNative=function isNative(i){if(zr(i))throw new T("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return baseIsNative(i)},lodash.isNil=function isNil(i){return null==i},lodash.isNull=function isNull(i){return null===i},lodash.isNumber=isNumber,lodash.isObject=isObject,lodash.isObjectLike=isObjectLike,lodash.isPlainObject=isPlainObject,lodash.isRegExp=Vn,lodash.isSafeInteger=function isSafeInteger(i){return isInteger(i)&&i>=-9007199254740991&&i<=9007199254740991},lodash.isSet=jn,lodash.isString=isString,lodash.isSymbol=isSymbol,lodash.isTypedArray=Un,lodash.isUndefined=function isUndefined(i){return void 0===i},lodash.isWeakMap=function isWeakMap(i){return isObjectLike(i)&&Wr(i)==G},lodash.isWeakSet=function isWeakSet(i){return isObjectLike(i)&&"[object WeakSet]"==baseGetTag(i)},lodash.join=function join(i,s){return null==i?"":ar.call(i,s)},lodash.kebabCase=li,lodash.last=last,lodash.lastIndexOf=function lastIndexOf(i,s,S){var _=null==i?0:i.length;if(!_)return-1;var T=_;return void 0!==S&&(T=(T=toInteger(S))<0?lr(_+T,0):cr(T,_-1)),s==s?function strictLastIndexOf(i,s,S){for(var _=S+1;_--;)if(i[_]===s)return _;return _}(i,s,T):baseFindIndex(i,baseIsNaN,T,!0)},lodash.lowerCase=ci,lodash.lowerFirst=ui,lodash.lt=Wn,lodash.lte=zn,lodash.max=function max(i){return i&&i.length?baseExtremum(i,identity,baseGt):void 0},lodash.maxBy=function maxBy(i,s){return i&&i.length?baseExtremum(i,getIteratee(s,2),baseGt):void 0},lodash.mean=function mean(i){return baseMean(i,identity)},lodash.meanBy=function meanBy(i,s){return baseMean(i,getIteratee(s,2))},lodash.min=function min(i){return i&&i.length?baseExtremum(i,identity,baseLt):void 0},lodash.minBy=function minBy(i,s){return i&&i.length?baseExtremum(i,getIteratee(s,2),baseLt):void 0},lodash.stubArray=stubArray,lodash.stubFalse=stubFalse,lodash.stubObject=function stubObject(){return{}},lodash.stubString=function stubString(){return""},lodash.stubTrue=function stubTrue(){return!0},lodash.multiply=Mi,lodash.nth=function nth(i,s){return i&&i.length?baseNth(i,toInteger(s)):void 0},lodash.noConflict=function noConflict(){return Ft._===this&&(Ft._=vt),this},lodash.noop=noop,lodash.now=bn,lodash.pad=function pad(i,s,S){i=toString(i);var _=(s=toInteger(s))?stringSize(i):0;if(!s||_>=s)return i;var T=(s-_)/2;return createPadding(rr(T),S)+i+createPadding(tr(T),S)},lodash.padEnd=function padEnd(i,s,S){i=toString(i);var _=(s=toInteger(s))?stringSize(i):0;return s&&_<s?i+createPadding(s-_,S):i},lodash.padStart=function padStart(i,s,S){i=toString(i);var _=(s=toInteger(s))?stringSize(i):0;return s&&_<s?createPadding(s-_,S)+i:i},lodash.parseInt=function parseInt(i,s,S){return S||null==s?s=0:s&&(s=+s),pr(toString(i).replace(Fe,""),s||0)},lodash.random=function random(i,s,S){if(S&&"boolean"!=typeof S&&isIterateeCall(i,s,S)&&(s=S=void 0),void 0===S&&("boolean"==typeof s?(S=s,s=void 0):"boolean"==typeof i&&(S=i,i=void 0)),void 0===i&&void 0===s?(i=0,s=1):(i=toFinite(i),void 0===s?(s=i,i=0):s=toFinite(s)),i>s){var _=i;i=s,s=_}if(S||i%1||s%1){var T=hr();return cr(i+T*(s-i+Mt("1e-"+((T+"").length-1))),s)}return baseRandom(i,s)},lodash.reduce=function reduce(i,s,S){var _=Fn(i)?arrayReduce:baseReduce,T=arguments.length<3;return _(i,getIteratee(s,4),S,T,Mr)},lodash.reduceRight=function reduceRight(i,s,S){var _=Fn(i)?arrayReduceRight:baseReduce,T=arguments.length<3;return _(i,getIteratee(s,4),S,T,kr)},lodash.repeat=function repeat(i,s,S){return s=(S?isIterateeCall(i,s,S):void 0===s)?1:toInteger(s),baseRepeat(toString(i),s)},lodash.replace=function replace(){var i=arguments,s=toString(i[0]);return i.length<3?s:s.replace(i[1],i[2])},lodash.result=function result(i,s,S){var _=-1,T=(s=castPath(s,i)).length;for(T||(T=1,i=void 0);++_<T;){var A=null==i?void 0:i[toKey(s[_])];void 0===A&&(_=T,A=S),i=isFunction(A)?A.call(i):A}return i},lodash.round=ki,lodash.runInContext=runInContext,lodash.sample=function sample(i){return(Fn(i)?arraySample:baseSample)(i)},lodash.size=function size(i){if(null==i)return 0;if(isArrayLike(i))return isString(i)?stringSize(i):i.length;var s=Wr(i);return s==V||s==H?i.size:baseKeys(i).length},lodash.snakeCase=pi,lodash.some=function some(i,s,S){var _=Fn(i)?arraySome:baseSome;return S&&isIterateeCall(i,s,S)&&(s=void 0),_(i,getIteratee(s,3))},lodash.sortedIndex=function sortedIndex(i,s){return baseSortedIndex(i,s)},lodash.sortedIndexBy=function sortedIndexBy(i,s,S){return baseSortedIndexBy(i,s,getIteratee(S,2))},lodash.sortedIndexOf=function sortedIndexOf(i,s){var S=null==i?0:i.length;if(S){var _=baseSortedIndex(i,s);if(_<S&&eq(i[_],s))return _}return-1},lodash.sortedLastIndex=function sortedLastIndex(i,s){return baseSortedIndex(i,s,!0)},lodash.sortedLastIndexBy=function sortedLastIndexBy(i,s,S){return baseSortedIndexBy(i,s,getIteratee(S,2),!0)},lodash.sortedLastIndexOf=function sortedLastIndexOf(i,s){if(null==i?0:i.length){var S=baseSortedIndex(i,s,!0)-1;if(eq(i[S],s))return S}return-1},lodash.startCase=hi,lodash.startsWith=function startsWith(i,s,S){return i=toString(i),S=null==S?0:baseClamp(toInteger(S),0,i.length),s=baseToString(s),i.slice(S,S+s.length)==s},lodash.subtract=Ri,lodash.sum=function sum(i){return i&&i.length?baseSum(i,identity):0},lodash.sumBy=function sumBy(i,s){return i&&i.length?baseSum(i,getIteratee(s,2)):0},lodash.template=function template(i,s,S){var _=lodash.templateSettings;S&&isIterateeCall(i,s,S)&&(s=void 0),i=toString(i),s=Kn({},s,_,customDefaultsAssignIn);var T,A,P=Kn({},s.imports,_.imports,customDefaultsAssignIn),N=keys(P),M=baseValues(P,N),k=0,R=s.interpolate||Ye,F="__p += '",D=nt((s.escape||Ye).source+"|"+R.source+"|"+(R===fe?ze:Ye).source+"|"+(s.evaluate||Ye).source+"|$","g"),L="//# sourceURL="+(pt.call(s,"sourceURL")?(s.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++Tt+"]")+"\n";i.replace(D,(function(s,S,_,P,N,M){return _||(_=P),F+=i.slice(k,M).replace(Ze,escapeStringChar),S&&(T=!0,F+="' +\n__e("+S+") +\n'"),N&&(A=!0,F+="';\n"+N+";\n__p += '"),_&&(F+="' +\n((__t = ("+_+")) == null ? '' : __t) +\n'"),k=M+s.length,s})),F+="';\n";var $=pt.call(s,"variable")&&s.variable;$||(F="with (obj) {\n"+F+"\n}\n"),F=(A?F.replace(se,""):F).replace(ae,"$1").replace(oe,"$1;"),F="function("+($||"obj")+") {\n"+($?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(T?", __e = _.escape":"")+(A?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+F+"return __p\n}";var V=fi((function(){return et(N,L+"return "+F).apply(void 0,M)}));if(V.source=F,isError(V))throw V;return V},lodash.times=function times(i,s){if((i=toInteger(i))<1||i>9007199254740991)return[];var S=4294967295,_=cr(i,4294967295);i-=4294967295;for(var T=baseTimes(_,s=getIteratee(s));++S<i;)s(S);return T},lodash.toFinite=toFinite,lodash.toInteger=toInteger,lodash.toLength=toLength,lodash.toLower=function toLower(i){return toString(i).toLowerCase()},lodash.toNumber=toNumber,lodash.toSafeInteger=function toSafeInteger(i){return i?baseClamp(toInteger(i),-9007199254740991,9007199254740991):0===i?i:0},lodash.toString=toString,lodash.toUpper=function toUpper(i){return toString(i).toUpperCase()},lodash.trim=function trim(i,s,S){if((i=toString(i))&&(S||void 0===s))return i.replace(Oe,"");if(!i||!(s=baseToString(s)))return i;var _=stringToArray(i),T=stringToArray(s);return castSlice(_,charsStartIndex(_,T),charsEndIndex(_,T)+1).join("")},lodash.trimEnd=function trimEnd(i,s,S){if((i=toString(i))&&(S||void 0===s))return i.replace(Le,"");if(!i||!(s=baseToString(s)))return i;var _=stringToArray(i);return castSlice(_,0,charsEndIndex(_,stringToArray(s))+1).join("")},lodash.trimStart=function trimStart(i,s,S){if((i=toString(i))&&(S||void 0===s))return i.replace(Fe,"");if(!i||!(s=baseToString(s)))return i;var _=stringToArray(i);return castSlice(_,charsStartIndex(_,stringToArray(s))).join("")},lodash.truncate=function truncate(i,s){var S=30,_="...";if(isObject(s)){var T="separator"in s?s.separator:T;S="length"in s?toInteger(s.length):S,_="omission"in s?baseToString(s.omission):_}var A=(i=toString(i)).length;if(hasUnicode(i)){var P=stringToArray(i);A=P.length}if(S>=A)return i;var N=S-stringSize(_);if(N<1)return _;var M=P?castSlice(P,0,N).join(""):i.slice(0,N);if(void 0===T)return M+_;if(P&&(N+=M.length-N),Vn(T)){if(i.slice(N).search(T)){var k,R=M;for(T.global||(T=nt(T.source,toString(He.exec(T))+"g")),T.lastIndex=0;k=T.exec(R);)var F=k.index;M=M.slice(0,void 0===F?N:F)}}else if(i.indexOf(baseToString(T),N)!=N){var D=M.lastIndexOf(T);D>-1&&(M=M.slice(0,D))}return M+_},lodash.unescape=function unescape(i){return(i=toString(i))&&ue.test(i)?i.replace(le,Qt):i},lodash.uniqueId=function uniqueId(i){var s=++ht;return toString(i)+s},lodash.upperCase=di,lodash.upperFirst=mi,lodash.each=forEach,lodash.eachRight=forEachRight,lodash.first=head,mixin(lodash,(Ni={},baseForOwn(lodash,(function(i,s){pt.call(lodash.prototype,s)||(Ni[s]=i)})),Ni),{chain:!1}),lodash.VERSION="4.17.15",arrayEach(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(i){lodash[i].placeholder=lodash})),arrayEach(["drop","take"],(function(i,s){LazyWrapper.prototype[i]=function(S){S=void 0===S?1:lr(toInteger(S),0);var _=this.__filtered__&&!s?new LazyWrapper(this):this.clone();return _.__filtered__?_.__takeCount__=cr(S,_.__takeCount__):_.__views__.push({size:cr(S,4294967295),type:i+(_.__dir__<0?"Right":"")}),_},LazyWrapper.prototype[i+"Right"]=function(s){return this.reverse()[i](s).reverse()}})),arrayEach(["filter","map","takeWhile"],(function(i,s){var S=s+1,_=1==S||3==S;LazyWrapper.prototype[i]=function(i){var s=this.clone();return s.__iteratees__.push({iteratee:getIteratee(i,3),type:S}),s.__filtered__=s.__filtered__||_,s}})),arrayEach(["head","last"],(function(i,s){var S="take"+(s?"Right":"");LazyWrapper.prototype[i]=function(){return this[S](1).value()[0]}})),arrayEach(["initial","tail"],(function(i,s){var S="drop"+(s?"":"Right");LazyWrapper.prototype[i]=function(){return this.__filtered__?new LazyWrapper(this):this[S](1)}})),LazyWrapper.prototype.compact=function(){return this.filter(identity)},LazyWrapper.prototype.find=function(i){return this.filter(i).head()},LazyWrapper.prototype.findLast=function(i){return this.reverse().find(i)},LazyWrapper.prototype.invokeMap=baseRest((function(i,s){return"function"==typeof i?new LazyWrapper(this):this.map((function(S){return baseInvoke(S,i,s)}))})),LazyWrapper.prototype.reject=function(i){return this.filter(negate(getIteratee(i)))},LazyWrapper.prototype.slice=function(i,s){i=toInteger(i);var S=this;return S.__filtered__&&(i>0||s<0)?new LazyWrapper(S):(i<0?S=S.takeRight(-i):i&&(S=S.drop(i)),void 0!==s&&(S=(s=toInteger(s))<0?S.dropRight(-s):S.take(s-i)),S)},LazyWrapper.prototype.takeRightWhile=function(i){return this.reverse().takeWhile(i).reverse()},LazyWrapper.prototype.toArray=function(){return this.take(4294967295)},baseForOwn(LazyWrapper.prototype,(function(i,s){var S=/^(?:filter|find|map|reject)|While$/.test(s),_=/^(?:head|last)$/.test(s),T=lodash[_?"take"+("last"==s?"Right":""):s],A=_||/^find/.test(s);T&&(lodash.prototype[s]=function(){var s=this.__wrapped__,P=_?[1]:arguments,N=s instanceof LazyWrapper,M=P[0],k=N||Fn(s),interceptor=function(i){var s=T.apply(lodash,arrayPush([i],P));return _&&R?s[0]:s};k&&S&&"function"==typeof M&&1!=M.length&&(N=k=!1);var R=this.__chain__,F=!!this.__actions__.length,D=A&&!R,L=N&&!F;if(!A&&k){s=L?s:new LazyWrapper(this);var $=i.apply(s,P);return $.__actions__.push({func:thru,args:[interceptor],thisArg:void 0}),new LodashWrapper($,R)}return D&&L?i.apply(this,P):($=this.thru(interceptor),D?_?$.value()[0]:$.value():$)})})),arrayEach(["pop","push","shift","sort","splice","unshift"],(function(i){var s=at[i],S=/^(?:push|sort|unshift)$/.test(i)?"tap":"thru",_=/^(?:pop|shift)$/.test(i);lodash.prototype[i]=function(){var i=arguments;if(_&&!this.__chain__){var T=this.value();return s.apply(Fn(T)?T:[],i)}return this[S]((function(S){return s.apply(Fn(S)?S:[],i)}))}})),baseForOwn(LazyWrapper.prototype,(function(i,s){var S=lodash[s];if(S){var _=S.name+"";pt.call(_r,_)||(_r[_]=[]),_r[_].push({name:s,func:S})}})),_r[createHybrid(void 0,2).name]=[{name:"wrapper",func:void 0}],LazyWrapper.prototype.clone=function lazyClone(){var i=new LazyWrapper(this.__wrapped__);return i.__actions__=copyArray(this.__actions__),i.__dir__=this.__dir__,i.__filtered__=this.__filtered__,i.__iteratees__=copyArray(this.__iteratees__),i.__takeCount__=this.__takeCount__,i.__views__=copyArray(this.__views__),i},LazyWrapper.prototype.reverse=function lazyReverse(){if(this.__filtered__){var i=new LazyWrapper(this);i.__dir__=-1,i.__filtered__=!0}else(i=this.clone()).__dir__*=-1;return i},LazyWrapper.prototype.value=function lazyValue(){var i=this.__wrapped__.value(),s=this.__dir__,S=Fn(i),_=s<0,T=S?i.length:0,A=function getView(i,s,S){var _=-1,T=S.length;for(;++_<T;){var A=S[_],P=A.size;switch(A.type){case"drop":i+=P;break;case"dropRight":s-=P;break;case"take":s=cr(s,i+P);break;case"takeRight":i=lr(i,s-P)}}return{start:i,end:s}}(0,T,this.__views__),P=A.start,N=A.end,M=N-P,k=_?N:P-1,R=this.__iteratees__,F=R.length,D=0,L=cr(M,this.__takeCount__);if(!S||!_&&T==M&&L==M)return baseWrapperValue(i,this.__actions__);var $=[];e:for(;M--&&D<L;){for(var V=-1,U=i[k+=s];++V<F;){var W=R[V],z=W.iteratee,H=W.type,q=z(U);if(2==H)U=q;else if(!q){if(1==H)continue e;break e}}$[D++]=U}return $},lodash.prototype.at=dn,lodash.prototype.chain=function wrapperChain(){return chain(this)},lodash.prototype.commit=function wrapperCommit(){return new LodashWrapper(this.value(),this.__chain__)},lodash.prototype.next=function wrapperNext(){void 0===this.__values__&&(this.__values__=toArray(this.value()));var i=this.__index__>=this.__values__.length;return{done:i,value:i?void 0:this.__values__[this.__index__++]}},lodash.prototype.plant=function wrapperPlant(i){for(var s,S=this;S instanceof baseLodash;){var _=wrapperClone(S);_.__index__=0,_.__values__=void 0,s?T.__wrapped__=_:s=_;var T=_;S=S.__wrapped__}return T.__wrapped__=i,s},lodash.prototype.reverse=function wrapperReverse(){var i=this.__wrapped__;if(i instanceof LazyWrapper){var s=i;return this.__actions__.length&&(s=new LazyWrapper(this)),(s=s.reverse()).__actions__.push({func:thru,args:[reverse],thisArg:void 0}),new LodashWrapper(s,this.__chain__)}return this.thru(reverse)},lodash.prototype.toJSON=lodash.prototype.valueOf=lodash.prototype.value=function wrapperValue(){return baseWrapperValue(this.__wrapped__,this.__actions__)},lodash.prototype.first=lodash.prototype.head,Bt&&(lodash.prototype[Bt]=function wrapperToIterator(){return this}),lodash}();Ft._=Jt,void 0===(T=function(){return Jt}.call(s,S,s,_))||(_.exports=T)}).call(this)}).call(this,S("yLpj"),S("YuTi")(i))},MCLT:function(i,s,S){(function(i){var _=Object.getOwnPropertyDescriptors||function getOwnPropertyDescriptors(i){for(var s=Object.keys(i),S={},_=0;_<s.length;_++)S[s[_]]=Object.getOwnPropertyDescriptor(i,s[_]);return S},T=/%[sdj%]/g;s.format=function(i){if(!isString(i)){for(var s=[],S=0;S<arguments.length;S++)s.push(inspect(arguments[S]));return s.join(" ")}S=1;for(var _=arguments,A=_.length,P=String(i).replace(T,(function(i){if("%%"===i)return"%";if(S>=A)return i;switch(i){case"%s":return String(_[S++]);case"%d":return Number(_[S++]);case"%j":try{return JSON.stringify(_[S++])}catch(i){return"[Circular]"}default:return i}})),N=_[S];S<A;N=_[++S])isNull(N)||!isObject(N)?P+=" "+N:P+=" "+inspect(N);return P},s.deprecate=function(S,_){if(void 0!==i&&!0===i.noDeprecation)return S;if(void 0===i)return function(){return s.deprecate(S,_).apply(this,arguments)};var T=!1;return function deprecated(){if(!T){if(i.throwDeprecation)throw new Error(_);i.traceDeprecation?console.trace(_):console.error(_),T=!0}return S.apply(this,arguments)}};var A,P={};function inspect(i,S){var _={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(_.depth=arguments[2]),arguments.length>=4&&(_.colors=arguments[3]),isBoolean(S)?_.showHidden=S:S&&s._extend(_,S),isUndefined(_.showHidden)&&(_.showHidden=!1),isUndefined(_.depth)&&(_.depth=2),isUndefined(_.colors)&&(_.colors=!1),isUndefined(_.customInspect)&&(_.customInspect=!0),_.colors&&(_.stylize=stylizeWithColor),formatValue(_,i,_.depth)}function stylizeWithColor(i,s){var S=inspect.styles[s];return S?"["+inspect.colors[S][0]+"m"+i+"["+inspect.colors[S][1]+"m":i}function stylizeNoColor(i,s){return i}function formatValue(i,S,_){if(i.customInspect&&S&&isFunction(S.inspect)&&S.inspect!==s.inspect&&(!S.constructor||S.constructor.prototype!==S)){var T=S.inspect(_,i);return isString(T)||(T=formatValue(i,T,_)),T}var A=function formatPrimitive(i,s){if(isUndefined(s))return i.stylize("undefined","undefined");if(isString(s)){var S="'"+JSON.stringify(s).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return i.stylize(S,"string")}if(isNumber(s))return i.stylize(""+s,"number");if(isBoolean(s))return i.stylize(""+s,"boolean");if(isNull(s))return i.stylize("null","null")}(i,S);if(A)return A;var P=Object.keys(S),N=function arrayToHash(i){var s={};return i.forEach((function(i,S){s[i]=!0})),s}(P);if(i.showHidden&&(P=Object.getOwnPropertyNames(S)),isError(S)&&(P.indexOf("message")>=0||P.indexOf("description")>=0))return formatError(S);if(0===P.length){if(isFunction(S)){var M=S.name?": "+S.name:"";return i.stylize("[Function"+M+"]","special")}if(isRegExp(S))return i.stylize(RegExp.prototype.toString.call(S),"regexp");if(isDate(S))return i.stylize(Date.prototype.toString.call(S),"date");if(isError(S))return formatError(S)}var k,R="",F=!1,D=["{","}"];(isArray(S)&&(F=!0,D=["[","]"]),isFunction(S))&&(R=" [Function"+(S.name?": "+S.name:"")+"]");return isRegExp(S)&&(R=" "+RegExp.prototype.toString.call(S)),isDate(S)&&(R=" "+Date.prototype.toUTCString.call(S)),isError(S)&&(R=" "+formatError(S)),0!==P.length||F&&0!=S.length?_<0?isRegExp(S)?i.stylize(RegExp.prototype.toString.call(S),"regexp"):i.stylize("[Object]","special"):(i.seen.push(S),k=F?function formatArray(i,s,S,_,T){for(var A=[],P=0,N=s.length;P<N;++P)hasOwnProperty(s,String(P))?A.push(formatProperty(i,s,S,_,String(P),!0)):A.push("");return T.forEach((function(T){T.match(/^\d+$/)||A.push(formatProperty(i,s,S,_,T,!0))})),A}(i,S,_,N,P):P.map((function(s){return formatProperty(i,S,_,N,s,F)})),i.seen.pop(),function reduceToSingleString(i,s,S){if(i.reduce((function(i,s){return s.indexOf("\n")>=0&&0,i+s.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return S[0]+(""===s?"":s+"\n ")+" "+i.join(",\n  ")+" "+S[1];return S[0]+s+" "+i.join(", ")+" "+S[1]}(k,R,D)):D[0]+R+D[1]}function formatError(i){return"["+Error.prototype.toString.call(i)+"]"}function formatProperty(i,s,S,_,T,A){var P,N,M;if((M=Object.getOwnPropertyDescriptor(s,T)||{value:s[T]}).get?N=M.set?i.stylize("[Getter/Setter]","special"):i.stylize("[Getter]","special"):M.set&&(N=i.stylize("[Setter]","special")),hasOwnProperty(_,T)||(P="["+T+"]"),N||(i.seen.indexOf(M.value)<0?(N=isNull(S)?formatValue(i,M.value,null):formatValue(i,M.value,S-1)).indexOf("\n")>-1&&(N=A?N.split("\n").map((function(i){return"  "+i})).join("\n").substr(2):"\n"+N.split("\n").map((function(i){return"   "+i})).join("\n")):N=i.stylize("[Circular]","special")),isUndefined(P)){if(A&&T.match(/^\d+$/))return N;(P=JSON.stringify(""+T)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(P=P.substr(1,P.length-2),P=i.stylize(P,"name")):(P=P.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),P=i.stylize(P,"string"))}return P+": "+N}function isArray(i){return Array.isArray(i)}function isBoolean(i){return"boolean"==typeof i}function isNull(i){return null===i}function isNumber(i){return"number"==typeof i}function isString(i){return"string"==typeof i}function isUndefined(i){return void 0===i}function isRegExp(i){return isObject(i)&&"[object RegExp]"===objectToString(i)}function isObject(i){return"object"==typeof i&&null!==i}function isDate(i){return isObject(i)&&"[object Date]"===objectToString(i)}function isError(i){return isObject(i)&&("[object Error]"===objectToString(i)||i instanceof Error)}function isFunction(i){return"function"==typeof i}function objectToString(i){return Object.prototype.toString.call(i)}function pad(i){return i<10?"0"+i.toString(10):i.toString(10)}s.debuglog=function(S){if(isUndefined(A)&&(A=i.env.NODE_DEBUG||""),S=S.toUpperCase(),!P[S])if(new RegExp("\\b"+S+"\\b","i").test(A)){var _=i.pid;P[S]=function(){var i=s.format.apply(s,arguments);console.error("%s %d: %s",S,_,i)}}else P[S]=function(){};return P[S]},s.inspect=inspect,inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},s.isArray=isArray,s.isBoolean=isBoolean,s.isNull=isNull,s.isNullOrUndefined=function isNullOrUndefined(i){return null==i},s.isNumber=isNumber,s.isString=isString,s.isSymbol=function isSymbol(i){return"symbol"==typeof i},s.isUndefined=isUndefined,s.isRegExp=isRegExp,s.isObject=isObject,s.isDate=isDate,s.isError=isError,s.isFunction=isFunction,s.isPrimitive=function isPrimitive(i){return null===i||"boolean"==typeof i||"number"==typeof i||"string"==typeof i||"symbol"==typeof i||void 0===i},s.isBuffer=S("1gqn");var N=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function timestamp(){var i=new Date,s=[pad(i.getHours()),pad(i.getMinutes()),pad(i.getSeconds())].join(":");return[i.getDate(),N[i.getMonth()],s].join(" ")}function hasOwnProperty(i,s){return Object.prototype.hasOwnProperty.call(i,s)}s.log=function(){console.log("%s - %s",timestamp(),s.format.apply(s,arguments))},s.inherits=S("KKCa"),s._extend=function(i,s){if(!s||!isObject(s))return i;for(var S=Object.keys(s),_=S.length;_--;)i[S[_]]=s[S[_]];return i};var M="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function callbackifyOnRejected(i,s){if(!i){var S=new Error("Promise was rejected with a falsy value");S.reason=i,i=S}return s(i)}s.promisify=function promisify(i){if("function"!=typeof i)throw new TypeError('The "original" argument must be of type Function');if(M&&i[M]){var s;if("function"!=typeof(s=i[M]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(s,M,{value:s,enumerable:!1,writable:!1,configurable:!0}),s}function s(){for(var s,S,_=new Promise((function(i,_){s=i,S=_})),T=[],A=0;A<arguments.length;A++)T.push(arguments[A]);T.push((function(i,_){i?S(i):s(_)}));try{i.apply(this,T)}catch(i){S(i)}return _}return Object.setPrototypeOf(s,Object.getPrototypeOf(i)),M&&Object.defineProperty(s,M,{value:s,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(s,_(i))},s.promisify.custom=M,s.callbackify=function callbackify(s){if("function"!=typeof s)throw new TypeError('The "original" argument must be of type Function');function callbackified(){for(var S=[],_=0;_<arguments.length;_++)S.push(arguments[_]);var T=S.pop();if("function"!=typeof T)throw new TypeError("The last argument must be of type Function");var A=this,cb=function(){return T.apply(A,arguments)};s.apply(this,S).then((function(s){i.nextTick(cb,null,s)}),(function(s){i.nextTick(callbackifyOnRejected,s,cb)}))}return Object.setPrototypeOf(callbackified,Object.getPrototypeOf(s)),Object.defineProperties(callbackified,_(s)),callbackified}}).call(this,S("8oxB"))},MipH:function(i,s){!function clone(i){"use strict";var s,S,_,T,A,P;function deepCopy(i){var s,S,_={};for(s in i)i.hasOwnProperty(s)&&(S=i[s],_[s]="object"==typeof S&&null!==S?deepCopy(S):S);return _}function Reference(i,s){this.parent=i,this.key=s}function Element(i,s,S,_){this.node=i,this.path=s,this.wrap=S,this.ref=_}function Controller(){}function isNode(i){return null!=i&&("object"==typeof i&&"string"==typeof i.type)}function isProperty(i,S){return(i===s.ObjectExpression||i===s.ObjectPattern)&&"properties"===S}function candidateExistsInLeaveList(i,s){for(var S=i.length-1;S>=0;--S)if(i[S].node===s)return!0;return!1}function traverse(i,s){return(new Controller).traverse(i,s)}function extendCommentRange(i,s){var S;return S=function upperBound(i,s){var S,_,T,A;for(_=i.length,T=0;_;)s(i[A=T+(S=_>>>1)])?_=S:(T=A+1,_-=S+1);return T}(s,(function search(s){return s.range[0]>i.range[0]})),i.extendedRange=[i.range[0],i.range[1]],S!==s.length&&(i.extendedRange[1]=s[S].range[0]),(S-=1)>=0&&(i.extendedRange[0]=s[S].range[1]),i}return s={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ChainExpression:"ChainExpression",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},_={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},S={Break:T={},Skip:A={},Remove:P={}},Reference.prototype.replace=function replace(i){this.parent[this.key]=i},Reference.prototype.remove=function remove(){return Array.isArray(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)},Controller.prototype.path=function path(){var i,s,S,_,T;function addToPath(i,s){if(Array.isArray(s))for(S=0,_=s.length;S<_;++S)i.push(s[S]);else i.push(s)}if(!this.__current.path)return null;for(T=[],i=2,s=this.__leavelist.length;i<s;++i)addToPath(T,this.__leavelist[i].path);return addToPath(T,this.__current.path),T},Controller.prototype.type=function(){return this.current().type||this.__current.wrap},Controller.prototype.parents=function parents(){var i,s,S;for(S=[],i=1,s=this.__leavelist.length;i<s;++i)S.push(this.__leavelist[i].node);return S},Controller.prototype.current=function current(){return this.__current.node},Controller.prototype.__execute=function __execute(i,s){var S,_;return _=void 0,S=this.__current,this.__current=s,this.__state=null,i&&(_=i.call(this,s.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=S,_},Controller.prototype.notify=function notify(i){this.__state=i},Controller.prototype.skip=function(){this.notify(A)},Controller.prototype.break=function(){this.notify(T)},Controller.prototype.remove=function(){this.notify(P)},Controller.prototype.__initialize=function(i,s){this.visitor=s,this.root=i,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback=null,"iteration"===s.fallback?this.__fallback=Object.keys:"function"==typeof s.fallback&&(this.__fallback=s.fallback),this.__keys=_,s.keys&&(this.__keys=Object.assign(Object.create(this.__keys),s.keys))},Controller.prototype.traverse=function traverse(i,s){var S,_,P,N,M,k,R,F,D,L,$,V;for(this.__initialize(i,s),V={},S=this.__worklist,_=this.__leavelist,S.push(new Element(i,null,null,null)),_.push(new Element(null,null,null,null));S.length;)if((P=S.pop())!==V){if(P.node){if(k=this.__execute(s.enter,P),this.__state===T||k===T)return;if(S.push(V),_.push(P),this.__state===A||k===A)continue;if(M=(N=P.node).type||P.wrap,!(L=this.__keys[M])){if(!this.__fallback)throw new Error("Unknown node type "+M+".");L=this.__fallback(N)}for(F=L.length;(F-=1)>=0;)if($=N[R=L[F]])if(Array.isArray($)){for(D=$.length;(D-=1)>=0;)if($[D]&&!candidateExistsInLeaveList(_,$[D])){if(isProperty(M,L[F]))P=new Element($[D],[R,D],"Property",null);else{if(!isNode($[D]))continue;P=new Element($[D],[R,D],null,null)}S.push(P)}}else if(isNode($)){if(candidateExistsInLeaveList(_,$))continue;S.push(new Element($,R,null,null))}}}else if(P=_.pop(),k=this.__execute(s.leave,P),this.__state===T||k===T)return},Controller.prototype.replace=function replace(i,s){var S,_,N,M,k,R,F,D,L,$,V,U,W;function removeElem(i){var s,_,T,A;if(i.ref.remove())for(_=i.ref.key,A=i.ref.parent,s=S.length;s--;)if((T=S[s]).ref&&T.ref.parent===A){if(T.ref.key<_)break;--T.ref.key}}for(this.__initialize(i,s),V={},S=this.__worklist,_=this.__leavelist,R=new Element(i,null,null,new Reference(U={root:i},"root")),S.push(R),_.push(R);S.length;)if((R=S.pop())!==V){if(void 0!==(k=this.__execute(s.enter,R))&&k!==T&&k!==A&&k!==P&&(R.ref.replace(k),R.node=k),this.__state!==P&&k!==P||(removeElem(R),R.node=null),this.__state===T||k===T)return U.root;if((N=R.node)&&(S.push(V),_.push(R),this.__state!==A&&k!==A)){if(M=N.type||R.wrap,!(L=this.__keys[M])){if(!this.__fallback)throw new Error("Unknown node type "+M+".");L=this.__fallback(N)}for(F=L.length;(F-=1)>=0;)if($=N[W=L[F]])if(Array.isArray($)){for(D=$.length;(D-=1)>=0;)if($[D]){if(isProperty(M,L[F]))R=new Element($[D],[W,D],"Property",new Reference($,D));else{if(!isNode($[D]))continue;R=new Element($[D],[W,D],null,new Reference($,D))}S.push(R)}}else isNode($)&&S.push(new Element($,W,null,new Reference(N,W)))}}else if(R=_.pop(),void 0!==(k=this.__execute(s.leave,R))&&k!==T&&k!==A&&k!==P&&R.ref.replace(k),this.__state!==P&&k!==P||removeElem(R),this.__state===T||k===T)return U.root;return U.root},i.Syntax=s,i.traverse=traverse,i.replace=function replace(i,s){return(new Controller).replace(i,s)},i.attachComments=function attachComments(i,s,_){var T,A,P,N,M=[];if(!i.range)throw new Error("attachComments needs range information");if(!_.length){if(s.length){for(P=0,A=s.length;P<A;P+=1)(T=deepCopy(s[P])).extendedRange=[0,i.range[0]],M.push(T);i.leadingComments=M}return i}for(P=0,A=s.length;P<A;P+=1)M.push(extendCommentRange(deepCopy(s[P]),_));return N=0,traverse(i,{enter:function(i){for(var s;N<M.length&&!((s=M[N]).extendedRange[1]>i.range[0]);)s.extendedRange[1]===i.range[0]?(i.leadingComments||(i.leadingComments=[]),i.leadingComments.push(s),M.splice(N,1)):N+=1;return N===M.length?S.Break:M[N].extendedRange[0]>i.range[1]?S.Skip:void 0}}),N=0,traverse(i,{leave:function(i){for(var s;N<M.length&&(s=M[N],!(i.range[1]<s.extendedRange[0]));)i.range[1]===s.extendedRange[0]?(i.trailingComments||(i.trailingComments=[]),i.trailingComments.push(s),M.splice(N,1)):N+=1;return N===M.length?S.Break:M[N].extendedRange[0]>i.range[1]?S.Skip:void 0}}),i},i.VisitorKeys=_,i.VisitorOption=S,i.Controller=Controller,i.cloneEnvironment=function(){return clone({})},i}(s)},"Oq+q":function(i,s,S){var _,T,A=S("1uSB"),P=S("osxs"),N=(_=S("2Bhr"))&&"object"==typeof _&&"default"in _?_.default:_,M="object"==typeof Reflect?Reflect:null,k=M&&"function"==typeof M.apply?M.apply:function(i,s,S){return Function.prototype.apply.call(i,s,S)};T=M&&"function"==typeof M.ownKeys?M.ownKeys:Object.getOwnPropertySymbols?function(i){return Object.getOwnPropertyNames(i).concat(Object.getOwnPropertySymbols(i))}:function(i){return Object.getOwnPropertyNames(i)};var R=Number.isNaN||function(i){return i!=i};function l(){l.init.call(this)}var F=l;l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var D=10;function c(i){if("function"!=typeof i)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof i)}function p(i){return void 0===i._maxListeners?l.defaultMaxListeners:i._maxListeners}function v(i,s,S,_){var T,A,P;if(c(S),void 0===(A=i._events)?(A=i._events=Object.create(null),i._eventsCount=0):(void 0!==A.newListener&&(i.emit("newListener",s,S.listener?S.listener:S),A=i._events),P=A[s]),void 0===P)P=A[s]=S,++i._eventsCount;else if("function"==typeof P?P=A[s]=_?[S,P]:[P,S]:_?P.unshift(S):P.push(S),(T=p(i))>0&&P.length>T&&!P.warned){P.warned=!0;var N=new Error("Possible EventEmitter memory leak detected. "+P.length+" "+String(s)+" listeners added. Use emitter.setMaxListeners() to increase limit");N.name="MaxListenersExceededWarning",N.emitter=i,N.type=s,N.count=P.length,console&&console.warn&&console.warn(N)}return i}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function y(i,s,S){var _={fired:!1,wrapFn:void 0,target:i,type:s,listener:S},T=h.bind(_);return T.listener=S,_.wrapFn=T,T}function d(i,s,S){var _=i._events;if(void 0===_)return[];var T=_[s];return void 0===T?[]:"function"==typeof T?S?[T.listener||T]:[T]:S?function(i){for(var s=new Array(i.length),S=0;S<s.length;++S)s[S]=i[S].listener||i[S];return s}(T):g(T,T.length)}function m(i){var s=this._events;if(void 0!==s){var S=s[i];if("function"==typeof S)return 1;if(void 0!==S)return S.length}return 0}function g(i,s){for(var S=new Array(s),_=0;_<s;++_)S[_]=i[_];return S}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return D},set:function(i){if("number"!=typeof i||i<0||R(i))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+i+".");D=i}}),l.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(i){if("number"!=typeof i||i<0||R(i))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+i+".");return this._maxListeners=i,this},l.prototype.getMaxListeners=function(){return p(this)},l.prototype.emit=function(i){for(var s=[],S=1;S<arguments.length;S++)s.push(arguments[S]);var _="error"===i,T=this._events;if(void 0!==T)_=_&&void 0===T.error;else if(!_)return!1;if(_){var A;if(s.length>0&&(A=s[0]),A instanceof Error)throw A;var P=new Error("Unhandled error."+(A?" ("+A.message+")":""));throw P.context=A,P}var N=T[i];if(void 0===N)return!1;if("function"==typeof N)k(N,this,s);else{var M=N.length,R=g(N,M);for(S=0;S<M;++S)k(R[S],this,s)}return!0},l.prototype.on=l.prototype.addListener=function(i,s){return v(this,i,s,!1)},l.prototype.prependListener=function(i,s){return v(this,i,s,!0)},l.prototype.once=function(i,s){return c(s),this.on(i,y(this,i,s)),this},l.prototype.prependOnceListener=function(i,s){return c(s),this.prependListener(i,y(this,i,s)),this},l.prototype.off=l.prototype.removeListener=function(i,s){var S,_,T,A,P;if(c(s),void 0===(_=this._events))return this;if(void 0===(S=_[i]))return this;if(S===s||S.listener===s)0==--this._eventsCount?this._events=Object.create(null):(delete _[i],_.removeListener&&this.emit("removeListener",i,S.listener||s));else if("function"!=typeof S){for(T=-1,A=S.length-1;A>=0;A--)if(S[A]===s||S[A].listener===s){P=S[A].listener,T=A;break}if(T<0)return this;0===T?S.shift():function(i,s){for(;s+1<i.length;s++)i[s]=i[s+1];i.pop()}(S,T),1===S.length&&(_[i]=S[0]),void 0!==_.removeListener&&this.emit("removeListener",i,P||s)}return this},l.prototype.removeAllListeners=function(i){var s,S,_;if(void 0===(S=this._events))return this;if(void 0===S.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==S[i]&&(0==--this._eventsCount?this._events=Object.create(null):delete S[i]),this;if(0===arguments.length){var T,A=Object.keys(S);for(_=0;_<A.length;++_)"removeListener"!==(T=A[_])&&this.removeAllListeners(T);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(s=S[i]))this.removeListener(i,s);else if(void 0!==s)for(_=s.length-1;_>=0;_--)this.removeListener(i,s[_]);return this},l.prototype.listeners=function(i){return d(this,i,!0)},l.prototype.rawListeners=function(i){return d(this,i,!1)},l.listenerCount=function(i,s){return"function"==typeof i.listenerCount?i.listenerCount(s):m.call(i,s)},l.prototype.listenerCount=m,l.prototype.eventNames=function(){return this._eventsCount>0?T(this._events):[]},F.once=function(i,s){return new Promise((function(S,_){function o(){void 0!==T&&i.removeListener("error",T),S([].slice.call(arguments))}var T;"error"!==s&&(T=function(S){i.removeListener(s,o),_(S)},i.once("error",T)),i.once(s,o)}))};const L=new WeakMap,$={ASTWithSource:["ast"],Binary:["left","right"],BoundAttribute:["value"],BoundEvent:["handler"],BoundText:["value"],Element:["children","inputs","outputs"],Interpolation:["expressions"],PrefixNot:["expression"],Program:["templateNodes"],PropertyRead:["receiver"],Template:["templateAttrs","children","inputs"]};function b(i){let s=null;return"comments"!==i&&"leadingComments"!==i&&"loc"!==i&&"parent"!==i&&"range"!==i&&"tokens"!==i&&"trailingComments"!==i&&null!==(s=this[i])&&"object"==typeof s&&("string"==typeof s.type||Array.isArray(s))}function w(i){return Object.keys(i).filter(b,i)}function x(i){return null!==i&&"object"==typeof i&&"string"==typeof i.type}function O(i){return{start:{line:i.start.line+1,column:i.start.col},end:{line:i.end.line+1,column:i.end.col}}}function j(i,s){const S={type:"Program",comments:[],tokens:[],range:[0,0],loc:{start:{line:0,column:0},end:{line:0,column:0}},templateNodes:A.parseTemplate(i,s.filePath,{preserveWhitespaces:!1}).nodes,value:i},_=new P.ScopeManager({});new P.Scope(_,"module",null,S,!1),function e(i){let s=0,S=0;const _=$[i.type]||w(i);for(s=0;s<_.length;++s){const T=i[_[s]],A=Array.isArray(T);if(void 0!==T.type&&(T.__originalType=T.type),A||T.type||(T.type=T.constructor.name),A)for(S=0;S<T.length;++S){const i=T[S];void 0!==i.type&&(i.__originalType=i.type),i.type||(i.type=i.constructor.name),x(i)&&e(i)}else x(T)&&e(T)}}(S);const T=function(i){let s=null;return i.templateNodes.forEach(i=>{const S=i.startSourceSpan||i.sourceSpan;s?S&&S.start.offset<s.start.offset&&(s=S):s=S}),s}(S),M=function(i){let s=null;return i.templateNodes.forEach(i=>{const S=i.endSourceSpan||i.sourceSpan;s?S&&S.end.offset>s.end.offset&&(s=S):s=S}),s}(S);return T&&M&&(S.range=[T.start.offset,M.end.offset],S.loc={start:O(T).start,end:O(M).end}),{ast:S,scopeManager:_,visitorKeys:$,services:{convertNodeSourceSpanToLoc:O,defineTemplateBodyVisitor(i,s){const _=S;if(null==s&&(s={}),null==_)return s;let T=L.get(_);if(null==T){T=new F,T.setMaxListeners(0),L.set(_,T);const i=s["Program:exit"];s["Program:exit"]=S=>{try{"function"==typeof i&&i(S);const A=new N(T);!function e(i,s,S){let _=0,T=0;S.enterNode(i,s);const A=(S.visitorKeys||$)[i.type]||w(i);for(_=0;_<A.length;++_){const s=i[A[_]];if(Array.isArray(s))for(T=0;T<s.length;++T){const _=s[T];x(_)&&e(_,i,S)}else x(s)&&e(s,i,S)}S.leaveNode(i,s)}(_,null,A)}finally{s["Program:exit"]=i,L.delete(_)}}}for(const s of Object.keys(i))T.on(s,i[s]);return s}}}}i.exports={parseForESLint:j,parse:function(i,s){return j(i,s).ast}}},V9Y0:function(i){i.exports=JSON.parse('{"name":"estraverse","description":"ECMAScript JS AST traversal functions","homepage":"https://github.com/estools/estraverse","main":"estraverse.js","version":"4.3.0","engines":{"node":">=4.0"},"maintainers":[{"name":"Yusuke Suzuki","email":"utatane.tea@gmail.com","web":"http://github.com/Constellation"}],"repository":{"type":"git","url":"http://github.com/estools/estraverse.git"},"devDependencies":{"babel-preset-env":"^1.6.1","babel-register":"^6.3.13","chai":"^2.1.1","espree":"^1.11.0","gulp":"^3.8.10","gulp-bump":"^0.2.2","gulp-filter":"^2.0.0","gulp-git":"^1.0.1","gulp-tag-version":"^1.3.0","jshint":"^2.5.6","mocha":"^2.1.0"},"license":"BSD-2-Clause","scripts":{"test":"npm run-script lint && npm run-script unit-test","lint":"jshint estraverse.js","unit-test":"mocha --compilers js:babel-register"}}')},VqNl:function(i,s,S){"use strict";const _=S("sR6L").Syntax,T=S("10sj");class PatternVisitor extends T.Visitor{static isPattern(i){const s=i.type;return s===_.Identifier||s===_.ObjectPattern||s===_.ArrayPattern||s===_.SpreadElement||s===_.RestElement||s===_.AssignmentPattern}constructor(i,s,S){super(null,i),this.rootPattern=s,this.callback=S,this.assignments=[],this.rightHandNodes=[],this.restElements=[]}Identifier(i){const s=function getLast(i){return i[i.length-1]||null}(this.restElements);this.callback(i,{topLevel:i===this.rootPattern,rest:null!=s&&s.argument===i,assignments:this.assignments})}Property(i){i.computed&&this.rightHandNodes.push(i.key),this.visit(i.value)}ArrayPattern(i){for(let s=0,S=i.elements.length;s<S;++s){const S=i.elements[s];this.visit(S)}}AssignmentPattern(i){this.assignments.push(i),this.visit(i.left),this.rightHandNodes.push(i.right),this.assignments.pop()}RestElement(i){this.restElements.push(i),this.visit(i.argument),this.restElements.pop()}MemberExpression(i){i.computed&&this.rightHandNodes.push(i.property),this.rightHandNodes.push(i.object)}SpreadElement(i){this.visit(i.argument)}ArrayExpression(i){i.elements.forEach(this.visit,this)}AssignmentExpression(i){this.assignments.push(i),this.visit(i.left),this.rightHandNodes.push(i.right),this.assignments.pop()}CallExpression(i){i.arguments.forEach(i=>{this.rightHandNodes.push(i)}),this.visit(i.callee)}}i.exports=PatternVisitor},j6Dg:function(i,s,S){"use strict";const _=S("1LFW");class Definition{constructor(i,s,S,_,T,A){this.type=i,this.name=s,this.node=S,this.parent=_,this.index=T,this.kind=A}}i.exports={ParameterDefinition:class ParameterDefinition extends Definition{constructor(i,s,S,T){super(_.Parameter,i,s,null,S,null),this.rest=T}},Definition:Definition}},jw7u:function(i,s,S){"use strict";S.r(s),function(i){function e(i){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(i)}function t(i,s){return function(i){if(Array.isArray(i))return i}(i)||function(i,s){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(i)){var S=[],_=!0,T=!1,A=void 0;try{for(var P,N=i[Symbol.iterator]();!(_=(P=N.next()).done)&&(S.push(P.value),!s||S.length!==s);_=!0);}catch(i){T=!0,A=i}finally{try{_||null==N.return||N.return()}finally{if(T)throw A}}return S}}(i,s)||n(i,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(i){return function(i){if(Array.isArray(i))return o(i)}(i)||function(i){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(i))return Array.from(i)}(i)||n(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(i,s){if(i){if("string"==typeof i)return o(i,s);var S=Object.prototype.toString.call(i).slice(8,-1);return"Object"===S&&i.constructor&&(S=i.constructor.name),"Map"===S||"Set"===S?Array.from(S):"Arguments"===S||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S)?o(i,s):void 0}}function o(i,s){(null==s||s>i.length)&&(s=i.length);for(var S=0,_=new Array(s);S<s;S++)_[S]=i[S];return _}function a(i,s){return i(s={exports:{}},s.exports),s.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i||"undefined"!=typeof self&&self;var S=a((function(i,s){!function e(i){var s,S,_,T,A,P;function l(i){var s,S,_={};for(s in i)i.hasOwnProperty(s)&&(S=i[s],_[s]="object"==typeof S&&null!==S?l(S):S);return _}function u(i,s){this.parent=i,this.key=s}function c(i,s,S,_){this.node=i,this.path=s,this.wrap=S,this.ref=_}function p(){}function f(i){return null!=i&&"object"==typeof i&&"string"==typeof i.type}function h(i,S){return(i===s.ObjectExpression||i===s.ObjectPattern)&&"properties"===S}function d(i,s){return(new p).traverse(i,s)}function y(i,s){var S;return S=function(i,s){var S,_,T,A;for(_=i.length,T=0;_;)s(i[A=T+(S=_>>>1)])?_=S:(T=A+1,_-=S+1);return T}(s,(function(s){return s.range[0]>i.range[0]})),i.extendedRange=[i.range[0],i.range[1]],S!==s.length&&(i.extendedRange[1]=s[S].range[0]),(S-=1)>=0&&(i.extendedRange[0]=s[S].range[1]),i}return s={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},_={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},S={Break:T={},Skip:A={},Remove:P={}},u.prototype.replace=function(i){this.parent[this.key]=i},u.prototype.remove=function(){return Array.isArray(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)},p.prototype.path=function(){var i,s,S,_,T;function a(i,s){if(Array.isArray(s))for(S=0,_=s.length;S<_;++S)i.push(s[S]);else i.push(s)}if(!this.__current.path)return null;for(T=[],i=2,s=this.__leavelist.length;i<s;++i)a(T,this.__leavelist[i].path);return a(T,this.__current.path),T},p.prototype.type=function(){return this.current().type||this.__current.wrap},p.prototype.parents=function(){var i,s,S;for(S=[],i=1,s=this.__leavelist.length;i<s;++i)S.push(this.__leavelist[i].node);return S},p.prototype.current=function(){return this.__current.node},p.prototype.__execute=function(i,s){var S,_;return _=void 0,S=this.__current,this.__current=s,this.__state=null,i&&(_=i.call(this,s.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=S,_},p.prototype.notify=function(i){this.__state=i},p.prototype.skip=function(){this.notify(A)},p.prototype.break=function(){this.notify(T)},p.prototype.remove=function(){this.notify(P)},p.prototype.__initialize=function(i,s){this.visitor=s,this.root=i,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback=null,"iteration"===s.fallback?this.__fallback=Object.keys:"function"==typeof s.fallback&&(this.__fallback=s.fallback),this.__keys=_,s.keys&&(this.__keys=Object.assign(Object.create(this.__keys),s.keys))},p.prototype.traverse=function(i,s){var S,_,P,N,M,k,R,F,D,L,$,V;for(this.__initialize(i,s),V={},S=this.__worklist,_=this.__leavelist,S.push(new c(i,null,null,null)),_.push(new c(null,null,null,null));S.length;)if((P=S.pop())!==V){if(P.node){if(k=this.__execute(s.enter,P),this.__state===T||k===T)return;if(S.push(V),_.push(P),this.__state===A||k===A)continue;if(M=(N=P.node).type||P.wrap,!(L=this.__keys[M])){if(!this.__fallback)throw new Error("Unknown node type "+M+".");L=this.__fallback(N)}for(F=L.length;(F-=1)>=0;)if($=N[R=L[F]])if(Array.isArray($)){for(D=$.length;(D-=1)>=0;)if($[D]){if(h(M,L[F]))P=new c($[D],[R,D],"Property",null);else{if(!f($[D]))continue;P=new c($[D],[R,D],null,null)}S.push(P)}}else f($)&&S.push(new c($,R,null,null))}}else if(P=_.pop(),k=this.__execute(s.leave,P),this.__state===T||k===T)return},p.prototype.replace=function(i,s){var S,_,N,M,k,R,F,D,L,$,V,U,W;function E(i){var s,_,T,A;if(i.ref.remove())for(_=i.ref.key,A=i.ref.parent,s=S.length;s--;)if((T=S[s]).ref&&T.ref.parent===A){if(T.ref.key<_)break;--T.ref.key}}for(this.__initialize(i,s),V={},S=this.__worklist,_=this.__leavelist,R=new c(i,null,null,new u(U={root:i},"root")),S.push(R),_.push(R);S.length;)if((R=S.pop())!==V){if(void 0!==(k=this.__execute(s.enter,R))&&k!==T&&k!==A&&k!==P&&(R.ref.replace(k),R.node=k),this.__state!==P&&k!==P||(E(R),R.node=null),this.__state===T||k===T)return U.root;if((N=R.node)&&(S.push(V),_.push(R),this.__state!==A&&k!==A)){if(M=N.type||R.wrap,!(L=this.__keys[M])){if(!this.__fallback)throw new Error("Unknown node type "+M+".");L=this.__fallback(N)}for(F=L.length;(F-=1)>=0;)if($=N[W=L[F]])if(Array.isArray($)){for(D=$.length;(D-=1)>=0;)if($[D]){if(h(M,L[F]))R=new c($[D],[W,D],"Property",new u($,D));else{if(!f($[D]))continue;R=new c($[D],[W,D],null,new u($,D))}S.push(R)}}else f($)&&S.push(new c($,W,null,new u(N,W)))}}else if(R=_.pop(),void 0!==(k=this.__execute(s.leave,R))&&k!==T&&k!==A&&k!==P&&R.ref.replace(k),this.__state!==P&&k!==P||E(R),this.__state===T||k===T)return U.root;return U.root},i.Syntax=s,i.traverse=d,i.replace=function(i,s){return(new p).replace(i,s)},i.attachComments=function(i,s,_){var T,A,P,N,M=[];if(!i.range)throw new Error("attachComments needs range information");if(!_.length){if(s.length){for(P=0,A=s.length;P<A;P+=1)(T=l(s[P])).extendedRange=[0,i.range[0]],M.push(T);i.leadingComments=M}return i}for(P=0,A=s.length;P<A;P+=1)M.push(y(l(s[P]),_));return N=0,d(i,{enter:function(i){for(var s;N<M.length&&!((s=M[N]).extendedRange[1]>i.range[0]);)s.extendedRange[1]===i.range[0]?(i.leadingComments||(i.leadingComments=[]),i.leadingComments.push(s),M.splice(N,1)):N+=1;return N===M.length?S.Break:M[N].extendedRange[0]>i.range[1]?S.Skip:void 0}}),N=0,d(i,{leave:function(i){for(var s;N<M.length&&(s=M[N],!(i.range[1]<s.extendedRange[0]));)i.range[1]===s.extendedRange[0]?(i.trailingComments||(i.trailingComments=[]),i.trailingComments.push(s),M.splice(N,1)):N+=1;return N===M.length?S.Break:M[N].extendedRange[0]>i.range[1]?S.Skip:void 0}}),i},i.VisitorKeys=_,i.VisitorOption=S,i.Controller=p,i.cloneEnvironment=function(){return e({})},i}(s)})),_=a((function(i){i.exports&&(i.exports=function(){function e(i,s,S,_){this.message=i,this.expected=s,this.found=S,this.location=_,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return function(i,s){function r(){this.constructor=i}r.prototype=s.prototype,i.prototype=new r}(e,Error),e.buildMessage=function(i,s){var S={literal:function(i){return'"'+o(i.text)+'"'},class:function(i){var s,S="";for(s=0;s<i.parts.length;s++)S+=i.parts[s]instanceof Array?a(i.parts[s][0])+"-"+a(i.parts[s][1]):a(i.parts[s]);return"["+(i.inverted?"^":"")+S+"]"},any:function(i){return"any character"},end:function(i){return"end of input"},other:function(i){return i.description}};function n(i){return i.charCodeAt(0).toString(16).toUpperCase()}function o(i){return i.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(i){return"\\x0"+n(i)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(i){return"\\x"+n(i)}))}function a(i){return i.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(i){return"\\x0"+n(i)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(i){return"\\x"+n(i)}))}return"Expected "+function(i){var s,_,T,A=new Array(i.length);for(s=0;s<i.length;s++)A[s]=(T=i[s],S[T.type](T));if(A.sort(),A.length>0){for(s=1,_=1;s<A.length;s++)A[s-1]!==A[s]&&(A[_]=A[s],_++);A.length=_}switch(A.length){case 1:return A[0];case 2:return A[0]+" or "+A[1];default:return A.slice(0,-1).join(", ")+", or "+A[A.length-1]}}(i)+" but "+function(i){return i?'"'+o(i)+'"':"end of input"}(s)+" found."},{SyntaxError:e,parse:function(i,s){s=void 0!==s?s:{};var S,_,T,A,P={},N={start:be},M=be,k=me(" ",!1),R=/^[^ [\],():#!=><~+.]/,F=xe([" ","[","]",",","(",")",":","#","!","=",">","<","~","+","."],!0,!1),h=function(i){return i.join("")},D=me(">",!1),L=me("~",!1),$=me("+",!1),V=me(",",!1),U=me("!",!1),W=me("*",!1),z=me("#",!1),H=me("[",!1),q=me("]",!1),K=/^[><!]/,G=xe([">","<","!"],!1,!1),X=me("=",!1),C=function(i){return(i||"")+"="},Q=/^[><]/,J=xe([">","<"],!1,!1),Y=me(".",!1),I=function(i,s,S){return{type:"attribute",name:i,operator:s,value:S}},Z=me('"',!1),ee=/^[^\\"]/,te=xe(["\\",'"'],!0,!1),re=me("\\",!1),ne={type:"any"},O=function(i,s){return i+s},B=function(i){return{type:"literal",value:(s=i.join(""),s.replace(/\\(.)/g,(function(i,s){switch(s){case"b":return"\b";case"f":return"\f";case"n":return"\n";case"r":return"\r";case"t":return"\t";case"v":return"\v";default:return s}})))};var s},ie=me("'",!1),se=/^[^\\']/,ae=xe(["\\","'"],!0,!1),oe=/^[0-9]/,le=xe([["0","9"]],!1,!1),ce=me("type(",!1),ue=/^[^ )]/,pe=xe([" ",")"],!0,!1),he=me(")",!1),de=/^[imsu]/,fe=xe(["i","m","s","u"],!1,!1),ye=me("/",!1),Te=/^[^\/]/,Ne=xe(["/"],!0,!1),Me=me(":not(",!1),Re=me(":matches(",!1),Oe=me(":has(",!1),Fe=me(":first-child",!1),Le=me(":last-child",!1),$e=me(":nth-child(",!1),Be=me(":nth-last-child(",!1),Ve=me(":",!1),Ue=me("statement",!0),We=me("expression",!0),ze=me("declaration",!0),He=me("function",!0),qe=me("pattern",!0),Ke=0,Ge=[{line:1,column:1}],Xe=0,Qe=[],Je={};if("startRule"in s){if(!(s.startRule in N))throw new Error("Can't start parsing from rule \""+s.startRule+'".');M=N[s.startRule]}function me(i,s){return{type:"literal",text:i,ignoreCase:s}}function xe(i,s,S){return{type:"class",parts:i,inverted:s,ignoreCase:S}}function ge(s){var S,_=Ge[s];if(_)return _;for(S=s-1;!Ge[S];)S--;for(_={line:(_=Ge[S]).line,column:_.column};S<s;)10===i.charCodeAt(S)?(_.line++,_.column=1):_.column++,S++;return Ge[s]=_,_}function ve(i,s){var S=ge(i),_=ge(s);return{start:{offset:i,line:S.line,column:S.column},end:{offset:s,line:_.line,column:_.column}}}function Ae(i){Ke<Xe||(Ke>Xe&&(Xe=Ke,Qe=[]),Qe.push(i))}function be(){var i,s,S,_,T=30*Ke+0,A=Je[T];return A?(Ke=A.nextPos,A.result):(i=Ke,(s=Ee())!==P&&(S=we())!==P&&Ee()!==P?i=s=1===(_=S).length?_[0]:{type:"matches",selectors:_}:(Ke=i,i=P),i===P&&(i=Ke,(s=Ee())!==P&&(s=void 0),i=s),Je[T]={nextPos:Ke,result:i},i)}function Ee(){var s,S,_=30*Ke+1,T=Je[_];if(T)return Ke=T.nextPos,T.result;for(s=[],32===i.charCodeAt(Ke)?(S=" ",Ke++):(S=P,Ae(k));S!==P;)s.push(S),32===i.charCodeAt(Ke)?(S=" ",Ke++):(S=P,Ae(k));return Je[_]={nextPos:Ke,result:s},s}function Se(){var s,S,_,T=30*Ke+2,A=Je[T];if(A)return Ke=A.nextPos,A.result;if(S=[],R.test(i.charAt(Ke))?(_=i.charAt(Ke),Ke++):(_=P,Ae(F)),_!==P)for(;_!==P;)S.push(_),R.test(i.charAt(Ke))?(_=i.charAt(Ke),Ke++):(_=P,Ae(F));else S=P;return S!==P&&(S=h(S)),s=S,Je[T]={nextPos:Ke,result:s},s}function _e(){var s,S,_,T=30*Ke+3,A=Je[T];return A?(Ke=A.nextPos,A.result):(s=Ke,(S=Ee())!==P?(62===i.charCodeAt(Ke)?(_=">",Ke++):(_=P,Ae(D)),_!==P&&Ee()!==P?s=S="child":(Ke=s,s=P)):(Ke=s,s=P),s===P&&(s=Ke,(S=Ee())!==P?(126===i.charCodeAt(Ke)?(_="~",Ke++):(_=P,Ae(L)),_!==P&&Ee()!==P?s=S="sibling":(Ke=s,s=P)):(Ke=s,s=P),s===P&&(s=Ke,(S=Ee())!==P?(43===i.charCodeAt(Ke)?(_="+",Ke++):(_=P,Ae($)),_!==P&&Ee()!==P?s=S="adjacent":(Ke=s,s=P)):(Ke=s,s=P),s===P&&(s=Ke,32===i.charCodeAt(Ke)?(S=" ",Ke++):(S=P,Ae(k)),S!==P&&(_=Ee())!==P?s=S="descendant":(Ke=s,s=P)))),Je[T]={nextPos:Ke,result:s},s)}function we(){var s,S,_,T,A,N,M,k,R=30*Ke+4,F=Je[R];if(F)return Ke=F.nextPos,F.result;if(s=Ke,(S=Ce())!==P){for(_=[],T=Ke,(A=Ee())!==P?(44===i.charCodeAt(Ke)?(N=",",Ke++):(N=P,Ae(V)),N!==P&&(M=Ee())!==P&&(k=Ce())!==P?T=A=[A,N,M,k]:(Ke=T,T=P)):(Ke=T,T=P);T!==P;)_.push(T),T=Ke,(A=Ee())!==P?(44===i.charCodeAt(Ke)?(N=",",Ke++):(N=P,Ae(V)),N!==P&&(M=Ee())!==P&&(k=Ce())!==P?T=A=[A,N,M,k]:(Ke=T,T=P)):(Ke=T,T=P);_!==P?s=S=[S].concat(_.map((function(i){return i[3]}))):(Ke=s,s=P)}else Ke=s,s=P;return Je[R]={nextPos:Ke,result:s},s}function Ce(){var i,s,S,_,T,A,N,M=30*Ke+5,k=Je[M];if(k)return Ke=k.nextPos,k.result;if(i=Ke,(s=Pe())!==P){for(S=[],_=Ke,(T=_e())!==P&&(A=Pe())!==P?_=T=[T,A]:(Ke=_,_=P);_!==P;)S.push(_),_=Ke,(T=_e())!==P&&(A=Pe())!==P?_=T=[T,A]:(Ke=_,_=P);S!==P?(N=s,i=s=S.reduce((function(i,s){return{type:s[0],left:i,right:s[1]}}),N)):(Ke=i,i=P)}else Ke=i,i=P;return Je[M]={nextPos:Ke,result:i},i}function Pe(){var s,S,_,T,A,N,M,k=30*Ke+6,R=Je[k];if(R)return Ke=R.nextPos,R.result;if(s=Ke,33===i.charCodeAt(Ke)?(S="!",Ke++):(S=P,Ae(U)),S===P&&(S=null),S!==P){if(_=[],(T=ke())!==P)for(;T!==P;)_.push(T),T=ke();else _=P;_!==P?(A=S,M=1===(N=_).length?N[0]:{type:"compound",selectors:N},A&&(M.subject=!0),s=S=M):(Ke=s,s=P)}else Ke=s,s=P;return Je[k]={nextPos:Ke,result:s},s}function ke(){var s,S=30*Ke+7,_=Je[S];return _?(Ke=_.nextPos,_.result):((s=function(){var s,S,_=30*Ke+8,T=Je[_];return T?(Ke=T.nextPos,T.result):(42===i.charCodeAt(Ke)?(S="*",Ke++):(S=P,Ae(W)),S!==P&&(S={type:"wildcard",value:S}),s=S,Je[_]={nextPos:Ke,result:s},s)}())===P&&(s=function(){var s,S,_,T=30*Ke+9,A=Je[T];return A?(Ke=A.nextPos,A.result):(s=Ke,35===i.charCodeAt(Ke)?(S="#",Ke++):(S=P,Ae(z)),S===P&&(S=null),S!==P&&(_=Se())!==P?s=S={type:"identifier",value:_}:(Ke=s,s=P),Je[T]={nextPos:Ke,result:s},s)}())===P&&(s=function(){var s,S,_,T,A=30*Ke+10,N=Je[A];return N?(Ke=N.nextPos,N.result):(s=Ke,91===i.charCodeAt(Ke)?(S="[",Ke++):(S=P,Ae(H)),S!==P&&Ee()!==P&&(_=function(){var s,S,_,T,A=30*Ke+14,N=Je[A];return N?(Ke=N.nextPos,N.result):(s=Ke,(S=De())!==P&&Ee()!==P&&(_=function(){var s,S,_,T=30*Ke+12,A=Je[T];return A?(Ke=A.nextPos,A.result):(s=Ke,33===i.charCodeAt(Ke)?(S="!",Ke++):(S=P,Ae(U)),S===P&&(S=null),S!==P?(61===i.charCodeAt(Ke)?(_="=",Ke++):(_=P,Ae(X)),_!==P?s=S=C(S):(Ke=s,s=P)):(Ke=s,s=P),Je[T]={nextPos:Ke,result:s},s)}())!==P&&Ee()!==P?((T=function(){var s,S,_,T,A,N=30*Ke+18,M=Je[N];if(M)return Ke=M.nextPos,M.result;if(s=Ke,"type("===i.substr(Ke,5)?(S="type(",Ke+=5):(S=P,Ae(ce)),S!==P)if(Ee()!==P){if(_=[],ue.test(i.charAt(Ke))?(T=i.charAt(Ke),Ke++):(T=P,Ae(pe)),T!==P)for(;T!==P;)_.push(T),ue.test(i.charAt(Ke))?(T=i.charAt(Ke),Ke++):(T=P,Ae(pe));else _=P;_!==P&&(T=Ee())!==P?(41===i.charCodeAt(Ke)?(A=")",Ke++):(A=P,Ae(he)),A!==P?s=S={type:"type",value:_.join("")}:(Ke=s,s=P)):(Ke=s,s=P)}else Ke=s,s=P;else Ke=s,s=P;return Je[N]={nextPos:Ke,result:s},s}())===P&&(T=function(){var s,S,_,T,A,N,M=30*Ke+20,k=Je[M];if(k)return Ke=k.nextPos,k.result;if(s=Ke,47===i.charCodeAt(Ke)?(S="/",Ke++):(S=P,Ae(ye)),S!==P){if(_=[],Te.test(i.charAt(Ke))?(T=i.charAt(Ke),Ke++):(T=P,Ae(Ne)),T!==P)for(;T!==P;)_.push(T),Te.test(i.charAt(Ke))?(T=i.charAt(Ke),Ke++):(T=P,Ae(Ne));else _=P;_!==P?(47===i.charCodeAt(Ke)?(T="/",Ke++):(T=P,Ae(ye)),T!==P?((A=function(){var s,S,_=30*Ke+19,T=Je[_];if(T)return Ke=T.nextPos,T.result;if(s=[],de.test(i.charAt(Ke))?(S=i.charAt(Ke),Ke++):(S=P,Ae(fe)),S!==P)for(;S!==P;)s.push(S),de.test(i.charAt(Ke))?(S=i.charAt(Ke),Ke++):(S=P,Ae(fe));else s=P;return Je[_]={nextPos:Ke,result:s},s}())===P&&(A=null),A!==P?(N=A,s=S={type:"regexp",value:new RegExp(_.join(""),N?N.join(""):"")}):(Ke=s,s=P)):(Ke=s,s=P)):(Ke=s,s=P)}else Ke=s,s=P;return Je[M]={nextPos:Ke,result:s},s}()),T!==P?s=S=I(S,_,T):(Ke=s,s=P)):(Ke=s,s=P),s===P&&(s=Ke,(S=De())!==P&&Ee()!==P&&(_=function(){var s,S,_,T=30*Ke+11,A=Je[T];return A?(Ke=A.nextPos,A.result):(s=Ke,K.test(i.charAt(Ke))?(S=i.charAt(Ke),Ke++):(S=P,Ae(G)),S===P&&(S=null),S!==P?(61===i.charCodeAt(Ke)?(_="=",Ke++):(_=P,Ae(X)),_!==P?s=S=C(S):(Ke=s,s=P)):(Ke=s,s=P),s===P&&(Q.test(i.charAt(Ke))?(s=i.charAt(Ke),Ke++):(s=P,Ae(J))),Je[T]={nextPos:Ke,result:s},s)}())!==P&&Ee()!==P?((T=function(){var s,S,_,T,A,N,M=30*Ke+15,k=Je[M];if(k)return Ke=k.nextPos,k.result;if(s=Ke,34===i.charCodeAt(Ke)?(S='"',Ke++):(S=P,Ae(Z)),S!==P){for(_=[],ee.test(i.charAt(Ke))?(T=i.charAt(Ke),Ke++):(T=P,Ae(te)),T===P&&(T=Ke,92===i.charCodeAt(Ke)?(A="\\",Ke++):(A=P,Ae(re)),A!==P?(i.length>Ke?(N=i.charAt(Ke),Ke++):(N=P,Ae(ne)),N!==P?T=A=O(A,N):(Ke=T,T=P)):(Ke=T,T=P));T!==P;)_.push(T),ee.test(i.charAt(Ke))?(T=i.charAt(Ke),Ke++):(T=P,Ae(te)),T===P&&(T=Ke,92===i.charCodeAt(Ke)?(A="\\",Ke++):(A=P,Ae(re)),A!==P?(i.length>Ke?(N=i.charAt(Ke),Ke++):(N=P,Ae(ne)),N!==P?T=A=O(A,N):(Ke=T,T=P)):(Ke=T,T=P));_!==P?(34===i.charCodeAt(Ke)?(T='"',Ke++):(T=P,Ae(Z)),T!==P?s=S=B(_):(Ke=s,s=P)):(Ke=s,s=P)}else Ke=s,s=P;if(s===P)if(s=Ke,39===i.charCodeAt(Ke)?(S="'",Ke++):(S=P,Ae(ie)),S!==P){for(_=[],se.test(i.charAt(Ke))?(T=i.charAt(Ke),Ke++):(T=P,Ae(ae)),T===P&&(T=Ke,92===i.charCodeAt(Ke)?(A="\\",Ke++):(A=P,Ae(re)),A!==P?(i.length>Ke?(N=i.charAt(Ke),Ke++):(N=P,Ae(ne)),N!==P?T=A=O(A,N):(Ke=T,T=P)):(Ke=T,T=P));T!==P;)_.push(T),se.test(i.charAt(Ke))?(T=i.charAt(Ke),Ke++):(T=P,Ae(ae)),T===P&&(T=Ke,92===i.charCodeAt(Ke)?(A="\\",Ke++):(A=P,Ae(re)),A!==P?(i.length>Ke?(N=i.charAt(Ke),Ke++):(N=P,Ae(ne)),N!==P?T=A=O(A,N):(Ke=T,T=P)):(Ke=T,T=P));_!==P?(39===i.charCodeAt(Ke)?(T="'",Ke++):(T=P,Ae(ie)),T!==P?s=S=B(_):(Ke=s,s=P)):(Ke=s,s=P)}else Ke=s,s=P;return Je[M]={nextPos:Ke,result:s},s}())===P&&(T=function(){var s,S,_,T,A,N,M,k=30*Ke+16,R=Je[k];if(R)return Ke=R.nextPos,R.result;for(s=Ke,S=Ke,_=[],oe.test(i.charAt(Ke))?(T=i.charAt(Ke),Ke++):(T=P,Ae(le));T!==P;)_.push(T),oe.test(i.charAt(Ke))?(T=i.charAt(Ke),Ke++):(T=P,Ae(le));if(_!==P?(46===i.charCodeAt(Ke)?(T=".",Ke++):(T=P,Ae(Y)),T!==P?S=_=[_,T]:(Ke=S,S=P)):(Ke=S,S=P),S===P&&(S=null),S!==P){if(_=[],oe.test(i.charAt(Ke))?(T=i.charAt(Ke),Ke++):(T=P,Ae(le)),T!==P)for(;T!==P;)_.push(T),oe.test(i.charAt(Ke))?(T=i.charAt(Ke),Ke++):(T=P,Ae(le));else _=P;_!==P?(N=_,M=(A=S)?[].concat.apply([],A).join(""):"",s=S={type:"literal",value:parseFloat(M+N.join(""))}):(Ke=s,s=P)}else Ke=s,s=P;return Je[k]={nextPos:Ke,result:s},s}())===P&&(T=function(){var i,s,S=30*Ke+17,_=Je[S];return _?(Ke=_.nextPos,_.result):((s=Se())!==P&&(s={type:"literal",value:s}),i=s,Je[S]={nextPos:Ke,result:i},i)}()),T!==P?s=S=I(S,_,T):(Ke=s,s=P)):(Ke=s,s=P),s===P&&(s=Ke,(S=De())!==P&&(S={type:"attribute",name:S}),s=S)),Je[A]={nextPos:Ke,result:s},s)}())!==P&&Ee()!==P?(93===i.charCodeAt(Ke)?(T="]",Ke++):(T=P,Ae(q)),T!==P?s=S=_:(Ke=s,s=P)):(Ke=s,s=P),Je[A]={nextPos:Ke,result:s},s)}())===P&&(s=function(){var s,S,_,T,A,N,M,k,R=30*Ke+21,F=Je[R];if(F)return Ke=F.nextPos,F.result;if(s=Ke,46===i.charCodeAt(Ke)?(S=".",Ke++):(S=P,Ae(Y)),S!==P)if((_=Se())!==P){for(T=[],A=Ke,46===i.charCodeAt(Ke)?(N=".",Ke++):(N=P,Ae(Y)),N!==P&&(M=Se())!==P?A=N=[N,M]:(Ke=A,A=P);A!==P;)T.push(A),A=Ke,46===i.charCodeAt(Ke)?(N=".",Ke++):(N=P,Ae(Y)),N!==P&&(M=Se())!==P?A=N=[N,M]:(Ke=A,A=P);T!==P?(k=_,s=S={type:"field",name:T.reduce((function(i,s){return i+s[0]+s[1]}),k)}):(Ke=s,s=P)}else Ke=s,s=P;else Ke=s,s=P;return Je[R]={nextPos:Ke,result:s},s}())===P&&(s=function(){var s,S,_,T,A=30*Ke+22,N=Je[A];return N?(Ke=N.nextPos,N.result):(s=Ke,":not("===i.substr(Ke,5)?(S=":not(",Ke+=5):(S=P,Ae(Me)),S!==P&&Ee()!==P&&(_=we())!==P&&Ee()!==P?(41===i.charCodeAt(Ke)?(T=")",Ke++):(T=P,Ae(he)),T!==P?s=S={type:"not",selectors:_}:(Ke=s,s=P)):(Ke=s,s=P),Je[A]={nextPos:Ke,result:s},s)}())===P&&(s=function(){var s,S,_,T,A=30*Ke+23,N=Je[A];return N?(Ke=N.nextPos,N.result):(s=Ke,":matches("===i.substr(Ke,9)?(S=":matches(",Ke+=9):(S=P,Ae(Re)),S!==P&&Ee()!==P&&(_=we())!==P&&Ee()!==P?(41===i.charCodeAt(Ke)?(T=")",Ke++):(T=P,Ae(he)),T!==P?s=S={type:"matches",selectors:_}:(Ke=s,s=P)):(Ke=s,s=P),Je[A]={nextPos:Ke,result:s},s)}())===P&&(s=function(){var s,S,_,T,A=30*Ke+24,N=Je[A];return N?(Ke=N.nextPos,N.result):(s=Ke,":has("===i.substr(Ke,5)?(S=":has(",Ke+=5):(S=P,Ae(Oe)),S!==P&&Ee()!==P&&(_=we())!==P&&Ee()!==P?(41===i.charCodeAt(Ke)?(T=")",Ke++):(T=P,Ae(he)),T!==P?s=S={type:"has",selectors:_}:(Ke=s,s=P)):(Ke=s,s=P),Je[A]={nextPos:Ke,result:s},s)}())===P&&(s=function(){var s,S,_=30*Ke+25,T=Je[_];return T?(Ke=T.nextPos,T.result):(":first-child"===i.substr(Ke,12)?(S=":first-child",Ke+=12):(S=P,Ae(Fe)),S!==P&&(S=Ie(1)),s=S,Je[_]={nextPos:Ke,result:s},s)}())===P&&(s=function(){var s,S,_=30*Ke+26,T=Je[_];return T?(Ke=T.nextPos,T.result):(":last-child"===i.substr(Ke,11)?(S=":last-child",Ke+=11):(S=P,Ae(Le)),S!==P&&(S=je(1)),s=S,Je[_]={nextPos:Ke,result:s},s)}())===P&&(s=function(){var s,S,_,T,A,N=30*Ke+27,M=Je[N];if(M)return Ke=M.nextPos,M.result;if(s=Ke,":nth-child("===i.substr(Ke,11)?(S=":nth-child(",Ke+=11):(S=P,Ae($e)),S!==P)if(Ee()!==P){if(_=[],oe.test(i.charAt(Ke))?(T=i.charAt(Ke),Ke++):(T=P,Ae(le)),T!==P)for(;T!==P;)_.push(T),oe.test(i.charAt(Ke))?(T=i.charAt(Ke),Ke++):(T=P,Ae(le));else _=P;_!==P&&(T=Ee())!==P?(41===i.charCodeAt(Ke)?(A=")",Ke++):(A=P,Ae(he)),A!==P?s=S=Ie(parseInt(_.join(""),10)):(Ke=s,s=P)):(Ke=s,s=P)}else Ke=s,s=P;else Ke=s,s=P;return Je[N]={nextPos:Ke,result:s},s}())===P&&(s=function(){var s,S,_,T,A,N=30*Ke+28,M=Je[N];if(M)return Ke=M.nextPos,M.result;if(s=Ke,":nth-last-child("===i.substr(Ke,16)?(S=":nth-last-child(",Ke+=16):(S=P,Ae(Be)),S!==P)if(Ee()!==P){if(_=[],oe.test(i.charAt(Ke))?(T=i.charAt(Ke),Ke++):(T=P,Ae(le)),T!==P)for(;T!==P;)_.push(T),oe.test(i.charAt(Ke))?(T=i.charAt(Ke),Ke++):(T=P,Ae(le));else _=P;_!==P&&(T=Ee())!==P?(41===i.charCodeAt(Ke)?(A=")",Ke++):(A=P,Ae(he)),A!==P?s=S=je(parseInt(_.join(""),10)):(Ke=s,s=P)):(Ke=s,s=P)}else Ke=s,s=P;else Ke=s,s=P;return Je[N]={nextPos:Ke,result:s},s}())===P&&(s=function(){var s,S,_,T=30*Ke+29,A=Je[T];return A?(Ke=A.nextPos,A.result):(s=Ke,58===i.charCodeAt(Ke)?(S=":",Ke++):(S=P,Ae(Ve)),S!==P?("statement"===i.substr(Ke,9).toLowerCase()?(_=i.substr(Ke,9),Ke+=9):(_=P,Ae(Ue)),_===P&&("expression"===i.substr(Ke,10).toLowerCase()?(_=i.substr(Ke,10),Ke+=10):(_=P,Ae(We)),_===P&&("declaration"===i.substr(Ke,11).toLowerCase()?(_=i.substr(Ke,11),Ke+=11):(_=P,Ae(ze)),_===P&&("function"===i.substr(Ke,8).toLowerCase()?(_=i.substr(Ke,8),Ke+=8):(_=P,Ae(He)),_===P&&("pattern"===i.substr(Ke,7).toLowerCase()?(_=i.substr(Ke,7),Ke+=7):(_=P,Ae(qe)))))),_!==P?s=S={type:"class",name:_}:(Ke=s,s=P)):(Ke=s,s=P),Je[T]={nextPos:Ke,result:s},s)}()),Je[S]={nextPos:Ke,result:s},s)}function De(){var s,S,_,T=30*Ke+13,A=Je[T];if(A)return Ke=A.nextPos,A.result;if(S=[],(_=Se())===P&&(46===i.charCodeAt(Ke)?(_=".",Ke++):(_=P,Ae(Y))),_!==P)for(;_!==P;)S.push(_),(_=Se())===P&&(46===i.charCodeAt(Ke)?(_=".",Ke++):(_=P,Ae(Y)));else S=P;return S!==P&&(S=h(S)),s=S,Je[T]={nextPos:Ke,result:s},s}function Ie(i){return{type:"nth-child",index:{type:"literal",value:i}}}function je(i){return{type:"nth-last-child",index:{type:"literal",value:i}}}if((S=M())!==P&&Ke===i.length)return S;throw S!==P&&Ke<i.length&&Ae({type:"end"}),_=Qe,T=Xe<i.length?i.charAt(Xe):null,A=Xe<i.length?ve(Xe,Xe+1):ve(Xe,Xe),new e(e.buildMessage(_,T),_,T,A)}}}())}));function l(i,s,_){if(!s)return!0;if(!i)return!1;switch(_||(_=[]),s.type){case"wildcard":return!0;case"identifier":return s.value.toLowerCase()===i.type.toLowerCase();case"field":var T=s.name.split("."),A=_[T.length-1];return function e(i,s,S){if(0===S.length)return i===s;if(null==s)return!1;var _=s[S[0]],T=S.slice(1);if(Array.isArray(_)){for(var A=0,P=_.length;A<P;++A)if(e(i,_[A],T))return!0;return!1}return e(i,_,T)}(i,A,T);case"matches":for(var P=0,N=s.selectors.length;P<N;++P)if(l(i,s.selectors[P],_))return!0;return!1;case"compound":for(var M=0,k=s.selectors.length;M<k;++M)if(!l(i,s.selectors[M],_))return!1;return!0;case"not":for(var R=0,F=s.selectors.length;R<F;++R)if(l(i,s.selectors[R],_))return!1;return!0;case"has":var D=function(){for(var _=[],n=function(T,A){var P=[];S.traverse(i,{enter:function(i,S){null!=S&&P.unshift(S),l(i,s.selectors[T],P)&&_.push(i)},leave:function(){P.shift()},fallback:"iteration"})},T=0,A=s.selectors.length;T<A;++T)n(T);return{v:0!==_.length}}();if("object"===e(D))return D.v;case"child":return!!l(i,s.right,_)&&l(_[0],s.left,_.slice(1));case"descendant":if(l(i,s.right,_))for(var L=0,$=_.length;L<$;++L)if(l(_[L],s.left,_.slice(L+1)))return!0;return!1;case"attribute":var V=function(i,s){for(var S=s.split("."),_=0;_<S.length;_++){if(null==i)return i;i=i[S[_]]}return i}(i,s.name);switch(s.operator){case void 0:return null!=V;case"=":switch(s.value.type){case"regexp":return"string"==typeof V&&s.value.value.test(V);case"literal":return"".concat(s.value.value)==="".concat(V);case"type":return s.value.value===e(V)}throw new Error("Unknown selector value type: ".concat(s.value.type));case"!=":switch(s.value.type){case"regexp":return!s.value.value.test(V);case"literal":return"".concat(s.value.value)!=="".concat(V);case"type":return s.value.value!==e(V)}throw new Error("Unknown selector value type: ".concat(s.value.type));case"<=":return V<=s.value.value;case"<":return V<s.value.value;case">":return V>s.value.value;case">=":return V>=s.value.value}throw new Error("Unknown operator: ".concat(s.operator));case"sibling":return l(i,s.right,_)&&u(i,s.left,_,"LEFT_SIDE")||s.left.subject&&l(i,s.left,_)&&u(i,s.right,_,"RIGHT_SIDE");case"adjacent":return l(i,s.right,_)&&c(i,s.left,_,"LEFT_SIDE")||s.right.subject&&l(i,s.left,_)&&c(i,s.right,_,"RIGHT_SIDE");case"nth-child":return l(i,s.right,_)&&p(i,_,(function(){return s.index.value-1}));case"nth-last-child":return l(i,s.right,_)&&p(i,_,(function(i){return i-s.index.value}));case"class":switch(s.name.toLowerCase()){case"statement":if("Statement"===i.type.slice(-9))return!0;case"declaration":return"Declaration"===i.type.slice(-11);case"pattern":if("Pattern"===i.type.slice(-7))return!0;case"expression":return"Expression"===i.type.slice(-10)||"Literal"===i.type.slice(-7)||"Identifier"===i.type&&(0===_.length||"MetaProperty"!==_[0].type)||"MetaProperty"===i.type;case"function":return"FunctionDeclaration"===i.type||"FunctionExpression"===i.type||"ArrowFunctionExpression"===i.type}throw new Error("Unknown class name: ".concat(s.name))}throw new Error("Unknown selector type: ".concat(s.type))}function u(i,s,_,T){var A=t(_,1)[0];if(!A)return!1;for(var P=S.VisitorKeys[A.type],N=0,M=P.length;N<M;++N){var k=A[P[N]];if(Array.isArray(k)){var R=k.indexOf(i);if(R<0)continue;var F=void 0,D=void 0;"LEFT_SIDE"===T?(F=0,D=R):(F=R+1,D=k.length);for(var L=F;L<D;++L)if(l(k[L],s,_))return!0}}return!1}function c(i,s,_,T){var A=t(_,1)[0];if(!A)return!1;for(var P=S.VisitorKeys[A.type],N=0,M=P.length;N<M;++N){var k=A[P[N]];if(Array.isArray(k)){var R=k.indexOf(i);if(R<0)continue;if("LEFT_SIDE"===T&&R>0&&l(k[R-1],s,_))return!0;if("RIGHT_SIDE"===T&&R<k.length-1&&l(k[R+1],s,_))return!0}}return!1}function p(i,s,_){var T=t(s,1)[0];if(!T)return!1;for(var A=S.VisitorKeys[T.type],P=0,N=A.length;P<N;++P){var M=T[A[P]];if(Array.isArray(M)){var k=M.indexOf(i);if(k>=0&&k===_(M.length))return!0}}return!1}function f(i,s){if(null==i||"object"!=e(i))return[];null==s&&(s=i);for(var S=i.subject?[s]:[],_=0,T=function(i){for(var s=[],S=Object.keys(i),_=0;_<S.length;_++)s.push([S[_],i[S[_]]]);return s}(i);_<T.length;_++){var A=t(T[_],2),P=A[0],N=A[1];S.push.apply(S,r(f(N,"left"===P?N:s)))}return S}function h(i,s,_){if(s){var T=[],A=f(s);S.traverse(i,{enter:function(i,S){if(null!=S&&T.unshift(S),l(i,s,T))if(A.length)for(var P=0,N=A.length;P<N;++P){l(i,A[P],T)&&_(i,S,T);for(var M=0,k=T.length;M<k;++M){var R=T.slice(M+1);l(T[M],A[P],R)&&_(T[M],S,R)}}else _(i,S,T)},leave:function(){T.shift()},fallback:"iteration"})}}function d(i,s){var S=[];return h(i,s,(function(i){S.push(i)})),S}function y(i){return _.parse(i)}function m(i,s){return d(i,y(s))}m.parse=y,m.match=d,m.traverse=h,m.matches=l,m.query=m,s.default=m}.call(this,S("yLpj"))},l65Y:function(i,s,S){"use strict";const _=S("sfkc"),T=S("9lTW"),A=_.GlobalScope,P=_.CatchScope,N=_.WithScope,M=_.ModuleScope,k=_.ClassScope,R=_.SwitchScope,F=_.FunctionScope,D=_.ForScope,L=_.FunctionExpressionNameScope,$=_.BlockScope;i.exports=class ScopeManager{constructor(i){this.scopes=[],this.globalScope=null,this.__nodeToScope=new WeakMap,this.__currentScope=null,this.__options=i,this.__declaredVariables=new WeakMap}__useDirective(){return this.__options.directive}__isOptimistic(){return this.__options.optimistic}__ignoreEval(){return this.__options.ignoreEval}__isNodejsScope(){return this.__options.nodejsScope}isModule(){return"module"===this.__options.sourceType}isImpliedStrict(){return this.__options.impliedStrict}isStrictModeSupported(){return this.__options.ecmaVersion>=5}__get(i){return this.__nodeToScope.get(i)}getDeclaredVariables(i){return this.__declaredVariables.get(i)||[]}acquire(i,s){function predicate(i){return"function"!==i.type||!i.functionExpressionScope}const S=this.__get(i);if(!S||0===S.length)return null;if(1===S.length)return S[0];if(s)for(let i=S.length-1;i>=0;--i){const s=S[i];if(predicate(s))return s}else for(let i=0,s=S.length;i<s;++i){const s=S[i];if(predicate(s))return s}return null}acquireAll(i){return this.__get(i)}release(i,s){const S=this.__get(i);if(S&&S.length){const i=S[0].upper;return i?this.acquire(i.block,s):null}return null}attach(){}detach(){}__nestScope(i){return i instanceof A&&(T(null===this.__currentScope),this.globalScope=i),this.__currentScope=i,i}__nestGlobalScope(i){return this.__nestScope(new A(this,i))}__nestBlockScope(i){return this.__nestScope(new $(this,this.__currentScope,i))}__nestFunctionScope(i,s){return this.__nestScope(new F(this,this.__currentScope,i,s))}__nestForScope(i){return this.__nestScope(new D(this,this.__currentScope,i))}__nestCatchScope(i){return this.__nestScope(new P(this,this.__currentScope,i))}__nestWithScope(i){return this.__nestScope(new N(this,this.__currentScope,i))}__nestClassScope(i){return this.__nestScope(new k(this,this.__currentScope,i))}__nestSwitchScope(i){return this.__nestScope(new R(this,this.__currentScope,i))}__nestModuleScope(i){return this.__nestScope(new M(this,this.__currentScope,i))}__nestFunctionExpressionNameScope(i){return this.__nestScope(new L(this,this.__currentScope,i))}__isES6(){return this.__options.ecmaVersion>=6}}},osxs:function(i,s,S){"use strict";const _=S("9lTW"),T=S("l65Y"),A=S("r8f6"),P=S("t/+9"),N=S("1LFW"),M=S("sfkc").Scope,k=S("DX5S").version;i.exports={version:k,Reference:P,Variable:N,Scope:M,ScopeManager:T,analyze:function analyze(i,s){const S=function updateDeeply(i,s){function isHashObject(i){return"object"==typeof i&&i instanceof Object&&!(i instanceof Array)&&!(i instanceof RegExp)}for(const S in s)if(Object.prototype.hasOwnProperty.call(s,S)){const _=s[S];isHashObject(_)?isHashObject(i[S])?updateDeeply(i[S],_):i[S]=updateDeeply({},_):i[S]=_}return i}({optimistic:!1,directive:!1,nodejsScope:!1,impliedStrict:!1,sourceType:"script",ecmaVersion:5,childVisitorKeys:null,fallback:"iteration"},s),P=new T(S);return new A(S,P).visit(i),_(null===P.__currentScope,"currentScope should be null."),P}}},r8f6:function(i,s,S){"use strict";const _=S("sR6L").Syntax,T=S("10sj"),A=S("t/+9"),P=S("1LFW"),N=S("VqNl"),M=S("j6Dg"),k=S("9lTW"),R=M.ParameterDefinition,F=M.Definition;class Importer extends T.Visitor{constructor(i,s){super(null,s.options),this.declaration=i,this.referencer=s}visitImport(i,s){this.referencer.visitPattern(i,i=>{this.referencer.currentScope().__define(i,new F(P.ImportBinding,i,s,this.declaration,null,null))})}ImportNamespaceSpecifier(i){const s=i.local||i.id;s&&this.visitImport(s,i)}ImportDefaultSpecifier(i){const s=i.local||i.id;this.visitImport(s,i)}ImportSpecifier(i){const s=i.local||i.id;i.name?this.visitImport(i.name,i):this.visitImport(s,i)}}class Referencer extends T.Visitor{constructor(i,s){super(null,i),this.options=i,this.scopeManager=s,this.parent=null,this.isInnerMethodDefinition=!1}currentScope(){return this.scopeManager.__currentScope}close(i){for(;this.currentScope()&&i===this.currentScope().block;)this.scopeManager.__currentScope=this.currentScope().__close(this.scopeManager)}pushInnerMethodDefinition(i){const s=this.isInnerMethodDefinition;return this.isInnerMethodDefinition=i,s}popInnerMethodDefinition(i){this.isInnerMethodDefinition=i}referencingDefaultValue(i,s,S,_){const T=this.currentScope();s.forEach(s=>{T.__referencing(i,A.WRITE,s.right,S,i!==s.left,_)})}visitPattern(i,s,S){let _=s,T=S;"function"==typeof s&&(T=s,_={processRightHandNodes:!1}),function traverseIdentifierInPattern(i,s,S,_){const T=new N(i,s,_);T.visit(s),null!=S&&T.rightHandNodes.forEach(S.visit,S)}(this.options,i,_.processRightHandNodes?this:null,T)}visitFunction(i){let s,S;i.type===_.FunctionDeclaration&&this.currentScope().__define(i.id,new F(P.FunctionName,i.id,i,null,null,null)),i.type===_.FunctionExpression&&i.id&&this.scopeManager.__nestFunctionExpressionNameScope(i),this.scopeManager.__nestFunctionScope(i,this.isInnerMethodDefinition);const T=this;function visitPatternCallback(S,_){T.currentScope().__define(S,new R(S,i,s,_.rest)),T.referencingDefaultValue(S,_.assignments,null,!0)}for(s=0,S=i.params.length;s<S;++s)this.visitPattern(i.params[s],{processRightHandNodes:!0},visitPatternCallback);i.rest&&this.visitPattern({type:"RestElement",argument:i.rest},s=>{this.currentScope().__define(s,new R(s,i,i.params.length,!0))}),i.body&&(i.body.type===_.BlockStatement?this.visitChildren(i.body):this.visit(i.body)),this.close(i)}visitClass(i){i.type===_.ClassDeclaration&&this.currentScope().__define(i.id,new F(P.ClassName,i.id,i,null,null,null)),this.visit(i.superClass),this.scopeManager.__nestClassScope(i),i.id&&this.currentScope().__define(i.id,new F(P.ClassName,i.id,i)),this.visit(i.body),this.close(i)}visitProperty(i){let s;i.computed&&this.visit(i.key);const S=i.type===_.MethodDefinition;S&&(s=this.pushInnerMethodDefinition(!0)),this.visit(i.value),S&&this.popInnerMethodDefinition(s)}visitForIn(i){i.left.type===_.VariableDeclaration&&"var"!==i.left.kind&&this.scopeManager.__nestForScope(i),i.left.type===_.VariableDeclaration?(this.visit(i.left),this.visitPattern(i.left.declarations[0].id,s=>{this.currentScope().__referencing(s,A.WRITE,i.right,null,!0,!0)})):this.visitPattern(i.left,{processRightHandNodes:!0},(s,S)=>{let _=null;this.currentScope().isStrict||(_={pattern:s,node:i}),this.referencingDefaultValue(s,S.assignments,_,!1),this.currentScope().__referencing(s,A.WRITE,i.right,_,!0,!1)}),this.visit(i.right),this.visit(i.body),this.close(i)}visitVariableDeclaration(i,s,S,_){const T=S.declarations[_],P=T.init;this.visitPattern(T.id,{processRightHandNodes:!0},(N,M)=>{i.__define(N,new F(s,N,T,S,_,S.kind)),this.referencingDefaultValue(N,M.assignments,null,!0),P&&this.currentScope().__referencing(N,A.WRITE,P,null,!M.topLevel,!0)})}AssignmentExpression(i){N.isPattern(i.left)?"="===i.operator?this.visitPattern(i.left,{processRightHandNodes:!0},(s,S)=>{let _=null;this.currentScope().isStrict||(_={pattern:s,node:i}),this.referencingDefaultValue(s,S.assignments,_,!1),this.currentScope().__referencing(s,A.WRITE,i.right,_,!S.topLevel,!1)}):this.currentScope().__referencing(i.left,A.RW,i.right):this.visit(i.left),this.visit(i.right)}CatchClause(i){this.scopeManager.__nestCatchScope(i),this.visitPattern(i.param,{processRightHandNodes:!0},(s,S)=>{this.currentScope().__define(s,new F(P.CatchClause,i.param,i,null,null,null)),this.referencingDefaultValue(s,S.assignments,null,!0)}),this.visit(i.body),this.close(i)}Program(i){this.scopeManager.__nestGlobalScope(i),this.scopeManager.__isNodejsScope()&&(this.currentScope().isStrict=!1,this.scopeManager.__nestFunctionScope(i,!1)),this.scopeManager.__isES6()&&this.scopeManager.isModule()&&this.scopeManager.__nestModuleScope(i),this.scopeManager.isStrictModeSupported()&&this.scopeManager.isImpliedStrict()&&(this.currentScope().isStrict=!0),this.visitChildren(i),this.close(i)}Identifier(i){this.currentScope().__referencing(i)}UpdateExpression(i){N.isPattern(i.argument)?this.currentScope().__referencing(i.argument,A.RW,null):this.visitChildren(i)}MemberExpression(i){this.visit(i.object),i.computed&&this.visit(i.property)}Property(i){this.visitProperty(i)}MethodDefinition(i){this.visitProperty(i)}BreakStatement(){}ContinueStatement(){}LabeledStatement(i){this.visit(i.body)}ForStatement(i){i.init&&i.init.type===_.VariableDeclaration&&"var"!==i.init.kind&&this.scopeManager.__nestForScope(i),this.visitChildren(i),this.close(i)}ClassExpression(i){this.visitClass(i)}ClassDeclaration(i){this.visitClass(i)}CallExpression(i){this.scopeManager.__ignoreEval()||i.callee.type!==_.Identifier||"eval"!==i.callee.name||this.currentScope().variableScope.__detectEval(),this.visitChildren(i)}BlockStatement(i){this.scopeManager.__isES6()&&this.scopeManager.__nestBlockScope(i),this.visitChildren(i),this.close(i)}ThisExpression(){this.currentScope().variableScope.__detectThis()}WithStatement(i){this.visit(i.object),this.scopeManager.__nestWithScope(i),this.visit(i.body),this.close(i)}VariableDeclaration(i){const s="var"===i.kind?this.currentScope().variableScope:this.currentScope();for(let S=0,_=i.declarations.length;S<_;++S){const _=i.declarations[S];this.visitVariableDeclaration(s,P.Variable,i,S),_.init&&this.visit(_.init)}}SwitchStatement(i){this.visit(i.discriminant),this.scopeManager.__isES6()&&this.scopeManager.__nestSwitchScope(i);for(let s=0,S=i.cases.length;s<S;++s)this.visit(i.cases[s]);this.close(i)}FunctionDeclaration(i){this.visitFunction(i)}FunctionExpression(i){this.visitFunction(i)}ForOfStatement(i){this.visitForIn(i)}ForInStatement(i){this.visitForIn(i)}ArrowFunctionExpression(i){this.visitFunction(i)}ImportDeclaration(i){k(this.scopeManager.__isES6()&&this.scopeManager.isModule(),"ImportDeclaration should appear when the mode is ES6 and in the module context."),new Importer(i,this).visit(i)}visitExportDeclaration(i){i.source||(i.declaration?this.visit(i.declaration):this.visitChildren(i))}ExportDeclaration(i){this.visitExportDeclaration(i)}ExportAllDeclaration(i){this.visitExportDeclaration(i)}ExportDefaultDeclaration(i){this.visitExportDeclaration(i)}ExportNamedDeclaration(i){this.visitExportDeclaration(i)}ExportSpecifier(i){const s=i.id||i.local;this.visit(s)}MetaProperty(){}}i.exports=Referencer},sR6L:function(i,s,S){!function clone(i){"use strict";var s,_,T,A,P,N;function deepCopy(i){var s,S,_={};for(s in i)i.hasOwnProperty(s)&&(S=i[s],_[s]="object"==typeof S&&null!==S?deepCopy(S):S);return _}function Reference(i,s){this.parent=i,this.key=s}function Element(i,s,S,_){this.node=i,this.path=s,this.wrap=S,this.ref=_}function Controller(){}function isNode(i){return null!=i&&("object"==typeof i&&"string"==typeof i.type)}function isProperty(i,S){return(i===s.ObjectExpression||i===s.ObjectPattern)&&"properties"===S}function traverse(i,s){return(new Controller).traverse(i,s)}function extendCommentRange(i,s){var S;return S=function upperBound(i,s){var S,_,T,A;for(_=i.length,T=0;_;)s(i[A=T+(S=_>>>1)])?_=S:(T=A+1,_-=S+1);return T}(s,(function search(s){return s.range[0]>i.range[0]})),i.extendedRange=[i.range[0],i.range[1]],S!==s.length&&(i.extendedRange[1]=s[S].range[0]),(S-=1)>=0&&(i.extendedRange[0]=s[S].range[1]),i}return s={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},T={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},_={Break:A={},Skip:P={},Remove:N={}},Reference.prototype.replace=function replace(i){this.parent[this.key]=i},Reference.prototype.remove=function remove(){return Array.isArray(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)},Controller.prototype.path=function path(){var i,s,S,_,T;function addToPath(i,s){if(Array.isArray(s))for(S=0,_=s.length;S<_;++S)i.push(s[S]);else i.push(s)}if(!this.__current.path)return null;for(T=[],i=2,s=this.__leavelist.length;i<s;++i)addToPath(T,this.__leavelist[i].path);return addToPath(T,this.__current.path),T},Controller.prototype.type=function(){return this.current().type||this.__current.wrap},Controller.prototype.parents=function parents(){var i,s,S;for(S=[],i=1,s=this.__leavelist.length;i<s;++i)S.push(this.__leavelist[i].node);return S},Controller.prototype.current=function current(){return this.__current.node},Controller.prototype.__execute=function __execute(i,s){var S,_;return _=void 0,S=this.__current,this.__current=s,this.__state=null,i&&(_=i.call(this,s.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=S,_},Controller.prototype.notify=function notify(i){this.__state=i},Controller.prototype.skip=function(){this.notify(P)},Controller.prototype.break=function(){this.notify(A)},Controller.prototype.remove=function(){this.notify(N)},Controller.prototype.__initialize=function(i,s){this.visitor=s,this.root=i,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback=null,"iteration"===s.fallback?this.__fallback=Object.keys:"function"==typeof s.fallback&&(this.__fallback=s.fallback),this.__keys=T,s.keys&&(this.__keys=Object.assign(Object.create(this.__keys),s.keys))},Controller.prototype.traverse=function traverse(i,s){var S,_,T,N,M,k,R,F,D,L,$,V;for(this.__initialize(i,s),V={},S=this.__worklist,_=this.__leavelist,S.push(new Element(i,null,null,null)),_.push(new Element(null,null,null,null));S.length;)if((T=S.pop())!==V){if(T.node){if(k=this.__execute(s.enter,T),this.__state===A||k===A)return;if(S.push(V),_.push(T),this.__state===P||k===P)continue;if(M=(N=T.node).type||T.wrap,!(L=this.__keys[M])){if(!this.__fallback)throw new Error("Unknown node type "+M+".");L=this.__fallback(N)}for(F=L.length;(F-=1)>=0;)if($=N[R=L[F]])if(Array.isArray($)){for(D=$.length;(D-=1)>=0;)if($[D]){if(isProperty(M,L[F]))T=new Element($[D],[R,D],"Property",null);else{if(!isNode($[D]))continue;T=new Element($[D],[R,D],null,null)}S.push(T)}}else isNode($)&&S.push(new Element($,R,null,null))}}else if(T=_.pop(),k=this.__execute(s.leave,T),this.__state===A||k===A)return},Controller.prototype.replace=function replace(i,s){var S,_,T,M,k,R,F,D,L,$,V,U,W;function removeElem(i){var s,_,T,A;if(i.ref.remove())for(_=i.ref.key,A=i.ref.parent,s=S.length;s--;)if((T=S[s]).ref&&T.ref.parent===A){if(T.ref.key<_)break;--T.ref.key}}for(this.__initialize(i,s),V={},S=this.__worklist,_=this.__leavelist,R=new Element(i,null,null,new Reference(U={root:i},"root")),S.push(R),_.push(R);S.length;)if((R=S.pop())!==V){if(void 0!==(k=this.__execute(s.enter,R))&&k!==A&&k!==P&&k!==N&&(R.ref.replace(k),R.node=k),this.__state!==N&&k!==N||(removeElem(R),R.node=null),this.__state===A||k===A)return U.root;if((T=R.node)&&(S.push(V),_.push(R),this.__state!==P&&k!==P)){if(M=T.type||R.wrap,!(L=this.__keys[M])){if(!this.__fallback)throw new Error("Unknown node type "+M+".");L=this.__fallback(T)}for(F=L.length;(F-=1)>=0;)if($=T[W=L[F]])if(Array.isArray($)){for(D=$.length;(D-=1)>=0;)if($[D]){if(isProperty(M,L[F]))R=new Element($[D],[W,D],"Property",new Reference($,D));else{if(!isNode($[D]))continue;R=new Element($[D],[W,D],null,new Reference($,D))}S.push(R)}}else isNode($)&&S.push(new Element($,W,null,new Reference(T,W)))}}else if(R=_.pop(),void 0!==(k=this.__execute(s.leave,R))&&k!==A&&k!==P&&k!==N&&R.ref.replace(k),this.__state!==N&&k!==N||removeElem(R),this.__state===A||k===A)return U.root;return U.root},i.version=S("V9Y0").version,i.Syntax=s,i.traverse=traverse,i.replace=function replace(i,s){return(new Controller).replace(i,s)},i.attachComments=function attachComments(i,s,S){var T,A,P,N,M=[];if(!i.range)throw new Error("attachComments needs range information");if(!S.length){if(s.length){for(P=0,A=s.length;P<A;P+=1)(T=deepCopy(s[P])).extendedRange=[0,i.range[0]],M.push(T);i.leadingComments=M}return i}for(P=0,A=s.length;P<A;P+=1)M.push(extendCommentRange(deepCopy(s[P]),S));return N=0,traverse(i,{enter:function(i){for(var s;N<M.length&&!((s=M[N]).extendedRange[1]>i.range[0]);)s.extendedRange[1]===i.range[0]?(i.leadingComments||(i.leadingComments=[]),i.leadingComments.push(s),M.splice(N,1)):N+=1;return N===M.length?_.Break:M[N].extendedRange[0]>i.range[1]?_.Skip:void 0}}),N=0,traverse(i,{leave:function(i){for(var s;N<M.length&&(s=M[N],!(i.range[1]<s.extendedRange[0]));)i.range[1]===s.extendedRange[0]?(i.trailingComments||(i.trailingComments=[]),i.trailingComments.push(s),M.splice(N,1)):N+=1;return N===M.length?_.Break:M[N].extendedRange[0]>i.range[1]?_.Skip:void 0}}),i},i.VisitorKeys=T,i.VisitorOption=_,i.Controller=Controller,i.cloneEnvironment=function(){return clone({})},i}(s)},sfkc:function(i,s,S){"use strict";const _=S("sR6L").Syntax,T=S("t/+9"),A=S("1LFW"),P=S("j6Dg").Definition,N=S("9lTW");function shouldBeStatically(i){return i.type===A.ClassName||i.type===A.Variable&&"var"!==i.parent.kind}class Scope{constructor(i,s,S,T,A){this.type=s,this.set=new Map,this.taints=new Map,this.dynamic="global"===this.type||"with"===this.type,this.block=T,this.through=[],this.variables=[],this.references=[],this.variableScope="global"===this.type||"function"===this.type||"module"===this.type?this:S.variableScope,this.functionExpressionScope=!1,this.directCallToEvalScope=!1,this.thisFound=!1,this.__left=[],this.upper=S,this.isStrict=function isStrictScope(i,s,S,T){let A;if(i.upper&&i.upper.isStrict)return!0;if(S)return!0;if("class"===i.type||"module"===i.type)return!0;if("block"===i.type||"switch"===i.type)return!1;if("function"===i.type){if(s.type===_.ArrowFunctionExpression&&s.body.type!==_.BlockStatement)return!1;if(A=s.type===_.Program?s:s.body,!A)return!1}else{if("global"!==i.type)return!1;A=s}if(T)for(let i=0,s=A.body.length;i<s;++i){const s=A.body[i];if(s.type!==_.DirectiveStatement)break;if('"use strict"'===s.raw||"'use strict'"===s.raw)return!0}else for(let i=0,s=A.body.length;i<s;++i){const s=A.body[i];if(s.type!==_.ExpressionStatement)break;const S=s.expression;if(S.type!==_.Literal||"string"!=typeof S.value)break;if(null!==S.raw&&void 0!==S.raw){if('"use strict"'===S.raw||"'use strict'"===S.raw)return!0}else if("use strict"===S.value)return!0}return!1}(this,T,A,i.__useDirective()),this.childScopes=[],this.upper&&this.upper.childScopes.push(this),this.__declaredVariables=i.__declaredVariables,function registerScope(i,s){i.scopes.push(s);const S=i.__nodeToScope.get(s.block);S?S.push(s):i.__nodeToScope.set(s.block,[s])}(i,this)}__shouldStaticallyClose(i){return!this.dynamic||i.__isOptimistic()}__shouldStaticallyCloseForGlobal(i){const s=i.identifier.name;if(!this.set.has(s))return!1;const S=this.set.get(s).defs;return S.length>0&&S.every(shouldBeStatically)}__staticCloseRef(i){this.__resolve(i)||this.__delegateToUpperScope(i)}__dynamicCloseRef(i){let s=this;do{s.through.push(i),s=s.upper}while(s)}__globalCloseRef(i){this.__shouldStaticallyCloseForGlobal(i)?this.__staticCloseRef(i):this.__dynamicCloseRef(i)}__close(i){let s;s=this.__shouldStaticallyClose(i)?this.__staticCloseRef:"global"!==this.type?this.__dynamicCloseRef:this.__globalCloseRef;for(let i=0,S=this.__left.length;i<S;++i){const S=this.__left[i];s.call(this,S)}return this.__left=null,this.upper}__isValidResolution(i,s){return!0}__resolve(i){const s=i.identifier.name;if(!this.set.has(s))return!1;const S=this.set.get(s);return!!this.__isValidResolution(i,S)&&(S.references.push(i),S.stack=S.stack&&i.from.variableScope===this.variableScope,i.tainted&&(S.tainted=!0,this.taints.set(S.name,!0)),i.resolved=S,!0)}__delegateToUpperScope(i){this.upper&&this.upper.__left.push(i),this.through.push(i)}__addDeclaredVariablesOfNode(i,s){if(null==s)return;let S=this.__declaredVariables.get(s);null==S&&(S=[],this.__declaredVariables.set(s,S)),-1===S.indexOf(i)&&S.push(i)}__defineGeneric(i,s,S,_,T){let P;P=s.get(i),P||(P=new A(i,this),s.set(i,P),S.push(P)),T&&(P.defs.push(T),this.__addDeclaredVariablesOfNode(P,T.node),this.__addDeclaredVariablesOfNode(P,T.parent)),_&&P.identifiers.push(_)}__define(i,s){i&&i.type===_.Identifier&&this.__defineGeneric(i.name,this.set,this.variables,i,s)}__referencing(i,s,S,A,P,N){if(!i||i.type!==_.Identifier)return;if("super"===i.name)return;const M=new T(i,this,s||T.READ,S,A,!!P,!!N);this.references.push(M),this.__left.push(M)}__detectEval(){let i=this;this.directCallToEvalScope=!0;do{i.dynamic=!0,i=i.upper}while(i)}__detectThis(){this.thisFound=!0}__isClosed(){return null===this.__left}resolve(i){let s,S,T;for(N(this.__isClosed(),"Scope should be closed."),N(i.type===_.Identifier,"Target should be identifier."),S=0,T=this.references.length;S<T;++S)if(s=this.references[S],s.identifier===i)return s;return null}isStatic(){return!this.dynamic}isArgumentsMaterialized(){return!0}isThisMaterialized(){return!0}isUsedName(i){if(this.set.has(i))return!0;for(let s=0,S=this.through.length;s<S;++s)if(this.through[s].identifier.name===i)return!0;return!1}}i.exports={Scope:Scope,GlobalScope:class GlobalScope extends Scope{constructor(i,s){super(i,"global",null,s,!1),this.implicit={set:new Map,variables:[],left:[]}}__close(i){const s=[];for(let i=0,S=this.__left.length;i<S;++i){const S=this.__left[i];S.__maybeImplicitGlobal&&!this.set.has(S.identifier.name)&&s.push(S.__maybeImplicitGlobal)}for(let i=0,S=s.length;i<S;++i){const S=s[i];this.__defineImplicit(S.pattern,new P(A.ImplicitGlobalVariable,S.pattern,S.node,null,null,null))}return this.implicit.left=this.__left,super.__close(i)}__defineImplicit(i,s){i&&i.type===_.Identifier&&this.__defineGeneric(i.name,this.implicit.set,this.implicit.variables,i,s)}},ModuleScope:class ModuleScope extends Scope{constructor(i,s,S){super(i,"module",s,S,!1)}},FunctionExpressionNameScope:class FunctionExpressionNameScope extends Scope{constructor(i,s,S){super(i,"function-expression-name",s,S,!1),this.__define(S.id,new P(A.FunctionName,S.id,S,null,null,null)),this.functionExpressionScope=!0}},CatchScope:class CatchScope extends Scope{constructor(i,s,S){super(i,"catch",s,S,!1)}},WithScope:class WithScope extends Scope{constructor(i,s,S){super(i,"with",s,S,!1)}__close(i){if(this.__shouldStaticallyClose(i))return super.__close(i);for(let i=0,s=this.__left.length;i<s;++i){const s=this.__left[i];s.tainted=!0,this.__delegateToUpperScope(s)}return this.__left=null,this.upper}},BlockScope:class BlockScope extends Scope{constructor(i,s,S){super(i,"block",s,S,!1)}},SwitchScope:class SwitchScope extends Scope{constructor(i,s,S){super(i,"switch",s,S,!1)}},FunctionScope:class FunctionScope extends Scope{constructor(i,s,S,T){super(i,"function",s,S,T),this.block.type!==_.ArrowFunctionExpression&&this.__defineArguments()}isArgumentsMaterialized(){if(this.block.type===_.ArrowFunctionExpression)return!1;if(!this.isStatic())return!0;const i=this.set.get("arguments");return N(i,"Always have arguments variable."),i.tainted||0!==i.references.length}isThisMaterialized(){return!this.isStatic()||this.thisFound}__defineArguments(){this.__defineGeneric("arguments",this.set,this.variables,null,null),this.taints.set("arguments",!0)}__isValidResolution(i,s){if("Program"===this.block.type)return!0;const S=this.block.body.range[0];return!(s.scope===this&&i.identifier.range[0]<S&&s.defs.every(i=>i.name.range[0]>=S))}},ForScope:class ForScope extends Scope{constructor(i,s,S){super(i,"for",s,S,!1)}},ClassScope:class ClassScope extends Scope{constructor(i,s,S){super(i,"class",s,S,!1)}}}},"t/+9":function(i,s,S){"use strict";class Reference{constructor(i,s,S,_,T,A,P){this.identifier=i,this.from=s,this.tainted=!1,this.resolved=null,this.flag=S,this.isWrite()&&(this.writeExpr=_,this.partial=A,this.init=P),this.__maybeImplicitGlobal=T}isStatic(){return!this.tainted&&this.resolved&&this.resolved.scope.isStatic()}isWrite(){return!!(this.flag&Reference.WRITE)}isRead(){return!!(this.flag&Reference.READ)}isReadOnly(){return this.flag===Reference.READ}isWriteOnly(){return this.flag===Reference.WRITE}isReadWrite(){return this.flag===Reference.RW}}Reference.READ=1,Reference.WRITE=2,Reference.RW=3,i.exports=Reference}}]);